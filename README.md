# 每日名词生成器测试工具

这是一个独立的Python脚本工具，用于测试和优化每日名词系统的生成质量。

## 功能特色

### 🎯 基础版本 (`test_daily_term_generator.py`)
- 单个术语生成和测试
- 批量生成功能
- 基础质量验证
- 简单的交互界面

### 🚀 增强版本 (`enhanced_daily_term_generator.py`)
- **智能领域选择**: 基于权重和历史记录的智能选择
- **多模板支持**: 标准、初学者友好、高级三种模板
- **质量分析系统**: 全面的质量评估和建议
- **统计分析**: 详细的生成统计和质量报告
- **批量高质量生成**: 自动筛选高质量术语
- **完整日志记录**: 详细的操作日志

## 安装和配置

### 1. 安装依赖
```bash
pip install requests
```

### 2. 配置API密钥
有两种方式配置OpenAI API密钥：

**方式1: 环境变量（推荐）**
```bash
export OPENAI_API_KEY="your-api-key-here"
```

**方式2: 修改配置文件**
编辑 `config.py` 文件中的 `OPENAI_API_KEY` 变量

### 3. 运行脚本
```bash
# 基础版本
python test_daily_term_generator.py

# 增强版本
python enhanced_daily_term_generator.py
```

## 使用指南

### 基础版本功能

1. **生成单个术语**: 随机生成一个术语并显示详细信息
2. **批量生成术语**: 生成多个术语用于质量测试
3. **指定领域生成**: 选择特定领域和难度生成术语
4. **查看领域列表**: 显示所有可用的计算机科学领域

### 增强版本功能

1. **智能生成单个术语**: 
   - 自动选择合适的领域和难度
   - 支持三种生成模板
   - 完整的质量分析报告

2. **高质量批量生成**:
   - 设置最低质量要求
   - 自动筛选符合标准的术语
   - 生成详细统计报告

3. **指定参数生成**:
   - 手动选择领域、难度、模板
   - 适合测试特定场景

4. **生成历史查看**:
   - 查看最近的生成记录
   - 质量分数一目了然

5. **质量分析报告**:
   - 整体质量统计
   - 领域分布分析
   - 质量指标详情

## 质量评估标准

### 评估维度
- **内容长度**: 定义和解释的长度是否合适
- **完整性**: 必需字段是否齐全
- **关键词覆盖**: 是否包含相关领域关键词
- **可读性**: 内容是否易于理解

### 质量等级
- **优秀** (0.9+): 高质量，可直接使用
- **良好** (0.7-0.9): 质量不错，可能需要微调
- **一般** (0.5-0.7): 基本可用，需要改进
- **较差** (<0.5): 需要重新生成

## 配置说明

### 领域配置 (`CS_DOMAINS`)
- 10个主要计算机科学领域
- 每个领域包含关键词、难度级别、权重
- 支持自定义扩展

### 生成模板 (`TERM_GENERATION_TEMPLATES`)
- **standard**: 标准模板，适合一般用途
- **beginner_friendly**: 初学者友好，语言简单易懂
- **advanced**: 高级模板，技术深度更高

### 质量控制 (`QUALITY_CONFIG`)
- 内容长度限制
- 字段完整性要求
- 例子和相关术语数量要求

## 输出文件

生成的术语会保存为JSON格式，包含：
- **metadata**: 生成元数据
- **statistics**: 统计信息（批量生成时）
- **terms**: 术语详细信息和质量分析

### 文件结构示例
```json
{
  "metadata": {
    "generated_at": "2024-01-01T12:00:00",
    "generator_version": "2.0",
    "total_terms": 10,
    "api_model": "gpt-3.5-turbo"
  },
  "statistics": {
    "average_quality": 0.85,
    "quality_distribution": {...},
    "domain_distribution": {...}
  },
  "terms": [
    {
      "term": "术语名称",
      "english_term": "English Term",
      "category": "算法与数据结构",
      "difficulty": "中级",
      "definition": "简洁定义...",
      "detailed_explanation": "详细解释...",
      "examples": [...],
      "related_terms": [...],
      "learning_tips": "学习建议...",
      "practical_application": "实际应用...",
      "quality_analysis": {
        "overall_score": 0.85,
        "metrics": {...},
        "suggestions": [...]
      }
    }
  ]
}
```

## 最佳实践

### 1. 质量优化建议
- 使用增强版本进行质量控制
- 设置合适的质量阈值（建议0.7+）
- 定期检查生成历史和统计报告

### 2. 批量生成策略
- 小批量测试（5-10个）验证配置
- 大批量生成前先调整参数
- 保存高质量术语作为参考

### 3. 领域平衡
- 注意各领域的生成平衡
- 根据需要调整领域权重
- 定期更新关键词列表

## 故障排除

### 常见问题
1. **API密钥错误**: 检查密钥是否正确设置
2. **网络连接问题**: 确保网络连接正常
3. **JSON解析错误**: 可能是API返回格式问题，会自动重试
4. **质量分数过低**: 调整生成参数或降低质量要求

### 日志文件
增强版本会生成 `daily_term_generator.log` 日志文件，包含详细的操作记录和错误信息。

## 扩展开发

### 添加新领域
在 `config.py` 的 `CS_DOMAINS` 中添加新的领域配置。

### 自定义质量评估
修改 `QualityAnalyzer` 类中的评估逻辑。

### 新增生成模板
在 `TERM_GENERATION_TEMPLATES` 中添加新的模板配置。

## 注意事项

- 请合理使用API，避免过度调用
- 生成的内容仅供测试，实际使用前请人工审核
- 保护好你的API密钥，不要泄露给他人
- 定期备份重要的生成结果

## 版本历史

- **v1.0**: 基础版本，支持简单生成和验证
- **v2.0**: 增强版本，添加质量分析和智能选择功能
