{% extends "admin/change_form.html" %}
{% load static %}

{% block extrahead %}
{{ block.super }}
<link rel="stylesheet" type="text/css" href="{% static 'admin/css/exercise_admin.css' %}"><script></script>
{% endblock %}

{% block content %}
<div class="exercise-admin-wrapper"><!-- æ¬¢è¿å‘å¯¼ --><div class="welcome-wizard" id="welcome-wizard"><div class="wizard-content"><h2>ğŸ¯ æ¬¢è¿ä½¿ç”¨ç»ƒä¹ é¢˜ç¼–è¾‘å™¨</h2><p>è¿™ä¸ªå·¥å…·å°†å¸®åŠ©æ‚¨è½»æ¾åˆ›å»ºé«˜è´¨é‡çš„ç»ƒä¹ é¢˜ï¼Œæ— éœ€ä»»ä½•æŠ€æœ¯èƒŒæ™¯ã€‚</p><div class="wizard-steps"><div class="step"><div class="step-number">1</div><div class="step-content"><h4>é€‰æ‹©é¢˜ç›®ç±»å‹</h4><p>æ ¹æ®æ‚¨çš„éœ€æ±‚é€‰æ‹©åˆé€‚çš„é¢˜ç›®ç±»å‹</p></div></div><div class="step"><div class="step-number">2</div><div class="step-content"><h4>å¡«å†™åŸºæœ¬ä¿¡æ¯</h4><p>è¾“å…¥é¢˜ç›®æ ‡é¢˜ã€åˆ†ç±»å’Œéš¾åº¦ç­‰çº§</p></div></div><div class="step"><div class="step-number">3</div><div class="step-content"><h4>ç¼–å†™é¢˜ç›®å†…å®¹</h4><p>ä½¿ç”¨å¯è§†åŒ–ç¼–è¾‘å™¨åˆ›å»ºé¢˜ç›®å’Œé€‰é¡¹</p></div></div><div class="step"><div class="step-number">4</div><div class="step-content"><h4>æ·»åŠ è§£æå’Œæç¤º</h4><p>æä¾›è¯¦ç»†è§£ç­”å’Œåˆ†æ­¥æç¤º</p></div></div></div><div class="wizard-actions"><button type="button" class="button primary" onclick="startCreating()">
                    ğŸš€ å¼€å§‹åˆ›å»ºé¢˜ç›®
                </button><button type="button" class="button" onclick="loadTemplate()">
                    ğŸ“‹ ä½¿ç”¨æ¨¡æ¿
                </button></div></div></div><!-- æ¨¡æ¿é€‰æ‹©å™¨ --><div class="template-selector" id="template-selector" style="display: none;"><div class="template-header"><h3>ğŸ“‹ é€‰æ‹©é¢˜ç›®æ¨¡æ¿</h3><button type="button" class="close-template" onclick="hideTemplateSelector()">Ã—</button></div><div class="template-grid"><div class="template-card" onclick="applyTemplate('single_choice')"><div class="template-icon">ğŸ”˜</div><h4>å•é€‰é¢˜æ¨¡æ¿</h4><p>é€‚ç”¨äºåªæœ‰ä¸€ä¸ªæ­£ç¡®ç­”æ¡ˆçš„é¢˜ç›®</p><div class="template-example">
                    ç¤ºä¾‹ï¼šæ•°ç»„çš„æ—¶é—´å¤æ‚åº¦æ˜¯ï¼Ÿ
                </div></div><div class="template-card" onclick="applyTemplate('multiple_choice')"><div class="template-icon">â˜‘ï¸</div><h4>å¤šé€‰é¢˜æ¨¡æ¿</h4><p>é€‚ç”¨äºæœ‰å¤šä¸ªæ­£ç¡®ç­”æ¡ˆçš„é¢˜ç›®</p><div class="template-example">
                    ç¤ºä¾‹ï¼šä»¥ä¸‹å“ªäº›æ˜¯æ’åºç®—æ³•ï¼Ÿ
                </div></div><div class="template-card" onclick="applyTemplate('true_false')"><div class="template-icon">âœ…</div><h4>åˆ¤æ–­é¢˜æ¨¡æ¿</h4><p>é€‚ç”¨äºå¯¹é”™åˆ¤æ–­ç±»é¢˜ç›®</p><div class="template-example">
                    ç¤ºä¾‹ï¼šæ ˆæ˜¯å…ˆè¿›å…ˆå‡ºçš„æ•°æ®ç»“æ„
                </div></div><div class="template-card" onclick="applyTemplate('fill_blank')"><div class="template-icon">ğŸ“</div><h4>å¡«ç©ºé¢˜æ¨¡æ¿</h4><p>é€‚ç”¨äºéœ€è¦å¡«å†™ç­”æ¡ˆçš„é¢˜ç›®</p><div class="template-example">
                    ç¤ºä¾‹ï¼šäºŒåˆ†æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦æ˜¯____
                </div></div><div class="template-card" onclick="applyTemplate('short_answer')"><div class="template-icon">ğŸ“„</div><h4>ç®€ç­”é¢˜æ¨¡æ¿</h4><p>é€‚ç”¨äºéœ€è¦è¯¦ç»†å›ç­”çš„é¢˜ç›®</p><div class="template-example">
                    ç¤ºä¾‹ï¼šè¯·è§£é‡Šå¿«é€Ÿæ’åºçš„åŸç†
                </div></div><div class="template-card" onclick="applyTemplate('coding')"><div class="template-icon">ğŸ’»</div><h4>ç¼–ç¨‹é¢˜æ¨¡æ¿</h4><p>é€‚ç”¨äºä»£ç ç¼–å†™ç±»é¢˜ç›®</p><div class="template-example">
                    ç¤ºä¾‹ï¼šå®ç°äºŒåˆ†æŸ¥æ‰¾ç®—æ³•
                </div></div></div></div><!-- ä¸»è¦å†…å®¹ --><div class="exercise-content" id="exercise-content" style="display: none;"><!-- è¿›åº¦æŒ‡ç¤ºå™¨ --><div class="progress-indicator"><div class="progress-step active" data-step="1"><span class="step-number">1</span><span class="step-label">åŸºæœ¬ä¿¡æ¯</span></div><div class="progress-step" data-step="2"><span class="step-number">2</span><span class="step-label">é¢˜ç›®å†…å®¹</span></div><div class="progress-step" data-step="3"><span class="step-number">3</span><span class="step-label">è§£ææç¤º</span></div><div class="progress-step" data-step="4"><span class="step-number">4</span><span class="step-label">å®Œæˆ</span></div></div>

        {{ block.super }}
    </div><!-- å®æ—¶é¢„è§ˆé¢æ¿ --><div class="preview-panel" id="preview-panel"><div class="preview-header"><h3>ğŸ“± å®æ—¶é¢„è§ˆ</h3><button type="button" class="close-preview" onclick="togglePreview()">Ã—</button></div><div class="preview-content" id="preview-content"><div class="preview-placeholder"><p>å¼€å§‹å¡«å†™é¢˜ç›®å†…å®¹ï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºå®æ—¶é¢„è§ˆ</p></div></div></div></div><!-- æµ®åŠ¨å¸®åŠ©æŒ‰é’® --><div class="floating-help"><button type="button" class="help-fab" onclick="showQuickHelp()" title="å¿«é€Ÿå¸®åŠ©">
        â“
    </button></div><script>function startCreating() { document.getElementById('welcome-wizard').style.display = 'none'; document.getElementById('exercise-content').style.display = 'block'; initializeExerciseEditor(); } function loadTemplate() { document.getElementById('template-selector').style.display = 'block'; } function hideTemplateSelector() { document.getElementById('template-selector').style.display = 'none'; } function applyTemplate(templateType) { document.querySelector('#id_question_type').value = templateType; hideTemplateSelector(); startCreating(); applyTemplateContent(templateType); } function applyTemplateContent(templateType) { const templates = { 'single_choice': { title: 'ç¤ºä¾‹å•é€‰é¢˜', question_text: 'ä»¥ä¸‹å“ªä¸ªæ˜¯æ­£ç¡®çš„æè¿°ï¼Ÿ', options: { 'A': 'é€‰é¡¹Açš„å†…å®¹', 'B': 'é€‰é¡¹Bçš„å†…å®¹', 'C': 'é€‰é¡¹Cçš„å†…å®¹', 'D': 'é€‰é¡¹Dçš„å†…å®¹' }, correct_answer: 'A', explanation: 'è¿™é‡Œå¡«å†™è¯¦ç»†çš„ç­”æ¡ˆè§£æ...' }, 'multiple_choice': { title: 'ç¤ºä¾‹å¤šé€‰é¢˜', question_text: 'ä»¥ä¸‹å“ªäº›é€‰é¡¹æ˜¯æ­£ç¡®çš„ï¼Ÿï¼ˆå¤šé€‰ï¼‰', options: { 'A': 'é€‰é¡¹Açš„å†…å®¹', 'B': 'é€‰é¡¹Bçš„å†…å®¹', 'C': 'é€‰é¡¹Cçš„å†…å®¹', 'D': 'é€‰é¡¹Dçš„å†…å®¹' }, correct_answer: 'A,C', explanation: 'è¿™é‡Œå¡«å†™è¯¦ç»†çš„ç­”æ¡ˆè§£æ...' }, 'true_false': { title: 'ç¤ºä¾‹åˆ¤æ–­é¢˜', question_text: 'è¯·åˆ¤æ–­ä»¥ä¸‹è¯´æ³•æ˜¯å¦æ­£ç¡®ï¼š', correct_answer: 'true', explanation: 'è¿™é‡Œå¡«å†™è¯¦ç»†çš„ç­”æ¡ˆè§£æ...' }, 'fill_blank': { title: 'ç¤ºä¾‹å¡«ç©ºé¢˜', question_text: 'è¯·åœ¨ç©ºç™½å¤„å¡«å…¥æ­£ç¡®ç­”æ¡ˆï¼š____', correct_answer: 'æ­£ç¡®ç­”æ¡ˆ', explanation: 'è¿™é‡Œå¡«å†™è¯¦ç»†çš„ç­”æ¡ˆè§£æ...' }, 'short_answer': { title: 'ç¤ºä¾‹ç®€ç­”é¢˜', question_text: 'è¯·è¯¦ç»†å›ç­”ä»¥ä¸‹é—®é¢˜ï¼š', correct_answer: 'å‚è€ƒç­”æ¡ˆå†…å®¹...', explanation: 'è¿™é‡Œå¡«å†™è¯¦ç»†çš„ç­”æ¡ˆè§£æ...' }, 'coding': { title: 'ç¤ºä¾‹ç¼–ç¨‹é¢˜', question_text: 'è¯·ç¼–å†™ä»£ç å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š', correct_answer: ' explanation: 'è¿™é‡Œå¡«å†™è¯¦ç»†çš„ä»£ç è§£æ...' } }; const template = templates[templateType]; if (template) { document.querySelector('#id_title').value = template.title; document.querySelector('#id_question_text').value = template.question_text; document.querySelector('#id_correct_answer').value = template.correct_answer; document.querySelector('#id_explanation').value = template.explanation; if (template.options) { window.setOptionsFromTemplate(template.options); } } } function showQuickHelp() { alert('å¿«é€Ÿå¸®åŠ©ï¼š\n\n1. é€‰æ‹©åˆé€‚çš„é¢˜ç›®ç±»å‹\n2. å¡«å†™æ¸…æ™°çš„é¢˜ç›®æ ‡é¢˜\n3. ä½¿ç”¨å¯è§†åŒ–ç¼–è¾‘å™¨æ·»åŠ é€‰é¡¹\n4. æä¾›è¯¦ç»†çš„è§£æè¯´æ˜\n\nå¦‚éœ€æ›´å¤šå¸®åŠ©ï¼Œè¯·ç‚¹å‡»é¡µé¢ä¸Šçš„å¸®åŠ©æŒ‰é’®ã€‚'); }</script>
{% endblock %}
