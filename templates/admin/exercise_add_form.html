{% extends "admin/change_form.html" %}
{% load static %}

{% block extrahead %}
{{ block.super }}
<link rel="stylesheet" type="text/css" href="{% static 'admin/css/exercise_admin.css' %}"><script></script>
{% endblock %}

{% block content %}
<div class="exercise-admin-wrapper"><!-- 欢迎向导 --><div class="welcome-wizard" id="welcome-wizard"><div class="wizard-content"><h2>🎯 欢迎使用练习题编辑器</h2><p>这个工具将帮助您轻松创建高质量的练习题，无需任何技术背景。</p><div class="wizard-steps"><div class="step"><div class="step-number">1</div><div class="step-content"><h4>选择题目类型</h4><p>根据您的需求选择合适的题目类型</p></div></div><div class="step"><div class="step-number">2</div><div class="step-content"><h4>填写基本信息</h4><p>输入题目标题、分类和难度等级</p></div></div><div class="step"><div class="step-number">3</div><div class="step-content"><h4>编写题目内容</h4><p>使用可视化编辑器创建题目和选项</p></div></div><div class="step"><div class="step-number">4</div><div class="step-content"><h4>添加解析和提示</h4><p>提供详细解答和分步提示</p></div></div></div><div class="wizard-actions"><button type="button" class="button primary" onclick="startCreating()">
                    🚀 开始创建题目
                </button><button type="button" class="button" onclick="loadTemplate()">
                    📋 使用模板
                </button></div></div></div><!-- 模板选择器 --><div class="template-selector" id="template-selector" style="display: none;"><div class="template-header"><h3>📋 选择题目模板</h3><button type="button" class="close-template" onclick="hideTemplateSelector()">×</button></div><div class="template-grid"><div class="template-card" onclick="applyTemplate('single_choice')"><div class="template-icon">🔘</div><h4>单选题模板</h4><p>适用于只有一个正确答案的题目</p><div class="template-example">
                    示例：数组的时间复杂度是？
                </div></div><div class="template-card" onclick="applyTemplate('multiple_choice')"><div class="template-icon">☑️</div><h4>多选题模板</h4><p>适用于有多个正确答案的题目</p><div class="template-example">
                    示例：以下哪些是排序算法？
                </div></div><div class="template-card" onclick="applyTemplate('true_false')"><div class="template-icon">✅</div><h4>判断题模板</h4><p>适用于对错判断类题目</p><div class="template-example">
                    示例：栈是先进先出的数据结构
                </div></div><div class="template-card" onclick="applyTemplate('fill_blank')"><div class="template-icon">📝</div><h4>填空题模板</h4><p>适用于需要填写答案的题目</p><div class="template-example">
                    示例：二分查找的时间复杂度是____
                </div></div><div class="template-card" onclick="applyTemplate('short_answer')"><div class="template-icon">📄</div><h4>简答题模板</h4><p>适用于需要详细回答的题目</p><div class="template-example">
                    示例：请解释快速排序的原理
                </div></div><div class="template-card" onclick="applyTemplate('coding')"><div class="template-icon">💻</div><h4>编程题模板</h4><p>适用于代码编写类题目</p><div class="template-example">
                    示例：实现二分查找算法
                </div></div></div></div><!-- 主要内容 --><div class="exercise-content" id="exercise-content" style="display: none;"><!-- 进度指示器 --><div class="progress-indicator"><div class="progress-step active" data-step="1"><span class="step-number">1</span><span class="step-label">基本信息</span></div><div class="progress-step" data-step="2"><span class="step-number">2</span><span class="step-label">题目内容</span></div><div class="progress-step" data-step="3"><span class="step-number">3</span><span class="step-label">解析提示</span></div><div class="progress-step" data-step="4"><span class="step-number">4</span><span class="step-label">完成</span></div></div>

        {{ block.super }}
    </div><!-- 实时预览面板 --><div class="preview-panel" id="preview-panel"><div class="preview-header"><h3>📱 实时预览</h3><button type="button" class="close-preview" onclick="togglePreview()">×</button></div><div class="preview-content" id="preview-content"><div class="preview-placeholder"><p>开始填写题目内容，这里会显示实时预览</p></div></div></div></div><!-- 浮动帮助按钮 --><div class="floating-help"><button type="button" class="help-fab" onclick="showQuickHelp()" title="快速帮助">
        ❓
    </button></div><script>function startCreating() { document.getElementById('welcome-wizard').style.display = 'none'; document.getElementById('exercise-content').style.display = 'block'; initializeExerciseEditor(); } function loadTemplate() { document.getElementById('template-selector').style.display = 'block'; } function hideTemplateSelector() { document.getElementById('template-selector').style.display = 'none'; } function applyTemplate(templateType) { document.querySelector('#id_question_type').value = templateType; hideTemplateSelector(); startCreating(); applyTemplateContent(templateType); } function applyTemplateContent(templateType) { const templates = { 'single_choice': { title: '示例单选题', question_text: '以下哪个是正确的描述？', options: { 'A': '选项A的内容', 'B': '选项B的内容', 'C': '选项C的内容', 'D': '选项D的内容' }, correct_answer: 'A', explanation: '这里填写详细的答案解析...' }, 'multiple_choice': { title: '示例多选题', question_text: '以下哪些选项是正确的？（多选）', options: { 'A': '选项A的内容', 'B': '选项B的内容', 'C': '选项C的内容', 'D': '选项D的内容' }, correct_answer: 'A,C', explanation: '这里填写详细的答案解析...' }, 'true_false': { title: '示例判断题', question_text: '请判断以下说法是否正确：', correct_answer: 'true', explanation: '这里填写详细的答案解析...' }, 'fill_blank': { title: '示例填空题', question_text: '请在空白处填入正确答案：____', correct_answer: '正确答案', explanation: '这里填写详细的答案解析...' }, 'short_answer': { title: '示例简答题', question_text: '请详细回答以下问题：', correct_answer: '参考答案内容...', explanation: '这里填写详细的答案解析...' }, 'coding': { title: '示例编程题', question_text: '请编写代码实现以下功能：', correct_answer: ' explanation: '这里填写详细的代码解析...' } }; const template = templates[templateType]; if (template) { document.querySelector('#id_title').value = template.title; document.querySelector('#id_question_text').value = template.question_text; document.querySelector('#id_correct_answer').value = template.correct_answer; document.querySelector('#id_explanation').value = template.explanation; if (template.options) { window.setOptionsFromTemplate(template.options); } } } function showQuickHelp() { alert('快速帮助：\n\n1. 选择合适的题目类型\n2. 填写清晰的题目标题\n3. 使用可视化编辑器添加选项\n4. 提供详细的解析说明\n\n如需更多帮助，请点击页面上的帮助按钮。'); }</script>
{% endblock %}
