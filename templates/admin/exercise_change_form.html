{% extends "admin/change_form.html" %}
{% load static %}

{% block extrahead %}
{{ block.super }}
<link rel="stylesheet" type="text/css" href="{% static 'admin/css/exercise_admin.css' %}"><script></script>
{% endblock %}

{% block content %}
<div class="exercise-admin-wrapper"><!-- é¡¶éƒ¨å·¥å…·æ  --><div class="exercise-toolbar"><div class="toolbar-left"><h2>ğŸ“ ç¼–è¾‘ç»ƒä¹ é¢˜</h2><span class="exercise-type-badge" id="type-badge">{{ original.get_question_type_display }}</span></div><div class="toolbar-right">
            {% if original.pk %}
            <a href="{% url 'knowledge_app:exercise_preview' original.pk %}" target="_blank" class="button preview-btn">
                ğŸ” é¢„è§ˆé¢˜ç›®
            </a><a href="{% url 'knowledge_app:exercise_test' original.pk %}" target="_blank" class="button test-btn">
                ğŸ§ª æµ‹è¯•ç­”é¢˜
            </a>
            {% endif %}
            <button type="button" class="button help-btn" onclick="showHelp()">
                â“ å¸®åŠ©
            </button></div></div><!-- ä¸»è¦å†…å®¹ --><div class="exercise-content">
        {{ block.super }}
    </div><!-- å®æ—¶é¢„è§ˆé¢æ¿ --><div class="preview-panel" id="preview-panel"><div class="preview-header"><h3>ğŸ“± å®æ—¶é¢„è§ˆ</h3><button type="button" class="close-preview" onclick="togglePreview()">Ã—</button></div><div class="preview-content" id="preview-content"><div class="preview-placeholder"><p>å¡«å†™é¢˜ç›®å†…å®¹åï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºå®æ—¶é¢„è§ˆ</p></div></div></div><!-- å¸®åŠ©é¢æ¿ --><div class="help-panel" id="help-panel" style="display: none;"><div class="help-header"><h3>ğŸ“š é¢˜ç›®ç¼–è¾‘å¸®åŠ©</h3><button type="button" class="close-help" onclick="hideHelp()">Ã—</button></div><div class="help-content"><div class="help-section"><h4>ğŸ¯ é¢˜ç›®ç±»å‹è¯´æ˜</h4><ul><li><strong>å•é€‰é¢˜</strong>ï¼šåªèƒ½é€‰æ‹©ä¸€ä¸ªæ­£ç¡®ç­”æ¡ˆï¼Œç­”æ¡ˆæ ¼å¼ï¼šA</li><li><strong>å¤šé€‰é¢˜</strong>ï¼šå¯ä»¥é€‰æ‹©å¤šä¸ªæ­£ç¡®ç­”æ¡ˆï¼Œç­”æ¡ˆæ ¼å¼ï¼šA,C,D</li><li><strong>åˆ¤æ–­é¢˜</strong>ï¼šå¯¹é”™åˆ¤æ–­ï¼Œç­”æ¡ˆæ ¼å¼ï¼štrue æˆ– false</li><li><strong>å¡«ç©ºé¢˜</strong>ï¼šæ–‡æœ¬è¾“å…¥ï¼Œç­”æ¡ˆæ ¼å¼ï¼šå‡†ç¡®çš„æ–‡æœ¬</li><li><strong>ç®€ç­”é¢˜</strong>ï¼šé•¿æ–‡æœ¬å›ç­”ï¼Œç­”æ¡ˆæ ¼å¼ï¼šå‚è€ƒç­”æ¡ˆ</li><li><strong>ç¼–ç¨‹é¢˜</strong>ï¼šä»£ç ç¼–å†™ï¼Œç­”æ¡ˆæ ¼å¼ï¼šæ ‡å‡†ä»£ç </li></ul></div><div class="help-section"><h4>ğŸ“ é€‰é¡¹ç¼–è¾‘æŠ€å·§</h4><ul><li>ä½¿ç”¨å¯è§†åŒ–ç¼–è¾‘å™¨æ·»åŠ é€‰é¡¹ï¼Œæ— éœ€æ‰‹å†™JSON</li><li>æ”¯æŒæ‹–æ‹½æ’åºé€‰é¡¹</li><li>å¯ä»¥æ·»åŠ å›¾ç‰‡åˆ°é€‰é¡¹ä¸­</li><li>é€‰é¡¹å†…å®¹æ”¯æŒç®€å•çš„HTMLæ ¼å¼</li></ul></div><div class="help-section"><h4>ğŸ’¡ æç¤ºè®¾è®¡åŸåˆ™</h4><ul><li>ç¬¬ä¸€ä¸ªæç¤ºï¼šå¼•å¯¼æ€è€ƒæ–¹å‘</li><li>ç¬¬äºŒä¸ªæç¤ºï¼šæä¾›å…³é”®ä¿¡æ¯</li><li>ç¬¬ä¸‰ä¸ªæç¤ºï¼šæ¥è¿‘ç­”æ¡ˆçš„æç¤º</li><li>æç¤ºè¦å¾ªåºæ¸è¿›ï¼Œä¸è¦ç›´æ¥ç»™å‡ºç­”æ¡ˆ</li></ul></div><div class="help-section"><h4>ğŸ–¼ï¸ å›¾ç‰‡ä½¿ç”¨å»ºè®®</h4><ul><li>å›¾ç‰‡å¤§å°å»ºè®®ä¸è¶…è¿‡2MB</li><li>æ”¯æŒJPGã€PNGã€GIFæ ¼å¼</li><li>å›¾ç‰‡ä¼šè‡ªåŠ¨å‹ç¼©å’Œä¼˜åŒ–</li><li>å¯ä»¥ä¸ºé¢˜ç›®å’Œè§£æåˆ†åˆ«æ·»åŠ å›¾ç‰‡</li></ul></div></div></div></div><!-- æµ®åŠ¨æ“ä½œæŒ‰é’® --><div class="floating-actions"><button type="button" class="fab preview-fab" onclick="togglePreview()" title="åˆ‡æ¢é¢„è§ˆ">
        ğŸ‘ï¸
    </button><button type="button" class="fab save-fab" onclick="document.querySelector('input[name=_save]').click()" title="ä¿å­˜é¢˜ç›®">
        ğŸ’¾
    </button></div><script>document.addEventListener('DOMContentLoaded', function() { initializeExerciseEditor(); }); function showHelp() { document.getElementById('help-panel').style.display = 'block'; } function hideHelp() { document.getElementById('help-panel').style.display = 'none'; } function togglePreview() { const panel = document.getElementById('preview-panel'); panel.classList.toggle('active'); updatePreview(); } function updatePreview() { const title = document.querySelector('#id_title').value; const questionText = document.querySelector('#id_question_text').value; const questionType = document.querySelector('#id_question_type').value; if (title || questionText) { const previewContent = document.getElementById('preview-content'); previewContent.innerHTML = generatePreviewHTML(title, questionText, questionType); } } function generatePreviewHTML(title, questionText, questionType) { return ` <div class="preview-exercise"><h4>${title || 'é¢˜ç›®æ ‡é¢˜'}</h4><div class="question-type-badge">${getQuestionTypeDisplay(questionType)}</div><div class="question-content"> ${questionText || 'é¢˜ç›®å†…å®¹...'} </div></div> `; } function getQuestionTypeDisplay(type) { const types = { 'single_choice': 'å•é€‰é¢˜', 'multiple_choice': 'å¤šé€‰é¢˜', 'true_false': 'åˆ¤æ–­é¢˜', 'fill_blank': 'å¡«ç©ºé¢˜', 'short_answer': 'ç®€ç­”é¢˜', 'coding': 'ç¼–ç¨‹é¢˜' }; return types[type] || 'æœªçŸ¥ç±»å‹'; }</script>
{% endblock %}
