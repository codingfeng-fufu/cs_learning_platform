<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>æ‰¹é‡å¯¼å…¥ç»ƒä¹ é¢˜</title><style>* {margin:0;padding:0;box-sizing:border-box}body {font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;background:#f8f9fa;color:#333;line-height:1.6}.import-container {max-width:1000px;margin:20px auto;background:white;border-radius:12px;box-shadow:0 4px 20px rgba(0,0,0,0.1);overflow:hidden}.import-header {background:linear-gradient(135deg, #6f42c1 0%, #e83e8c 100%);color:white;padding:30px;text-align:center}.import-header h1 {font-size:2em;margin-bottom:10px}.import-header p {opacity:0.9;font-size:1.1em}.import-content {padding:40px}.step-indicator {display:flex;justify-content:center;margin-bottom:40px}.step {display:flex;flex-direction:column;align-items:center;position:relative;flex:1;max-width:200px}.step:not(:last-child)::after {content:'';position:absolute;top:20px;left:60%;right:-40%;height:2px;background:#e9ecef;z-index:1}.step-number {width:40px;height:40px;border-radius:50%;background:#e9ecef;color:#6c757d;display:flex;align-items:center;justify-content:center;font-weight:bold;margin-bottom:10px;position:relative;z-index:2}.step.active .step-number {background:#007bff;color:white}.step-label {font-size:0.9em;color:#6c757d;text-align:center}.step.active .step-label {color:#007bff;font-weight:bold}.section {margin-bottom:40px}.section-title {font-size:1.3em;color:#495057;margin-bottom:20px;display:flex;align-items:center}.section-title::before {content:'';width:4px;height:24px;background:#007bff;margin-right:12px;border-radius:2px}.upload-area {border:2px dashed #007bff;border-radius:8px;padding:40px;text-align:center;background:#f8f9ff;transition:all 0.3s ease;cursor:pointer}.upload-area:hover {background:#e6f3ff;border-color:#0056b3}.upload-area.dragover {background:#cce7ff;border-color:#0056b3}.upload-icon {font-size:3em;color:#007bff;margin-bottom:15px}.upload-text {font-size:1.1em;color:#495057;margin-bottom:10px}.upload-hint {color:#6c757d;font-size:0.9em}.file-input {display:none}.template-section {background:#fff3cd;border:1px solid #ffeaa7;border-radius:8px;padding:25px;margin-bottom:30px}.template-header {display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.template-title {color:#856404;font-size:1.1em;font-weight:bold}.download-template {background:#ffc107;color:#212529;padding:8px 16px;border-radius:6px;text-decoration:none;font-weight:bold;transition:all 0.3s ease}.download-template:hover {background:#e0a800;transform:translateY(-2px)}.template-preview {background:white;border-radius:6px;padding:15px;overflow-x:auto}.template-table {width:100%;border-collapse:collapse;font-size:0.85em}.template-table th, .template-table td {padding:8px 12px;border:1px solid #dee2e6;text-align:left;white-space:nowrap}.template-table th {background:#f8f9fa;font-weight:bold;color:#495057}.instructions {background:#d1ecf1;border:1px solid #bee5eb;border-radius:8px;padding:25px}.instructions h3 {color:#0c5460;margin-bottom:15px}.instructions ul {color:#0c5460;padding-left:20px}.instructions li {margin-bottom:8px}.format-guide {display:grid;grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));gap:20px;margin-top:20px}.format-item {background:white;padding:20px;border-radius:8px;border:1px solid #e9ecef}.format-item h4 {color:#495057;margin-bottom:10px}.format-example {background:#f8f9fa;padding:10px;border-radius:4px;font-family:monospace;font-size:0.9em;color:#495057}.submit-section {text-align:center;padding:30px 0;border-top:1px solid #e9ecef}.btn {display:inline-block;padding:12px 24px;margin:0 10px;border-radius:6px;text-decoration:none;font-weight:bold;transition:all 0.3s ease;border:none;cursor:pointer;font-size:1em}.btn-primary {background:#007bff;color:white}.btn-secondary {background:#6c757d;color:white}.btn:hover {transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,0.1)}.btn:disabled {opacity:0.6;cursor:not-allowed;transform:none}.error-message {background:#f8d7da;border:1px solid #f5c6cb;color:#721c24;padding:15px;border-radius:6px;margin-bottom:20px}@media (max-width:768px) {.import-container {margin:10px;border-radius:8px}.import-content {padding:20px}.step-indicator {flex-direction:column;gap:20px}.step::after {display:none}.format-guide {grid-template-columns:1fr}}</style></head><body><div class="import-container"><!-- å¤´éƒ¨ --><div class="import-header"><h1>ğŸ“¥ æ‰¹é‡å¯¼å…¥ç»ƒä¹ é¢˜</h1><p>é€šè¿‡CSVæ–‡ä»¶å¿«é€Ÿå¯¼å…¥å¤§é‡ç»ƒä¹ é¢˜ï¼Œæ”¯æŒæ‰€æœ‰é¢˜å‹</p></div><!-- ä¸»è¦å†…å®¹ --><div class="import-content"><!-- æ­¥éª¤æŒ‡ç¤ºå™¨ --><div class="step-indicator"><div class="step active"><div class="step-number">1</div><div class="step-label">ä¸‹è½½æ¨¡æ¿</div></div><div class="step"><div class="step-number">2</div><div class="step-label">å¡«å†™æ•°æ®</div></div><div class="step"><div class="step-number">3</div><div class="step-label">ä¸Šä¼ æ–‡ä»¶</div></div><div class="step"><div class="step-number">4</div><div class="step-label">å®Œæˆå¯¼å…¥</div></div></div><!-- é”™è¯¯ä¿¡æ¯ -->
            {% if error %}
            <div class="error-message"><strong>å¯¼å…¥å¤±è´¥ï¼š</strong>{{ error }}
            </div>
            {% endif %}
            
            <!-- æ¨¡æ¿ä¸‹è½½åŒºåŸŸ --><div class="section"><h2 class="section-title">ğŸ“‹ ç¬¬ä¸€æ­¥ï¼šä¸‹è½½CSVæ¨¡æ¿</h2><div class="template-section"><div class="template-header"><div class="template-title">CSVå¯¼å…¥æ¨¡æ¿</div><a href="data:text/csv;charset=utf-8,{% for item in sample_data %}{% for key, value in item.items %}{{ key }}{% if not forloop.last %},{% endif %}{% endfor %}{% if not forloop.last %}%0A{% endif %}{% endfor %}%0A{% for item in sample_data %}{% for key, value in item.items %}&quot;{{ value }}&quot;{% if not forloop.last %},{% endif %}{% endfor %}{% if not forloop.last %}%0A{% endif %}{% endfor %}" 
                           download="exercise_template.csv" class="download-template">
                            ğŸ“¥ ä¸‹è½½æ¨¡æ¿æ–‡ä»¶
                        </a></div><div class="template-preview"><table class="template-table"><thead><tr><th>title</th><th>category</th><th>difficulty</th><th>question_type</th><th>question_text</th><th>option_A</th><th>option_B</th><th>correct_answer</th></tr></thead><tbody><tr><td>ç¤ºä¾‹å•é€‰é¢˜</td><td>æ•°æ®ç»“æ„</td><td>åˆçº§</td><td>single_choice</td><td>ä»¥ä¸‹å“ªä¸ªæ˜¯æ­£ç¡®çš„æè¿°ï¼Ÿ</td><td>é€‰é¡¹Açš„å†…å®¹</td><td>é€‰é¡¹Bçš„å†…å®¹</td><td>A</td></tr></tbody></table></div></div></div><!-- æ ¼å¼è¯´æ˜ --><div class="section"><h2 class="section-title">ğŸ“ ç¬¬äºŒæ­¥ï¼šå¡«å†™é¢˜ç›®æ•°æ®</h2><div class="instructions"><h3>ğŸ“‹ å­—æ®µè¯´æ˜</h3><ul><li><strong>title</strong>ï¼šé¢˜ç›®æ ‡é¢˜ï¼ˆå¿…å¡«ï¼‰</li><li><strong>category</strong>ï¼šåˆ†ç±»åç§°ï¼ˆå¿…å¡«ï¼Œå¦‚ï¼šæ•°æ®ç»“æ„ã€ç®—æ³•è®¾è®¡ï¼‰</li><li><strong>difficulty</strong>ï¼šéš¾åº¦ç­‰çº§ï¼ˆå¿…å¡«ï¼Œå¦‚ï¼šåˆçº§ã€ä¸­çº§ã€é«˜çº§ï¼‰</li><li><strong>question_type</strong>ï¼šé¢˜ç›®ç±»å‹ï¼ˆå¿…å¡«ï¼Œè§ä¸‹æ–¹è¯´æ˜ï¼‰</li><li><strong>question_text</strong>ï¼šé¢˜ç›®å†…å®¹ï¼ˆå¿…å¡«ï¼‰</li><li><strong>option_A~F</strong>ï¼šé€‰æ‹©é¢˜é€‰é¡¹ï¼ˆé€‰æ‹©é¢˜å¿…å¡«ï¼‰</li><li><strong>correct_answer</strong>ï¼šæ­£ç¡®ç­”æ¡ˆï¼ˆå¿…å¡«ï¼‰</li><li><strong>explanation</strong>ï¼šç­”æ¡ˆè§£æï¼ˆå¯é€‰ï¼‰</li><li><strong>hint_1~5</strong>ï¼šæç¤ºä¿¡æ¯ï¼ˆå¯é€‰ï¼‰</li><li><strong>tags</strong>ï¼šæ ‡ç­¾ï¼Œç”¨é€—å·åˆ†éš”ï¼ˆå¯é€‰ï¼‰</li></ul></div><div class="format-guide"><div class="format-item"><h4>ğŸ”˜ å•é€‰é¢˜ (single_choice)</h4><div class="format-example">
                            question_type: single_choice<br>
                            correct_answer: A
                        </div></div><div class="format-item"><h4>â˜‘ï¸ å¤šé€‰é¢˜ (multiple_choice)</h4><div class="format-example">
                            question_type: multiple_choice<br>
                            correct_answer: A,C,D
                        </div></div><div class="format-item"><h4>âœ… åˆ¤æ–­é¢˜ (true_false)</h4><div class="format-example">
                            question_type: true_false<br>
                            correct_answer: true
                        </div></div><div class="format-item"><h4>ğŸ“ å¡«ç©ºé¢˜ (fill_blank)</h4><div class="format-example">
                            question_type: fill_blank<br>
                            correct_answer: O(log n)
                        </div></div><div class="format-item"><h4>ğŸ“„ ç®€ç­”é¢˜ (short_answer)</h4><div class="format-example">
                            question_type: short_answer<br>
                            correct_answer: å‚è€ƒç­”æ¡ˆå†…å®¹
                        </div></div><div class="format-item"><h4>ğŸ’» ç¼–ç¨‹é¢˜ (coding)</h4><div class="format-example">
                            question_type: coding<br>
                            correct_answer: æ ‡å‡†ä»£ç 
                        </div></div></div></div><!-- æ–‡ä»¶ä¸Šä¼ åŒºåŸŸ --><div class="section"><h2 class="section-title">ğŸ“¤ ç¬¬ä¸‰æ­¥ï¼šä¸Šä¼ CSVæ–‡ä»¶</h2><form method="post" enctype="multipart/form-data" id="import-form">
                    {% csrf_token %}
                    <div class="upload-area" onclick="document.getElementById('csv-file').click()" 
                         ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)"><div class="upload-icon">ğŸ“</div><div class="upload-text">ç‚¹å‡»é€‰æ‹©æ–‡ä»¶æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„</div><div class="upload-hint">æ”¯æŒCSVæ ¼å¼ï¼Œæ–‡ä»¶å¤§å°ä¸è¶…è¿‡10MB</div><input type="file" id="csv-file" name="csv_file" accept=".csv" class="file-input" onchange="handleFileSelect(event)"></div><div id="file-info" style="margin-top: 15px; display: none;"><p><strong>å·²é€‰æ‹©æ–‡ä»¶ï¼š</strong><span id="file-name"></span></p><p><strong>æ–‡ä»¶å¤§å°ï¼š</strong><span id="file-size"></span></p></div></form></div><!-- æäº¤æŒ‰é’® --><div class="submit-section"><button type="button" class="btn btn-secondary" onclick="window.history.back()">
                    â† è¿”å›
                </button><button type="submit" form="import-form" class="btn btn-primary" id="submit-btn" disabled>
                    ğŸš€ å¼€å§‹å¯¼å…¥
                </button></div></div></div><script>function handleDragOver(event) { event.preventDefault(); event.currentTarget.classList.add('dragover'); } function handleDragLeave(event) { event.currentTarget.classList.remove('dragover'); } function handleDrop(event) { event.preventDefault(); event.currentTarget.classList.remove('dragover'); const files = event.dataTransfer.files; if (files.length > 0) { document.getElementById('csv-file').files = files; handleFileSelect({ target: { files: files } }); } } function handleFileSelect(event) { const file = event.target.files[0]; if (file) { document.getElementById('file-name').textContent = file.name; document.getElementById('file-size').textContent = formatFileSize(file.size); document.getElementById('file-info').style.display = 'block'; document.getElementById('submit-btn').disabled = false; document.querySelectorAll('.step')[2].classList.add('active'); } } function formatFileSize(bytes) { if (bytes === 0) return '0 Bytes'; const k = 1024; const sizes = ['Bytes', 'KB', 'MB', 'GB']; const i = Math.floor(Math.log(bytes) / Math.log(k)); return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]; } document.getElementById('import-form').addEventListener('submit', function() { const submitBtn = document.getElementById('submit-btn'); submitBtn.disabled = true; submitBtn.innerHTML = 'â³ å¯¼å…¥ä¸­...'; document.querySelectorAll('.step')[3].classList.add('active'); });</script></body></html>
