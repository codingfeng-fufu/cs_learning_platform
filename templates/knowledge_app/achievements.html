{% extends 'knowledge_app/base.html' %}

{% block title %}成就系统 - 计算机科学学习平台{% endblock %}

{% block extra_css %}
<style>* {box-sizing:border-box}body {font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;line-height:1.6;color:var(--text-primary);background:linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);min-height:100vh;margin:0;padding:0}.page-layout {min-height:100vh;display:flex;flex-direction:column}.main-content {flex:1;width:100%}.achievements-container {max-width:1400px;margin:0 auto;padding:40px 40px;min-height:100vh;position:relative;z-index:1}.page-header {background:rgba(255, 255, 255, 0.1);backdrop-filter:blur(15px);border-radius:24px;padding:60px 40px;margin-bottom:40px;color:var(--text-inverse);text-align:center;position:relative;z-index:2;box-shadow:var(--shadow-md)}.page-title {font-size:3.5rem;font-weight:800;margin-bottom:20px;letter-spacing:-0.02em;text-shadow:0 2px 8px rgba(0, 0, 0, 0.1);display:flex;align-items:center;justify-content:center;gap:20px}.page-subtitle {font-size:1.3rem;opacity:0.92;margin-bottom:32px;font-weight:400;line-height:1.5}.overview-stats {display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:24px;margin-bottom:40px}.overview-card {background:rgba(255, 255, 255, 0.15);backdrop-filter:blur(10px);border-radius:var(--border-radius-lg);padding:32px 24px;text-align:center;border:1px solid rgba(255, 255, 255, 0.2);transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1)}.overview-card:hover {transform:translateY(-4px);background:rgba(255, 255, 255, 0.2);box-shadow:var(--shadow-md)}.overview-icon {font-size:2.5rem;margin-bottom:16px;display:block}.overview-number {font-size:2.2rem;font-weight:800;color:var(--text-inverse);margin-bottom:8px;display:block}.overview-label {font-size:0.95rem;color:rgba(255, 255, 255, 0.9);font-weight:600;text-transform:uppercase;letter-spacing:0.5px}.achievements-content {display:flex;flex-direction:column;gap:40px}.category-section {background:var(--bg-card);border-radius:24px;padding:48px;box-shadow:var(--shadow-md);position:relative;overflow:hidden;border:1px solid rgba(0,0,0,0.06)}.category-section::before {content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(135deg, var(--accent-color), #44a08d, var(--primary-color));border-radius:24px 24px 0 0}.category-header {display:flex;align-items:center;gap:16px;margin-bottom:32px}.category-icon {font-size:2.5rem;width:60px;height:60px;background:linear-gradient(135deg, var(--accent-color), #44a08d);border-radius:50%;display:flex;align-items:center;justify-content:center;color:var(--text-inverse);box-shadow:0 4px 16px rgba(78, 205, 196, 0.3)}.category-title {font-size:2rem;font-weight:700;color:#2c3e50;margin:0;letter-spacing:-0.01em}.achievements-grid {display:grid;grid-template-columns:repeat(auto-fill, minmax(320px, 1fr));gap:24px}.achievement-card {background:linear-gradient(135deg, #f8fafc 0%, #ffffff 100%);border-radius:var(--border-radius-lg);padding:32px;border:1px solid var(--border-color);transition:all 0.4s cubic-bezier(0.4, 0, 0.2, 1);position:relative;overflow:hidden;cursor:pointer;text-decoration:none;color:inherit}.achievement-card::before {content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(135deg, var(--accent-color), var(--primary-color));transform:scaleX(0);transition:transform 0.3s ease}.achievement-card:hover {transform:translateY(-6px);box-shadow:var(--shadow-md);border-color:rgba(78, 205, 196, 0.2);text-decoration:none;color:inherit}.achievement-card:hover::before {transform:scaleX(1)}.achievement-card.unlocked {background:linear-gradient(135deg, #e8f5e8 0%, #f0fff0 100%);border-color:#4caf50}.achievement-card.unlocked::before {background:linear-gradient(135deg, #4caf50, #66bb6a);transform:scaleX(1)}.achievement-header {display:flex;align-items:flex-start;gap:16px;margin-bottom:20px}.achievement-icon {font-size:3rem;width:60px;height:60px;background:linear-gradient(135deg, #f1f5f9, #e2e8f0);border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:all 0.3s ease}.achievement-card.unlocked .achievement-icon {background:linear-gradient(135deg, #4caf50, #66bb6a);color:var(--text-inverse);box-shadow:0 4px 16px rgba(76, 175, 80, 0.3)}.achievement-info {flex:1;min-width:0}.achievement-name {font-size:1.3rem;font-weight:700;color:#2c3e50;margin-bottom:8px;line-height:1.3}.achievement-description {color:var(--text-secondary);font-size:0.95rem;line-height:1.6;margin-bottom:16px}.achievement-meta {display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.achievement-points {background:linear-gradient(135deg, var(--primary-color), var(--secondary-color));color:var(--text-inverse);padding:6px 12px;border-radius:12px;font-size:0.85rem;font-weight:600}.achievement-status {font-size:0.85rem;font-weight:600;padding:6px 12px;border-radius:12px}.status-unlocked {background:#e8f5e8;color:#2e7d32}.status-locked {background:#fff3e0;color:#f57c00}.progress-container {margin-top:16px}.progress-label {display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;font-size:0.85rem;color:var(--text-muted)}.progress-bar {width:100%;height:8px;background:#e2e8f0;border-radius:4px;overflow:hidden}.progress-fill {height:100%;background:linear-gradient(135deg, var(--accent-color), #44a08d);border-radius:4px;transition:width 0.6s ease}.achievement-card.unlocked .progress-fill {background:linear-gradient(135deg, #4caf50, #66bb6a)}@media (max-width:768px) {.achievements-container {padding:28px 20px}.page-header {padding:40px 32px}.page-title {font-size:2.8rem}.category-section {padding:36px 28px}.achievements-grid {grid-template-columns:1fr;gap:20px}.overview-stats {grid-template-columns:repeat(2, 1fr);gap:16px}.achievement-header {flex-direction:column;align-items:center;text-align:center;gap:12px}.achievement-meta {flex-direction:column;gap:8px;align-items:stretch}}@keyframes fadeInUp {from {opacity:0;transform:translateY(30px)}to {opacity:1;transform:translateY(0)}}.achievements-container {animation:fadeInUp 0.8s ease-out}.category-section {animation:fadeInUp 0.6s ease-out both}.category-section:nth-child(1) {animation-delay:0.1s}.category-section:nth-child(2) {animation-delay:0.2s}.category-section:nth-child(3) {animation-delay:0.3s}.category-section:nth-child(4) {animation-delay:0.4s}.category-section:nth-child(5) {animation-delay:0.5s}.achievement-card {animation:fadeInUp 0.4s ease-out both}.achievement-card:nth-child(1) {animation-delay:0.1s}.achievement-card:nth-child(2) {animation-delay:0.2s}.achievement-card:nth-child(3) {animation-delay:0.3s}.achievement-card:nth-child(4) {animation-delay:0.4s}</style>
{% endblock %}

{% block content %}
<main class="page-layout" role="main"><div class="main-content"><div class="achievements-container"><!-- 页面头部 --><header class="page-header"><h1 class="page-title"><span>🏆</span><span>成就系统</span></h1><p class="page-subtitle">记录您的学习历程，见证每一步成长</p><!-- 总体统计 --><div class="overview-stats"><div class="overview-card"><span class="overview-icon">🏆</span><span class="overview-number">{{ unlocked_achievements }}</span><span class="overview-label">已解锁</span></div><div class="overview-card"><span class="overview-icon">📊</span><span class="overview-number">{{ completion_rate }}%</span><span class="overview-label">完成度</span></div><div class="overview-card"><span class="overview-icon">⭐</span><span class="overview-number">{{ total_points }}</span><span class="overview-label">总积分</span></div><div class="overview-card"><span class="overview-icon">🎯</span><span class="overview-number">{{ total_achievements }}</span><span class="overview-label">总成就</span></div></div></header><!-- 成就分类 --><div class="achievements-content">
                {% for category_key, category_data in categories.items %}
                {% if category_data.achievements %}
                <section class="category-section"><div class="category-header"><div class="category-icon">{{ category_data.icon }}</div><h2 class="category-title">{{ category_data.name }}</h2></div><div class="achievements-grid">
                        {% for achievement in category_data.achievements %}
                        <a href="{% url 'knowledge_app:achievement_detail' achievement.id %}" 
                           class="achievement-card {% if achievement.unlocked %}unlocked{% endif %}"
                           aria-label="查看{{ achievement.name }}成就详情"><div class="achievement-header"><div class="achievement-icon">{{ achievement.icon }}</div><div class="achievement-info"><h3 class="achievement-name">{{ achievement.name }}</h3><p class="achievement-description">{{ achievement.description }}</p></div></div><div class="achievement-meta"><span class="achievement-points">{{ achievement.points }} 积分</span><span class="achievement-status {% if achievement.unlocked %}status-unlocked{% else %}status-locked{% endif %}">
                                    {% if achievement.unlocked %}
                                        ✅ 已解锁
                                    {% else %}
                                        🔒 未解锁
                                    {% endif %}
                                </span></div>

                            {% if not achievement.unlocked %}
                            <div class="progress-container"><div class="progress-label"><span>进度</span><span>{{ achievement.progress }}%</span></div><div class="progress-bar"><div class="progress-fill" style="width: {{ achievement.progress }}%"></div></div></div>
                            {% else %}
                            <div class="progress-container"><div class="progress-label"><span>解锁时间</span><span>{{ achievement.unlock_date }}</span></div></div>
                            {% endif %}
                        </a>
                        {% endfor %}
                    </div></section>
                {% endif %}
                {% endfor %}
            </div></div></div></main>
{% endblock %}
