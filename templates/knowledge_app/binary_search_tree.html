{% extends 'knowledge_app/base.html' %}

{% block title %}äºŒå‰æœç´¢æ ‘ - è®¡ç®—æœºç§‘å­¦å­¦ä¹ å¹³å°{% endblock %}

{% block content %}
<div class="page-container fade-in"><!-- é¢åŒ…å±‘å¯¼èˆª --><div class="breadcrumb"><a href="{% url 'knowledge_app:index' %}">é¦–é¡µ</a><span>></span><span>æ•°æ®ç»“æ„</span><span>></span><span>äºŒå‰æœç´¢æ ‘</span></div><!-- é¡µé¢å¤´éƒ¨ --><div class="page-header slide-in-left"><h1><span class="page-icon">ğŸŒ³</span>
            äºŒå‰æœç´¢æ ‘ (Binary Search Tree)
        </h1><p>å…·æœ‰ç‰¹æ®Šæ€§è´¨çš„äºŒå‰æ ‘ï¼Œæ”¯æŒé«˜æ•ˆçš„æœç´¢ã€æ’å…¥å’Œåˆ é™¤æ“ä½œ</p></div><!-- ä¸»è¦å†…å®¹ --><div class="content-card slide-in-right"><!-- æ¦‚å¿µä»‹ç» --><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ”</span>
                ä»€ä¹ˆæ˜¯äºŒå‰æœç´¢æ ‘
            </h2><div class="concept-explanation"><p class="concept-intro">
                    äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„äºŒå‰æ ‘ï¼Œå¯¹äºæ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œ
                    å…¶<strong>å·¦å­æ ‘</strong>ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„å€¼éƒ½å°äºè¯¥èŠ‚ç‚¹çš„å€¼ï¼Œ
                    å…¶<strong>å³å­æ ‘</strong>ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„å€¼éƒ½å¤§äºè¯¥èŠ‚ç‚¹çš„å€¼ã€‚
                </p><div class="key-points"><div class="point-item"><span class="point-icon">ğŸ“</span><div class="point-content"><h4>æœ‰åºæ€§è´¨</h4><p>å·¦å­æ ‘ < æ ¹èŠ‚ç‚¹ < å³å­æ ‘ï¼Œè¿™ä¸ªæ€§è´¨é€’å½’é€‚ç”¨äºæ‰€æœ‰å­æ ‘</p></div></div><div class="point-item"><span class="point-icon">ğŸ”</span><div class="point-content"><h4>é«˜æ•ˆæœç´¢</h4><p>åˆ©ç”¨æœ‰åºæ€§è´¨ï¼Œæ¯æ¬¡æ¯”è¾ƒå¯ä»¥æ’é™¤ä¸€åŠçš„æœç´¢ç©ºé—´</p></div></div><div class="point-item"><span class="point-icon">ğŸ”„</span><div class="point-content"><h4>åŠ¨æ€æ“ä½œ</h4><p>æ”¯æŒåŠ¨æ€æ’å…¥å’Œåˆ é™¤ï¼ŒåŒæ—¶ä¿æŒæ ‘çš„æœ‰åºæ€§è´¨</p></div></div></div></div></div><!-- å¯è§†åŒ–æ¼”ç¤º --><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ®</span>
                äº¤äº’å¼æ¼”ç¤º
            </h2><div class="interactive-demo"><div class="demo-controls"><div class="control-group"><input type="number" id="node-value" placeholder="è¾“å…¥èŠ‚ç‚¹å€¼" min="1" max="99"><button class="demo-btn primary" onclick="insertNode()">æ’å…¥èŠ‚ç‚¹</button><button class="demo-btn" onclick="searchNode()">æŸ¥æ‰¾èŠ‚ç‚¹</button><button class="demo-btn" onclick="deleteNode()">åˆ é™¤èŠ‚ç‚¹</button><button class="demo-btn" onclick="clearTree()">æ¸…ç©ºæ ‘</button></div><div class="control-group"><button class="demo-btn" onclick="generateRandomTree()">ç”Ÿæˆéšæœºæ ‘</button><button class="demo-btn" onclick="showTraversal('inorder')">ä¸­åºéå†</button><button class="demo-btn" onclick="showTraversal('preorder')">å‰åºéå†</button><button class="demo-btn" onclick="showTraversal('postorder')">ååºéå†</button></div></div><div id="tree-display" class="tree-display"><div class="empty-tree">æ ‘ä¸ºç©ºï¼Œè¯·æ’å…¥èŠ‚ç‚¹</div></div><div class="tree-info"><div class="info-row"><div class="info-item"><span class="info-label">èŠ‚ç‚¹æ•°é‡ï¼š</span><span id="node-count">0</span></div><div class="info-item"><span class="info-label">æ ‘çš„é«˜åº¦ï¼š</span><span id="tree-height">0</span></div><div class="info-item"><span class="info-label">æœ€å°å€¼ï¼š</span><span id="min-value">-</span></div><div class="info-item"><span class="info-label">æœ€å¤§å€¼ï¼š</span><span id="max-value">-</span></div></div><div class="operation-result" id="operation-result"></div><div class="traversal-result" id="traversal-result"></div></div></div></div><!-- åŸºæœ¬æ“ä½œ --><div class="content-section"><h2 class="section-title"><span class="section-icon">âš™ï¸</span>
                åŸºæœ¬æ“ä½œ
            </h2><div class="operations-grid"><div class="operation-card"><h4 class="operation-title"><span class="op-icon">ğŸ”</span>
                        æœç´¢æ“ä½œ
                    </h4><div class="operation-steps"><p>1. ä»æ ¹èŠ‚ç‚¹å¼€å§‹</p><p>2. å¦‚æœç›®æ ‡å€¼ç­‰äºå½“å‰èŠ‚ç‚¹ï¼Œè¿”å›æ‰¾åˆ°</p><p>3. å¦‚æœç›®æ ‡å€¼å°äºå½“å‰èŠ‚ç‚¹ï¼Œæœç´¢å·¦å­æ ‘</p><p>4. å¦‚æœç›®æ ‡å€¼å¤§äºå½“å‰èŠ‚ç‚¹ï¼Œæœç´¢å³å­æ ‘</p><p>5. å¦‚æœåˆ°è¾¾ç©ºèŠ‚ç‚¹ï¼Œè¿”å›æœªæ‰¾åˆ°</p></div><div class="complexity">æ—¶é—´å¤æ‚åº¦ï¼šO(h)ï¼Œhä¸ºæ ‘é«˜</div></div><div class="operation-card"><h4 class="operation-title"><span class="op-icon">â•</span>
                        æ’å…¥æ“ä½œ
                    </h4><div class="operation-steps"><p>1. ä»æ ¹èŠ‚ç‚¹å¼€å§‹æœç´¢æ’å…¥ä½ç½®</p><p>2. å¦‚æœæ–°å€¼å°äºå½“å‰èŠ‚ç‚¹ï¼Œå‘å·¦å­æ ‘æœç´¢</p><p>3. å¦‚æœæ–°å€¼å¤§äºå½“å‰èŠ‚ç‚¹ï¼Œå‘å³å­æ ‘æœç´¢</p><p>4. æ‰¾åˆ°ç©ºä½ç½®æ—¶ï¼Œåˆ›å»ºæ–°èŠ‚ç‚¹</p><p>5. å°†æ–°èŠ‚ç‚¹è¿æ¥åˆ°çˆ¶èŠ‚ç‚¹</p></div><div class="complexity">æ—¶é—´å¤æ‚åº¦ï¼šO(h)ï¼Œhä¸ºæ ‘é«˜</div></div><div class="operation-card"><h4 class="operation-title"><span class="op-icon">â–</span>
                        åˆ é™¤æ“ä½œ
                    </h4><div class="operation-steps"><p>1. æ‰¾åˆ°è¦åˆ é™¤çš„èŠ‚ç‚¹</p><p>2. æƒ…å†µ1ï¼šå¶å­èŠ‚ç‚¹ï¼Œç›´æ¥åˆ é™¤</p><p>3. æƒ…å†µ2ï¼šåªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œç”¨å­èŠ‚ç‚¹æ›¿æ¢</p><p>4. æƒ…å†µ3ï¼šæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œç”¨åç»§èŠ‚ç‚¹æ›¿æ¢</p><p>5. é€’å½’åˆ é™¤åç»§èŠ‚ç‚¹</p></div><div class="complexity">æ—¶é—´å¤æ‚åº¦ï¼šO(h)ï¼Œhä¸ºæ ‘é«˜</div></div></div></div><!-- éå†æ–¹å¼ --><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ”„</span>
                æ ‘çš„éå†
            </h2><div class="traversal-methods"><div class="traversal-card"><h4 class="traversal-title"><span class="traversal-icon">ğŸ“</span>
                        ä¸­åºéå† (Inorder)
                    </h4><div class="traversal-order">å·¦å­æ ‘ â†’ æ ¹èŠ‚ç‚¹ â†’ å³å­æ ‘</div><div class="traversal-feature"><strong>ç‰¹ç‚¹ï¼š</strong>å¯¹BSTè¿›è¡Œä¸­åºéå†å¾—åˆ°æœ‰åºåºåˆ—
                    </div><div class="traversal-code"><code>inorder(node.left) â†’ visit(node) â†’ inorder(node.right)</code></div></div><div class="traversal-card"><h4 class="traversal-title"><span class="traversal-icon">ğŸ“‹</span>
                        å‰åºéå† (Preorder)
                    </h4><div class="traversal-order">æ ¹èŠ‚ç‚¹ â†’ å·¦å­æ ‘ â†’ å³å­æ ‘</div><div class="traversal-feature"><strong>ç‰¹ç‚¹ï¼š</strong>å¯ç”¨äºå¤åˆ¶æ ‘æˆ–è·å–æ ‘çš„å‰ç¼€è¡¨è¾¾å¼
                    </div><div class="traversal-code"><code>visit(node) â†’ preorder(node.left) â†’ preorder(node.right)</code></div></div><div class="traversal-card"><h4 class="traversal-title"><span class="traversal-icon">ğŸ“„</span>
                        ååºéå† (Postorder)
                    </h4><div class="traversal-order">å·¦å­æ ‘ â†’ å³å­æ ‘ â†’ æ ¹èŠ‚ç‚¹</div><div class="traversal-feature"><strong>ç‰¹ç‚¹ï¼š</strong>å¯ç”¨äºå®‰å…¨åˆ é™¤æ ‘æˆ–è®¡ç®—ç›®å½•å¤§å°
                    </div><div class="traversal-code"><code>postorder(node.left) â†’ postorder(node.right) â†’ visit(node)</code></div></div></div></div><!-- ä»£ç å®ç° --><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ’»</span>
                ä»£ç å®ç°
            </h2><div class="code-example"><div class="code-header"><span class="code-title">Pythonå®ç°</span><button class="copy-btn" onclick="copyCode('bst-code')">å¤åˆ¶ä»£ç </button></div><pre id="bst-code"><code class="language-python">class TreeNode:
    def __init__(self, val=0, left=None, right=None):
        self.val = val
        self.left = left
        self.right = right

class BinarySearchTree:
    def __init__(self):
        self.root = None
    
    def insert(self, val):
        """æ’å…¥èŠ‚ç‚¹"""
        self.root = self._insert_recursive(self.root, val)
    
    def _insert_recursive(self, node, val):
        if node is None:
            return TreeNode(val)
        
        if val < node.val:
            node.left = self._insert_recursive(node.left, val)
        elif val > node.val:
            node.right = self._insert_recursive(node.right, val)
        
        return node
    
    def search(self, val):
        """æœç´¢èŠ‚ç‚¹"""
        return self._search_recursive(self.root, val)
    
    def _search_recursive(self, node, val):
        if node is None or node.val == val:
            return node
        
        if val < node.val:
            return self._search_recursive(node.left, val)
        else:
            return self._search_recursive(node.right, val)
    
    def delete(self, val):
        """åˆ é™¤èŠ‚ç‚¹"""
        self.root = self._delete_recursive(self.root, val)
    
    def _delete_recursive(self, node, val):
        if node is None:
            return node
        
        if val < node.val:
            node.left = self._delete_recursive(node.left, val)
        elif val > node.val:
            node.right = self._delete_recursive(node.right, val)
        else:
            # æ‰¾åˆ°è¦åˆ é™¤çš„èŠ‚ç‚¹
            if node.left is None:
                return node.right
            elif node.right is None:
                return node.left
            
            # èŠ‚ç‚¹æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œæ‰¾åˆ°å³å­æ ‘çš„æœ€å°å€¼
            min_node = self._find_min(node.right)
            node.val = min_node.val
            node.right = self._delete_recursive(node.right, min_node.val)
        
        return node
    
    def _find_min(self, node):
        """æ‰¾åˆ°å­æ ‘ä¸­çš„æœ€å°å€¼èŠ‚ç‚¹"""
        while node.left:
            node = node.left
        return node
    
    def inorder_traversal(self):
        """ä¸­åºéå†"""
        result = []
        self._inorder_recursive(self.root, result)
        return result
    
    def _inorder_recursive(self, node, result):
        if node:
            self._inorder_recursive(node.left, result)
            result.append(node.val)
            self._inorder_recursive(node.right, result)
    
    def preorder_traversal(self):
        """å‰åºéå†"""
        result = []
        self._preorder_recursive(self.root, result)
        return result
    
    def _preorder_recursive(self, node, result):
        if node:
            result.append(node.val)
            self._preorder_recursive(node.left, result)
            self._preorder_recursive(node.right, result)
    
    def postorder_traversal(self):
        """ååºéå†"""
        result = []
        self._postorder_recursive(self.root, result)
        return result
    
    def _postorder_recursive(self, node, result):
        if node:
            self._postorder_recursive(node.left, result)
            self._postorder_recursive(node.right, result)
            result.append(node.val)

# ä½¿ç”¨ç¤ºä¾‹
bst = BinarySearchTree()
values = [50, 30, 70, 20, 40, 60, 80]
for val in values:
    bst.insert(val)

print("ä¸­åºéå†:", bst.inorder_traversal())  # [20, 30, 40, 50, 60, 70, 80]
print("æŸ¥æ‰¾40:", bst.search(40) is not None)  # True
bst.delete(30)
print("åˆ é™¤30å:", bst.inorder_traversal())  # [20, 40, 50, 60, 70, 80]</code></pre></div></div><!-- æ€§èƒ½åˆ†æ --><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ“Š</span>
                æ€§èƒ½åˆ†æ
            </h2><div class="performance-comparison"><div class="perf-scenario"><h4 class="scenario-title"><span class="scenario-icon">ğŸ†</span>
                        å¹³è¡¡æ ‘
                    </h4><div class="scenario-visual"><div class="tree-shape balanced"><div class="tree-level">50</div><div class="tree-level">30&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;70</div><div class="tree-level">20&nbsp;&nbsp;40&nbsp;&nbsp;60&nbsp;&nbsp;80</div></div></div><div class="scenario-stats"><p><strong>é«˜åº¦ï¼š</strong>O(log n)</p><p><strong>æœç´¢ï¼š</strong>O(log n)</p><p><strong>æ’å…¥ï¼š</strong>O(log n)</p><p><strong>åˆ é™¤ï¼š</strong>O(log n)</p></div></div><div class="perf-scenario"><h4 class="scenario-title"><span class="scenario-icon">âš ï¸</span>
                        é€€åŒ–æ ‘
                    </h4><div class="scenario-visual"><div class="tree-shape degenerate"><div class="tree-level">10</div><div class="tree-level">&nbsp;&nbsp;20</div><div class="tree-level">&nbsp;&nbsp;&nbsp;&nbsp;30</div><div class="tree-level">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;40</div></div></div><div class="scenario-stats"><p><strong>é«˜åº¦ï¼š</strong>O(n)</p><p><strong>æœç´¢ï¼š</strong>O(n)</p><p><strong>æ’å…¥ï¼š</strong>O(n)</p><p><strong>åˆ é™¤ï¼š</strong>O(n)</p></div></div></div></div><!-- åº”ç”¨åœºæ™¯ --><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ¯</span>
                å®é™…åº”ç”¨
            </h2><div class="application-grid"><div class="app-card"><span class="app-icon">ğŸ—ƒï¸</span><h4>æ•°æ®åº“ç´¢å¼•</h4><p>Bæ ‘å’ŒB+æ ‘æ˜¯BSTçš„å˜ç§</p></div><div class="app-card"><span class="app-icon">ğŸ“</span><h4>æ–‡ä»¶ç³»ç»Ÿ</h4><p>ç›®å½•ç»“æ„å’Œæ–‡ä»¶ç´¢å¼•</p></div><div class="app-card"><span class="app-icon">ğŸ”</span><h4>æœç´¢å¼•æ“</h4><p>å€’æ’ç´¢å¼•å’Œå…³é”®è¯æœç´¢</p></div><div class="app-card"><span class="app-icon">ğŸ®</span><h4>æ¸¸æˆå¼€å‘</h4><p>ç¢°æ’æ£€æµ‹å’Œç©ºé—´åˆ†å‰²</p></div></div></div></div><!-- å­¦ä¹ æç¤º --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ’¡</span>
                å­¦ä¹ è¦ç‚¹
            </h2><div class="unified-grid unified-grid-2"><div class="info-box info-box-info"><span class="info-icon">ğŸ“</span><strong>BSTæ€§è´¨ï¼š</strong>æ·±å…¥ç†è§£å·¦å°å³å¤§çš„æœ‰åºæ€§è´¨ã€‚
                </div><div class="info-box info-box-success"><span class="info-icon">ğŸ”„</span><strong>é€’å½’æ€ç»´ï¼š</strong>æŒæ¡é€’å½’å®ç°å„ç§æ“ä½œçš„æ–¹æ³•ã€‚
                </div><div class="info-box info-box-warning"><span class="info-icon">âš ï¸</span><strong>é€€åŒ–é—®é¢˜ï¼š</strong>äº†è§£BSTå¯èƒ½é€€åŒ–ä¸ºé“¾è¡¨çš„æƒ…å†µã€‚
                </div><div class="info-box info-box-info"><span class="info-icon">âš–ï¸</span><strong>å¹³è¡¡ä¼˜åŒ–ï¼š</strong>å­¦ä¹ AVLæ ‘ã€çº¢é»‘æ ‘ç­‰è‡ªå¹³è¡¡å˜ç§ã€‚
                </div></div></div></div></div><style>.interactive-demo {background:#f8f9fa;border-radius:12px;padding:25px;margin:20px 0}.demo-controls {display:flex;flex-direction:column;gap:15px;margin-bottom:25px}.control-group {display:flex;align-items:center;gap:10px;flex-wrap:wrap;justify-content:center}.control-group input {padding:8px 12px;border:1px solid #ddd;border-radius:6px;width:150px}.demo-btn {padding:8px 16px;background:#6c757d;color:white;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:all 0.3s ease;font-size:14px}.demo-btn.primary {background:#007bff}.demo-btn:hover {transform:translateY(-1px);box-shadow:0 2px 8px rgba(0,0,0,0.2)}.tree-display {background:white;border-radius:8px;padding:30px;border:1px solid #e9ecef;margin:20px 0;min-height:300px;display:flex;justify-content:center;align-items:center;overflow:auto}.empty-tree {color:#999;font-style:italic;font-size:18px}.tree-node {position:relative;display:inline-block;margin:10px}.node-circle {width:40px;height:40px;border-radius:50%;background:#007bff;color:white;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:14px;transition:all 0.3s ease;position:relative;z-index:2}.node-circle.highlight {background:#ffc107;color:#333;transform:scale(1.2);box-shadow:0 4px 12px rgba(255,193,7,0.4)}.node-circle.found {background:#28a745;animation:pulse 1s infinite}.node-circle.deleted {background:#dc3545;animation:fadeOut 1s ease-out}.tree-info {background:white;border-radius:8px;padding:20px;border:1px solid #e9ecef}.info-row {display:grid;grid-template-columns:repeat(auto-fit, minmax(150px, 1fr));gap:15px;margin-bottom:15px}.info-item {text-align:center;padding:10px;background:#f8f9fa;border-radius:6px}.info-label {display:block;font-size:14px;color:#666;margin-bottom:5px}.info-item span:last-child {font-size:18px;font-weight:600;color:#007bff}.operation-result, .traversal-result {text-align:center;padding:15px;border-radius:8px;font-weight:600;margin-top:15px}.operation-result.success, .traversal-result {background:#d4edda;color:#155724;border:1px solid #c3e6cb}.operation-result.error {background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.operations-grid {display:grid;grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));gap:20px;margin:20px 0}.operation-card {background:#f8f9fa;padding:20px;border-radius:12px;border:1px solid #e9ecef}.operation-title {display:flex;align-items:center;gap:10px;margin-bottom:15px;color:#333}.operation-steps {margin:15px 0}.operation-steps p {margin:5px 0;color:#555;font-size:14px}.complexity {background:#e9ecef;padding:8px 12px;border-radius:6px;font-size:14px;color:#495057;font-weight:600;margin-top:10px}.traversal-methods {display:grid;grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));gap:20px;margin:20px 0}.traversal-card {background:#f8f9fa;padding:20px;border-radius:12px;border:1px solid #e9ecef}.traversal-title {display:flex;align-items:center;gap:10px;margin-bottom:15px;color:#333}.traversal-order {background:#e9ecef;padding:10px;border-radius:6px;text-align:center;font-weight:600;margin:10px 0;color:#495057}.traversal-feature {color:#666;margin:10px 0;font-size:14px}.traversal-code {background:#2d3748;color:#e2e8f0;padding:10px;border-radius:6px;font-family:'Courier New', monospace;font-size:13px;margin-top:10px}.performance-comparison {display:grid;grid-template-columns:repeat(auto-fit, minmax(350px, 1fr));gap:30px;margin:20px 0}.perf-scenario {background:#f8f9fa;padding:25px;border-radius:12px;border:1px solid #e9ecef;text-align:center}.scenario-title {display:flex;align-items:center;justify-content:center;gap:10px;margin-bottom:20px;color:#333}.scenario-visual {margin:20px 0;padding:20px;background:white;border-radius:8px;border:1px solid #ddd}.tree-shape {font-family:'Courier New', monospace;font-size:14px;line-height:1.8}.tree-shape.balanced {color:#28a745}.tree-shape.degenerate {color:#dc3545}.tree-level {margin:5px 0}.scenario-stats p {margin:8px 0;color:#555;font-size:14px}.application-grid {display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:20px;margin:20px 0}.app-card {background:#f8f9fa;padding:20px;border-radius:12px;text-align:center;border:1px solid #e9ecef;transition:all 0.3s ease}.app-card:hover {transform:translateY(-5px);box-shadow:0 8px 25px rgba(0,0,0,0.1);background:white}.app-icon {font-size:2rem;display:block;margin-bottom:15px}.app-card h4 {color:#333;margin-bottom:10px}.app-card p {color:#666;font-size:14px}@keyframes pulse {0%, 100% {transform:scale(1.2)}50% {transform:scale(1.4)}}@keyframes fadeOut {from {opacity:1;transform:scale(1)}to {opacity:0;transform:scale(0.8)}}@media (max-width:768px) {.control-group {flex-direction:column;align-items:stretch}.control-group input {width:100%}.demo-btn {width:100%;margin:2px 0}.info-row {grid-template-columns:1fr}.operations-grid, .traversal-methods, .performance-comparison {grid-template-columns:1fr}.tree-display {padding:15px;overflow-x:auto}}</style><script>class TreeNode { constructor(val) { this.val = val; this.left = null; this.right = null; } } class BinarySearchTree { constructor() { this.root = null; this.nodeCount = 0; } insert(val) { if (this.search(val)) { return { success: false, message: `èŠ‚ç‚¹ ${val} å·²å­˜åœ¨` }; } this.root = this._insertRecursive(this.root, val); this.nodeCount++; return { success: true, message: `æˆåŠŸæ’å…¥èŠ‚ç‚¹ ${val}` }; } _insertRecursive(node, val) { if (node === null) { return new TreeNode(val); } if (val < node.val) { node.left = this._insertRecursive(node.left, val); } else if (val > node.val) { node.right = this._insertRecursive(node.right, val); } return node; } search(val) { return this._searchRecursive(this.root, val); } _searchRecursive(node, val) { if (node === null) { return false; } if (val === node.val) { return true; } if (val < node.val) { return this._searchRecursive(node.left, val); } else { return this._searchRecursive(node.right, val); } } delete(val) { if (!this.search(val)) { return { success: false, message: `èŠ‚ç‚¹ ${val} ä¸å­˜åœ¨` }; } this.root = this._deleteRecursive(this.root, val); this.nodeCount--; return { success: true, message: `æˆåŠŸåˆ é™¤èŠ‚ç‚¹ ${val}` }; } _deleteRecursive(node, val) { if (node === null) { return node; } if (val < node.val) { node.left = this._deleteRecursive(node.left, val); } else if (val > node.val) { node.right = this._deleteRecursive(node.right, val); } else { if (node.left === null) { return node.right; } else if (node.right === null) { return node.left; } const minNode = this._findMin(node.right); node.val = minNode.val; node.right = this._deleteRecursive(node.right, minNode.val); } return node; } _findMin(node) { while (node.left !== null) { node = node.left; } return node; } getHeight() { return this._getHeightRecursive(this.root); } _getHeightRecursive(node) { if (node === null) { return 0; } const leftHeight = this._getHeightRecursive(node.left); const rightHeight = this._getHeightRecursive(node.right); return Math.max(leftHeight, rightHeight) + 1; } getMin() { if (this.root === null) return null; const minNode = this._findMin(this.root); return minNode.val; } getMax() { if (this.root === null) return null; let node = this.root; while (node.right !== null) { node = node.right; } return node.val; } inorderTraversal() { const result = []; this._inorderRecursive(this.root, result); return result; } _inorderRecursive(node, result) { if (node !== null) { this._inorderRecursive(node.left, result); result.push(node.val); this._inorderRecursive(node.right, result); } } preorderTraversal() { const result = []; this._preorderRecursive(this.root, result); return result; } _preorderRecursive(node, result) { if (node !== null) { result.push(node.val); this._preorderRecursive(node.left, result); this._preorderRecursive(node.right, result); } } postorderTraversal() { const result = []; this._postorderRecursive(this.root, result); return result; } _postorderRecursive(node, result) { if (node !== null) { this._postorderRecursive(node.left, result); this._postorderRecursive(node.right, result); result.push(node.val); } } clear() { this.root = null; this.nodeCount = 0; } } let bst = new BinarySearchTree(); function displayTree() { const displayElement = document.getElementById('tree-display'); if (bst.root === null) { displayElement.innerHTML = '<div class="empty-tree">æ ‘ä¸ºç©ºï¼Œè¯·æ’å…¥èŠ‚ç‚¹</div>'; return; } const inorder = bst.inorderTraversal(); displayElement.innerHTML = ` <div style="text-align: center;"><div style="margin-bottom: 20px; font-size: 18px; color: #333;"> æ ‘ç»“æ„ï¼ˆä¸­åºéå†ï¼‰ </div><div style="display: flex; justify-content: center; align-items: center; gap: 10px; flex-wrap: wrap;"> ${inorder.map(val => ` <div class="node-circle" id="node-${val}"> ${val} </div> `).join('')} </div><div style="margin-top: 15px; font-size: 14px; color: #666;"> æœ‰åºåºåˆ—ï¼š${inorder.join(' â†’ ')} </div></div> `; } function updateInfo() { document.getElementById('node-count').textContent = bst.nodeCount; document.getElementById('tree-height').textContent = bst.getHeight(); document.getElementById('min-value').textContent = bst.getMin() || '-'; document.getElementById('max-value').textContent = bst.getMax() || '-'; } function showOperationResult(result) { const resultElement = document.getElementById('operation-result'); resultElement.textContent = result.message; resultElement.className = `operation-result ${result.success ? 'success' : 'error'}`; } function insertNode() { const input = document.getElementById('node-value'); const value = parseInt(input.value); if (isNaN(value) || value < 1 || value > 99) { showOperationResult({ success: false, message: 'è¯·è¾“å…¥1-99ä¹‹é—´çš„æ•°å­—' }); return; } const result = bst.insert(value); displayTree(); updateInfo(); showOperationResult(result); if (result.success) { setTimeout(() => { const nodeElement = document.getElementById(`node-${value}`); if (nodeElement) { nodeElement.classList.add('highlight'); setTimeout(() => { nodeElement.classList.remove('highlight'); }, 2000); } }, 100); } input.value = ''; } function searchNode() { const input = document.getElementById('node-value'); const value = parseInt(input.value); if (isNaN(value)) { showOperationResult({ success: false, message: 'è¯·è¾“å…¥è¦æŸ¥æ‰¾çš„æ•°å­—' }); return; } const found = bst.search(value); const result = { success: found, message: found ? `æ‰¾åˆ°èŠ‚ç‚¹ ${value}` : `æœªæ‰¾åˆ°èŠ‚ç‚¹ ${value}` }; showOperationResult(result); if (found) { setTimeout(() => { const nodeElement = document.getElementById(`node-${value}`); if (nodeElement) { nodeElement.classList.add('found'); setTimeout(() => { nodeElement.classList.remove('found'); }, 2000); } }, 100); } } function deleteNode() { const input = document.getElementById('node-value'); const value = parseInt(input.value); if (isNaN(value)) { showOperationResult({ success: false, message: 'è¯·è¾“å…¥è¦åˆ é™¤çš„æ•°å­—' }); return; } const result = bst.delete(value); displayTree(); updateInfo(); showOperationResult(result); input.value = ''; } function clearTree() { bst.clear(); displayTree(); updateInfo(); showOperationResult({ success: true, message: 'æ ‘å·²æ¸…ç©º' }); document.getElementById('node-value').value = ''; document.getElementById('traversal-result').textContent = ''; } function generateRandomTree() { bst.clear(); const count = Math.floor(Math.random() * 4) + 5; const values = new Set(); while (values.size < count) { values.add(Math.floor(Math.random() * 90) + 10); } Array.from(values).forEach(val => bst.insert(val)); displayTree(); updateInfo(); showOperationResult({ success: true, message: `ç”Ÿæˆäº†åŒ…å« ${count} ä¸ªèŠ‚ç‚¹çš„éšæœºæ ‘` }); } function showTraversal(type) { if (bst.nodeCount === 0) { showOperationResult({ success: false, message: 'æ ‘ä¸ºç©ºï¼Œæ— æ³•éå†' }); return; } let result, typeName; switch (type) { case 'inorder': result = bst.inorderTraversal(); typeName = 'ä¸­åºéå†'; break; case 'preorder': result = bst.preorderTraversal(); typeName = 'å‰åºéå†'; break; case 'postorder': result = bst.postorderTraversal(); typeName = 'ååºéå†'; break; } const resultElement = document.getElementById('traversal-result'); resultElement.textContent = `${typeName}ç»“æœï¼š${result.join(' â†’ ')}`; resultElement.className = 'traversal-result'; } function copyCode(elementId) { const codeElement = document.getElementById(elementId); const text = codeElement.textContent; navigator.clipboard.writeText(text).then(() => { alert('ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼'); }).catch(() => { alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶'); }); } document.addEventListener('DOMContentLoaded', function() { displayTree(); updateInfo(); document.getElementById('node-value').addEventListener('keypress', function(e) { if (e.key === 'Enter') { insertNode(); } }); });</script>

{% endblock %}
