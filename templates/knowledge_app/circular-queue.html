{% extends 'knowledge_app/base.html' %}

{% block title %}å¾ªç¯é˜Ÿåˆ— - è®¡ç®—æœºç§‘å­¦å­¦ä¹ å¹³å°{% endblock %}

{% block content %}
<style>.page-container {max-width:1200px;margin:0 auto;padding:20px;font-family:'Arial', sans-serif}.knowledge-section {background:white;border-radius:12px;box-shadow:0 4px 6px rgba(0,0,0,0.1);margin-bottom:30px;padding:30px;border-left:5px solid #3498db}.section-header {display:flex;align-items:center;margin-bottom:25px;border-bottom:2px solid #ecf0f1;padding-bottom:15px}.section-icon {font-size:2em;margin-right:15px}.section-title {font-size:1.8em;color:#2c3e50;margin:0}.concept-grid {display:grid;grid-template-columns:repeat(auto-fit, minmax(250px, 1fr));gap:20px;margin:20px 0}.concept-card {background:#f8f9fa;border:1px solid #e9ecef;border-radius:8px;padding:20px;text-align:center;transition:transform 0.3s ease}.concept-card:hover {transform:translateY(-5px);box-shadow:0 4px 12px rgba(0,0,0,0.15)}.canvas-container {background:#f8f9fa;border:2px solid #dee2e6;border-radius:8px;padding:20px;margin:20px 0;text-align:center}.canvas-controls {margin:15px 0}.btn {background:#3498db;color:white;border:none;padding:12px 24px;border-radius:8px;cursor:pointer;margin:0 8px;font-size:14px;font-weight:bold;transition:all 0.3s ease;box-shadow:0 4px 15px rgba(52, 152, 219, 0.3);position:relative;overflow:hidden}.btn:hover {transform:translateY(-2px);box-shadow:0 6px 20px rgba(52, 152, 219, 0.4)}.btn:active {transform:translateY(0);box-shadow:0 2px 10px rgba(52, 152, 219, 0.2)}.btn:disabled {background:#95a5a6;cursor:not-allowed;transform:none;box-shadow:none}.btn-enqueue {background:linear-gradient(135deg, #27ae60, #2ecc71)}.btn-enqueue:hover {background:linear-gradient(135deg, #229954, #27ae60)}.btn-dequeue {background:linear-gradient(135deg, #e74c3c, #ec7063)}.btn-dequeue:hover {background:linear-gradient(135deg, #c0392b, #e74c3c)}.btn-reset {background:linear-gradient(135deg, #f39c12, #f7dc6f)}.btn-reset:hover {background:linear-gradient(135deg, #d68910, #f39c12)}.btn-demo {background:linear-gradient(135deg, #9b59b6, #bb8fce)}.btn-demo:hover {background:linear-gradient(135deg, #8e44ad, #9b59b6)}.btn::before {content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);transition:left 0.5s}.btn:hover::before {left:100%}.code-container {background:#2c3e50;color:#ecf0f1;border-radius:8px;margin:20px 0;overflow:hidden}.code-tabs {display:flex;background:#34495e}.code-tab {padding:12px 20px;cursor:pointer;border:none;background:transparent;color:#bdc3c7;font-weight:bold;transition:all 0.3s ease}.code-tab.active {background:#3498db;color:white}.code-content {position:relative;padding:20px;font-family:'Courier New', monospace;line-height:1.6;overflow-x:auto}.copy-btn {position:absolute;top:10px;right:10px;background:#27ae60;color:white;border:none;padding:5px 10px;border-radius:4px;cursor:pointer;font-size:12px}.copy-btn:hover {background:#229954}.quiz-question {background:#fff3cd;border:1px solid #ffeaa7;border-radius:8px;padding:20px;margin:15px 0}.quiz-answer {background:#d1ecf1;border:1px solid #bee5eb;border-radius:8px;padding:15px;margin-top:10px;display:none}.show-answer-btn {background:#17a2b8;color:white;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;margin-top:10px}.analogy-box {background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);color:white;padding:25px;border-radius:12px;margin:20px 0}.highlight {background:#ffffcc;padding:2px 4px;border-radius:3px;font-weight:bold}.difficulty-badge {display:inline-block;padding:5px 15px;border-radius:20px;font-size:0.9em;font-weight:bold;color:white;background:#e74c3c}.key-point {border-left:4px solid #e74c3c;background:#fdf2f2;padding:15px;margin:15px 0;border-radius:0 8px 8px 0}.comparison-grid {display:grid;grid-template-columns:1fr 1fr;gap:20px;margin:20px 0}.comparison-card {padding:20px;border-radius:8px;border:2px solid}.vs-problem {border-color:#e74c3c;background:#fdf2f2}.vs-solution {border-color:#27ae60;background:#eafaf1}.formula-box {background:#e8f4fd;border:2px solid #3498db;border-radius:8px;padding:20px;margin:20px 0;text-align:center}.formula {font-family:'Courier New', monospace;font-size:18px;font-weight:bold;color:#2c3e50;margin:10px 0}</style><div class="page-container fade-in"><!-- é¢åŒ…å±‘å¯¼èˆª --><div class="breadcrumb"><a href="{% url 'knowledge_app:index' %}">é¦–é¡µ</a><span>></span><span>æ•°æ®ç»“æ„</span><span>></span><span>å¾ªç¯é˜Ÿåˆ—</span></div><!-- é¡µé¢å¤´éƒ¨ --><div class="page-header slide-in-left"><h1><span class="page-icon">ğŸ”„</span>
            å¾ªç¯é˜Ÿåˆ— (Circular Queue)
        </h1><p>è§£å†³å‡æº¢å‡ºé—®é¢˜çš„æ™ºèƒ½é˜Ÿåˆ—ï¼Œå……åˆ†åˆ©ç”¨æ•°ç»„ç©ºé—´</p></div><!-- ğŸ“‹ çŸ¥è¯†ç‚¹æ¦‚è¿° --><div class="knowledge-section slide-in-right"><div class="section-header"><span class="section-icon">ğŸ“‹</span><h2 class="section-title">çŸ¥è¯†ç‚¹æ¦‚è¿°</h2></div><div class="key-point"><strong>æ ¸å¿ƒæ¦‚å¿µï¼š</strong>å¾ªç¯é˜Ÿåˆ—æ˜¯é¡ºåºé˜Ÿåˆ—çš„æ”¹è¿›ç‰ˆæœ¬ï¼Œé€šè¿‡å°†æ•°ç»„é¦–å°¾ç›¸è¿å½¢æˆç¯å½¢ç»“æ„ï¼Œä½¿ç”¨å–æ¨¡è¿ç®—å®ç°æŒ‡é’ˆçš„å¾ªç¯ç§»åŠ¨ï¼Œå½»åº•è§£å†³äº†"å‡æº¢å‡º"é—®é¢˜ã€‚
        </div><div class="concept-grid"><div class="concept-card"><h3>ğŸ”„ å¾ªç¯ç‰¹æ€§</h3><p>æŒ‡é’ˆåˆ°è¾¾æ•°ç»„æœ«å°¾åè‡ªåŠ¨å›åˆ°å¼€å¤´</p></div><div class="concept-card"><h3>ğŸ“ å–æ¨¡è¿ç®—</h3><p>index = (index + 1) % capacity</p></div><div class="concept-card"><h3>âŒ å‡æº¢å‡ºè§£å†³</h3><p>å……åˆ†åˆ©ç”¨æ‰€æœ‰å¯ç”¨ç©ºé—´</p></div><div class="concept-card"><h3>ğŸ¯ æ»¡ç©ºåˆ¤æ–­</h3><p>é¢„ç•™ä¸€ä¸ªç©ºä½åŒºåˆ†æ»¡å’Œç©ºçŠ¶æ€</p></div></div><div class="formula-box"><h3>ğŸ§® æ ¸å¿ƒå…¬å¼</h3><div class="formula">å…¥é˜Ÿï¼šrear = (rear + 1) % maxSize</div><div class="formula">å‡ºé˜Ÿï¼šfront = (front + 1) % maxSize</div><div class="formula">é˜Ÿæ»¡ï¼š(rear + 1) % maxSize == front</div><div class="formula">é˜Ÿç©ºï¼šfront == rear</div></div><p><span class="difficulty-badge">é«˜çº§</span><strong>å‰ç½®çŸ¥è¯†ï¼š</strong>é¡ºåºé˜Ÿåˆ—ã€å–æ¨¡è¿ç®—ã€æ•°ç»„æ“ä½œ</p></div><!-- ğŸ” æ¦‚å¿µè¯¦è§£ --><div class="knowledge-section"><div class="section-header"><span class="section-icon">ğŸ”</span><h2 class="section-title">æ¦‚å¿µè¯¦è§£</h2></div><div class="analogy-box"><h3>ğŸ  ç”Ÿæ´»ç±»æ¯”ï¼šæ—‹è½¬æœ¨é©¬</h3><p>æƒ³è±¡ä¸€ä¸ªæ—‹è½¬æœ¨é©¬æ¸¸ä¹è®¾æ–½ï¼š</p><ul><li><strong>æœ¨é©¬åº§ä½</strong> = æ•°ç»„å…ƒç´ ï¼ˆå›ºå®šæ•°é‡çš„ä½ç½®ï¼‰</li><li><strong>ä¸Šé©¬ç‚¹</strong> = rearæŒ‡é’ˆï¼ˆæ–°æ¸¸å®¢ä¸Šé©¬çš„ä½ç½®ï¼‰</li><li><strong>ä¸‹é©¬ç‚¹</strong> = frontæŒ‡é’ˆï¼ˆæ¸¸å®¢ç»“æŸæ¸¸æˆä¸‹é©¬çš„ä½ç½®ï¼‰</li><li><strong>æ—‹è½¬</strong> = å¾ªç¯ç‰¹æ€§ï¼ˆåˆ°æœ€åä¸€ä¸ªä½ç½®åå›åˆ°ç¬¬ä¸€ä¸ªï¼‰</li><li><strong>é¢„ç•™ä½ç½®</strong> = ç©ºä½™åº§ä½ï¼ˆåŒºåˆ†æ»¡è½½å’Œç©ºè½¬çŠ¶æ€ï¼‰</li></ul><p>ğŸ’¡ å…³é”®ï¼š<span class="highlight">æœ¨é©¬æ°¸è¿œåœ¨è½¬ï¼Œæ²¡æœ‰"æ­»è§’"æˆ–æµªè´¹çš„ä½ç½®ï¼</span></p></div><h3>âš¡ é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3><div class="comparison-grid"><div class="comparison-card vs-problem"><h4>âŒ é¡ºåºé˜Ÿåˆ—çš„å‡æº¢å‡º</h4><ul><li>æ•°ç»„å‰é¢æœ‰ç©ºä½</li><li>rearæŒ‡é’ˆå·²åˆ°æœ«å°¾</li><li>æ— æ³•ç»§ç»­å…¥é˜Ÿ</li><li>ç©ºé—´åˆ©ç”¨ç‡ä½</li></ul><p style="text-align: center; margin-top: 15px;"><code>[_, _, 3, 4, 5] â† rearå·²æ»¡ï¼Ÿ</code></p></div><div class="comparison-card vs-solution"><h4>âœ… å¾ªç¯é˜Ÿåˆ—çš„è§£å†³</h4><ul><li>æŒ‡é’ˆå¾ªç¯ç§»åŠ¨</li><li>å……åˆ†åˆ©ç”¨ç©ºé—´</li><li>çœŸæ­£çš„æ»¡æ‰åœæ­¢</li><li>ç©ºé—´åˆ©ç”¨ç‡é«˜</li></ul><p style="text-align: center; margin-top: 15px;"><code>[6, 7, 3, 4, 5] â† å¾ªç¯åˆ©ç”¨</code></p></div></div><div class="key-point"><strong>ğŸ”‘ å…³é”®ç†è§£ç‚¹ï¼š</strong><ul><li><strong>ä¸ºä»€ä¹ˆé¢„ç•™ä¸€ä½ï¼Ÿ</strong> å¦‚æœä¸é¢„ç•™ï¼Œå½“front==rearæ—¶æ— æ³•åŒºåˆ†æ˜¯ç©ºè¿˜æ˜¯æ»¡</li><li><strong>å®é™…å®¹é‡</strong> = æ•°ç»„å¤§å° - 1ï¼ˆç‰ºç‰²ä¸€ä¸ªä½ç½®æ¢å–æ¸…æ™°çš„çŠ¶æ€åˆ¤æ–­ï¼‰</li><li><strong>å–æ¨¡è¿ç®—</strong> æ˜¯å®ç°å¾ªç¯çš„æ ¸å¿ƒï¼Œç¡®ä¿æŒ‡é’ˆåœ¨æœ‰æ•ˆèŒƒå›´å†…å¾ªç¯</li><li><strong>çŠ¶æ€åˆ¤æ–­</strong> æ¯”é¡ºåºé˜Ÿåˆ—å¤æ‚ï¼Œéœ€è¦ç†è§£å¾ªç¯é€»è¾‘</li></ul></div></div><!-- ğŸ“Š å¯è§†åŒ–å±•ç¤º --><div class="knowledge-section"><div class="section-header"><span class="section-icon">ğŸ“Š</span><h2 class="section-title">å¯è§†åŒ–å±•ç¤º</h2></div><div class="canvas-container"><h3>ğŸ  å¾ªç¯é˜Ÿåˆ—åŠ¨æ€æ¼”ç¤º</h3><canvas id="queueCanvas" width="800" height="500" style="border: 2px solid #3498db; border-radius: 8px; box-shadow: 0 4px 15px rgba(52, 152, 219, 0.2);"></canvas><div class="canvas-controls"><input type="number" id="inputValue" placeholder="è¾“å…¥æ•°å­—" min="1" max="99" style="padding: 12px; margin-right: 10px; border-radius: 8px; border: 2px solid #3498db; font-size: 16px; outline: none; transition: all 0.3s ease;"><button class="btn btn-enqueue" onclick="enqueue()">ğŸ“¥ å…¥é˜Ÿ</button><button class="btn btn-dequeue" onclick="dequeue()">ğŸ“¤ å‡ºé˜Ÿ</button><button class="btn btn-reset" onclick="resetQueue()">ğŸ”„ é‡ç½®</button><button class="btn btn-demo" onclick="startDemo()">âœ¨ æ¼”ç¤ºå‡æº¢å‡ºè§£å†³</button></div><div id="queueStatus" style="margin-top: 15px; font-weight: bold; color: #2c3e50; padding: 10px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #3498db;"></div></div></div><!-- ğŸ’» ä»£ç å®ç° --><div class="knowledge-section"><div class="section-header"><span class="section-icon">ğŸ’»</span><h2 class="section-title">ä»£ç å®ç°</h2></div><div class="code-container"><div class="code-tabs"><button class="code-tab active" onclick="showCode('cpp')">C++</button><button class="code-tab" onclick="showCode('java')">Java</button><button class="code-tab" onclick="showCode('python')">Python</button></div><div id="cpp-code" class="code-content"><button class="copy-btn" onclick="copyCode('cpp', this)">ğŸ“‹ å¤åˆ¶</button><pre><code>#include &lt;iostream&gt;
using namespace std;

class CircularQueue {
private:
    int* arr;
    int front, rear;
    int maxSize;      // æ•°ç»„å®é™…å¤§å°
    int capacity;     // å¯ç”¨å®¹é‡ = maxSize - 1

public:
    CircularQueue(int size) {
        maxSize = size + 1;  // å¤šåˆ†é…ä¸€ä½ç”¨äºåŒºåˆ†æ»¡ç©º
        capacity = size;
        arr = new int[maxSize];
        front = rear = 0;
    }

    ~CircularQueue() {
        delete[] arr;
    }

    // å…¥é˜Ÿæ“ä½œ
    bool enqueue(int data) {
        if (isFull()) {
            cout << "é˜Ÿåˆ—å·²æ»¡!" << endl;
            return false;
        }

        arr[rear] = data;
        rear = (rear + 1) % maxSize;  // å¾ªç¯ç§»åŠ¨
        cout << "å…¥é˜ŸæˆåŠŸ: " << data << endl;
        return true;
    }

    // å‡ºé˜Ÿæ“ä½œ
    int dequeue() {
        if (isEmpty()) {
            cout << "é˜Ÿåˆ—ä¸ºç©º!" << endl;
            return -1;
        }

        int data = arr[front];
        front = (front + 1) % maxSize;  // å¾ªç¯ç§»åŠ¨
        cout << "å‡ºé˜ŸæˆåŠŸ: " << data << endl;
        return data;
    }

    // æŸ¥çœ‹é˜Ÿå¤´å…ƒç´ 
    int peek() {
        if (isEmpty()) {
            cout << "é˜Ÿåˆ—ä¸ºç©º!" << endl;
            return -1;
        }
        return arr[front];
    }

    // åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º
    bool isEmpty() {
        return front == rear;
    }

    // åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦å·²æ»¡
    bool isFull() {
        return (rear + 1) % maxSize == front;
    }

    // è·å–é˜Ÿåˆ—å¤§å°
    int size() {
        return (rear - front + maxSize) % maxSize;
    }

    // æ˜¾ç¤ºé˜Ÿåˆ—çŠ¶æ€
    void display() {
        if (isEmpty()) {
            cout << "é˜Ÿåˆ—ä¸ºç©º" << endl;
            return;
        }

        cout << "é˜Ÿåˆ—å†…å®¹: ";
        int i = front;
        while (i != rear) {
            cout << arr[i] << " ";
            i = (i + 1) % maxSize;
        }
        cout << endl;
        cout << "front=" << front << ", rear=" << rear << endl;
    }

    // è·å–å®é™…å®¹é‡
    int getCapacity() {
        return capacity;
    }
};</code></pre></div><div id="java-code" class="code-content" style="display: none;"><button class="copy-btn" onclick="copyCode('java', this)">ğŸ“‹ å¤åˆ¶</button><pre><code>public class CircularQueue {
    private int[] arr;
    private int front, rear;
    private int maxSize;      // æ•°ç»„å®é™…å¤§å°
    private int capacity;     // å¯ç”¨å®¹é‡

    public CircularQueue(int size) {
        this.maxSize = size + 1;  // å¤šåˆ†é…ä¸€ä½ç”¨äºåŒºåˆ†æ»¡ç©º
        this.capacity = size;
        this.arr = new int[maxSize];
        this.front = this.rear = 0;
    }

    // å…¥é˜Ÿæ“ä½œ
    public boolean enqueue(int data) {
        if (isFull()) {
            System.out.println("é˜Ÿåˆ—å·²æ»¡!");
            return false;
        }

        arr[rear] = data;
        rear = (rear + 1) % maxSize;  // å¾ªç¯ç§»åŠ¨
        System.out.println("å…¥é˜ŸæˆåŠŸ: " + data);
        return true;
    }

    // å‡ºé˜Ÿæ“ä½œ
    public int dequeue() {
        if (isEmpty()) {
            System.out.println("é˜Ÿåˆ—ä¸ºç©º!");
            return -1;
        }

        int data = arr[front];
        front = (front + 1) % maxSize;  // å¾ªç¯ç§»åŠ¨
        System.out.println("å‡ºé˜ŸæˆåŠŸ: " + data);
        return data;
    }

    // æŸ¥çœ‹é˜Ÿå¤´å…ƒç´ 
    public int peek() {
        if (isEmpty()) {
            System.out.println("é˜Ÿåˆ—ä¸ºç©º!");
            return -1;
        }
        return arr[front];
    }

    // åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º
    public boolean isEmpty() {
        return front == rear;
    }

    // åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦å·²æ»¡
    public boolean isFull() {
        return (rear + 1) % maxSize == front;
    }

    // è·å–é˜Ÿåˆ—å¤§å°
    public int size() {
        return (rear - front + maxSize) % maxSize;
    }

    // æ˜¾ç¤ºé˜Ÿåˆ—çŠ¶æ€
    public void display() {
        if (isEmpty()) {
            System.out.println("é˜Ÿåˆ—ä¸ºç©º");
            return;
        }

        System.out.print("é˜Ÿåˆ—å†…å®¹: ");
        int i = front;
        while (i != rear) {
            System.out.print(arr[i] + " ");
            i = (i + 1) % maxSize;
        }
        System.out.println();
        System.out.println("front=" + front + ", rear=" + rear);
    }

    // è·å–å®é™…å®¹é‡
    public int getCapacity() {
        return capacity;
    }
}</code></pre></div><div id="python-code" class="code-content" style="display: none;"><button class="copy-btn" onclick="copyCode('python', this)">ğŸ“‹ å¤åˆ¶</button><pre><code>class CircularQueue:
    """å¾ªç¯é˜Ÿåˆ—ç±»"""

    def __init__(self, size):
        self.max_size = size + 1  # å¤šåˆ†é…ä¸€ä½ç”¨äºåŒºåˆ†æ»¡ç©º
        self.capacity = size      # å®é™…å¯ç”¨å®¹é‡
        self.arr = [None] * self.max_size
        self.front = 0
        self.rear = 0

    def enqueue(self, data):
        """å…¥é˜Ÿæ“ä½œ"""
        if self.is_full():
            print("é˜Ÿåˆ—å·²æ»¡!")
            return False

        self.arr[self.rear] = data
        self.rear = (self.rear + 1) % self.max_size  # å¾ªç¯ç§»åŠ¨
        print(f"å…¥é˜ŸæˆåŠŸ: {data}")
        return True

    def dequeue(self):
        """å‡ºé˜Ÿæ“ä½œ"""
        if self.is_empty():
            print("é˜Ÿåˆ—ä¸ºç©º!")
            return None

        data = self.arr[self.front]
        self.front = (self.front + 1) % self.max_size  # å¾ªç¯ç§»åŠ¨
        print(f"å‡ºé˜ŸæˆåŠŸ: {data}")
        return data

    def peek(self):
        """æŸ¥çœ‹é˜Ÿå¤´å…ƒç´ """
        if self.is_empty():
            print("é˜Ÿåˆ—ä¸ºç©º!")
            return None
        return self.arr[self.front]

    def is_empty(self):
        """åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º"""
        return self.front == self.rear

    def is_full(self):
        """åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦å·²æ»¡"""
        return (self.rear + 1) % self.max_size == self.front

    def size(self):
        """è·å–é˜Ÿåˆ—å¤§å°"""
        return (self.rear - self.front + self.max_size) % self.max_size

    def display(self):
        """æ˜¾ç¤ºé˜Ÿåˆ—çŠ¶æ€"""
        if self.is_empty():
            print("é˜Ÿåˆ—ä¸ºç©º")
            return

        result = []
        i = self.front
        while i != self.rear:
            result.append(str(self.arr[i]))
            i = (i + 1) % self.max_size

        print("é˜Ÿåˆ—å†…å®¹:", " ".join(result))
        print(f"front={self.front}, rear={self.rear}")

    def get_capacity(self):
        """è·å–å®é™…å®¹é‡"""
        return self.capacity

# ä½¿ç”¨ç¤ºä¾‹
if __name__ == "__main__":
    # åˆ›å»ºå®¹é‡ä¸º5çš„å¾ªç¯é˜Ÿåˆ—
    queue = CircularQueue(5)

    # æµ‹è¯•å…¥é˜Ÿ
    for i in range(1, 6):
        queue.enqueue(i * 10)

    queue.display()

    # æµ‹è¯•å‡ºé˜Ÿ
    queue.dequeue()
    queue.dequeue()

    # æµ‹è¯•å¾ªç¯ç‰¹æ€§
    queue.enqueue(60)
    queue.enqueue(70)

    queue.display()

    print(f"é˜Ÿåˆ—å¤§å°: {queue.size()}")
    print(f"é˜Ÿå¤´å…ƒç´ : {queue.peek()}")
    print(f"æ˜¯å¦å·²æ»¡: {queue.is_full()}")
    print(f"æ˜¯å¦ä¸ºç©º: {queue.is_empty()}")</code></pre></div></div></div><!-- ğŸŒŸ å®é™…åº”ç”¨ --><div class="knowledge-section"><div class="section-header"><span class="section-icon">ğŸŒŸ</span><h2 class="section-title">å®é™…åº”ç”¨</h2></div><div class="concept-grid"><div class="concept-card"><h3>ğŸ–¥ï¸ æ“ä½œç³»ç»Ÿ</h3><p><strong>ç¼“å†²åŒºç®¡ç†</strong></p><p>é”®ç›˜ç¼“å†²åŒºã€ç½‘ç»œæ•°æ®åŒ…ç¼“å†²ï¼Œå¾ªç¯ä½¿ç”¨å›ºå®šå¤§å°çš„å†…å­˜</p></div><div class="concept-card"><h3>ğŸµ éŸ³é¢‘å¤„ç†</h3><p><strong>éŸ³é¢‘ç¼“å†²ç¯</strong></p><p>å®æ—¶éŸ³é¢‘æµå¤„ç†ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±å’Œå»¶è¿Ÿ</p></div><div class="concept-card"><h3>ğŸ® æ¸¸æˆå¼€å‘</h3><p><strong>å¸§ç¼“å†²ç®¡ç†</strong></p><p>æ¸¸æˆå¸§æ•°æ®çš„å¾ªç¯ç¼“å­˜ï¼Œä¿è¯æµç•…æ¸²æŸ“</p></div></div><div class="key-point"><h3>ğŸ” æ·±åº¦æ¡ˆä¾‹ï¼šç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜</h3><p>å¾ªç¯é˜Ÿåˆ—æ˜¯è§£å†³ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜çš„ç»å…¸æ•°æ®ç»“æ„ï¼š</p><ul><li>ğŸ­ <strong>ç”Ÿäº§è€…</strong>ï¼šä¸æ–­å‘é˜Ÿåˆ—æ·»åŠ äº§å“ï¼ˆå…¥é˜Ÿæ“ä½œï¼‰</li><li>ğŸ›’ <strong>æ¶ˆè´¹è€…</strong>ï¼šä¸æ–­ä»é˜Ÿåˆ—å–å‡ºäº§å“ï¼ˆå‡ºé˜Ÿæ“ä½œï¼‰</li><li>ğŸ”„ <strong>å¾ªç¯ç‰¹æ€§</strong>ï¼šå……åˆ†åˆ©ç”¨æœ‰é™çš„ç¼“å†²åŒºç©ºé—´</li><li>âš¡ <strong>é«˜æ•ˆå¤„ç†</strong>ï¼šO(1)çš„æ“ä½œæ—¶é—´ï¼Œé€‚åˆé«˜é¢‘è®¿é—®</li><li>ğŸ¯ <strong>çŠ¶æ€æ§åˆ¶</strong>ï¼šæ¸…æ™°çš„æ»¡/ç©ºçŠ¶æ€åˆ¤æ–­ï¼Œé¿å…ç«æ€æ¡ä»¶</li></ul></div><h3>ğŸ’¡ é€‰æ‹©æŒ‡å—</h3><div class="comparison-grid"><div class="comparison-card vs-problem"><h4>ğŸ¯ é€‚ç”¨åœºæ™¯</h4><ul><li>ç¼“å†²åŒºå¤§å°å›ºå®šä¸”å·²çŸ¥</li><li>éœ€è¦é«˜æ•ˆçš„ç©ºé—´åˆ©ç”¨ç‡</li><li>é¢‘ç¹çš„å…¥é˜Ÿå‡ºé˜Ÿæ“ä½œ</li><li>å®æ—¶ç³»ç»Ÿå¯¹æ€§èƒ½è¦æ±‚é«˜</li></ul></div><div class="comparison-card vs-solution"><h4>âš ï¸ ä¸é€‚ç”¨åœºæ™¯</h4><ul><li>é˜Ÿåˆ—å¤§å°å˜åŒ–å¾ˆå¤§ä¸”ä¸å¯é¢„æµ‹</li><li>éœ€è¦éšæœºè®¿é—®é˜Ÿåˆ—ä¸­çš„å…ƒç´ </li><li>å¯¹å†…å­˜ä½¿ç”¨æåº¦æ•æ„Ÿçš„åœºæ™¯</li><li>éœ€è¦åŠ¨æ€æ‰©å®¹çš„åº”ç”¨</li></ul></div></div></div><!-- âœ… å­¦ä¹ æ£€éªŒ --><div class="knowledge-section"><div class="section-header"><span class="section-icon">âœ…</span><h2 class="section-title">å­¦ä¹ æ£€éªŒ</h2></div><div class="quiz-question"><h4>ğŸ¤” é—®é¢˜1ï¼šä¸ºä»€ä¹ˆå¾ªç¯é˜Ÿåˆ—éœ€è¦é¢„ç•™ä¸€ä¸ªç©ºä½ï¼Ÿ</h4><button class="show-answer-btn" onclick="toggleAnswer('answer1')">æ˜¾ç¤ºç­”æ¡ˆ</button><div id="answer1" class="quiz-answer"><strong>ç­”æ¡ˆï¼š</strong>ä¸ºäº†åŒºåˆ†é˜Ÿåˆ—æ»¡å’Œé˜Ÿåˆ—ç©ºçš„çŠ¶æ€<br><strong>è¯¦ç»†è§£æï¼š</strong><ul><li>å¦‚æœä¸é¢„ç•™ï¼šå½“æ•°ç»„å®Œå…¨å¡«æ»¡æ—¶ï¼Œfront == rear</li><li>é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼šfront == rear</li><li>æ— æ³•åŒºåˆ†ï¼šåŒæ ·æ˜¯front == rearï¼Œä½†å«ä¹‰å®Œå…¨ä¸åŒ</li><li>é¢„ç•™ä¸€ä½åï¼šæ»¡é˜Ÿåˆ—æ—¶ (rear+1)%maxSize == frontï¼Œç©ºé˜Ÿåˆ—æ—¶ front == rear</li></ul></div></div><div class="quiz-question"><h4>ğŸ¤” é—®é¢˜2ï¼šå¾ªç¯é˜Ÿåˆ—ä¸­å¦‚ä½•è®¡ç®—å®é™…å…ƒç´ ä¸ªæ•°ï¼Ÿ</h4><button class="show-answer-btn" onclick="toggleAnswer('answer2')">æ˜¾ç¤ºç­”æ¡ˆ</button><div id="answer2" class="quiz-answer"><strong>ç­”æ¡ˆï¼š</strong>size = (rear - front + maxSize) % maxSize<br><strong>è§£æï¼š</strong><ul><li><strong>ä¸ºä»€ä¹ˆåŠ maxSizeï¼Ÿ</strong> é˜²æ­¢rear < frontæ—¶å‡ºç°è´Ÿæ•°</li><li><strong>æƒ…å†µ1ï¼š</strong>rear >= frontï¼Œå¦‚front=2, rear=5, size=3</li><li><strong>æƒ…å†µ2ï¼š</strong>rear < frontï¼ˆå¾ªç¯äº†ï¼‰ï¼Œå¦‚front=7, rear=2, size=3</li><li><strong>å…¬å¼éªŒè¯ï¼š</strong>(2-7+8)%8=3 âœ“</li></ul></div></div><div class="quiz-question"><h4>ğŸ¤” é—®é¢˜3ï¼šç»™å®šmaxSize=6çš„å¾ªç¯é˜Ÿåˆ—ï¼Œä¾æ¬¡å…¥é˜Ÿ1,2,3,4,5ï¼Œç„¶åå‡ºé˜Ÿ2æ¬¡ï¼Œå†å…¥é˜Ÿ6,7ï¼Œæ­¤æ—¶frontå’Œrearçš„å€¼ï¼Ÿ</h4><button class="show-answer-btn" onclick="toggleAnswer('answer3')">æ˜¾ç¤ºç­”æ¡ˆ</button><div id="answer3" class="quiz-answer"><strong>ç­”æ¡ˆï¼š</strong>front = 2, rear = 1<br><strong>æ­¥éª¤åˆ†æï¼š</strong><ul><li>åˆå§‹ï¼šfront = 0, rear = 0</li><li>å…¥é˜Ÿ1,2,3,4,5åï¼šfront = 0, rear = 5ï¼Œæ•°ç»„[1,2,3,4,5,_]</li><li>å‡ºé˜Ÿ2æ¬¡åï¼šfront = 2, rear = 5ï¼Œæ•°ç»„[_,_,3,4,5,_]</li><li>å…¥é˜Ÿ6ï¼šrear = (5+1)%6 = 0ï¼Œæ•°ç»„[6,_,3,4,5,_]</li><li>å…¥é˜Ÿ7ï¼šrear = (0+1)%6 = 1ï¼Œæ•°ç»„[6,7,3,4,5,_]</li><li>æœ€ç»ˆï¼šfront = 2, rear = 1</li></ul></div></div><div class="quiz-question"><h4>ğŸ¤” é—®é¢˜4ï¼šå¾ªç¯é˜Ÿåˆ—ç›¸æ¯”é¡ºåºé˜Ÿåˆ—çš„ä¸»è¦ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ</h4><button class="show-answer-btn" onclick="toggleAnswer('answer4')">æ˜¾ç¤ºç­”æ¡ˆ</button><div id="answer4" class="quiz-answer"><strong>ä¸»è¦ä¼˜åŠ¿ï¼š</strong><ul><li><strong>è§£å†³å‡æº¢å‡º</strong>ï¼šå……åˆ†åˆ©ç”¨æ•°ç»„çš„æ¯ä¸ªä½ç½®</li><li><strong>ç©ºé—´æ•ˆç‡é«˜</strong>ï¼šä¸ä¼šå› ä¸ºfrontæŒ‡é’ˆå‰ç§»è€Œæµªè´¹ç©ºé—´</li><li><strong>æ“ä½œä¸€è‡´</strong>ï¼šå…¥é˜Ÿå‡ºé˜Ÿæ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(1)</li><li><strong>é€‚åˆç¼“å†²</strong>ï¼šå›ºå®šå¤§å°çš„ç¼“å†²åŒºåº”ç”¨åœºæ™¯ç†æƒ³</li></ul><strong>ä»£ä»·ï¼š</strong>å®ç°ç¨å¤æ‚ï¼Œéœ€è¦ç†è§£å–æ¨¡è¿ç®—å’ŒçŠ¶æ€åˆ¤æ–­
            </div></div><div class="quiz-question"><h4>ğŸ¤” é—®é¢˜5ï¼šä»€ä¹ˆæƒ…å†µä¸‹åº”è¯¥é€‰æ‹©å¾ªç¯é˜Ÿåˆ—è€Œä¸æ˜¯é“¾é˜Ÿåˆ—ï¼Ÿ</h4><button class="show-answer-btn" onclick="toggleAnswer('answer5')">æ˜¾ç¤ºç­”æ¡ˆ</button><div id="answer5" class="quiz-answer"><strong>é€‰æ‹©å¾ªç¯é˜Ÿåˆ—çš„åœºæ™¯ï¼š</strong><ul><li><strong>å›ºå®šå®¹é‡</strong>ï¼šé˜Ÿåˆ—å¤§å°ä¸Šé™æ˜ç¡®ä¸”ç¨³å®š</li><li><strong>é«˜é¢‘æ“ä½œ</strong>ï¼šéœ€è¦æé«˜çš„å…¥é˜Ÿå‡ºé˜Ÿæ€§èƒ½</li><li><strong>å†…å­˜è¿ç»­</strong>ï¼šç¼“å­˜å‹å¥½ï¼Œæé«˜è®¿é—®æ•ˆç‡</li><li><strong>æ— åŠ¨æ€åˆ†é…</strong>ï¼šé¿å…é¢‘ç¹çš„å†…å­˜åˆ†é…å’Œé‡Šæ”¾</li><li><strong>åµŒå…¥å¼ç³»ç»Ÿ</strong>ï¼šå†…å­˜å—é™ï¼Œéœ€è¦ç²¾ç¡®æ§åˆ¶å†…å­˜ä½¿ç”¨</li></ul><strong>é€‰æ‹©é“¾é˜Ÿåˆ—çš„åœºæ™¯ï¼š</strong>é˜Ÿåˆ—å¤§å°å˜åŒ–å¤§ã€éœ€è¦åŠ¨æ€æ‰©å®¹
            </div></div><h3>ğŸ“š è¿›ä¸€æ­¥å­¦ä¹ å»ºè®®</h3><ul><li>ğŸ”„ <strong>åŒç«¯å¾ªç¯é˜Ÿåˆ—</strong>ï¼šä¸¤ç«¯éƒ½å¯ä»¥æ’å…¥åˆ é™¤çš„å¾ªç¯é˜Ÿåˆ—</li><li>ğŸ§µ <strong>çº¿ç¨‹å®‰å…¨å¾ªç¯é˜Ÿåˆ—</strong>ï¼šå¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„å®ç°</li><li>âš¡ <strong>æ— é”å¾ªç¯é˜Ÿåˆ—</strong>ï¼šä½¿ç”¨åŸå­æ“ä½œçš„é«˜æ€§èƒ½å®ç°</li><li>ğŸ¯ <strong>ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼</strong>ï¼šå¾ªç¯é˜Ÿåˆ—åœ¨å¹¶å‘ç¼–ç¨‹ä¸­çš„åº”ç”¨</li></ul></div><!-- å¯¼èˆªæŒ‰é’® --><div style="text-align: center; margin-top: 40px;"><a href="{% url 'knowledge_app:index' %}" class="unified-btn unified-btn-primary"><span>ğŸ </span>
            è¿”å›é¦–é¡µ
        </a><a href="{% url 'knowledge_app:cs_universe' %}" class="unified-btn unified-btn-secondary"><span>ğŸŒŒ</span>
            æ¢ç´¢CSå®‡å®™
        </a></div></div><script>class Particle { constructor(x, y, color) { this.x = x; this.y = y; this.vx = (Math.random() - 0.5) * 4; this.vy = (Math.random() - 0.5) * 4; this.life = 1.0; this.decay = 0.02; this.color = color; this.size = Math.random() * 3 + 2; } update() { this.x += this.vx; this.y += this.vy; this.life -= this.decay; this.size *= 0.98; } draw(ctx) { ctx.save(); ctx.globalAlpha = this.life; ctx.fillStyle = this.color; ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fill(); ctx.restore(); } isDead() { return this.life <= 0 || this.size <= 0.1; } } class CircularQueueVisual { constructor(canvasId, capacity = 8) { this.canvas = document.getElementById(canvasId); this.ctx = this.canvas.getContext('2d'); this.maxSize = capacity + 1; this.capacity = capacity; this.queue = new Array(this.maxSize); this.front = 0; this.rear = 0; this.animating = false; this.particles = []; this.centerX = this.canvas.width / 2; this.centerY = this.canvas.height / 2 + 20; this.radius = 120; this.cellRadius = 25; this.hoveredIndex = -1; this.glowIntensity = 0; this.glowDirection = 1; this.startAnimationLoop(); this.draw(); this.canvas.addEventListener('mousemove', (e) => this.handleMouseMove(e)); this.canvas.addEventListener('mouseleave', () => this.hoveredIndex = -1); } handleMouseMove(e) { const rect = this.canvas.getBoundingClientRect(); const x = e.clientX - rect.left; const y = e.clientY - rect.top; this.hoveredIndex = -1; for (let i = 0; i < this.maxSize; i++) { const angle = (i / this.maxSize) * 2 * Math.PI - Math.PI / 2; const cellX = this.centerX + Math.cos(angle) * this.radius; const cellY = this.centerY + Math.sin(angle) * this.radius; const distance = Math.sqrt((x - cellX) ** 2 + (y - cellY) ** 2); if (distance <= this.cellRadius + 5) { this.hoveredIndex = i; break; } } } startAnimationLoop() { const animate = () => { this.glowIntensity += this.glowDirection * 0.02; if (this.glowIntensity >= 1) { this.glowIntensity = 1; this.glowDirection = -1; } else if (this.glowIntensity <= 0) { this.glowIntensity = 0; this.glowDirection = 1; } this.particles = this.particles.filter(particle => { particle.update(); return !particle.isDead(); }); if (!this.animating) { this.draw(); } requestAnimationFrame(animate); }; animate(); } createParticles(x, y, color, count = 10) { for (let i = 0; i < count; i++) { this.particles.push(new Particle(x, y, color)); } } draw() { this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height); const gradient = this.ctx.createRadialGradient( this.centerX, this.centerY, 0, this.centerX, this.centerY, this.radius + 100 ); gradient.addColorStop(0, '#f8f9fa'); gradient.addColorStop(1, '#e9ecef'); this.ctx.fillStyle = gradient; this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height); this.ctx.fillStyle = '#2c3e50'; this.ctx.font = 'bold 20px Arial'; this.ctx.textAlign = 'center'; this.ctx.fillText('ğŸ”„ å¾ªç¯é˜Ÿåˆ—å¯è§†åŒ– - è§£å†³å‡æº¢å‡ºé—®é¢˜', this.centerX, 30); this.ctx.font = '14px Arial'; this.ctx.fillStyle = '#7f8c8d'; this.ctx.fillText('åœ†å½¢å¸ƒå±€å±•ç¤ºå¾ªç¯ç‰¹æ€§ | ç»¿è‰²=é˜Ÿå¤´ | æ©™è‰²=é˜Ÿå°¾ | ç°è‰²=é¢„ç•™ä½', this.centerX, 55); this.drawCircularFramework(); this.drawPointers(); this.particles.forEach(particle => particle.draw(this.ctx)); this.drawStatusInfo(); this.updateStatus(); } drawCircularFramework() { this.ctx.strokeStyle = '#bdc3c7'; this.ctx.lineWidth = 2; this.ctx.setLineDash([10, 5]); this.ctx.beginPath(); this.ctx.arc(this.centerX, this.centerY, this.radius + 30, 0, 2 * Math.PI); this.ctx.stroke(); this.ctx.setLineDash([]); for (let i = 0; i < this.maxSize; i++) { this.drawCell(i); } this.drawConnectionLines(); } drawCell(index) { const angle = (index / this.maxSize) * 2 * Math.PI - Math.PI / 2; const x = this.centerX + Math.cos(angle) * this.radius; const y = this.centerY + Math.sin(angle) * this.radius; const isInQueue = this.isIndexInQueue(index); const isHovered = this.hoveredIndex === index; const isReserved = this.isReservedPosition(index); let fillColor, strokeColor; if (isReserved) { fillColor = '#95a5a6'; strokeColor = '#7f8c8d'; } else if (index === this.front && index === this.rear && this.size() > 0) { fillColor = '#e74c3c'; strokeColor = '#c0392b'; } else if (index === this.front && this.size() > 0) { fillColor = '#27ae60'; strokeColor = '#229954'; } else if (index === this.rear) { fillColor = '#f39c12'; strokeColor = '#d68910'; } else if (isInQueue) { fillColor = '#3498db'; strokeColor = '#2980b9'; } else { fillColor = '#ffffff'; strokeColor = '#bdc3c7'; } if (isHovered || isInQueue) { this.ctx.shadowColor = 'rgba(0, 0, 0, 0.3)'; this.ctx.shadowBlur = isHovered ? 20 : 10; this.ctx.shadowOffsetX = 3; this.ctx.shadowOffsetY = 3; } this.ctx.fillStyle = fillColor; this.ctx.strokeStyle = strokeColor; this.ctx.lineWidth = isHovered ? 4 : 2; this.ctx.beginPath(); this.ctx.arc(x, y, this.cellRadius, 0, 2 * Math.PI); this.ctx.fill(); this.ctx.stroke(); this.ctx.shadowBlur = 0; this.ctx.shadowOffsetX = 0; this.ctx.shadowOffsetY = 0; if ((isInQueue || isReserved) && this.glowIntensity > 0) { this.ctx.save(); this.ctx.globalAlpha = this.glowIntensity * 0.3; this.ctx.strokeStyle = fillColor; this.ctx.lineWidth = 6; this.ctx.beginPath(); this.ctx.arc(x, y, this.cellRadius + 3, 0, 2 * Math.PI); this.ctx.stroke(); this.ctx.restore(); } this.ctx.fillStyle = isReserved ? '#ffffff' : (isInQueue ? '#ffffff' : '#7f8c8d'); this.ctx.font = 'bold 16px Arial'; this.ctx.textAlign = 'center'; if (isReserved) { this.ctx.fillText('é¢„ç•™', x, y + 5); } else if (isInQueue && this.queue[index] !== undefined) { this.ctx.fillText(this.queue[index].toString(), x, y + 5); } else { this.ctx.fillText('ç©º', x, y + 5); } this.ctx.fillStyle = '#7f8c8d'; this.ctx.font = 'bold 12px Arial'; const labelAngle = angle; const labelX = this.centerX + Math.cos(labelAngle) * (this.radius + 50); const labelY = this.centerY + Math.sin(labelAngle) * (this.radius + 50); this.ctx.fillText(`[${index}]`, labelX, labelY); if (isHovered) { this.drawTooltip(x, y, index); } } drawConnectionLines() { this.ctx.strokeStyle = 'rgba(52, 152, 219, 0.3)'; this.ctx.lineWidth = 2; this.ctx.setLineDash([5, 5]); for (let i = 0; i < this.maxSize; i++) { const angle1 = (i / this.maxSize) * 2 * Math.PI - Math.PI / 2; const angle2 = ((i + 1) % this.maxSize / this.maxSize) * 2 * Math.PI - Math.PI / 2; const x1 = this.centerX + Math.cos(angle1) * this.radius; const y1 = this.centerY + Math.sin(angle1) * this.radius; const x2 = this.centerX + Math.cos(angle2) * this.radius; const y2 = this.centerY + Math.sin(angle2) * this.radius; this.ctx.beginPath(); this.ctx.moveTo(x1, y1); this.ctx.lineTo(x2, y2); this.ctx.stroke(); } this.ctx.setLineDash([]); } drawPointers() { if (this.size() === 0) return; const frontAngle = (this.front / this.maxSize) * 2 * Math.PI - Math.PI / 2; const frontX = this.centerX + Math.cos(frontAngle) * (this.radius - 60); const frontY = this.centerY + Math.sin(frontAngle) * (this.radius - 60); const frontTargetX = this.centerX + Math.cos(frontAngle) * (this.radius - this.cellRadius); const frontTargetY = this.centerY + Math.sin(frontAngle) * (this.radius - this.cellRadius); this.ctx.fillStyle = '#27ae60'; this.ctx.font = 'bold 14px Arial'; this.ctx.textAlign = 'center'; this.ctx.fillText('Front', frontX, frontY); this.drawArrow(frontX + 15, frontY, frontTargetX, frontTargetY, '#27ae60'); const rearAngle = (this.rear / this.maxSize) * 2 * Math.PI - Math.PI / 2; const rearX = this.centerX + Math.cos(rearAngle) * (this.radius + 80); const rearY = this.centerY + Math.sin(rearAngle) * (this.radius + 80); const rearTargetX = this.centerX + Math.cos(rearAngle) * (this.radius + this.cellRadius); const rearTargetY = this.centerY + Math.sin(rearAngle) * (this.radius + this.cellRadius); this.ctx.fillStyle = '#f39c12'; this.ctx.fillText('Rear', rearX, rearY); this.drawArrow(rearX - 15, rearY, rearTargetX, rearTargetY, '#f39c12'); } drawArrow(fromX, fromY, toX, toY, color) { this.ctx.strokeStyle = color; this.ctx.fillStyle = color; this.ctx.lineWidth = 3; this.ctx.beginPath(); this.ctx.moveTo(fromX, fromY); this.ctx.lineTo(toX, toY); this.ctx.stroke(); const headSize = 8; const angle = Math.atan2(toY - fromY, toX - fromX); this.ctx.beginPath(); this.ctx.moveTo(toX, toY); this.ctx.lineTo(toX - headSize * Math.cos(angle - Math.PI/6), toY - headSize * Math.sin(angle - Math.PI/6)); this.ctx.lineTo(toX - headSize * Math.cos(angle + Math.PI/6), toY - headSize * Math.sin(angle + Math.PI/6)); this.ctx.closePath(); this.ctx.fill(); } drawTooltip(x, y, index) { const isInQueue = this.isIndexInQueue(index); const isReserved = this.isReservedPosition(index); let text = `ä½ç½® ${index}`; if (isReserved) { text += '\nçŠ¶æ€: é¢„ç•™ä½ç½®\nä½œç”¨: åŒºåˆ†æ»¡ç©ºçŠ¶æ€'; } else if (isInQueue) { text += `\næ•°æ®: ${this.queue[index]}`; if (index === this.front && index === this.rear) { text += '\nçŠ¶æ€: é˜Ÿå¤´é˜Ÿå°¾é‡åˆ'; } else if (index === this.front) { text += '\nçŠ¶æ€: é˜Ÿå¤´'; } else if (index === this.rear) { text += '\nçŠ¶æ€: é˜Ÿå°¾(ä¸‹ä¸€ä¸ªå…¥é˜Ÿä½ç½®)'; } else { text += '\nçŠ¶æ€: é˜Ÿåˆ—å…ƒç´ '; } } else { text += '\nçŠ¶æ€: ç©ºé—²ä½ç½®'; } const lines = text.split('\n'); const padding = 10; const lineHeight = 16; const tooltipWidth = 160; const tooltipHeight = lines.length * lineHeight + padding * 2; let tooltipX = x - tooltipWidth/2; let tooltipY = y - tooltipHeight - 40; if (tooltipX < 0) tooltipX = 0; if (tooltipX + tooltipWidth > this.canvas.width) tooltipX = this.canvas.width - tooltipWidth; if (tooltipY < 0) tooltipY = y + 40; this.ctx.fillStyle = 'rgba(44, 62, 80, 0.95)'; this.ctx.fillRect(tooltipX, tooltipY, tooltipWidth, tooltipHeight); this.ctx.fillStyle = '#ffffff'; this.ctx.font = '12px Arial'; this.ctx.textAlign = 'center'; lines.forEach((line, i) => { this.ctx.fillText(line, tooltipX + tooltipWidth/2, tooltipY + padding + (i + 1) * lineHeight); }); } drawStatusInfo() { const statusY = this.centerY + this.radius + 150; this.ctx.fillStyle = '#2c3e50'; this.ctx.font = 'bold 16px Arial'; this.ctx.textAlign = 'center'; this.ctx.fillText(`å½“å‰é˜Ÿåˆ—å¤§å°: ${this.size()} / ${this.capacity}`, this.centerX, statusY); this.ctx.font = '14px Arial'; this.ctx.fillStyle = '#7f8c8d'; this.ctx.fillText(`front=${this.front}, rear=${this.rear}`, this.centerX, statusY + 25); this.ctx.fillText(`é˜Ÿæ»¡åˆ¤æ–­: (rear+1)%${this.maxSize} == front = ${(this.rear + 1) % this.maxSize == this.front}`, this.centerX, statusY + 45); } isIndexInQueue(index) { if (this.size() === 0) return false; if (this.front <= this.rear) { return index >= this.front && index < this.rear; } else { return index >= this.front || index < this.rear; } } isReservedPosition(index) { return this.isFull() && index === this.rear; } size() { return (this.rear - this.front + this.maxSize) % this.maxSize; } isEmpty() { return this.front === this.rear; } isFull() { return (this.rear + 1) % this.maxSize === this.front; } async enqueue(value) { if (this.animating) return false; if (this.isFull()) { this.showMessage('é˜Ÿåˆ—å·²æ»¡ï¼æ— æ³•å…¥é˜Ÿ', '#e74c3c'); return false; } this.animating = true; const angle = (this.rear / this.maxSize) * 2 * Math.PI - Math.PI / 2; const x = this.centerX + Math.cos(angle) * this.radius; const y = this.centerY + Math.sin(angle) * this.radius; this.createParticles(x, y, '#27ae60', 15); await this.animateEnqueue(value); this.queue[this.rear] = value; this.rear = (this.rear + 1) % this.maxSize; this.animating = false; this.showMessage(`æˆåŠŸå…¥é˜Ÿ: ${value}`, '#27ae60'); return true; } async dequeue() { if (this.animating) return null; if (this.isEmpty()) { this.showMessage('é˜Ÿåˆ—ä¸ºç©ºï¼æ— æ³•å‡ºé˜Ÿ', '#e74c3c'); return null; } this.animating = true; const value = this.queue[this.front]; const angle = (this.front / this.maxSize) * 2 * Math.PI - Math.PI / 2; const x = this.centerX + Math.cos(angle) * this.radius; const y = this.centerY + Math.sin(angle) * this.radius; this.createParticles(x, y, '#e74c3c', 15); await this.animateDequeue(); delete this.queue[this.front]; this.front = (this.front + 1) % this.maxSize; this.animating = false; this.showMessage(`æˆåŠŸå‡ºé˜Ÿ: ${value}`, '#f39c12'); return value; } async animateEnqueue(value) { return new Promise(resolve => { let step = 0; const maxSteps = 40; const animate = () => { this.draw(); const targetAngle = (this.rear / this.maxSize) * 2 * Math.PI - Math.PI / 2; const progress = this.easeOutCubic(step / maxSteps); const startX = this.centerX; const startY = this.centerY - 100; const targetX = this.centerX + Math.cos(targetAngle) * this.radius; const targetY = this.centerY + Math.sin(targetAngle) * this.radius; const currentX = startX + (targetX - startX) * progress; const currentY = startY + (targetY - startY) * progress; this.ctx.save(); this.ctx.globalAlpha = Math.min(1, step / 10); this.ctx.shadowColor = 'rgba(39, 174, 96, 0.5)'; this.ctx.shadowBlur = 15; this.ctx.shadowOffsetX = 3; this.ctx.shadowOffsetY = 3; this.ctx.fillStyle = '#27ae60'; this.ctx.strokeStyle = '#229954'; this.ctx.lineWidth = 3; this.ctx.beginPath(); this.ctx.arc(currentX, currentY, this.cellRadius, 0, 2 * Math.PI); this.ctx.fill(); this.ctx.stroke(); this.ctx.shadowBlur = 0; this.ctx.shadowOffsetX = 0; this.ctx.shadowOffsetY = 0; this.ctx.fillStyle = '#ffffff'; this.ctx.font = 'bold 16px Arial'; this.ctx.textAlign = 'center'; this.ctx.fillText(value.toString(), currentX, currentY + 5); this.ctx.restore(); step++; if (step <= maxSteps) { setTimeout(animate, 30); } else { resolve(); } }; animate(); }); } async animateDequeue() { return new Promise(resolve => { let step = 0; const maxSteps = 40; const animate = () => { this.draw(); const startAngle = (this.front / this.maxSize) * 2 * Math.PI - Math.PI / 2; const progress = this.easeInCubic(step / maxSteps); const startX = this.centerX + Math.cos(startAngle) * this.radius; const startY = this.centerY + Math.sin(startAngle) * this.radius; const targetX = this.centerX; const targetY = this.centerY + 100; const currentX = startX + (targetX - startX) * progress; const currentY = startY + (targetY - startY) * progress; this.ctx.save(); this.ctx.globalAlpha = 1 - progress; this.ctx.shadowColor = 'rgba(231, 76, 60, 0.5)'; this.ctx.shadowBlur = 15; this.ctx.shadowOffsetX = 3; this.ctx.shadowOffsetY = 3; this.ctx.fillStyle = '#e74c3c'; this.ctx.strokeStyle = '#c0392b'; this.ctx.lineWidth = 3; this.ctx.beginPath(); this.ctx.arc(currentX, currentY, this.cellRadius, 0, 2 * Math.PI); this.ctx.fill(); this.ctx.stroke(); this.ctx.shadowBlur = 0; this.ctx.shadowOffsetX = 0; this.ctx.shadowOffsetY = 0; this.ctx.fillStyle = '#ffffff'; this.ctx.font = 'bold 16px Arial'; this.ctx.textAlign = 'center'; this.ctx.fillText(this.queue[this.front].toString(), currentX, currentY + 5); this.ctx.restore(); step++; if (step <= maxSteps) { setTimeout(animate, 30); } else { resolve(); } }; animate(); }); } easeOutCubic(t) { return 1 - Math.pow(1 - t, 3); } easeInCubic(t) { return t * t * t; } showMessage(message, color) { const statusDiv = document.getElementById('queueStatus'); statusDiv.innerHTML += `<div style="color: ${color}; margin-top: 5px;">ğŸ”” ${message}</div>`; setTimeout(() => { this.updateStatus(); }, 3000); } updateStatus() { const statusDiv = document.getElementById('queueStatus'); const status = this.isEmpty() ? 'ç©º' : this.isFull() ? 'æ»¡' : 'æ­£å¸¸'; const statusColor = this.isEmpty() ? '#e74c3c' : this.isFull() ? '#f39c12' : '#27ae60'; statusDiv.innerHTML = ` <div style="display: flex; justify-content: space-around; align-items: center; flex-wrap: wrap;"><span><strong>é˜Ÿåˆ—å¤§å°:</strong> ${this.size()}/${this.capacity}</span><span><strong>Frontä½ç½®:</strong> ${this.front}</span><span><strong>Rearä½ç½®:</strong> ${this.rear}</span><span style="color: ${statusColor}; font-weight: bold;"><strong>çŠ¶æ€:</strong> ${status}</span></div><div style="margin-top: 10px; font-size: 14px; color: #7f8c8d;"><strong>å¾ªç¯ç‰¹æ€§:</strong> å½“æŒ‡é’ˆåˆ°è¾¾ä½ç½®${this.maxSize-1}åï¼Œä¸‹æ¬¡ç§»åŠ¨åˆ°ä½ç½®0ï¼Œå½¢æˆç¯å½¢ç»“æ„ </div> `; } reset() { this.queue = new Array(this.maxSize); this.front = 0; this.rear = 0; this.particles = []; this.showMessage('é˜Ÿåˆ—å·²é‡ç½®', '#3498db'); } async demo() { if (this.animating) return; this.reset(); await new Promise(resolve => setTimeout(resolve, 500)); this.showMessage('æ¼”ç¤ºå¼€å§‹ï¼šå±•ç¤ºå‡æº¢å‡ºè§£å†³æ–¹æ¡ˆ', '#9b59b6'); const demoData1 = [10, 20, 30, 40, 50, 60, 70, 80]; for (let i = 0; i < demoData1.length; i++) { await this.enqueue(demoData1[i]); await new Promise(resolve => setTimeout(resolve, 600)); } this.showMessage('é˜Ÿåˆ—å·²æ»¡ï¼Œè§‚å¯Ÿå¾ªç¯ç»“æ„', '#f39c12'); await new Promise(resolve => setTimeout(resolve, 1500)); for (let i = 0; i < 3; i++) { await this.dequeue(); await new Promise(resolve => setTimeout(resolve, 600)); } this.showMessage('frontæŒ‡é’ˆå¾ªç¯ç§»åŠ¨ï¼Œå‰é¢ç©ºå‡ºä½ç½®', '#3498db'); await new Promise(resolve => setTimeout(resolve, 1000)); const demoData2 = [90, 100, 110]; for (let value of demoData2) { await this.enqueue(value); await new Promise(resolve => setTimeout(resolve, 800)); } this.showMessage('å¾ªç¯é˜Ÿåˆ—æˆåŠŸåˆ©ç”¨å‰é¢çš„ç©ºä½ï¼è§£å†³å‡æº¢å‡º', '#27ae60'); } } let circularQueue = new CircularQueueVisual('queueCanvas', 8); async function enqueue() { const input = document.getElementById('inputValue'); const value = parseInt(input.value); if (isNaN(value) || value < 1 || value > 99) { alert('è¯·è¾“å…¥1-99ä¹‹é—´çš„æœ‰æ•ˆæ•°å­—ï¼'); return; } const success = await circularQueue.enqueue(value); if (success) { input.value = ''; } } async function dequeue() { await circularQueue.dequeue(); } function resetQueue() { circularQueue.reset(); } async function startDemo() { await circularQueue.demo(); } function showCode(language) { document.querySelectorAll('.code-content').forEach(el => el.style.display = 'none'); document.querySelectorAll('.code-tab').forEach(el => el.classList.remove('active')); document.getElementById(language + '-code').style.display = 'block'; event.target.classList.add('active'); } function copyCode(language, button) { const codeElement = document.querySelector(`#${language}-code pre code`); const text = codeElement.textContent; if (navigator.clipboard && window.isSecureContext) { navigator.clipboard.writeText(text).then(() => { showCopySuccess(button); }).catch(() => { fallbackCopyText(text, button); }); } else { fallbackCopyText(text, button); } } function fallbackCopyText(text, button) { const textArea = document.createElement('textarea'); textArea.value = text; textArea.style.position = 'fixed'; textArea.style.left = '-999999px'; textArea.style.top = '-999999px'; document.body.appendChild(textArea); textArea.focus(); textArea.select(); try { document.execCommand('copy'); showCopySuccess(button); } catch (err) { console.error('å¤åˆ¶å¤±è´¥:', err); alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ä»£ç '); } document.body.removeChild(textArea); } function showCopySuccess(button) { const originalText = button.textContent; const originalBg = button.style.background; button.textContent = 'âœ… å·²å¤åˆ¶'; button.style.background = '#27ae60'; button.style.transform = 'scale(1.1)'; setTimeout(() => { button.textContent = originalText; button.style.background = originalBg; button.style.transform = 'scale(1)'; }, 2000); } function toggleAnswer(answerId) { const answer = document.getElementById(answerId); const btn = event.target; if (answer.style.display === 'none' || answer.style.display === '') { answer.style.display = 'block'; btn.textContent = 'éšè—ç­”æ¡ˆ'; btn.style.background = '#e74c3c'; } else { answer.style.display = 'none'; btn.textContent = 'æ˜¾ç¤ºç­”æ¡ˆ'; btn.style.background = '#17a2b8'; } } document.getElementById('inputValue').addEventListener('keypress', function(e) { if (e.key === 'Enter') { enqueue(); } }); document.getElementById('inputValue').addEventListener('focus', function() { this.style.borderColor = '#3498db'; this.style.boxShadow = '0 0 10px rgba(52, 152, 219, 0.3)'; }); document.getElementById('inputValue').addEventListener('blur', function() { this.style.borderColor = '#3498db'; this.style.boxShadow = 'none'; });</script>
{% endblock %}