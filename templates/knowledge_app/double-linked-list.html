{% extends 'knowledge_app/base.html' %}

{% block title %}åŒå‘é“¾è¡¨ - è®¡ç®—æœºç§‘å­¦å­¦ä¹ å¹³å°{% endblock %}

{% block content %}
<div class="page-container fade-in"><!-- é¢åŒ…å±‘å¯¼èˆª --><div class="breadcrumb"><a href="{% url 'knowledge_app:index' %}">é¦–é¡µ</a><span>></span><span>æ•°æ®ç»“æ„</span><span>></span><span>åŒå‘é“¾è¡¨</span></div><!-- é¡µé¢å¤´éƒ¨ --><div class="page-header slide-in-left"><h1><span class="page-icon">ğŸ”—</span>
            åŒå‘é“¾è¡¨ (Doubly Linked List)
        </h1><p>ä¸€ç§å¯ä»¥åŒå‘éå†çš„åŠ¨æ€æ•°æ®ç»“æ„ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰æŒ‡å‘å‰ä¸€ä¸ªå’Œåä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ</p></div><!-- ğŸ“‹ çŸ¥è¯†ç‚¹æ¦‚è¿° --><div class="content-card slide-in-right"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ“‹</span>
                çŸ¥è¯†ç‚¹æ¦‚è¿°
            </h2><div class="info-box info-box-info"><span class="info-icon">ğŸ’¡</span><strong>æ ¸å¿ƒæ¦‚å¿µï¼š</strong>åŒå‘é“¾è¡¨æ˜¯ä¸€ç§çº¿æ€§æ•°æ®ç»“æ„ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«æ•°æ®å’Œä¸¤ä¸ªæŒ‡é’ˆï¼ˆå‰é©±æŒ‡é’ˆå’Œåç»§æŒ‡é’ˆï¼‰ï¼Œå¯ä»¥ä»ä»»æ„æ–¹å‘éå†æ•´ä¸ªé“¾è¡¨ã€‚
            </div><div class="unified-grid unified-grid-2"><div class="grid-card"><h4>ğŸ”‘ å…³é”®æœ¯è¯­</h4><ul style="text-align: left; margin: 10px 0;"><li><strong>èŠ‚ç‚¹(Node)ï¼š</strong>åŒ…å«æ•°æ®å’ŒæŒ‡é’ˆçš„åŸºæœ¬å•å…ƒ</li><li><strong>å‰é©±æŒ‡é’ˆ(Prev)ï¼š</strong>æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹</li><li><strong>åç»§æŒ‡é’ˆ(Next)ï¼š</strong>æŒ‡å‘åä¸€ä¸ªèŠ‚ç‚¹</li><li><strong>å¤´èŠ‚ç‚¹(Head)ï¼š</strong>é“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹</li><li><strong>å°¾èŠ‚ç‚¹(Tail)ï¼š</strong>é“¾è¡¨çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹</li></ul></div><div class="grid-card"><h4>ğŸ“Š å­¦ä¹ ä¿¡æ¯</h4><div style="text-align: left;"><p><strong>éš¾åº¦ç­‰çº§ï¼š</strong><span style="color: #f39c12;">â­â­ è¿›é˜¶</span></p><p><strong>å‰ç½®çŸ¥è¯†ï¼š</strong></p><ul style="margin: 5px 0;"><li>æŒ‡é’ˆ/å¼•ç”¨æ¦‚å¿µ</li><li>å•å‘é“¾è¡¨</li><li>åŸºç¡€ç¼–ç¨‹è¯­æ³•</li></ul></div></div></div></div></div><!-- ğŸ” æ¦‚å¿µè¯¦è§£ --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ”</span>
                æ¦‚å¿µè¯¦è§£
            </h2><div style="margin: 20px 0;"><h3 style="color: #3498db; margin-bottom: 15px;">ğŸ’¡ ç”Ÿæ´»ç±»æ¯”ï¼šåŒå‘é“è·¯</h3><p style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #3498db;">
                    æƒ³è±¡ä¸€æ¡åŒå‘é“è·¯ä¸Šçš„è½¦è¾†é˜Ÿåˆ—ï¼šæ¯è¾†è½¦ï¼ˆèŠ‚ç‚¹ï¼‰éƒ½çŸ¥é“å‰é¢ä¸€è¾†è½¦å’Œåé¢ä¸€è¾†è½¦çš„ä½ç½®ã€‚
                    ä½ å¯ä»¥ä»é˜Ÿåˆ—çš„ä»»æ„ä½ç½®å‘å‰å¼€åˆ°é˜Ÿå¤´ï¼Œä¹Ÿå¯ä»¥å‘åé€€åˆ°é˜Ÿå°¾ã€‚è¿™å°±æ˜¯åŒå‘é“¾è¡¨çš„å·¥ä½œåŸç†ï¼
                </p></div><div class="unified-grid unified-grid-2"><div class="info-box info-box-success"><span class="info-icon">âœ…</span><strong>vs å•å‘é“¾è¡¨ï¼š</strong>åŒå‘é“¾è¡¨å¯ä»¥åŒå‘éå†ï¼Œåˆ é™¤èŠ‚ç‚¹æ›´é«˜æ•ˆï¼Œä½†éœ€è¦é¢å¤–å†…å­˜å­˜å‚¨å‰é©±æŒ‡é’ˆã€‚
                </div><div class="info-box info-box-warning"><span class="info-icon">âš ï¸</span><strong>æ˜“æ··æ·†ç‚¹ï¼š</strong>åˆå­¦è€…å¸¸å¿˜è®°åœ¨æ’å…¥/åˆ é™¤æ—¶åŒæ—¶æ›´æ–°å‰é©±å’Œåç»§æŒ‡é’ˆï¼Œå¯¼è‡´é“¾è¡¨æ–­è£‚ã€‚
                </div></div></div></div><!-- ğŸ“Š å¯è§†åŒ–å±•ç¤º --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ“Š</span>
                åŠ¨ç”»æ¼”ç¤º
            </h2><!-- é™æ€ç»“æ„å›¾ --><div style="margin: 20px 0;"><h3 style="color: #e74c3c;">ğŸ—ï¸ é™æ€ç»“æ„å›¾</h3><div style="background: #fff; padding: 20px; border: 2px solid #ddd; border-radius: 10px; text-align: center;"><div style="font-family: monospace; font-size: 14px;"><div style="margin: 10px 0;"><span style="background: #f39c12; color: white; padding: 5px 10px; border-radius: 5px;">HEAD</span></div><div style="display: flex; justify-content: center; align-items: center; gap: 10px; margin: 20px 0;"><!-- èŠ‚ç‚¹1 --><div style="border: 2px solid #3498db; border-radius: 8px; padding: 10px; background: #ecf0f1;"><div style="font-size: 12px; color: #7f8c8d;">NULL</div><div style="font-weight: bold; color: #2c3e50;">Data: A</div><div style="font-size: 12px; color: #7f8c8d;">â†’</div></div><span style="font-size: 20px;">âŸ·</span><!-- èŠ‚ç‚¹2 --><div style="border: 2px solid #3498db; border-radius: 8px; padding: 10px; background: #ecf0f1;"><div style="font-size: 12px; color: #7f8c8d;">â†</div><div style="font-weight: bold; color: #2c3e50;">Data: B</div><div style="font-size: 12px; color: #7f8c8d;">â†’</div></div><span style="font-size: 20px;">âŸ·</span><!-- èŠ‚ç‚¹3 --><div style="border: 2px solid #3498db; border-radius: 8px; padding: 10px; background: #ecf0f1;"><div style="font-size: 12px; color: #7f8c8d;">â†</div><div style="font-weight: bold; color: #2c3e50;">Data: C</div><div style="font-size: 12px; color: #7f8c8d;">NULL</div></div></div><div style="margin: 10px 0;"><span style="background: #e74c3c; color: white; padding: 5px 10px; border-radius: 5px;">TAIL</span></div></div></div></div><!-- CanvasåŠ¨ç”»æ¼”ç¤º --><div style="margin: 30px 0;"><h3 style="color: #e74c3c;">ğŸ¬ äº¤äº’å¼åŠ¨ç”»æ¼”ç¤º</h3><div style="background: #f8f9fa; padding: 20px; border-radius: 10px;"><div style="text-align: center; margin-bottom: 20px;"><button id="btn-insert-middle" class="animation-btn">ä¸­é—´æ’å…¥</button><button id="btn-delete-node" class="animation-btn">åˆ é™¤èŠ‚ç‚¹</button><button id="btn-insert-head" class="animation-btn">å¤´éƒ¨æ’å…¥</button><button id="btn-reset" class="animation-btn reset-btn">é‡ç½®</button></div><canvas id="linkedListCanvas" width="800" height="300" style="border: 2px solid #ddd; border-radius: 8px; background: white; display: block; margin: 0 auto; max-width: 100%;"></canvas><div id="animation-info" style="text-align: center; margin-top: 15px; font-weight: bold; color: #2c3e50;">
                        ç‚¹å‡»æŒ‰é’®å¼€å§‹åŠ¨ç”»æ¼”ç¤º
                    </div></div></div></div></div><!-- ğŸ’» ä»£ç å®ç° --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ’»</span>
                ä»£ç å®ç°
            </h2><!-- è¯­è¨€é€‰æ‹©å™¨ --><div style="margin: 20px 0; text-align: center;"><button class="lang-btn active" data-lang="python">ğŸ Python</button><button class="lang-btn" data-lang="java">â˜• Java</button><button class="lang-btn" data-lang="cpp">âš¡ C++</button></div><!-- Pythonä»£ç  --><div id="code-python" class="code-section active"><div class="code-header"><span>ğŸ Python å®ç°</span><button class="copy-btn" data-code="python">ğŸ“‹ å¤åˆ¶ä»£ç </button></div><div class="code-content"><pre><code class="python-code">class DoublyLinkedListNode:
    def __init__(self, data):
        self.data = data
        self.prev = None  # å‰é©±æŒ‡é’ˆ
        self.next = None  # åç»§æŒ‡é’ˆ

class DoublyLinkedList:
    def __init__(self):
        self.head = None
        self.tail = None
        self.size = 0

    def insert_head(self, data):
        """åœ¨å¤´éƒ¨æ’å…¥èŠ‚ç‚¹"""
        new_node = DoublyLinkedListNode(data)
        if not self.head:
            self.head = self.tail = new_node
        else:
            new_node.next = self.head
            self.head.prev = new_node
            self.head = new_node
        self.size += 1

    def insert_tail(self, data):
        """åœ¨å°¾éƒ¨æ’å…¥èŠ‚ç‚¹"""
        new_node = DoublyLinkedListNode(data)
        if not self.tail:
            self.head = self.tail = new_node
        else:
            new_node.prev = self.tail
            self.tail.next = new_node
            self.tail = new_node
        self.size += 1

    def insert_at_position(self, data, position):
        """åœ¨æŒ‡å®šä½ç½®æ’å…¥èŠ‚ç‚¹"""
        if position <= 0:
            self.insert_head(data)
            return
        if position >= self.size:
            self.insert_tail(data)
            return

        new_node = DoublyLinkedListNode(data)
        current = self.head
        for _ in range(position):
            current = current.next

        # æ’å…¥èŠ‚ç‚¹
        new_node.next = current
        new_node.prev = current.prev
        current.prev.next = new_node
        current.prev = new_node
        self.size += 1

    def delete_node(self, data):
        """åˆ é™¤æŒ‡å®šæ•°æ®çš„èŠ‚ç‚¹"""
        current = self.head
        while current:
            if current.data == data:
                # æ›´æ–°å‰é©±èŠ‚ç‚¹çš„nextæŒ‡é’ˆ
                if current.prev:
                    current.prev.next = current.next
                else:
                    self.head = current.next

                # æ›´æ–°åç»§èŠ‚ç‚¹çš„prevæŒ‡é’ˆ
                if current.next:
                    current.next.prev = current.prev
                else:
                    self.tail = current.prev

                self.size -= 1
                return True
            current = current.next
        return False

    def display_forward(self):
        """æ­£å‘éå†æ˜¾ç¤º"""
        result = []
        current = self.head
        while current:
            result.append(str(current.data))
            current = current.next
        return " âŸ· ".join(result)

    def display_backward(self):
        """åå‘éå†æ˜¾ç¤º"""
        result = []
        current = self.tail
        while current:
            result.append(str(current.data))
            current = current.prev
        return " âŸ· ".join(result)

# ä½¿ç”¨ç¤ºä¾‹
dll = DoublyLinkedList()
dll.insert_tail("A")
dll.insert_tail("B")
dll.insert_tail("C")
print("æ­£å‘éå†:", dll.display_forward())
print("åå‘éå†:", dll.display_backward())
</code></pre></div></div><!-- Javaä»£ç  --><div id="code-java" class="code-section"><div class="code-header"><span>â˜• Java å®ç°</span><button class="copy-btn" data-code="java">ğŸ“‹ å¤åˆ¶ä»£ç </button></div><div class="code-content"><pre><code class="java-code">class DoublyLinkedListNode<T> {
    T data;
    DoublyLinkedListNode<T> prev;
    DoublyLinkedListNode<T> next;

    public DoublyLinkedListNode(T data) {
        this.data = data;
        this.prev = null;
        this.next = null;
    }
}

public class DoublyLinkedList<T> {
    private DoublyLinkedListNode<T> head;
    private DoublyLinkedListNode<T> tail;
    private int size;

    public DoublyLinkedList() {
        this.head = null;
        this.tail = null;
        this.size = 0;
    }

    // åœ¨å¤´éƒ¨æ’å…¥èŠ‚ç‚¹
    public void insertHead(T data) {
        DoublyLinkedListNode<T> newNode = new DoublyLinkedListNode<>(data);
        if (head == null) {
            head = tail = newNode;
        } else {
            newNode.next = head;
            head.prev = newNode;
            head = newNode;
        }
        size++;
    }

    // åœ¨å°¾éƒ¨æ’å…¥èŠ‚ç‚¹
    public void insertTail(T data) {
        DoublyLinkedListNode<T> newNode = new DoublyLinkedListNode<>(data);
        if (tail == null) {
            head = tail = newNode;
        } else {
            newNode.prev = tail;
            tail.next = newNode;
            tail = newNode;
        }
        size++;
    }

    // åœ¨æŒ‡å®šä½ç½®æ’å…¥èŠ‚ç‚¹
    public void insertAtPosition(T data, int position) {
        if (position <= 0) {
            insertHead(data);
            return;
        }
        if (position >= size) {
            insertTail(data);
            return;
        }

        DoublyLinkedListNode<T> newNode = new DoublyLinkedListNode<>(data);
        DoublyLinkedListNode<T> current = head;
        for (int i = 0; i < position; i++) {
            current = current.next;
        }

        // æ’å…¥èŠ‚ç‚¹
        newNode.next = current;
        newNode.prev = current.prev;
        current.prev.next = newNode;
        current.prev = newNode;
        size++;
    }

    // åˆ é™¤æŒ‡å®šæ•°æ®çš„èŠ‚ç‚¹
    public boolean deleteNode(T data) {
        DoublyLinkedListNode<T> current = head;
        while (current != null) {
            if (current.data.equals(data)) {
                // æ›´æ–°å‰é©±èŠ‚ç‚¹çš„nextæŒ‡é’ˆ
                if (current.prev != null) {
                    current.prev.next = current.next;
                } else {
                    head = current.next;
                }

                // æ›´æ–°åç»§èŠ‚ç‚¹çš„prevæŒ‡é’ˆ
                if (current.next != null) {
                    current.next.prev = current.prev;
                } else {
                    tail = current.prev;
                }

                size--;
                return true;
            }
            current = current.next;
        }
        return false;
    }

    // æ­£å‘éå†æ˜¾ç¤º
    public String displayForward() {
        StringBuilder sb = new StringBuilder();
        DoublyLinkedListNode<T> current = head;
        while (current != null) {
            sb.append(current.data);
            if (current.next != null) {
                sb.append(" âŸ· ");
            }
            current = current.next;
        }
        return sb.toString();
    }

    // åå‘éå†æ˜¾ç¤º
    public String displayBackward() {
        StringBuilder sb = new StringBuilder();
        DoublyLinkedListNode<T> current = tail;
        while (current != null) {
            sb.append(current.data);
            if (current.prev != null) {
                sb.append(" âŸ· ");
            }
            current = current.prev;
        }
        return sb.toString();
    }

    public int size() {
        return size;
    }

    // ä½¿ç”¨ç¤ºä¾‹
    public static void main(String[] args) {
        DoublyLinkedList<String> dll = new DoublyLinkedList<>();
        dll.insertTail("A");
        dll.insertTail("B");
        dll.insertTail("C");
        System.out.println("æ­£å‘éå†: " + dll.displayForward());
        System.out.println("åå‘éå†: " + dll.displayBackward());
    }
}
</code></pre></div></div><!-- C++ä»£ç  --><div id="code-cpp" class="code-section"><div class="code-header"><span>âš¡ C++ å®ç°</span><button class="copy-btn" data-code="cpp">ğŸ“‹ å¤åˆ¶ä»£ç </button></div><div class="code-content"><pre><code class="cpp-code">#include <iostream>
#include <string>
using namespace std;

template<typename T>
struct DoublyLinkedListNode {
    T data;
    DoublyLinkedListNode* prev;
    DoublyLinkedListNode* next;

    DoublyLinkedListNode(T value) : data(value), prev(nullptr), next(nullptr) {}
};

template<typename T>
class DoublyLinkedList {
private:
    DoublyLinkedListNode<T>* head;
    DoublyLinkedListNode<T>* tail;
    int size;

public:
    DoublyLinkedList() : head(nullptr), tail(nullptr), size(0) {}

    ~DoublyLinkedList() {
        while (head != nullptr) {
            DoublyLinkedListNode<T>* temp = head;
            head = head->next;
            delete temp;
        }
    }

    // åœ¨å¤´éƒ¨æ’å…¥èŠ‚ç‚¹
    void insertHead(T data) {
        DoublyLinkedListNode<T>* newNode = new DoublyLinkedListNode<T>(data);
        if (head == nullptr) {
            head = tail = newNode;
        } else {
            newNode->next = head;
            head->prev = newNode;
            head = newNode;
        }
        size++;
    }

    // åœ¨å°¾éƒ¨æ’å…¥èŠ‚ç‚¹
    void insertTail(T data) {
        DoublyLinkedListNode<T>* newNode = new DoublyLinkedListNode<T>(data);
        if (tail == nullptr) {
            head = tail = newNode;
        } else {
            newNode->prev = tail;
            tail->next = newNode;
            tail = newNode;
        }
        size++;
    }

    // åœ¨æŒ‡å®šä½ç½®æ’å…¥èŠ‚ç‚¹
    void insertAtPosition(T data, int position) {
        if (position <= 0) {
            insertHead(data);
            return;
        }
        if (position >= size) {
            insertTail(data);
            return;
        }

        DoublyLinkedListNode<T>* newNode = new DoublyLinkedListNode<T>(data);
        DoublyLinkedListNode<T>* current = head;
        for (int i = 0; i < position; i++) {
            current = current->next;
        }

        // æ’å…¥èŠ‚ç‚¹
        newNode->next = current;
        newNode->prev = current->prev;
        current->prev->next = newNode;
        current->prev = newNode;
        size++;
    }

    // åˆ é™¤æŒ‡å®šæ•°æ®çš„èŠ‚ç‚¹
    bool deleteNode(T data) {
        DoublyLinkedListNode<T>* current = head;
        while (current != nullptr) {
            if (current->data == data) {
                // æ›´æ–°å‰é©±èŠ‚ç‚¹çš„nextæŒ‡é’ˆ
                if (current->prev != nullptr) {
                    current->prev->next = current->next;
                } else {
                    head = current->next;
                }

                // æ›´æ–°åç»§èŠ‚ç‚¹çš„prevæŒ‡é’ˆ
                if (current->next != nullptr) {
                    current->next->prev = current->prev;
                } else {
                    tail = current->prev;
                }

                delete current;
                size--;
                return true;
            }
            current = current->next;
        }
        return false;
    }

    // æ­£å‘éå†æ˜¾ç¤º
    string displayForward() {
        string result = "";
        DoublyLinkedListNode<T>* current = head;
        while (current != nullptr) {
            result += to_string(current->data);
            if (current->next != nullptr) {
                result += " âŸ· ";
            }
            current = current->next;
        }
        return result;
    }

    // åå‘éå†æ˜¾ç¤º
    string displayBackward() {
        string result = "";
        DoublyLinkedListNode<T>* current = tail;
        while (current != nullptr) {
            result += to_string(current->data);
            if (current->prev != nullptr) {
                result += " âŸ· ";
            }
            current = current->prev;
        }
        return result;
    }

    int getSize() { return size; }
};

// ä½¿ç”¨ç¤ºä¾‹
int main() {
    DoublyLinkedList<int> dll;
    dll.insertTail(1);
    dll.insertTail(2);
    dll.insertTail(3);
    cout << "æ­£å‘éå†: " << dll.displayForward() << endl;
    cout << "åå‘éå†: " << dll.displayBackward() << endl;
    return 0;
}
</code></pre></div></div></div></div><!-- ğŸŒŸ å®é™…åº”ç”¨ --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸŒŸ</span>
                å®é™…åº”ç”¨
            </h2><div class="unified-grid unified-grid-3"><div class="grid-card"><span class="card-icon">ğŸŒ</span><h4 class="card-title">æµè§ˆå™¨å†å²è®°å½•</h4><p class="card-description">å‰è¿›/åé€€æŒ‰é’®éœ€è¦åŒå‘å¯¼èˆªåŠŸèƒ½</p></div><div class="grid-card"><span class="card-icon">ğŸµ</span><h4 class="card-title">éŸ³ä¹æ’­æ”¾å™¨</h4><p class="card-description">ä¸Šä¸€é¦–/ä¸‹ä¸€é¦–æ­Œæ›²åˆ‡æ¢</p></div><div class="grid-card"><span class="card-icon">ğŸ“</span><h4 class="card-title">æ–‡æœ¬ç¼–è¾‘å™¨</h4><p class="card-description">æ’¤é”€/é‡åšæ“ä½œçš„å®ç°</p></div></div><!-- å…¸å‹æ¡ˆä¾‹åˆ†æ --><div style="margin: 30px 0;"><h3 style="color: #e74c3c;">ğŸ” å…¸å‹æ¡ˆä¾‹ï¼šLRUç¼“å­˜å®ç°</h3><div style="background: #f8f9fa; padding: 20px; border-radius: 10px;"><p><strong>é—®é¢˜ï¼š</strong>è®¾è®¡ä¸€ä¸ªå›ºå®šå¤§å°çš„ç¼“å­˜ï¼Œå½“ç¼“å­˜æ»¡æ—¶æ·˜æ±°æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong>ä½¿ç”¨åŒå‘é“¾è¡¨ + å“ˆå¸Œè¡¨</p><ul style="text-align: left; margin: 15px 0;"><li>åŒå‘é“¾è¡¨ç»´æŠ¤è®¿é—®é¡ºåºï¼ˆå¤´éƒ¨=æœ€è¿‘ä½¿ç”¨ï¼Œå°¾éƒ¨=æœ€å°‘ä½¿ç”¨ï¼‰</li><li>å“ˆå¸Œè¡¨æä¾›O(1)çš„æŸ¥æ‰¾æ€§èƒ½</li><li>è®¿é—®æ—¶å°†èŠ‚ç‚¹ç§»åˆ°å¤´éƒ¨ï¼Œæ·˜æ±°æ—¶åˆ é™¤å°¾éƒ¨èŠ‚ç‚¹</li></ul><div style="background: #e8f5e8; padding: 10px; border-radius: 5px; margin-top: 15px;"><strong>ğŸ¯ å­¦ä¹ å·¥å…·æ¨èï¼š</strong> VisuAlgoã€LeetCodeå›¾è§£ã€Algorithm Visualizer
                    </div></div></div></div></div><!-- âœ… å­¦ä¹ æ£€éªŒ --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">âœ…</span>
                å­¦ä¹ æ£€éªŒ
            </h2><div style="margin: 20px 0;"><h3 style="color: #e74c3c;">ğŸ¤” ç²¾é€‰é—®é¢˜</h3><!-- é—®é¢˜1 --><div class="question-card"><div class="question-header" onclick="toggleAnswer('answer1')"><span class="question-icon">1ï¸âƒ£</span><span class="question-text"><strong>åŸºç¡€ç†è§£ï¼š</strong>åŒå‘é“¾è¡¨ç›¸æ¯”å•å‘é“¾è¡¨çš„ä¸»è¦ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿè¯·ä¸¾ä¾‹è¯´æ˜ã€‚</span><span class="toggle-icon">â–¼</span></div><div id="answer1" class="answer-content"><div class="answer-box"><h4>âœ… å‚è€ƒç­”æ¡ˆï¼š</h4><p><strong>ä¸»è¦ä¼˜åŠ¿ï¼š</strong></p><ul><li><strong>åŒå‘éå†ï¼š</strong>å¯ä»¥ä»ä»»æ„èŠ‚ç‚¹å‘å‰æˆ–å‘åéå†ï¼Œå•å‘é“¾è¡¨åªèƒ½å•æ–¹å‘éå†</li><li><strong>åˆ é™¤æ•ˆç‡é«˜ï¼š</strong>å·²çŸ¥èŠ‚ç‚¹æŒ‡é’ˆæ—¶ï¼Œåˆ é™¤æ“ä½œä¸ºO(1)ï¼Œä¸éœ€è¦éå†æ‰¾å‰é©±èŠ‚ç‚¹</li><li><strong>æ’å…¥çµæ´»ï¼š</strong>åœ¨ä»»æ„ä½ç½®æ’å…¥æ›´å®¹æ˜“ï¼Œå› ä¸ºæœ‰å‰é©±æŒ‡é’ˆ</li></ul><p><strong>ä¸¾ä¾‹ï¼š</strong>åœ¨æ–‡æœ¬ç¼–è¾‘å™¨çš„æ’¤é”€/é‡åšåŠŸèƒ½ä¸­ï¼Œéœ€è¦åœ¨æ“ä½œå†å²ä¸­åŒå‘ç§»åŠ¨ï¼ŒåŒå‘é“¾è¡¨æ¯”å•å‘é“¾è¡¨æ›´é€‚åˆã€‚</p><p><strong>ä»£ä»·ï¼š</strong>æ¯ä¸ªèŠ‚ç‚¹éœ€è¦é¢å¤–çš„å‰é©±æŒ‡é’ˆï¼Œå†…å­˜å¼€é”€å¢åŠ çº¦33%ã€‚</p></div></div></div><!-- é—®é¢˜2 --><div class="question-card"><div class="question-header" onclick="toggleAnswer('answer2')"><span class="question-icon">2ï¸âƒ£</span><span class="question-text"><strong>æ“ä½œåˆ†æï¼š</strong>åœ¨åŒå‘é“¾è¡¨ä¸­é—´æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹éœ€è¦ä¿®æ”¹å‡ ä¸ªæŒ‡é’ˆï¼Ÿè¯·è¯¦ç»†è¯´æ˜æ¯ä¸€æ­¥ã€‚</span><span class="toggle-icon">â–¼</span></div><div id="answer2" class="answer-content"><div class="answer-box"><h4>âœ… å‚è€ƒç­”æ¡ˆï¼š</h4><p><strong>æ€»å…±éœ€è¦ä¿®æ”¹4ä¸ªæŒ‡é’ˆï¼š</strong></p><ol><li><strong>æ–°èŠ‚ç‚¹çš„nextæŒ‡é’ˆï¼š</strong>æŒ‡å‘åŸæ¥çš„åç»§èŠ‚ç‚¹</li><li><strong>æ–°èŠ‚ç‚¹çš„prevæŒ‡é’ˆï¼š</strong>æŒ‡å‘åŸæ¥çš„å‰é©±èŠ‚ç‚¹</li><li><strong>å‰é©±èŠ‚ç‚¹çš„nextæŒ‡é’ˆï¼š</strong>ä»æŒ‡å‘åŸåç»§èŠ‚ç‚¹æ”¹ä¸ºæŒ‡å‘æ–°èŠ‚ç‚¹</li><li><strong>åç»§èŠ‚ç‚¹çš„prevæŒ‡é’ˆï¼š</strong>ä»æŒ‡å‘åŸå‰é©±èŠ‚ç‚¹æ”¹ä¸ºæŒ‡å‘æ–°èŠ‚ç‚¹</li></ol><p><strong>æ“ä½œé¡ºåºå¾ˆé‡è¦ï¼š</strong>é€šå¸¸å…ˆè®¾ç½®æ–°èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œå†ä¿®æ”¹ç›¸é‚»èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œé¿å…ä¸¢å¤±å¼•ç”¨ã€‚</p><div style="background: #fff3cd; padding: 10px; border-radius: 5px; margin-top: 10px;"><strong>ğŸ’¡ è®°å¿†æŠ€å·§ï¼š</strong>åŒå‘é“¾è¡¨æ’å…¥ = æ–°èŠ‚ç‚¹è¿æ¥2ä¸ªæŒ‡é’ˆ + ç›¸é‚»èŠ‚ç‚¹å„ä¿®æ”¹1ä¸ªæŒ‡é’ˆ = å…±4ä¸ªæŒ‡é’ˆ
                            </div></div></div></div><!-- é—®é¢˜3 --><div class="question-card"><div class="question-header" onclick="toggleAnswer('answer3')"><span class="question-icon">3ï¸âƒ£</span><span class="question-text"><strong>æ€§èƒ½æ€è€ƒï¼š</strong>ä¸ºä»€ä¹ˆåŒå‘é“¾è¡¨çš„åˆ é™¤æ“ä½œæ¯”å•å‘é“¾è¡¨æ›´é«˜æ•ˆï¼Ÿ</span><span class="toggle-icon">â–¼</span></div><div id="answer3" class="answer-content"><div class="answer-box"><h4>âœ… å‚è€ƒç­”æ¡ˆï¼š</h4><p><strong>å…³é”®åŒºåˆ«åœ¨äºæ˜¯å¦éœ€è¦æŸ¥æ‰¾å‰é©±èŠ‚ç‚¹ï¼š</strong></p><div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0;"><div style="background: #ffebee; padding: 15px; border-radius: 8px;"><h5 style="color: #c62828;">ğŸ”´ å•å‘é“¾è¡¨åˆ é™¤</h5><ul style="font-size: 14px;"><li>éœ€è¦ä»å¤´éå†æ‰¾åˆ°å‰é©±èŠ‚ç‚¹</li><li>æ—¶é—´å¤æ‚åº¦ï¼šO(n)</li><li>å¿…é¡»çŸ¥é“å¤´èŠ‚ç‚¹æ‰èƒ½åˆ é™¤</li></ul></div><div style="background: #e8f5e9; padding: 15px; border-radius: 8px;"><h5 style="color: #2e7d32;">ğŸŸ¢ åŒå‘é“¾è¡¨åˆ é™¤</h5><ul style="font-size: 14px;"><li>ç›´æ¥é€šè¿‡prevæŒ‡é’ˆè·å–å‰é©±</li><li>æ—¶é—´å¤æ‚åº¦ï¼šO(1)</li><li>åªéœ€è¦å½“å‰èŠ‚ç‚¹æŒ‡é’ˆå³å¯</li></ul></div></div><p><strong>å®é™…åº”ç”¨ï¼š</strong>åœ¨LRUç¼“å­˜ä¸­ï¼Œéœ€è¦é¢‘ç¹åˆ é™¤ä»»æ„ä½ç½®çš„èŠ‚ç‚¹ï¼ŒåŒå‘é“¾è¡¨çš„O(1)åˆ é™¤æ€§èƒ½æ˜¯å…³é”®ä¼˜åŠ¿ã€‚</p></div></div></div><!-- é—®é¢˜4 --><div class="question-card"><div class="question-header" onclick="toggleAnswer('answer4')"><span class="question-icon">4ï¸âƒ£</span><span class="question-text"><strong>åº”ç”¨åœºæ™¯ï¼š</strong>ä»€ä¹ˆæƒ…å†µä¸‹ä½ ä¼šé€‰æ‹©åŒå‘é“¾è¡¨è€Œä¸æ˜¯æ•°ç»„æˆ–å•å‘é“¾è¡¨ï¼Ÿ</span><span class="toggle-icon">â–¼</span></div><div id="answer4" class="answer-content"><div class="answer-box"><h4>âœ… å‚è€ƒç­”æ¡ˆï¼š</h4><p><strong>é€‰æ‹©åŒå‘é“¾è¡¨çš„å…¸å‹åœºæ™¯ï¼š</strong></p><div style="margin: 15px 0;"><h5 style="color: #1976d2;">ğŸ†š ç›¸æ¯”æ•°ç»„çš„ä¼˜åŠ¿ï¼š</h5><ul><li>éœ€è¦é¢‘ç¹åœ¨ä¸­é—´æ’å…¥/åˆ é™¤å…ƒç´ </li><li>ä¸çŸ¥é“æ•°æ®é‡å¤§å°ï¼Œéœ€è¦åŠ¨æ€æ‰©å®¹</li><li>ä¸éœ€è¦éšæœºè®¿é—®ï¼ˆé€šè¿‡ç´¢å¼•å¿«é€Ÿå®šä½ï¼‰</li></ul></div><div style="margin: 15px 0;"><h5 style="color: #1976d2;">ğŸ†š ç›¸æ¯”å•å‘é“¾è¡¨çš„ä¼˜åŠ¿ï¼š</h5><ul><li>éœ€è¦åŒå‘éå†ï¼ˆå¦‚æ’­æ”¾å™¨çš„ä¸Šä¸€é¦–/ä¸‹ä¸€é¦–ï¼‰</li><li>éœ€è¦é«˜æ•ˆåˆ é™¤ä»»æ„èŠ‚ç‚¹ï¼ˆå¦‚ç¼“å­˜æ·˜æ±°ï¼‰</li><li>éœ€è¦åœ¨ä»»æ„ä½ç½®å‰åæ’å…¥å…ƒç´ </li></ul></div><div style="background: #e3f2fd; padding: 15px; border-radius: 8px; margin-top: 15px;"><h5 style="color: #1565c0;">ğŸ¯ æœ€ä½³åº”ç”¨åœºæ™¯ï¼š</h5><p>LRUç¼“å­˜ã€æµè§ˆå™¨å†å²è®°å½•ã€éŸ³ä¹æ’­æ”¾åˆ—è¡¨ã€æ–‡æœ¬ç¼–è¾‘å™¨çš„æ’¤é”€æ ˆã€æ“ä½œç³»ç»Ÿçš„è¿›ç¨‹è°ƒåº¦é˜Ÿåˆ—ç­‰ã€‚</p></div></div></div></div></div><div style="margin: 30px 0;"><h3 style="color: #e74c3c;">ğŸ“ˆ è¿›é˜¶å­¦ä¹ è·¯å¾„</h3><div class="unified-grid unified-grid-3"><div class="grid-card"><span class="card-icon">ğŸŸ¢</span><h4 class="card-title">æŒæ¡åŸºç¡€</h4><p class="card-description">èƒ½å¤Ÿå®ç°åŸºæœ¬çš„å¢åˆ æ”¹æŸ¥æ“ä½œ</p></div><div class="grid-card"><span class="card-icon">ğŸŸ¡</span><h4 class="card-title">åº”ç”¨å®è·µ</h4><p class="card-description">å®ç°LRUç¼“å­˜ã€åŒå‘é˜Ÿåˆ—ç­‰åº”ç”¨</p></div><div class="grid-card"><span class="card-icon">ğŸ”´</span><h4 class="card-title">æ·±å…¥ä¼˜åŒ–</h4><p class="card-description">å†…å­˜ç®¡ç†ã€çº¿ç¨‹å®‰å…¨ã€æ€§èƒ½ä¼˜åŒ–</p></div></div></div><!-- å­¦ä¹ èµ„æºæ¨è --><div style="margin: 30px 0;"><h3 style="color: #e74c3c;">ğŸ”— æ¨èå­¦ä¹ èµ„æº</h3><div class="unified-grid unified-grid-2"><div class="info-box info-box-info"><span class="info-icon">ğŸ“–</span><strong>ç†è®ºå­¦ä¹ ï¼š</strong>ã€Šç®—æ³•å¯¼è®ºã€‹ç¬¬10ç« ã€ã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æã€‹
                    </div><div class="info-box info-box-success"><span class="info-icon">ğŸ’»</span><strong>åœ¨çº¿ç»ƒä¹ ï¼š</strong>LeetCode é“¾è¡¨ä¸“é¢˜ã€ç‰›å®¢ç½‘æ•°æ®ç»“æ„ç»ƒä¹ 
                    </div></div></div></div></div><!-- å¯¼èˆªæŒ‰é’® --><div style="text-align: center; margin-top: 40px;"><a href="{% url 'knowledge_app:index' %}" class="unified-btn unified-btn-primary"><span>ğŸ </span>
            è¿”å›é¦–é¡µ
        </a><a href="{% url 'knowledge_app:cs_universe' %}" class="unified-btn unified-btn-secondary"><span>ğŸŒŒ</span>
            æ¢ç´¢CSå®‡å®™
        </a></div></div><style>.content-card {background:white;border-radius:12px;padding:30px;margin:20px 0;box-shadow:0 4px 6px rgba(0, 0, 0, 0.1);transition:transform 0.3s ease}.content-card:hover {transform:translateY(-2px)}.section-title {color:#2c3e50;border-bottom:3px solid #3498db;padding-bottom:10px;margin-bottom:20px}.info-box {padding:15px;border-radius:8px;margin:10px 0;border-left:4px solid}.info-box-info {background:#e3f2fd;border-color:#2196f3}.info-box-success {background:#e8f5e9;border-color:#4caf50}.info-box-warning {background:#fff3e0;border-color:#ff9800}.grid-card {background:#f8f9fa;border:1px solid #e9ecef;border-radius:8px;padding:20px;text-align:center;transition:all 0.3s ease}.grid-card:hover {background:#e9ecef;transform:translateY(-3px)}.unified-grid {display:grid;gap:20px;margin:20px 0}.unified-grid-1 {grid-template-columns:1fr}.unified-grid-2 {grid-template-columns:repeat(auto-fit, minmax(300px, 1fr))}.unified-grid-3 {grid-template-columns:repeat(auto-fit, minmax(250px, 1fr))}.unified-btn {display:inline-block;padding:12px 24px;margin:10px;border-radius:8px;text-decoration:none;font-weight:bold;transition:all 0.3s ease}.unified-btn-primary {background:linear-gradient(45deg, #3498db, #2980b9);color:white}.unified-btn-secondary {background:linear-gradient(45deg, #95a5a6, #7f8c8d);color:white}.unified-btn:hover {transform:translateY(-2px);box-shadow:0 4px 8px rgba(0, 0, 0, 0.2)}.animation-btn {background:linear-gradient(45deg, #3498db, #2980b9);color:white;border:none;padding:10px 20px;margin:5px;border-radius:6px;cursor:pointer;font-weight:bold;transition:all 0.3s ease}.animation-btn:hover {background:linear-gradient(45deg, #2980b9, #1f5f8b);transform:translateY(-2px)}.reset-btn {background:linear-gradient(45deg, #e74c3c, #c0392b) !important}.reset-btn:hover {background:linear-gradient(45deg, #c0392b, #a93226) !important}.lang-btn {background:#f8f9fa;border:2px solid #dee2e6;padding:10px 20px;margin:0 5px;border-radius:6px;cursor:pointer;font-weight:bold;transition:all 0.3s ease}.lang-btn.active, .lang-btn:hover {background:#3498db;color:white;border-color:#3498db}.code-section {display:none;margin:20px 0}.code-section.active {display:block}.code-header {background:#2c3e50;color:white;padding:15px 20px;border-radius:8px 8px 0 0;display:flex;justify-content:space-between;align-items:center}.copy-btn {background:#34495e;color:white;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-size:14px;transition:background 0.3s ease}.copy-btn:hover {background:#4a6278}.code-content {background:#2d3748;color:#e2e8f0;border-radius:0 0 8px 8px;overflow-x:auto}.code-content pre {margin:0;padding:20px;font-family:'Courier New', monospace;font-size:14px;line-height:1.5}.question-card {background:#f8f9fa;border:1px solid #dee2e6;border-radius:8px;margin:15px 0;overflow:hidden;transition:all 0.3s ease}.question-card:hover {box-shadow:0 2px 8px rgba(0, 0, 0, 0.1)}.question-header {padding:20px;cursor:pointer;display:flex;align-items:center;gap:15px;background:#fff;transition:background 0.3s ease}.question-header:hover {background:#f8f9fa}.question-icon {font-size:20px;flex-shrink:0}.question-text {flex:1;font-size:16px}.toggle-icon {font-size:16px;color:#6c757d;transition:transform 0.3s ease}.question-header.active .toggle-icon {transform:rotate(180deg)}.answer-content {display:none;background:#fff;border-top:1px solid #dee2e6}.answer-content.show {display:block;animation:slideDown 0.3s ease-out}@keyframes slideDown {from {opacity:0;max-height:0}to {opacity:1;max-height:1000px}}.answer-box {padding:20px;background:#f8f9fa;margin:20px;border-radius:8px;border-left:4px solid #28a745}.answer-box h4 {color:#28a745;margin-bottom:15px}.answer-box ul, .answer-box ol {text-align:left;margin:10px 0;padding-left:20px}.answer-box li {margin:8px 0;line-height:1.6}@media (max-width:768px) {.unified-grid-2, .unified-grid-3 {grid-template-columns:1fr}.content-card {padding:20px;margin:15px 0}#linkedListCanvas {width:100%;height:auto}.code-header {flex-direction:column;gap:10px;align-items:flex-start}.lang-btn {padding:8px 15px;font-size:14px}.question-header {padding:15px;flex-direction:column;align-items:flex-start;gap:10px}.question-text {font-size:15px}}</style><script>let canvas, ctx; let nodes = []; let animationStep = 0; let currentAnimation = ''; let animationPointers = []; function initCanvas() { canvas = document.getElementById('linkedListCanvas'); ctx = canvas.getContext('2d'); const rect = canvas.getBoundingClientRect(); canvas.width = rect.width; canvas.height = 300; resetNodes(); drawLinkedList(); } function resetNodes() { nodes = [ { data: 'A', x: 150, y: 150, color: '#3498db', highlight: false }, { data: 'B', x: 350, y: 150, color: '#3498db', highlight: false }, { data: 'C', x: 550, y: 150, color: '#3498db', highlight: false } ]; animationPointers = []; animationStep = 0; } function drawLinkedList() { ctx.clearRect(0, 0, canvas.width, canvas.height); for (let i = 0; i < nodes.length - 1; i++) { drawNodeConnection(nodes[i], nodes[i + 1]); } nodes.forEach(node => { drawNode(node); }); animationPointers.forEach(pointer => { drawAnimationPointer(pointer); }); if (nodes.length > 0) { drawHeadTailLabel('HEAD', nodes[0].x, nodes[0].y - 60, '#f39c12'); drawHeadTailLabel('TAIL', nodes[nodes.length - 1].x, nodes[nodes.length - 1].y - 60, '#e74c3c'); } } function drawNode(node) { const width = 80; const height = 50; const x = node.x - width/2; const y = node.y - height/2; const cornerRadius = 8; ctx.fillStyle = 'rgba(0, 0, 0, 0.2)'; drawRoundedRect(x + 3, y + 3, width, height, cornerRadius); ctx.fill(); const gradient = ctx.createLinearGradient(x, y, x, y + height); if (node.highlight) { gradient.addColorStop(0, '#ff6b6b'); gradient.addColorStop(1, '#ee5a52'); } else { gradient.addColorStop(0, '#74b9ff'); gradient.addColorStop(1, '#0984e3'); } ctx.fillStyle = gradient; drawRoundedRect(x, y, width, height, cornerRadius); ctx.fill(); ctx.strokeStyle = node.highlight ? '#d63031' : '#2d3436'; ctx.lineWidth = 2; drawRoundedRect(x, y, width, height, cornerRadius); ctx.stroke(); ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)'; ctx.lineWidth = 1; ctx.beginPath(); ctx.moveTo(x + 20, y + 5); ctx.lineTo(x + 20, y + height - 5); ctx.stroke(); ctx.beginPath(); ctx.moveTo(x + width - 20, y + 5); ctx.lineTo(x + width - 20, y + height - 5); ctx.stroke(); const labelBg = 'rgba(255, 255, 255, 0.9)'; const labelColor = '#2d3436'; ctx.fillStyle = labelBg; ctx.fillRect(x + 3, y + height - 16, 14, 12); ctx.fillStyle = labelColor; ctx.font = 'bold 9px Arial'; ctx.textAlign = 'center'; ctx.fillText('prev', x + 10, y + height - 8); ctx.fillStyle = labelBg; ctx.fillRect(x + width - 17, y + height - 16, 14, 12); ctx.fillStyle = labelColor; ctx.fillText('next', x + width - 10, y + height - 8); ctx.fillStyle = 'white'; ctx.font = 'bold 18px Arial'; ctx.textAlign = 'center'; ctx.textBaseline = 'middle'; ctx.fillText(node.data, node.x, node.y); const highlightGradient = ctx.createLinearGradient(x, y, x, y + height/2); highlightGradient.addColorStop(0, 'rgba(255, 255, 255, 0.4)'); highlightGradient.addColorStop(1, 'rgba(255, 255, 255, 0.1)'); ctx.fillStyle = highlightGradient; drawRoundedRect(x, y, width, height/2, cornerRadius); ctx.fill(); } function drawRoundedRect(x, y, width, height, radius) { ctx.beginPath(); ctx.moveTo(x + radius, y); ctx.lineTo(x + width - radius, y); ctx.quadraticCurveTo(x + width, y, x + width, y + radius); ctx.lineTo(x + width, y + height - radius); ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height); ctx.lineTo(x + radius, y + height); ctx.quadraticCurveTo(x, y + height, x, y + height - radius); ctx.lineTo(x, y + radius); ctx.quadraticCurveTo(x, y, x + radius, y); ctx.closePath(); } function drawNodeConnection(node1, node2) { const arrowSize = 10; const nextGradient = ctx.createLinearGradient(node1.x, node1.y - 15, node2.x, node2.y - 15); nextGradient.addColorStop(0, '#00b894'); nextGradient.addColorStop(1, '#00a085'); ctx.strokeStyle = nextGradient; ctx.lineWidth = 4; ctx.lineCap = 'round'; const startX = node1.x + 30; const endX = node2.x - 30; const nextY = node1.y - 15; ctx.beginPath(); ctx.moveTo(startX, nextY); const controlY = nextY - 8; ctx.quadraticCurveTo((startX + endX) / 2, controlY, endX, nextY); ctx.stroke(); drawArrowHead(endX, nextY, 0, arrowSize, '#00b894'); drawLabel('next', (startX + endX) / 2, nextY - 15, '#00b894', true); const prevGradient = ctx.createLinearGradient(node2.x, node2.y + 15, node1.x, node1.y + 15); prevGradient.addColorStop(0, '#fd79a8'); prevGradient.addColorStop(1, '#e84393'); ctx.strokeStyle = prevGradient; ctx.lineWidth = 4; const prevY = node1.y + 15; ctx.beginPath(); ctx.moveTo(endX, prevY); const prevControlY = prevY + 8; ctx.quadraticCurveTo((startX + endX) / 2, prevControlY, startX, prevY); ctx.stroke(); drawArrowHead(startX, prevY, Math.PI, arrowSize, '#fd79a8'); drawLabel('prev', (startX + endX) / 2, prevY + 20, '#fd79a8', true); } function drawArrowHead(x, y, angle, size, color) { ctx.save(); ctx.translate(x, y); ctx.rotate(angle); ctx.fillStyle = 'rgba(0, 0, 0, 0.3)'; ctx.beginPath(); ctx.moveTo(1, 1); ctx.lineTo(-size + 1, -size/2 + 1); ctx.lineTo(-size/2 + 1, 1); ctx.lineTo(-size + 1, size/2 + 1); ctx.closePath(); ctx.fill(); const arrowGradient = ctx.createLinearGradient(-size, 0, 0, 0); arrowGradient.addColorStop(0, color); arrowGradient.addColorStop(1, adjustBrightness(color, 1.2)); ctx.fillStyle = arrowGradient; ctx.beginPath(); ctx.moveTo(0, 0); ctx.lineTo(-size, -size/2); ctx.lineTo(-size/2, 0); ctx.lineTo(-size, size/2); ctx.closePath(); ctx.fill(); ctx.strokeStyle = adjustBrightness(color, 0.8); ctx.lineWidth = 1; ctx.stroke(); ctx.restore(); } function adjustBrightness(color, factor) { if (color === '#00b894') return factor > 1 ? '#00d2a0' : '#007a63'; if (color === '#fd79a8') return factor > 1 ? '#ff9cc5' : '#d14d82'; return color; } function drawAnimationPointer(pointer) { const dashOffset = (Date.now() * 0.01) % 20; ctx.strokeStyle = 'rgba(0, 0, 0, 0.3)'; ctx.lineWidth = 6; ctx.setLineDash([8, 4]); ctx.lineDashOffset = dashOffset + 2; ctx.beginPath(); ctx.moveTo(pointer.fromX + 2, pointer.fromY + 2); ctx.lineTo(pointer.toX + 2, pointer.toY + 2); ctx.stroke(); const gradient = ctx.createLinearGradient(pointer.fromX, pointer.fromY, pointer.toX, pointer.toY); gradient.addColorStop(0, pointer.color); gradient.addColorStop(0.5, adjustBrightness(pointer.color, 1.3)); gradient.addColorStop(1, pointer.color); ctx.strokeStyle = gradient; ctx.lineWidth = 5; ctx.setLineDash([10, 6]); ctx.lineDashOffset = dashOffset; ctx.lineCap = 'round'; ctx.beginPath(); ctx.moveTo(pointer.fromX, pointer.fromY); ctx.lineTo(pointer.toX, pointer.toY); ctx.stroke(); const angle = Math.atan2(pointer.toY - pointer.fromY, pointer.toX - pointer.fromX); const arrowSize = 12; ctx.setLineDash([]); drawArrowHead(pointer.toX, pointer.toY, angle, arrowSize, pointer.color); const labelX = (pointer.fromX + pointer.toX) / 2; const labelY = (pointer.fromY + pointer.toY) / 2 - 15; const pulseScale = 1 + Math.sin(Date.now() * 0.005) * 0.1; ctx.save(); ctx.translate(labelX, labelY); ctx.scale(pulseScale, pulseScale); drawLabel(pointer.label, 0, 0, pointer.color, true); ctx.restore(); } function drawLabel(text, x, y, color, hasBackground = false) { if (hasBackground) { const metrics = ctx.measureText(text); const width = metrics.width + 12; const height = 20; ctx.fillStyle = 'rgba(0, 0, 0, 0.3)'; drawRoundedRect(x - width/2 + 2, y - height/2 + 2, width, height, 6); ctx.fill(); const bgGradient = ctx.createLinearGradient(x, y - height/2, x, y + height/2); bgGradient.addColorStop(0, 'rgba(255, 255, 255, 0.95)'); bgGradient.addColorStop(1, 'rgba(248, 249, 250, 0.95)'); ctx.fillStyle = bgGradient; drawRoundedRect(x - width/2, y - height/2, width, height, 6); ctx.fill(); ctx.strokeStyle = adjustBrightness(color, 0.8); ctx.lineWidth = 2; drawRoundedRect(x - width/2, y - height/2, width, height, 6); ctx.stroke(); } ctx.fillStyle = color; ctx.font = 'bold 12px Arial'; ctx.textAlign = 'center'; ctx.textBaseline = 'middle'; ctx.fillText(text, x, y); } function drawHeadTailLabel(text, x, y, color) { const width = 60; const height = 25; ctx.fillStyle = 'rgba(0, 0, 0, 0.3)'; drawRoundedRect(x - width/2 + 3, y - height/2 + 3, width, height, 8); ctx.fill(); const gradient = ctx.createLinearGradient(x, y - height/2, x, y + height/2); if (color === '#f39c12') { gradient.addColorStop(0, '#fdcb6e'); gradient.addColorStop(1, '#e17055'); } else { gradient.addColorStop(0, '#fd79a8'); gradient.addColorStop(1, '#e84393'); } ctx.fillStyle = gradient; drawRoundedRect(x - width/2, y - height/2, width, height, 8); ctx.fill(); ctx.strokeStyle = adjustBrightness(color, 0.8); ctx.lineWidth = 2; drawRoundedRect(x - width/2, y - height/2, width, height, 8); ctx.stroke(); ctx.fillStyle = 'white'; ctx.font = 'bold 14px Arial'; ctx.textAlign = 'center'; ctx.textBaseline = 'middle'; ctx.fillText(text, x, y); const highlightGradient = ctx.createLinearGradient(x, y - height/2, x, y); highlightGradient.addColorStop(0, 'rgba(255, 255, 255, 0.4)'); highlightGradient.addColorStop(1, 'rgba(255, 255, 255, 0.1)'); ctx.fillStyle = highlightGradient; drawRoundedRect(x - width/2, y - height/2, width, height/2, 8); ctx.fill(); } function updateAnimationInfo(text) { document.getElementById('animation-info').textContent = text; } function animateInsertMiddle() { resetNodes(); currentAnimation = 'insertMiddle'; animationStep = 0; const steps = [ () => { updateAnimationInfo('é‡ç½®é“¾è¡¨åˆ°åˆå§‹çŠ¶æ€ï¼šA âŸ· B âŸ· C'); drawLinkedList(); }, () => { updateAnimationInfo('æ­¥éª¤1: åˆ›å»ºæ–°èŠ‚ç‚¹X'); const newNode = { data: 'X', x: 450, y: 80, color: '#e74c3c', highlight: true }; nodes.push(newNode); drawLinkedList(); }, () => { updateAnimationInfo('æ­¥éª¤2: è®¾ç½®X.next = Cï¼ˆæ–°èŠ‚ç‚¹çš„nextæŒ‡é’ˆæŒ‡å‘Cï¼‰'); animationPointers.push({ fromX: 450 + 30, fromY: 80, toX: 550 - 30, toY: 150, color: '#27ae60', label: 'X.next = C' }); drawLinkedList(); }, () => { updateAnimationInfo('æ­¥éª¤3: è®¾ç½®X.prev = Bï¼ˆæ–°èŠ‚ç‚¹çš„prevæŒ‡é’ˆæŒ‡å‘Bï¼‰'); animationPointers.push({ fromX: 450 - 30, fromY: 80, toX: 350 + 30, toY: 150, color: '#e67e22', label: 'X.prev = B' }); drawLinkedList(); }, () => { updateAnimationInfo('æ­¥éª¤4: è®¾ç½®B.next = Xï¼ˆBçš„nextæŒ‡é’ˆæ”¹ä¸ºæŒ‡å‘Xï¼‰'); nodes[1].highlight = true; animationPointers = [{ fromX: 350 + 30, fromY: 150 - 10, toX: 450 - 30, toY: 80 + 10, color: '#27ae60', label: 'B.next = X' }]; drawLinkedList(); }, () => { updateAnimationInfo('æ­¥éª¤5: è®¾ç½®C.prev = Xï¼ˆCçš„prevæŒ‡é’ˆæ”¹ä¸ºæŒ‡å‘Xï¼‰'); nodes[1].highlight = false; nodes[2].highlight = true; animationPointers = [{ fromX: 550 - 30, fromY: 150 + 10, toX: 450 + 30, toY: 80 - 10, color: '#e67e22', label: 'C.prev = X' }]; drawLinkedList(); }, () => { updateAnimationInfo('æ­¥éª¤6: ç§»åŠ¨Xåˆ°æ­£ç¡®ä½ç½®ï¼Œå®Œæˆæ’å…¥'); nodes[2].highlight = false; nodes[3].highlight = false; nodes[3].color = '#3498db'; nodes[0].x = 120; nodes[1].x = 280; nodes[3].x = 440; nodes[3].y = 150; nodes[2].x = 600; const newNode = nodes.pop(); nodes.splice(2, 0, newNode); animationPointers = []; drawLinkedList(); }, () => { updateAnimationInfo('æ’å…¥å®Œæˆï¼æ–°é“¾è¡¨ï¼šA âŸ· B âŸ· X âŸ· C'); drawLinkedList(); } ]; function runStep() { if (animationStep < steps.length) { steps[animationStep](); animationStep++; setTimeout(runStep, 2000); } } runStep(); } function animateDeleteNode() { resetNodes(); currentAnimation = 'deleteNode'; animationStep = 0; const steps = [ () => { updateAnimationInfo('é‡ç½®é“¾è¡¨åˆ°åˆå§‹çŠ¶æ€ï¼šA âŸ· B âŸ· C'); drawLinkedList(); }, () => { updateAnimationInfo('æ­¥éª¤1: å®šä½è¦åˆ é™¤çš„èŠ‚ç‚¹B'); nodes[1].highlight = true; drawLinkedList(); }, () => { updateAnimationInfo('æ­¥éª¤2: è·å–B.prevï¼ˆå‰é©±èŠ‚ç‚¹Aï¼‰å’ŒB.nextï¼ˆåç»§èŠ‚ç‚¹Cï¼‰'); animationPointers = [ { fromX: 350 - 30, fromY: 150, toX: 150 + 30, toY: 150, color: '#e67e22', label: 'B.prev' }, { fromX: 350 + 30, fromY: 150, toX: 550 - 30, toY: 150, color: '#27ae60', label: 'B.next' } ]; drawLinkedList(); }, () => { updateAnimationInfo('æ­¥éª¤3: è®¾ç½®A.next = Cï¼ˆè·³è¿‡BèŠ‚ç‚¹ï¼‰'); nodes[0].highlight = true; animationPointers = [{ fromX: 150 + 30, fromY: 140, toX: 550 - 30, toY: 140, color: '#27ae60', label: 'A.next = C' }]; drawLinkedList(); }, () => { updateAnimationInfo('æ­¥éª¤4: è®¾ç½®C.prev = Aï¼ˆè·³è¿‡BèŠ‚ç‚¹ï¼‰'); nodes[0].highlight = false; nodes[2].highlight = true; animationPointers = [{ fromX: 550 - 30, fromY: 160, toX: 150 + 30, toY: 160, color: '#e67e22', label: 'C.prev = A' }]; drawLinkedList(); }, () => { updateAnimationInfo('æ­¥éª¤5: åˆ é™¤èŠ‚ç‚¹Bï¼Œé‡Šæ”¾å†…å­˜'); nodes[1].color = '#95a5a6'; nodes[2].highlight = false; animationPointers = []; drawLinkedList(); setTimeout(() => { addDeleteEffect(350, 150); }, 500); }, () => { updateAnimationInfo('æ­¥éª¤6: è°ƒæ•´èŠ‚ç‚¹ä½ç½®'); nodes.splice(1, 1); nodes[0].x = 250; nodes[1].x = 450; animationPointers = []; drawLinkedList(); }, () => { updateAnimationInfo('åˆ é™¤å®Œæˆï¼æ–°é“¾è¡¨ï¼šA âŸ· C'); drawLinkedList(); } ]; function runStep() { if (animationStep < steps.length) { steps[animationStep](); animationStep++; setTimeout(runStep, 2000); } } runStep(); } function animateInsertHead() { resetNodes(); currentAnimation = 'insertHead'; animationStep = 0; const steps = [ () => { updateAnimationInfo('é‡ç½®é“¾è¡¨åˆ°åˆå§‹çŠ¶æ€ï¼šA âŸ· B âŸ· C'); drawLinkedList(); }, () => { updateAnimationInfo('æ­¥éª¤1: åˆ›å»ºæ–°èŠ‚ç‚¹X'); const newNode = { data: 'X', x: 80, y: 80, color: '#e74c3c', highlight: true }; nodes.unshift(newNode); drawLinkedList(); }, () => { updateAnimationInfo('æ­¥éª¤2: è®¾ç½®X.next = Aï¼ˆæ–°èŠ‚ç‚¹çš„nextæŒ‡é’ˆæŒ‡å‘åŸå¤´èŠ‚ç‚¹Aï¼‰'); animationPointers = [{ fromX: 80 + 30, fromY: 80, toX: 150 - 30, toY: 150, color: '#27ae60', label: 'X.next = A' }]; drawLinkedList(); }, () => { updateAnimationInfo('æ­¥éª¤3: è®¾ç½®X.prev = NULLï¼ˆæ–°å¤´èŠ‚ç‚¹çš„prevä¸ºç©ºï¼‰'); animationPointers = [{ fromX: 80 - 30, fromY: 80, toX: 20, toY: 80, color: '#e67e22', label: 'X.prev = NULL' }]; drawNullIndicator(20, 80); drawLinkedList(); }, () => { updateAnimationInfo('æ­¥éª¤4: è®¾ç½®A.prev = Xï¼ˆåŸå¤´èŠ‚ç‚¹Açš„prevæŒ‡é’ˆæŒ‡å‘æ–°èŠ‚ç‚¹Xï¼‰'); nodes[1].highlight = true; animationPointers = [{ fromX: 150 - 30, fromY: 150 + 10, toX: 80 + 30, toY: 80 - 10, color: '#e67e22', label: 'A.prev = X' }]; drawLinkedList(); }, () => { updateAnimationInfo('æ­¥éª¤5: æ›´æ–°HEADæŒ‡é’ˆæŒ‡å‘X'); nodes[1].highlight = false; animationPointers = []; drawLinkedList(); }, () => { updateAnimationInfo('æ­¥éª¤6: ç§»åŠ¨Xåˆ°æ­£ç¡®ä½ç½®ï¼Œå®Œæˆå¤´éƒ¨æ’å…¥'); nodes[0].highlight = false; nodes[0].color = '#3498db'; nodes[0].y = 150; nodes[0].x = 120; nodes[1].x = 280; nodes[2].x = 440; nodes[3].x = 600; animationPointers = []; drawLinkedList(); }, () => { updateAnimationInfo('å¤´éƒ¨æ’å…¥å®Œæˆï¼æ–°é“¾è¡¨ï¼šX âŸ· A âŸ· B âŸ· C'); drawLinkedList(); } ]; function runStep() { if (animationStep < steps.length) { steps[animationStep](); animationStep++; setTimeout(runStep, 2000); } } runStep(); } function drawNullIndicator(x, y) { const width = 40; const height = 20; ctx.fillStyle = 'rgba(0, 0, 0, 0.3)'; drawRoundedRect(x - width/2 + 2, y - height/2 + 2, width, height, 6); ctx.fill(); ctx.fillStyle = '#ddd'; drawRoundedRect(x - width/2, y - height/2, width, height, 6); ctx.fill(); ctx.strokeStyle = '#95a5a6'; ctx.lineWidth = 2; drawRoundedRect(x - width/2, y - height/2, width, height, 6); ctx.stroke(); ctx.fillStyle = '#636e72'; ctx.font = 'bold 12px Arial'; ctx.textAlign = 'center'; ctx.textBaseline = 'middle'; ctx.fillText('NULL', x, y); } function addDeleteEffect(x, y) { const width = 80; const height = 50; const deleteGradient = ctx.createRadialGradient(x, y, 0, x, y, 50); deleteGradient.addColorStop(0, 'rgba(231, 76, 60, 0.8)'); deleteGradient.addColorStop(1, 'rgba(231, 76, 60, 0.2)'); ctx.fillStyle = deleteGradient; drawRoundedRect(x - width/2, y - height/2, width, height, 8); ctx.fill(); ctx.fillStyle = 'white'; ctx.font = 'bold 16px Arial'; ctx.textAlign = 'center'; ctx.textBaseline = 'middle'; ctx.fillText('å·²åˆ é™¤', x, y); ctx.strokeStyle = '#fff'; ctx.lineWidth = 3; ctx.setLineDash([5, 5]); ctx.lineDashOffset = Date.now() * 0.02; drawRoundedRect(x - width/2, y - height/2, width, height, 8); ctx.stroke(); ctx.setLineDash([]); } let typewriterText = ''; let typewriterTarget = ''; let typewriterIndex = 0; function updateAnimationInfo(text) { typewriterTarget = text; typewriterIndex = 0; typewriterText = ''; function typeWriter() { if (typewriterIndex < typewriterTarget.length) { typewriterText += typewriterTarget.charAt(typewriterIndex); document.getElementById('animation-info').textContent = typewriterText + '|'; typewriterIndex++; setTimeout(typeWriter, 50); } else { document.getElementById('animation-info').textContent = typewriterText; } } typeWriter(); } function animationLoop() { if (animationPointers.length > 0) { drawLinkedList(); } requestAnimationFrame(animationLoop); } function resetAnimation() { resetNodes(); drawLinkedList(); updateAnimationInfo('ç‚¹å‡»æŒ‰é’®å¼€å§‹åŠ¨ç”»æ¼”ç¤º'); } function setupLanguageSwitcher() { const langBtns = document.querySelectorAll('.lang-btn'); const codeSections = document.querySelectorAll('.code-section'); langBtns.forEach(btn => { btn.addEventListener('click', () => { const lang = btn.dataset.lang; langBtns.forEach(b => b.classList.remove('active')); btn.classList.add('active'); codeSections.forEach(section => { section.classList.remove('active'); }); document.getElementById(`code-${lang}`).classList.add('active'); }); }); } function setupCodeCopy() { const copyBtns = document.querySelectorAll('.copy-btn'); copyBtns.forEach(btn => { btn.addEventListener('click', () => { const lang = btn.dataset.code; const codeElement = document.querySelector(`#code-${lang} .code-content code`); const text = codeElement.textContent; navigator.clipboard.writeText(text).then(() => { btn.textContent = 'âœ… å·²å¤åˆ¶'; setTimeout(() => { btn.textContent = 'ğŸ“‹ å¤åˆ¶ä»£ç '; }, 2000); }).catch(() => { btn.textContent = 'âŒ å¤åˆ¶å¤±è´¥'; setTimeout(() => { btn.textContent = 'ğŸ“‹ å¤åˆ¶ä»£ç '; }, 2000); }); }); }); } function toggleAnswer(answerId) { const answerElement = document.getElementById(answerId); const headerElement = answerElement.previousElementSibling; if (answerElement.classList.contains('show')) { answerElement.classList.remove('show'); headerElement.classList.remove('active'); } else { document.querySelectorAll('.answer-content.show').forEach(el => { el.classList.remove('show'); }); document.querySelectorAll('.question-header.active').forEach(el => { el.classList.remove('active'); }); answerElement.classList.add('show'); headerElement.classList.add('active'); } } document.addEventListener('DOMContentLoaded', () => { initCanvas(); setupLanguageSwitcher(); setupCodeCopy(); document.getElementById('btn-insert-middle').addEventListener('click', animateInsertMiddle); document.getElementById('btn-delete-node').addEventListener('click', animateDeleteNode); document.getElementById('btn-insert-head').addEventListener('click', animateInsertHead); document.getElementById('btn-reset').addEventListener('click', resetAnimation); animationLoop(); window.addEventListener('resize', () => { setTimeout(initCanvas, 100); }); });</script>
{% endblock %}