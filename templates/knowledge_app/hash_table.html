{% extends 'knowledge_app/base.html' %}

{% block title %}å“ˆå¸Œè¡¨ - è®¡ç®—æœºç§‘å­¦å­¦ä¹ å¹³å°{% endblock %}

{% block content %}
<div class="page-container fade-in"><!-- é¢åŒ…å±‘å¯¼èˆª --><div class="breadcrumb"><a href="{% url 'knowledge_app:index' %}">é¦–é¡µ</a><span>></span><span>æ•°æ®ç»“æ„</span><span>></span><span>å“ˆå¸Œè¡¨</span></div><!-- é¡µé¢å¤´éƒ¨ --><div class="page-header slide-in-left"><h1><span class="page-icon">ğŸ—‚ï¸</span>
            å“ˆå¸Œè¡¨ (Hash Table)
        </h1><p>åŸºäºå“ˆå¸Œå‡½æ•°å®ç°çš„é«˜æ•ˆé”®å€¼å¯¹å­˜å‚¨ç»“æ„ï¼Œå¹³å‡æŸ¥æ‰¾æ—¶é—´O(1)</p></div><!-- ä¸»è¦å†…å®¹ --><div class="content-card slide-in-right"><!-- æ¦‚å¿µä»‹ç» --><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ”</span>
                ä»€ä¹ˆæ˜¯å“ˆå¸Œè¡¨
            </h2><div class="concept-explanation"><p class="concept-intro">
                    å“ˆå¸Œè¡¨æ˜¯ä¸€ç§æ ¹æ®<strong>é”®å€¼</strong>ç›´æ¥è®¿é—®å†…å­˜å­˜å‚¨ä½ç½®çš„æ•°æ®ç»“æ„ã€‚
                    å®ƒé€šè¿‡å“ˆå¸Œå‡½æ•°å°†é”®æ˜ å°„åˆ°è¡¨ä¸­çš„ä½ç½®ï¼Œå®ç°å¿«é€Ÿçš„æ’å…¥ã€åˆ é™¤å’ŒæŸ¥æ‰¾æ“ä½œã€‚
                </p><div class="key-points"><div class="point-item"><span class="point-icon">ğŸ”‘</span><div class="point-content"><h4>å“ˆå¸Œå‡½æ•°</h4><p>å°†é”®è½¬æ¢ä¸ºæ•°ç»„ç´¢å¼•çš„å‡½æ•°ï¼Œå†³å®šæ•°æ®å­˜å‚¨ä½ç½®</p></div></div><div class="point-item"><span class="point-icon">âš¡</span><div class="point-content"><h4>å¿«é€Ÿè®¿é—®</h4><p>ç†æƒ³æƒ…å†µä¸‹ï¼Œæ’å…¥ã€åˆ é™¤ã€æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(1)</p></div></div><div class="point-item"><span class="point-icon">ğŸ”„</span><div class="point-content"><h4>å†²çªå¤„ç†</h4><p>å½“ä¸åŒçš„é”®æ˜ å°„åˆ°åŒä¸€ä½ç½®æ—¶ï¼Œéœ€è¦å†²çªè§£å†³ç­–ç•¥</p></div></div></div></div></div><!-- å¯è§†åŒ–æ¼”ç¤º --><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ®</span>
                äº¤äº’å¼æ¼”ç¤º
            </h2><div class="interactive-demo"><div class="demo-controls"><div class="control-group"><label>å“ˆå¸Œè¡¨å¤§å°ï¼š</label><select id="table-size" onchange="initHashTable()"><option value="7">7</option><option value="11" selected>11</option><option value="13">13</option></select><label>å†²çªè§£å†³ï¼š</label><select id="collision-method"><option value="chaining">é“¾åœ°å€æ³•</option><option value="linear">çº¿æ€§æ¢æµ‹</option><option value="quadratic">äºŒæ¬¡æ¢æµ‹</option></select></div><div class="control-group"><input type="text" id="key-input" placeholder="è¾“å…¥é”®" maxlength="10"><input type="text" id="value-input" placeholder="è¾“å…¥å€¼" maxlength="10"><button class="demo-btn primary" onclick="insertItem()">æ’å…¥</button><button class="demo-btn" onclick="searchItem()">æŸ¥æ‰¾</button><button class="demo-btn" onclick="deleteItem()">åˆ é™¤</button><button class="demo-btn" onclick="clearTable()">æ¸…ç©º</button></div></div><div id="hash-table-display" class="hash-table-display"></div><div class="hash-info"><div class="info-row"><div class="info-item"><span class="info-label">å…ƒç´ æ•°é‡ï¼š</span><span id="element-count">0</span></div><div class="info-item"><span class="info-label">è´Ÿè½½å› å­ï¼š</span><span id="load-factor">0.00</span></div><div class="info-item"><span class="info-label">å†²çªæ¬¡æ•°ï¼š</span><span id="collision-count">0</span></div><div class="info-item"><span class="info-label">æœ€åæ“ä½œï¼š</span><span id="last-operation">æ— </span></div></div><div class="operation-result" id="operation-result"></div></div></div></div><!-- å“ˆå¸Œå‡½æ•° --><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ”¢</span>
                å¸¸è§å“ˆå¸Œå‡½æ•°
            </h2><div class="hash-functions-grid"><div class="function-card"><h4 class="function-title"><span class="function-icon">â—</span>
                        é™¤æ³•æ•£åˆ—
                    </h4><div class="function-formula">h(k) = k mod m</div><p class="function-desc">æœ€ç®€å•çš„å“ˆå¸Œå‡½æ•°ï¼Œmé€šå¸¸é€‰æ‹©è´¨æ•°</p></div><div class="function-card"><h4 class="function-title"><span class="function-icon">âœ–ï¸</span>
                        ä¹˜æ³•æ•£åˆ—
                    </h4><div class="function-formula">h(k) = âŒŠm(kA mod 1)âŒ‹</div><p class="function-desc">Aä¸ºå¸¸æ•°ï¼Œé€šå¸¸å–é»„é‡‘æ¯”ä¾‹çš„å€’æ•°</p></div><div class="function-card"><h4 class="function-title"><span class="function-icon">ğŸ”¤</span>
                        å­—ç¬¦ä¸²æ•£åˆ—
                    </h4><div class="function-formula">h(s) = Î£(s[i] Ã— p^i) mod m</div><p class="function-desc">å¤šé¡¹å¼æ»šåŠ¨å“ˆå¸Œï¼Œpä¸ºè´¨æ•°</p></div></div></div><!-- å†²çªè§£å†³ --><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ”§</span>
                å†²çªè§£å†³ç­–ç•¥
            </h2><div class="collision-methods"><div class="method-card"><h4 class="method-title"><span class="method-icon">ğŸ”—</span>
                        é“¾åœ°å€æ³• (Chaining)
                    </h4><div class="method-visual"><div class="chain-example"><div class="hash-slot">0: [A] â†’ [D] â†’ NULL</div><div class="hash-slot">1: [B] â†’ NULL</div><div class="hash-slot">2: [C] â†’ [E] â†’ NULL</div></div></div><p class="method-desc">æ¯ä¸ªæ§½ä½ç»´æŠ¤ä¸€ä¸ªé“¾è¡¨ï¼Œå†²çªå…ƒç´ æ·»åŠ åˆ°é“¾è¡¨ä¸­</p><div class="method-pros-cons"><div class="pros">âœ… ç®€å•æ˜“å®ç°ï¼Œæ”¯æŒåˆ é™¤</div><div class="cons">âŒ éœ€è¦é¢å¤–æŒ‡é’ˆç©ºé—´</div></div></div><div class="method-card"><h4 class="method-title"><span class="method-icon">ğŸ“</span>
                        å¼€æ”¾åœ°å€æ³• (Open Addressing)
                    </h4><div class="method-visual"><div class="probe-example"><div class="probe-sequence">çº¿æ€§æ¢æµ‹: h(k), h(k)+1, h(k)+2, ...</div><div class="probe-sequence">äºŒæ¬¡æ¢æµ‹: h(k), h(k)+1Â², h(k)+2Â², ...</div></div></div><p class="method-desc">å‘ç”Ÿå†²çªæ—¶ï¼ŒæŒ‰æŸç§è§„å¾‹å¯»æ‰¾ä¸‹ä¸€ä¸ªç©ºæ§½ä½</p><div class="method-pros-cons"><div class="pros">âœ… èŠ‚çœç©ºé—´ï¼Œç¼“å­˜å‹å¥½</div><div class="cons">âŒ åˆ é™¤å¤æ‚ï¼Œå®¹æ˜“èšé›†</div></div></div></div></div><!-- ä»£ç å®ç° --><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ’»</span>
                ä»£ç å®ç°
            </h2><div class="code-example"><div class="code-header"><span class="code-title">Pythonå®ç° - é“¾åœ°å€æ³•</span><button class="copy-btn" onclick="copyCode('hashtable-code')">å¤åˆ¶ä»£ç </button></div><pre id="hashtable-code"><code class="language-python">class HashNode:
    def __init__(self, key, value):
        self.key = key
        self.value = value
        self.next = None

class HashTable:
    def __init__(self, size=11):
        self.size = size
        self.table = [None] * size
        self.count = 0
    
    def _hash(self, key):
        """ç®€å•çš„å“ˆå¸Œå‡½æ•°"""
        if isinstance(key, str):
            hash_value = 0
            for char in key:
                hash_value = (hash_value * 31 + ord(char)) % self.size
            return hash_value
        return key % self.size
    
    def insert(self, key, value):
        """æ’å…¥é”®å€¼å¯¹"""
        index = self._hash(key)
        
        # å¦‚æœæ§½ä½ä¸ºç©ºï¼Œç›´æ¥æ’å…¥
        if self.table[index] is None:
            self.table[index] = HashNode(key, value)
            self.count += 1
            return
        
        # éå†é“¾è¡¨ï¼ŒæŸ¥æ‰¾æ˜¯å¦å·²å­˜åœ¨è¯¥é”®
        current = self.table[index]
        while current:
            if current.key == key:
                current.value = value  # æ›´æ–°å€¼
                return
            if current.next is None:
                break
            current = current.next
        
        # åœ¨é“¾è¡¨æœ«å°¾æ·»åŠ æ–°èŠ‚ç‚¹
        current.next = HashNode(key, value)
        self.count += 1
    
    def search(self, key):
        """æŸ¥æ‰¾é”®å¯¹åº”çš„å€¼"""
        index = self._hash(key)
        current = self.table[index]
        
        while current:
            if current.key == key:
                return current.value
            current = current.next
        
        return None
    
    def delete(self, key):
        """åˆ é™¤é”®å€¼å¯¹"""
        index = self._hash(key)
        current = self.table[index]
        
        # å¦‚æœè¦åˆ é™¤çš„æ˜¯ç¬¬ä¸€ä¸ªèŠ‚ç‚¹
        if current and current.key == key:
            self.table[index] = current.next
            self.count -= 1
            return True
        
        # éå†é“¾è¡¨æŸ¥æ‰¾è¦åˆ é™¤çš„èŠ‚ç‚¹
        while current and current.next:
            if current.next.key == key:
                current.next = current.next.next
                self.count -= 1
                return True
            current = current.next
        
        return False
    
    def load_factor(self):
        """è®¡ç®—è´Ÿè½½å› å­"""
        return self.count / self.size
    
    def display(self):
        """æ˜¾ç¤ºå“ˆå¸Œè¡¨å†…å®¹"""
        for i in range(self.size):
            print(f"æ§½ä½ {i}: ", end="")
            current = self.table[i]
            while current:
                print(f"({current.key}: {current.value})", end="")
                if current.next:
                    print(" -> ", end="")
                current = current.next
            print(" -> NULL")

# ä½¿ç”¨ç¤ºä¾‹
ht = HashTable()
ht.insert("apple", 5)
ht.insert("banana", 3)
ht.insert("orange", 8)
print(f"apple: {ht.search('apple')}")
print(f"è´Ÿè½½å› å­: {ht.load_factor():.2f}")
ht.display()</code></pre></div></div><!-- æ€§èƒ½åˆ†æ --><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ“Š</span>
                æ€§èƒ½åˆ†æ
            </h2><div class="performance-grid"><div class="perf-card"><h4 class="perf-title"><span class="perf-icon">ğŸ†</span>
                        ç†æƒ³æƒ…å†µ
                    </h4><div class="perf-details"><p><strong>æŸ¥æ‰¾ï¼š</strong>O(1)</p><p><strong>æ’å…¥ï¼š</strong>O(1)</p><p><strong>åˆ é™¤ï¼š</strong>O(1)</p><p class="perf-note">æ— å†²çªæˆ–å†²çªå¾ˆå°‘</p></div></div><div class="perf-card"><h4 class="perf-title"><span class="perf-icon">âš ï¸</span>
                        æœ€åæƒ…å†µ
                    </h4><div class="perf-details"><p><strong>æŸ¥æ‰¾ï¼š</strong>O(n)</p><p><strong>æ’å…¥ï¼š</strong>O(n)</p><p><strong>åˆ é™¤ï¼š</strong>O(n)</p><p class="perf-note">æ‰€æœ‰å…ƒç´ éƒ½å†²çª</p></div></div><div class="perf-card"><h4 class="perf-title"><span class="perf-icon">ğŸ“Š</span>
                        å¹³å‡æƒ…å†µ
                    </h4><div class="perf-details"><p><strong>æŸ¥æ‰¾ï¼š</strong>O(1 + Î±)</p><p><strong>æ’å…¥ï¼š</strong>O(1 + Î±)</p><p><strong>åˆ é™¤ï¼š</strong>O(1 + Î±)</p><p class="perf-note">Î±ä¸ºè´Ÿè½½å› å­</p></div></div></div></div><!-- åº”ç”¨åœºæ™¯ --><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ¯</span>
                å®é™…åº”ç”¨
            </h2><div class="application-grid"><div class="app-card"><span class="app-icon">ğŸ—ƒï¸</span><h4>æ•°æ®åº“ç´¢å¼•</h4><p>å¿«é€Ÿå®šä½æ•°æ®è®°å½•</p></div><div class="app-card"><span class="app-icon">ğŸ’¾</span><h4>ç¼“å­˜ç³»ç»Ÿ</h4><p>Redisã€Memcachedç­‰</p></div><div class="app-card"><span class="app-icon">ğŸ”</span><h4>ç¼–è¯‘å™¨</h4><p>ç¬¦å·è¡¨ã€å…³é”®å­—è¯†åˆ«</p></div><div class="app-card"><span class="app-icon">ğŸŒ</span><h4>Webå¼€å‘</h4><p>Sessionç®¡ç†ã€è·¯ç”±è¡¨</p></div></div></div></div><!-- å­¦ä¹ æç¤º --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ’¡</span>
                å­¦ä¹ è¦ç‚¹
            </h2><div class="unified-grid unified-grid-2"><div class="info-box info-box-info"><span class="info-icon">ğŸ”‘</span><strong>å“ˆå¸Œå‡½æ•°ï¼š</strong>ç†è§£å¥½çš„å“ˆå¸Œå‡½æ•°åº”è¯¥å‡åŒ€åˆ†å¸ƒã€è®¡ç®—å¿«é€Ÿã€‚
                </div><div class="info-box info-box-success"><span class="info-icon">ğŸ”„</span><strong>å†²çªå¤„ç†ï¼š</strong>æŒæ¡é“¾åœ°å€æ³•å’Œå¼€æ”¾åœ°å€æ³•çš„ä¼˜ç¼ºç‚¹ã€‚
                </div><div class="info-box info-box-warning"><span class="info-icon">ğŸ“Š</span><strong>è´Ÿè½½å› å­ï¼š</strong>æ§åˆ¶è´Ÿè½½å› å­ä»¥ä¿æŒè‰¯å¥½æ€§èƒ½ã€‚
                </div><div class="info-box info-box-info"><span class="info-icon">ğŸ”§</span><strong>åŠ¨æ€è°ƒæ•´ï¼š</strong>å­¦ä¹ å“ˆå¸Œè¡¨çš„æ‰©å®¹å’Œç¼©å®¹æœºåˆ¶ã€‚
                </div></div></div></div></div><style>.interactive-demo {background:#f8f9fa;border-radius:12px;padding:25px;margin:20px 0}.demo-controls {display:flex;flex-direction:column;gap:15px;margin-bottom:25px}.control-group {display:flex;align-items:center;gap:10px;flex-wrap:wrap}.control-group label {font-weight:600;color:#333;min-width:80px}.control-group input, .control-group select {padding:8px 12px;border:1px solid #ddd;border-radius:6px;min-width:100px}.demo-btn {padding:8px 16px;background:#6c757d;color:white;border:none;border-radius:6px;cursor:pointer;font-weight:500;transition:all 0.3s ease}.demo-btn.primary {background:#007bff}.demo-btn:hover {transform:translateY(-1px);box-shadow:0 2px 8px rgba(0,0,0,0.2)}.hash-table-display {background:white;border-radius:8px;padding:20px;border:1px solid #e9ecef;margin:20px 0;min-height:300px}.hash-slot {display:flex;align-items:center;padding:10px;margin:5px 0;border:1px solid #ddd;border-radius:6px;background:#f8f9fa;transition:all 0.3s ease}.hash-slot.highlight {background:#cce7ff;border-color:#007bff;transform:scale(1.02)}.slot-index {width:30px;text-align:center;font-weight:600;color:#666;margin-right:15px}.slot-content {display:flex;align-items:center;gap:10px;flex:1}.hash-node {background:#007bff;color:white;padding:5px 10px;border-radius:4px;font-size:12px;font-weight:600;animation:slideIn 0.3s ease-out}.hash-node.new {background:#28a745;animation:pulse 0.6s ease-out}.hash-node.found {background:#ffc107;color:#333;animation:pulse 0.6s ease-out}.chain-arrow {color:#666;font-weight:bold}.hash-info {background:white;border-radius:8px;padding:20px;border:1px solid #e9ecef}.info-row {display:grid;grid-template-columns:repeat(auto-fit, minmax(150px, 1fr));gap:15px;margin-bottom:15px}.info-item {text-align:center;padding:10px;background:#f8f9fa;border-radius:6px}.info-label {display:block;font-size:14px;color:#666;margin-bottom:5px}.info-item span:last-child {font-size:18px;font-weight:600;color:#007bff}.operation-result {text-align:center;padding:15px;border-radius:8px;font-weight:600;margin-top:15px}.operation-result.success {background:#d4edda;color:#155724;border:1px solid #c3e6cb}.operation-result.error {background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.operation-result.info {background:#cce7ff;color:#004085;border:1px solid #b3d7ff}.hash-functions-grid {display:grid;grid-template-columns:repeat(auto-fit, minmax(280px, 1fr));gap:20px;margin:20px 0}.function-card {background:#f8f9fa;padding:20px;border-radius:12px;border:1px solid #e9ecef;text-align:center;transition:all 0.3s ease}.function-card:hover {transform:translateY(-5px);box-shadow:0 8px 25px rgba(0,0,0,0.1);background:white}.function-title {display:flex;align-items:center;justify-content:center;gap:10px;margin-bottom:15px;color:#333}.function-formula {background:#e9ecef;padding:10px;border-radius:6px;font-family:'Courier New', monospace;font-weight:600;margin:10px 0;color:#495057}.function-desc {color:#666;font-size:14px;line-height:1.5}.collision-methods {display:grid;grid-template-columns:repeat(auto-fit, minmax(400px, 1fr));gap:30px;margin:20px 0}.method-card {background:#f8f9fa;padding:25px;border-radius:12px;border:1px solid #e9ecef}.method-title {display:flex;align-items:center;gap:10px;margin-bottom:15px;color:#333}.method-visual {background:white;padding:15px;border-radius:8px;margin:15px 0;border:1px solid #ddd}.chain-example {font-family:'Courier New', monospace;font-size:14px}.hash-slot {margin:5px 0;color:#495057}.probe-example {font-family:'Courier New', monospace;font-size:14px}.probe-sequence {margin:5px 0;color:#495057}.method-desc {color:#666;line-height:1.5;margin:15px 0}.method-pros-cons {display:flex;flex-direction:column;gap:8px}.pros, .cons {padding:8px 12px;border-radius:6px;font-size:14px}.pros {background:#d4edda;color:#155724}.cons {background:#f8d7da;color:#721c24}.performance-grid {display:grid;grid-template-columns:repeat(auto-fit, minmax(250px, 1fr));gap:20px;margin:20px 0}.perf-card {background:#f8f9fa;padding:20px;border-radius:12px;border:1px solid #e9ecef;text-align:center}.perf-title {display:flex;align-items:center;justify-content:center;gap:10px;margin-bottom:15px;color:#333}.perf-details p {margin:8px 0;color:#555}.perf-note {font-style:italic;color:#666;font-size:14px}@keyframes slideIn {from {opacity:0;transform:translateX(-20px)}to {opacity:1;transform:translateX(0)}}@keyframes pulse {0%, 100% {transform:scale(1)}50% {transform:scale(1.1)}}@media (max-width:768px) {.control-group {flex-direction:column;align-items:stretch}.control-group label {min-width:auto}.control-group input, .control-group select {min-width:auto}.info-row {grid-template-columns:1fr}.hash-functions-grid, .performance-grid {grid-template-columns:1fr}.collision-methods {grid-template-columns:1fr}.slot-content {flex-wrap:wrap}}</style><script>class HashTableVisual { constructor(size = 11) { this.size = size; this.table = new Array(size).fill(null).map(() => []); this.count = 0; this.collisionCount = 0; } hash(key) { if (typeof key === 'string') { let hash = 0; for (let i = 0; i < key.length; i++) { hash = (hash * 31 + key.charCodeAt(i)) % this.size; } return hash; } return parseInt(key) % this.size; } insert(key, value) { const index = this.hash(key); const chain = this.table[index]; for (let i = 0; i < chain.length; i++) { if (chain[i].key === key) { chain[i].value = value; return { success: true, message: `æ›´æ–°é”® "${key}" çš„å€¼ä¸º "${value}"`, index, isUpdate: true }; } } if (chain.length > 0) { this.collisionCount++; } chain.push({ key, value }); this.count++; return { success: true, message: `æˆåŠŸæ’å…¥é”®å€¼å¯¹ ("${key}", "${value}")`, index, isNew: true, hasCollision: chain.length > 1 }; } search(key) { const index = this.hash(key); const chain = this.table[index]; for (let i = 0; i < chain.length; i++) { if (chain[i].key === key) { return { success: true, value: chain[i].value, message: `æ‰¾åˆ°é”® "${key}"ï¼Œå€¼ä¸º "${chain[i].value}"`, index, position: i }; } } return { success: false, message: `æœªæ‰¾åˆ°é”® "${key}"`, index }; } delete(key) { const index = this.hash(key); const chain = this.table[index]; for (let i = 0; i < chain.length; i++) { if (chain[i].key === key) { const deletedValue = chain[i].value; chain.splice(i, 1); this.count--; return { success: true, message: `æˆåŠŸåˆ é™¤é”® "${key}"ï¼Œå€¼ä¸º "${deletedValue}"`, index }; } } return { success: false, message: `æœªæ‰¾åˆ°é”® "${key}"ï¼Œæ— æ³•åˆ é™¤`, index }; } clear() { this.table = new Array(this.size).fill(null).map(() => []); this.count = 0; this.collisionCount = 0; } loadFactor() { return this.count / this.size; } } let hashTable = new HashTableVisual(11); function initHashTable() { const size = parseInt(document.getElementById('table-size').value); hashTable = new HashTableVisual(size); displayHashTable(); updateInfo(); } function displayHashTable() { const displayElement = document.getElementById('hash-table-display'); displayElement.innerHTML = ''; for (let i = 0; i < hashTable.size; i++) { const slotDiv = document.createElement('div'); slotDiv.className = 'hash-slot'; slotDiv.id = `slot-${i}`; const indexDiv = document.createElement('div'); indexDiv.className = 'slot-index'; indexDiv.textContent = i; const contentDiv = document.createElement('div'); contentDiv.className = 'slot-content'; const chain = hashTable.table[i]; if (chain.length === 0) { contentDiv.innerHTML = '<span style="color: #999; font-style: italic;">ç©º</span>'; } else { chain.forEach((node, index) => { const nodeDiv = document.createElement('div'); nodeDiv.className = 'hash-node'; nodeDiv.textContent = `${node.key}:${node.value}`; contentDiv.appendChild(nodeDiv); if (index < chain.length - 1) { const arrowDiv = document.createElement('div'); arrowDiv.className = 'chain-arrow'; arrowDiv.textContent = 'â†’'; contentDiv.appendChild(arrowDiv); } }); } slotDiv.appendChild(indexDiv); slotDiv.appendChild(contentDiv); displayElement.appendChild(slotDiv); } } function updateInfo() { document.getElementById('element-count').textContent = hashTable.count; document.getElementById('load-factor').textContent = hashTable.loadFactor().toFixed(2); document.getElementById('collision-count').textContent = hashTable.collisionCount; } function showOperationResult(result) { const resultElement = document.getElementById('operation-result'); resultElement.textContent = result.message; if (result.success) { resultElement.className = 'operation-result success'; } else { resultElement.className = 'operation-result error'; } if (result.index !== undefined) { const slotElement = document.getElementById(`slot-${result.index}`); slotElement.classList.add('highlight'); setTimeout(() => { slotElement.classList.remove('highlight'); }, 2000); } document.getElementById('last-operation').textContent = result.message.split('ï¼Œ')[0]; } function insertItem() { const key = document.getElementById('key-input').value.trim(); const value = document.getElementById('value-input').value.trim(); if (!key || !value) { showOperationResult({ success: false, message: 'è¯·è¾“å…¥é”®å’Œå€¼' }); return; } const result = hashTable.insert(key, value); displayHashTable(); updateInfo(); showOperationResult(result); document.getElementById('key-input').value = ''; document.getElementById('value-input').value = ''; } function searchItem() { const key = document.getElementById('key-input').value.trim(); if (!key) { showOperationResult({ success: false, message: 'è¯·è¾“å…¥è¦æŸ¥æ‰¾çš„é”®' }); return; } const result = hashTable.search(key); showOperationResult(result); if (result.success && result.position !== undefined) { setTimeout(() => { const slotElement = document.getElementById(`slot-${result.index}`); const nodes = slotElement.querySelectorAll('.hash-node'); if (nodes[result.position]) { nodes[result.position].classList.add('found'); setTimeout(() => { nodes[result.position].classList.remove('found'); }, 2000); } }, 100); } } function deleteItem() { const key = document.getElementById('key-input').value.trim(); if (!key) { showOperationResult({ success: false, message: 'è¯·è¾“å…¥è¦åˆ é™¤çš„é”®' }); return; } const result = hashTable.delete(key); displayHashTable(); updateInfo(); showOperationResult(result); document.getElementById('key-input').value = ''; } function clearTable() { hashTable.clear(); displayHashTable(); updateInfo(); showOperationResult({ success: true, message: 'å“ˆå¸Œè¡¨å·²æ¸…ç©º' }); document.getElementById('key-input').value = ''; document.getElementById('value-input').value = ''; } function copyCode(elementId) { const codeElement = document.getElementById(elementId); const text = codeElement.textContent; navigator.clipboard.writeText(text).then(() => { alert('ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼'); }).catch(() => { alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶'); }); } document.addEventListener('DOMContentLoaded', function() { displayHashTable(); updateInfo(); document.getElementById('key-input').addEventListener('keypress', function(e) { if (e.key === 'Enter') { document.getElementById('value-input').focus(); } }); document.getElementById('value-input').addEventListener('keypress', function(e) { if (e.key === 'Enter') { insertItem(); } }); });</script>

{% endblock %}
