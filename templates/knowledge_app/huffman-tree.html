{% extends 'knowledge_app/base.html' %}

{% block title %}{{ page_title|default:"å“ˆå¤«æ›¼æ ‘" }} - è®¡ç®—æœºç§‘å­¦å­¦ä¹ å¹³å°{% endblock %}

{% block content %}
<div class="page-container fade-in"><!-- é¢åŒ…å±‘å¯¼èˆª --><div class="breadcrumb"><a href="{% url 'knowledge_app:index' %}">é¦–é¡µ</a><span>></span><span>{{ breadcrumb_category|default:"æ•°æ®ç»“æ„" }}</span><span>></span><span>{{ page_title|default:"å“ˆå¤«æ›¼æ ‘" }}</span></div><!-- é¡µé¢å¤´éƒ¨ --><div class="page-header slide-in-left"><h1><span class="page-icon">{{ page_icon|default:"ğŸŒ³" }}</span>
            {{ page_title|default:"å“ˆå¤«æ›¼æ ‘" }}
        </h1><p>{{ page_description|default:"æ•°æ®å‹ç¼©çš„è‰ºæœ¯ - å¯è§†åŒ–å­¦ä¹ æœ€ä¼˜ç¼–ç ç®—æ³•" }}</p></div><!-- çŸ¥è¯†ç‚¹æ¦‚è¿° --><div class="content-card slide-in-right"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ“‹</span>
                çŸ¥è¯†ç‚¹æ¦‚è¿°
            </h2><div class="info-box info-box-info" style="margin: 20px 0;"><span class="info-icon">ğŸ’¡</span><strong>æ ¸å¿ƒæ¦‚å¿µï¼š</strong>å“ˆå¤«æ›¼æ ‘æ˜¯ä¸€ç§ç”¨äºæ•°æ®å‹ç¼©çš„ç‰¹æ®ŠäºŒå‰æ ‘ï¼Œé€šè¿‡ç»™å‡ºç°é¢‘ç‡é«˜çš„å­—ç¬¦åˆ†é…çŸ­ç¼–ç ï¼Œé¢‘ç‡ä½çš„å­—ç¬¦åˆ†é…é•¿ç¼–ç ï¼Œä»è€Œå®ç°æœ€ä¼˜çš„å‹ç¼©æ•ˆæœã€‚
            </div><div class="unified-grid unified-grid-2"><div class="grid-card"><span class="card-icon">ğŸ·ï¸</span><h4 class="card-title">å“ˆå¤«æ›¼ç¼–ç </h4><p class="card-description">åŸºäºå­—ç¬¦å‡ºç°é¢‘ç‡çš„å¯å˜é•¿åº¦ç¼–ç æ–¹å¼</p></div><div class="grid-card"><span class="card-icon">ğŸ“Š</span><h4 class="card-title">ä¼˜å…ˆé˜Ÿåˆ—</h4><p class="card-description">æŒ‰é¢‘ç‡ä»å°åˆ°å¤§æ’åºçš„æ•°æ®ç»“æ„</p></div><div class="grid-card"><span class="card-icon">ğŸŒ¿</span><h4 class="card-title">å¶å­èŠ‚ç‚¹</h4><p class="card-description">å­˜å‚¨åŸå§‹å­—ç¬¦å’Œé¢‘ç‡çš„ç»ˆç«¯èŠ‚ç‚¹</p></div><div class="grid-card"><span class="card-icon">âš–ï¸</span><h4 class="card-title">æœ€ä¼˜æ€§</h4><p class="card-description">ä¿è¯ç¼–ç æ€»é•¿åº¦æœ€çŸ­çš„è´ªå¿ƒç®—æ³•</p></div></div><div class="unified-grid unified-grid-3" style="margin-top: 20px;"><div class="info-box info-box-success"><span class="info-icon">â­</span><strong>å­¦ä¹ éš¾åº¦ï¼š</strong>è¿›é˜¶çº§åˆ«
                </div><div class="info-box info-box-warning"><span class="info-icon">ğŸ“š</span><strong>å‰ç½®çŸ¥è¯†ï¼š</strong>äºŒå‰æ ‘ã€ä¼˜å…ˆé˜Ÿåˆ—ã€è´ªå¿ƒç®—æ³•
                </div><div class="info-box info-box-info"><span class="info-icon">â±ï¸</span><strong>å­¦ä¹ æ—¶é•¿ï¼š</strong>çº¦2-3å°æ—¶
                </div></div></div></div><!-- æ¦‚å¿µè¯¦è§£ --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ”</span>
                æ¦‚å¿µè¯¦è§£
            </h2><h3 style="color: #4a5568; margin: 25px 0 15px 0;">1. ğŸ’¡ åŸºæœ¬æ€æƒ³</h3><div class="info-box info-box-success"><span class="info-icon">ğŸ </span><strong>ç”Ÿæ´»ç±»æ¯”ï¼š</strong>æƒ³è±¡ä½ åœ¨æ•´ç†ä¹¦æ¶ï¼Œç»å¸¸çœ‹çš„ä¹¦æ”¾åœ¨å®¹æ˜“æ‹¿åˆ°çš„åœ°æ–¹ï¼ˆçŸ­è·¯å¾„ï¼‰ï¼Œå¶å°”çœ‹çš„ä¹¦æ”¾åœ¨é«˜å¤„ï¼ˆé•¿è·¯å¾„ï¼‰ã€‚å“ˆå¤«æ›¼æ ‘ä¹Ÿæ˜¯è¿™æ ·ï¼Œå¸¸ç”¨å­—ç¬¦ç”¨çŸ­ç¼–ç ï¼Œå°‘ç”¨å­—ç¬¦ç”¨é•¿ç¼–ç ã€‚
            </div><h3 style="color: #4a5568; margin: 25px 0 15px 0;">2. ğŸ—ï¸ æ„å»ºè¿‡ç¨‹</h3><ol style="padding-left: 20px; line-height: 1.8;"><li><strong>ç»Ÿè®¡é¢‘ç‡ï¼š</strong>è®¡ç®—æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°</li><li><strong>å»ºç«‹é˜Ÿåˆ—ï¼š</strong>å°†æ‰€æœ‰å­—ç¬¦æŒ‰é¢‘ç‡ä»å°åˆ°å¤§æ’åº</li><li><strong>åˆå¹¶æ“ä½œï¼š</strong>é‡å¤å–å‡ºé¢‘ç‡æœ€å°çš„ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œåˆå¹¶æˆæ–°èŠ‚ç‚¹</li><li><strong>æ„æˆæ ‘å½¢ï¼š</strong>ç›´åˆ°åªå‰©ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå³ä¸ºæ ¹èŠ‚ç‚¹</li><li><strong>å¸ƒå±€ä¼˜åŒ–ï¼š</strong>è°ƒæ•´ä¸ºæ ‡å‡†äºŒå‰æ ‘å½¢çŠ¶</li></ol><h3 style="color: #4a5568; margin: 25px 0 15px 0;">3. ğŸ†š ä¸å…¶ä»–ç¼–ç çš„å¯¹æ¯”</h3><div class="unified-grid unified-grid-2"><div class="info-box info-box-warning"><span class="info-icon">ğŸ”¤</span><strong>ASCIIç¼–ç ï¼š</strong>å›ºå®š8ä½é•¿åº¦ï¼Œé€‚ç”¨äºæ ‡å‡†æ–‡æœ¬ï¼Œæ•ˆç‡ä¸€èˆ¬
                </div><div class="info-box info-box-success"><span class="info-icon">ğŸ¯</span><strong>å“ˆå¤«æ›¼ç¼–ç ï¼š</strong>å¯å˜1-nä½é•¿åº¦ï¼Œé€‚ç”¨äºæ•°æ®å‹ç¼©ï¼Œæ•ˆç‡æœ€ä¼˜
                </div></div><h3 style="color: #4a5568; margin: 25px 0 15px 0;">4. âš ï¸ æ˜“æ··æ·†ç‚¹</h3><ul style="padding-left: 20px; line-height: 1.8;"><li><strong>ç¼–ç å”¯ä¸€æ€§ï¼š</strong>å“ˆå¤«æ›¼ç¼–ç å…·æœ‰å‰ç¼€æ€§è´¨ï¼Œä»»ä½•ç¼–ç éƒ½ä¸æ˜¯å¦ä¸€ä¸ªçš„å‰ç¼€</li><li><strong>æ ‘çš„æ„å»ºï¼š</strong>æ€»æ˜¯åˆå¹¶é¢‘ç‡æœ€å°çš„ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯ä»»æ„ä¸¤ä¸ª</li><li><strong>å·¦å³å­æ ‘ï¼š</strong>é€šå¸¸çº¦å®šå·¦å­æ ‘ä¸º0ï¼Œå³å­æ ‘ä¸º1ï¼ˆä¹Ÿå¯åè¿‡æ¥ï¼‰</li></ul></div></div><!-- å¯è§†åŒ–å±•ç¤º --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ“Š</span>
                å¯è§†åŒ–å±•ç¤º
            </h2><div id="huffman-visualization" style="background: linear-gradient(to bottom, #f8f9ff 0%, #e8f4fd 100%); border-radius: 15px; padding: 25px; margin: 20px 0; box-shadow: 0 8px 32px rgba(0,0,0,0.1);"><h3 style="text-align: center; color: #4a5568; margin-bottom: 20px;">ğŸ® äº¤äº’å¼å“ˆå¤«æ›¼æ ‘æ„å»ºæ¼”ç¤º</h3><div style="text-align: center; margin: 20px 0;"><input type="text" id="inputData" placeholder="æ ¼å¼: A:5,B:3,C:2,D:1" value="A:5,B:3,C:2,D:1"
                           style="padding: 12px 20px; margin: 0 10px; border: 2px solid #e2e8f0; border-radius: 25px; font-size: 16px; min-width: 300px;"><button class="unified-btn unified-btn-primary" onclick="parseInput()"><span>ğŸ“Š</span> è§£ææ•°æ®
                    </button></div><div style="text-align: center; margin: 20px 0;"><button class="unified-btn unified-btn-success" onclick="startAnimation()"><span>ğŸš€</span> å¼€å§‹æ„å»º
                    </button><button class="unified-btn unified-btn-secondary" onclick="resetAnimation()"><span>ğŸ”„</span> é‡ç½®
                    </button><button class="unified-btn unified-btn-primary" onclick="nextStep()" id="nextBtn" disabled><span>â­ï¸</span> ä¸‹ä¸€æ­¥
                    </button><button class="unified-btn unified-btn-warning" onclick="autoPlay()" id="autoBtn" disabled><span>â–¶ï¸</span> è‡ªåŠ¨æ’­æ”¾
                    </button></div><div class="info-box info-box-info" id="status" style="text-align: center; margin: 20px 0;">
                    è¯·è¾“å…¥æ•°æ®å¹¶ç‚¹å‡»"è§£ææ•°æ®"å¼€å§‹
                </div><div style="background: rgba(102, 126, 234, 0.1); padding: 15px; border-radius: 10px; margin: 15px 0;"><h4 style="margin-top: 0; color: #4a5568;">ğŸ“‹ å½“å‰é˜Ÿåˆ—çŠ¶æ€ï¼š</h4><div id="queueDisplay" style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin: 10px 0;"></div></div><canvas id="canvas" width="1000" height="500" style="border-radius: 10px; display: block; margin: 0 auto; box-shadow: 0 5px 15px rgba(0,0,0,0.1);"></canvas><div class="info-box info-box-success" style="margin-top: 20px;"><span class="info-icon">ğŸ’¡</span><strong>æ“ä½œæç¤ºï¼š</strong><ul style="margin: 10px 0; padding-left: 20px;"><li>ğŸ”¤ è¾“å…¥æ ¼å¼ï¼šå­—ç¬¦:é¢‘ç‡ï¼Œç”¨é€—å·åˆ†éš”ï¼ˆå¦‚ï¼šA:5,B:3,C:2ï¼‰</li><li>ğŸ‘€ è§‚å¯Ÿé˜Ÿåˆ—å˜åŒ–ï¼šçº¢è‰²è¡¨ç¤ºå½“å‰é€‰ä¸­çš„èŠ‚ç‚¹</li><li>ğŸ¨ æœ€ç»ˆå¸ƒå±€ï¼šè“è‰²è¿çº¿è¡¨ç¤ºå·¦å­æ ‘(0)ï¼Œç»¿è‰²è¡¨ç¤ºå³å­æ ‘(1)</li></ul></div></div></div></div><!-- å®é™…åº”ç”¨ --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸŒŸ</span>
                å®é™…åº”ç”¨
            </h2><h3 style="color: #4a5568; margin: 25px 0 15px 0;">1. ğŸ“ æ•°æ®å‹ç¼©é¢†åŸŸ</h3><div class="unified-grid unified-grid-3"><div class="grid-card"><span class="card-icon">ğŸ“¦</span><h4 class="card-title">ZIPå‹ç¼©</h4><p class="card-description">æ–‡ä»¶å‹ç¼©è½¯ä»¶çš„æ ¸å¿ƒç®—æ³•ä¹‹ä¸€</p></div><div class="grid-card"><span class="card-icon">ğŸ–¼ï¸</span><h4 class="card-title">JPEGå›¾åƒ</h4><p class="card-description">å›¾åƒå‹ç¼©ä¸­ç”¨äºå‹ç¼©é¢œè‰²ä¿¡æ¯</p></div><div class="grid-card"><span class="card-icon">ğŸµ</span><h4 class="card-title">MP3éŸ³é¢‘</h4><p class="card-description">éŸ³é¢‘å‹ç¼©ä¸­çš„é‡è¦ç»„æˆéƒ¨åˆ†</p></div></div><h3 style="color: #4a5568; margin: 25px 0 15px 0;">2. ğŸŒ ç½‘ç»œä¼ è¾“æ¡ˆä¾‹</h3><div class="info-box info-box-success"><span class="info-icon">ğŸš€</span><strong>å…¸å‹æ¡ˆä¾‹ï¼š</strong>ç½‘é¡µä¼ è¾“æ—¶ï¼ŒæœåŠ¡å™¨ä½¿ç”¨Gzipå‹ç¼©ï¼ˆåŸºäºå“ˆå¤«æ›¼ç¼–ç ï¼‰å¯ä»¥å°†HTMLæ–‡ä»¶å¤§å°å‡å°‘60-80%ï¼Œå¤§å¤§æå‡åŠ è½½é€Ÿåº¦ã€‚ç”¨æˆ·è®¿é—®ç½‘é¡µæ—¶æ„Ÿå—åˆ°çš„å¿«é€ŸåŠ è½½ï¼ŒèƒŒåå°±æœ‰å“ˆå¤«æ›¼ç®—æ³•çš„è´¡çŒ®ã€‚
            </div><h3 style="color: #4a5568; margin: 25px 0 15px 0;">3. ğŸ’» ä»£ç å®ç°</h3><div style="margin: 20px 0;"><div style="display: flex; background: #f7fafc; border-radius: 8px 8px 0 0; overflow: hidden;"><button class="code-tab active" onclick="showCode('cpp')" style="padding: 12px 20px; background: #667eea; color: white; border: none; cursor: pointer; font-weight: bold; transition: all 0.3s;">C++</button><button class="code-tab" onclick="showCode('java')" style="padding: 12px 20px; background: #e2e8f0; border: none; cursor: pointer; font-weight: bold; transition: all 0.3s;">Java</button><button class="code-tab" onclick="showCode('python')" style="padding: 12px 20px; background: #e2e8f0; border: none; cursor: pointer; font-weight: bold; transition: all 0.3s;">Python</button></div><div id="cpp-code" class="code-content" style="background: #2d3748; color: #f7fafc; padding: 20px; border-radius: 0 0 8px 8px; font-family: 'Courier New', monospace; font-size: 14px; line-height: 1.5; position: relative; overflow-x: auto;"><button class="copy-btn" onclick="copyCode('cpp')" style="position: absolute; top: 10px; right: 10px; background: #4a5568; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-size: 12px;">ğŸ“‹ å¤åˆ¶</button><pre style="margin: 0; white-space: pre-wrap;">struct HuffmanNode {
    char data;
    int freq;
    HuffmanNode* left;
    HuffmanNode* right;

    HuffmanNode(char d, int f) : data(d), freq(f), left(nullptr), right(nullptr) {}
};

class Compare {
public:
    bool operator()(HuffmanNode* a, HuffmanNode* b) {
        return a->freq > b->freq; // æœ€å°å †
    }
};

HuffmanNode* buildHuffmanTree(vector&lt;pair&lt;char, int&gt;&gt;& chars) {
    priority_queue&lt;HuffmanNode*, vector&lt;HuffmanNode*&gt;, Compare&gt; pq;

    // åˆ›å»ºå¶å­èŠ‚ç‚¹
    for (auto& p : chars) {
        pq.push(new HuffmanNode(p.first, p.second));
    }

    // æ„å»ºå“ˆå¤«æ›¼æ ‘
    while (pq.size() > 1) {
        HuffmanNode* left = pq.top(); pq.pop();
        HuffmanNode* right = pq.top(); pq.pop();

        HuffmanNode* merged = new HuffmanNode('\0', left->freq + right->freq);
        merged->left = left;
        merged->right = right;

        pq.push(merged);
    }

    return pq.top();
}</pre></div><div id="java-code" class="code-content" style="background: #2d3748; color: #f7fafc; padding: 20px; border-radius: 0 0 8px 8px; font-family: 'Courier New', monospace; font-size: 14px; line-height: 1.5; position: relative; overflow-x: auto; display: none;"><button class="copy-btn" onclick="copyCode('java')" style="position: absolute; top: 10px; right: 10px; background: #4a5568; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-size: 12px;">ğŸ“‹ å¤åˆ¶</button><pre style="margin: 0; white-space: pre-wrap;">class HuffmanNode {
    char data;
    int freq;
    HuffmanNode left, right;

    public HuffmanNode(char data, int freq) {
        this.data = data;
        this.freq = freq;
        this.left = this.right = null;
    }
}

public class HuffmanTree {
    public static HuffmanNode buildHuffmanTree(Map&lt;Character, Integer&gt; freqMap) {
        PriorityQueue&lt;HuffmanNode&gt; pq = new PriorityQueue&lt;&gt;(
            (a, b) -&gt; Integer.compare(a.freq, b.freq)
        );

        // åˆ›å»ºå¶å­èŠ‚ç‚¹
        for (Map.Entry&lt;Character, Integer&gt; entry : freqMap.entrySet()) {
            pq.offer(new HuffmanNode(entry.getKey(), entry.getValue()));
        }

        // æ„å»ºå“ˆå¤«æ›¼æ ‘
        while (pq.size() > 1) {
            HuffmanNode left = pq.poll();
            HuffmanNode right = pq.poll();

            HuffmanNode merged = new HuffmanNode('\0', left.freq + right.freq);
            merged.left = left;
            merged.right = right;

            pq.offer(merged);
        }

        return pq.poll();
    }
}</pre></div><div id="python-code" class="code-content" style="background: #2d3748; color: #f7fafc; padding: 20px; border-radius: 0 0 8px 8px; font-family: 'Courier New', monospace; font-size: 14px; line-height: 1.5; position: relative; overflow-x: auto; display: none;"><button class="copy-btn" onclick="copyCode('python')" style="position: absolute; top: 10px; right: 10px; background: #4a5568; color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-size: 12px;">ğŸ“‹ å¤åˆ¶</button><pre style="margin: 0; white-space: pre-wrap;">import heapq
from collections import defaultdict

class HuffmanNode:
    def __init__(self, char=None, freq=0, left=None, right=None):
        self.char = char
        self.freq = freq
        self.left = left
        self.right = right

    def __lt__(self, other):
        return self.freq < other.freq

def build_huffman_tree(freq_dict):
    # åˆ›å»ºä¼˜å…ˆé˜Ÿåˆ—ï¼ˆæœ€å°å †ï¼‰
    heap = [HuffmanNode(char, freq) for char, freq in freq_dict.items()]
    heapq.heapify(heap)

    # æ„å»ºå“ˆå¤«æ›¼æ ‘
    while len(heap) > 1:
        left = heapq.heappop(heap)
        right = heapq.heappop(heap)

        merged = HuffmanNode(freq=left.freq + right.freq, left=left, right=right)
        heapq.heappush(heap, merged)

    return heap[0]

def get_huffman_codes(root):
    if not root:
        return {}

    codes = {}

    def dfs(node, code=""):
        if node.char:  # å¶å­èŠ‚ç‚¹
            codes[node.char] = code or "0"  # å¤„ç†åªæœ‰ä¸€ä¸ªå­—ç¬¦çš„æƒ…å†µ
            return

        if node.left:
            dfs(node.left, code + "0")
        if node.right:
            dfs(node.right, code + "1")

    dfs(root)
    return codes</pre></div></div><h3 style="color: #4a5568; margin: 25px 0 15px 0;">5. ğŸ› ï¸ æ¨èå­¦ä¹ å·¥å…·</h3><div class="unified-grid unified-grid-3"><div class="grid-card"><span class="card-icon">ğŸ‘ï¸</span><h4 class="card-title">åœ¨çº¿å¯è§†åŒ–</h4><p class="card-description">VisuAlgoã€Algorithm Visualizer</p></div><div class="grid-card"><span class="card-icon">ğŸ’»</span><h4 class="card-title">ç¼–ç¨‹ç»ƒä¹ </h4><p class="card-description">LeetCodeç¬¬622é¢˜"å“ˆå¤«æ›¼ç¼–ç "</p></div><div class="grid-card"><span class="card-icon">ğŸ“</span><h4 class="card-title">å‹ç¼©å·¥å…·</h4><p class="card-description">7-Zipï¼ˆå¯è§‚å¯Ÿå‹ç¼©æ•ˆæœï¼‰</p></div></div></div></div><!-- å­¦ä¹ æ£€éªŒ --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">âœ…</span>
                å­¦ä¹ æ£€éªŒ
            </h2><div class="question-card" style="background: #f7fafc; border: 2px solid #e2e8f0; border-radius: 10px; margin: 15px 0; overflow: hidden;"><div class="question-header" onclick="toggleQuestion(1)" style="background: #667eea; color: white; padding: 15px; cursor: pointer; font-weight: bold; display: flex; justify-content: space-between; align-items: center;"><span>â“ é—®é¢˜1ï¼šä¸ºä»€ä¹ˆå“ˆå¤«æ›¼ç¼–ç æ˜¯æœ€ä¼˜çš„ï¼Ÿ</span><span id="arrow-1">â–¼</span></div><div class="question-content" id="question-1" style="padding: 15px; display: none; background: white; border-top: 1px solid #e2e8f0;"><p style="margin-bottom: 15px;">è¯·è§£é‡Šå“ˆå¤«æ›¼ç¼–ç åœ¨ä»€ä¹ˆæ„ä¹‰ä¸‹æ˜¯"æœ€ä¼˜"çš„ï¼Œä»¥åŠè¿™ç§æœ€ä¼˜æ€§æ˜¯å¦‚ä½•ä¿è¯çš„ã€‚</p><button class="unified-btn unified-btn-success" onclick="showAnswer(1)"><span>ğŸ’¡</span> æŸ¥çœ‹ç­”æ¡ˆ
                    </button><div class="answer" id="answer-1" style="background: #f0fff4; border: 1px solid #9ae6b4; border-radius: 5px; padding: 15px; margin-top: 15px; display: none;"><p><strong>ç­”æ¡ˆï¼š</strong>å“ˆå¤«æ›¼ç¼–ç åœ¨"å¹³å‡ç¼–ç é•¿åº¦æœ€çŸ­"è¿™ä¸ªæ„ä¹‰ä¸‹æ˜¯æœ€ä¼˜çš„ã€‚å…·ä½“ä½“ç°åœ¨ï¼š</p><ul style="padding-left: 20px; margin: 10px 0;"><li><strong>è´ªå¿ƒç­–ç•¥ï¼š</strong>æ¯æ¬¡åˆå¹¶é¢‘ç‡æœ€å°çš„ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œä¿è¯é«˜é¢‘å­—ç¬¦è·¯å¾„æ›´çŸ­</li><li><strong>æ•°å­¦è¯æ˜ï¼š</strong>ä»»ä½•å…¶ä»–ç¼–ç æ–¹æ¡ˆçš„å¹³å‡é•¿åº¦éƒ½ä¸ä¼šæ¯”å“ˆå¤«æ›¼ç¼–ç æ›´çŸ­</li><li><strong>å‰ç¼€æ€§è´¨ï¼š</strong>ä¿è¯ç¼–ç çš„å”¯ä¸€å¯è§£æ€§ï¼Œé¿å…æ­§ä¹‰</li></ul><p>è¿™ç§æœ€ä¼˜æ€§æ˜¯é€šè¿‡è´ªå¿ƒç®—æ³•çš„æ­£ç¡®æ€§æ¥ä¿è¯çš„ï¼Œæ¯ä¸€æ­¥éƒ½åšå‡ºå½“å‰æœ€ä¼˜é€‰æ‹©ã€‚</p></div></div></div><div class="question-card" style="background: #f7fafc; border: 2px solid #e2e8f0; border-radius: 10px; margin: 15px 0; overflow: hidden;"><div class="question-header" onclick="toggleQuestion(2)" style="background: #667eea; color: white; padding: 15px; cursor: pointer; font-weight: bold; display: flex; justify-content: space-between; align-items: center;"><span>â“ é—®é¢˜2ï¼šå¦‚æœæ‰€æœ‰å­—ç¬¦é¢‘ç‡ç›¸åŒï¼Œå“ˆå¤«æ›¼æ ‘æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ</span><span id="arrow-2">â–¼</span></div><div class="question-content" id="question-2" style="padding: 15px; display: none; background: white; border-top: 1px solid #e2e8f0;"><p style="margin-bottom: 15px;">å‡è®¾æœ‰4ä¸ªå­—ç¬¦Aã€Bã€Cã€Dï¼Œé¢‘ç‡éƒ½æ˜¯1ï¼Œæ„å»ºçš„å“ˆå¤«æ›¼æ ‘æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿç¼–ç é•¿åº¦å¦‚ä½•ï¼Ÿ</p><button class="unified-btn unified-btn-success" onclick="showAnswer(2)"><span>ğŸ’¡</span> æŸ¥çœ‹ç­”æ¡ˆ
                    </button><div class="answer" id="answer-2" style="background: #f0fff4; border: 1px solid #9ae6b4; border-radius: 5px; padding: 15px; margin-top: 15px; display: none;"><p><strong>ç­”æ¡ˆï¼š</strong>é¢‘ç‡ç›¸åŒæ—¶ï¼Œå“ˆå¤«æ›¼æ ‘å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul style="padding-left: 20px; margin: 10px 0;"><li><strong>è¿‘ä¼¼å®Œå…¨äºŒå‰æ ‘ï¼š</strong>æ ‘ä¼šå°½å¯èƒ½å¹³è¡¡</li><li><strong>ç¼–ç é•¿åº¦ä¸€è‡´ï¼š</strong>æ‰€æœ‰å­—ç¬¦çš„ç¼–ç é•¿åº¦éƒ½ç›¸ç­‰æˆ–æœ€å¤šç›¸å·®1</li><li><strong>ä¸å”¯ä¸€æ€§ï¼š</strong>å¯èƒ½æœ‰å¤šç§åˆæ³•çš„å“ˆå¤«æ›¼æ ‘ç»“æ„</li></ul><p>å¯¹äº4ä¸ªå­—ç¬¦ï¼Œæ¯ä¸ªå­—ç¬¦çš„ç¼–ç é•¿åº¦éƒ½æ˜¯2ä½ï¼Œä¸å›ºå®šé•¿åº¦ç¼–ç ç›¸åŒï¼Œæ­¤æ—¶å“ˆå¤«æ›¼ç¼–ç çš„ä¼˜åŠ¿ä¸æ˜æ˜¾ã€‚</p></div></div></div><div class="question-card" style="background: #f7fafc; border: 2px solid #e2e8f0; border-radius: 10px; margin: 15px 0; overflow: hidden;"><div class="question-header" onclick="toggleQuestion(3)" style="background: #667eea; color: white; padding: 15px; cursor: pointer; font-weight: bold; display: flex; justify-content: space-between; align-items: center;"><span>â“ é—®é¢˜3ï¼šå“ˆå¤«æ›¼ç¼–ç å¦‚ä½•å¤„ç†åªæœ‰ä¸€ä¸ªå­—ç¬¦çš„æƒ…å†µï¼Ÿ</span><span id="arrow-3">â–¼</span></div><div class="question-content" id="question-3" style="padding: 15px; display: none; background: white; border-top: 1px solid #e2e8f0;"><p style="margin-bottom: 15px;">å¦‚æœå¾…ç¼–ç çš„æ–‡æœ¬åªåŒ…å«ä¸€ç§å­—ç¬¦ï¼ˆæ¯”å¦‚"AAAA"ï¼‰ï¼Œå“ˆå¤«æ›¼ç®—æ³•ä¼šå¦‚ä½•å¤„ç†ï¼Ÿ</p><button class="unified-btn unified-btn-success" onclick="showAnswer(3)"><span>ğŸ’¡</span> æŸ¥çœ‹ç­”æ¡ˆ
                    </button><div class="answer" id="answer-3" style="background: #f0fff4; border: 1px solid #9ae6b4; border-radius: 5px; padding: 15px; margin-top: 15px; display: none;"><p><strong>ç­”æ¡ˆï¼š</strong>åªæœ‰ä¸€ä¸ªå­—ç¬¦æ—¶éœ€è¦ç‰¹æ®Šå¤„ç†ï¼š</p><ul style="padding-left: 20px; margin: 10px 0;"><li><strong>é—®é¢˜ï¼š</strong>æ— æ³•æ„å»ºäºŒå‰æ ‘ï¼ˆè‡³å°‘éœ€è¦2ä¸ªèŠ‚ç‚¹ï¼‰</li><li><strong>è§£å†³æ–¹æ¡ˆ1ï¼š</strong>äººä¸ºæ·»åŠ ä¸€ä¸ªé¢‘ç‡ä¸º0çš„è™šæ‹Ÿå­—ç¬¦</li><li><strong>è§£å†³æ–¹æ¡ˆ2ï¼š</strong>ç›´æ¥ç»™è¯¥å­—ç¬¦åˆ†é…ç¼–ç "0"æˆ–"1"</li><li><strong>å®é™…åº”ç”¨ï¼š</strong>å¤§å¤šæ•°å‹ç¼©ç®—æ³•ä¼šæ£€æµ‹è¿™ç§æƒ…å†µå¹¶ä½¿ç”¨å›ºå®šç¼–ç </li></ul><p>è¿™æ˜¯å“ˆå¤«æ›¼ç®—æ³•çš„ä¸€ä¸ªè¾¹ç•Œæƒ…å†µï¼Œéœ€è¦åœ¨å®ç°æ—¶ç‰¹æ®Šè€ƒè™‘ã€‚</p></div></div></div><div class="question-card" style="background: #f7fafc; border: 2px solid #e2e8f0; border-radius: 10px; margin: 15px 0; overflow: hidden;"><div class="question-header" onclick="toggleQuestion(4)" style="background: #667eea; color: white; padding: 15px; cursor: pointer; font-weight: bold; display: flex; justify-content: space-between; align-items: center;"><span>â“ é—®é¢˜4ï¼šæ—¶é—´å¤æ‚åº¦åˆ†æ</span><span id="arrow-4">â–¼</span></div><div class="question-content" id="question-4" style="padding: 15px; display: none; background: white; border-top: 1px solid #e2e8f0;"><p style="margin-bottom: 15px;">æ„å»ºå“ˆå¤«æ›¼æ ‘çš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿè¯·åˆ†ææ¯ä¸ªæ­¥éª¤çš„å¤æ‚åº¦ã€‚</p><button class="unified-btn unified-btn-success" onclick="showAnswer(4)"><span>ğŸ’¡</span> æŸ¥çœ‹ç­”æ¡ˆ
                    </button><div class="answer" id="answer-4" style="background: #f0fff4; border: 1px solid #9ae6b4; border-radius: 5px; padding: 15px; margin-top: 15px; display: none;"><p><strong>ç­”æ¡ˆï¼š</strong>æ€»æ—¶é—´å¤æ‚åº¦ä¸º <strong>O(n log n)</strong>ï¼Œåˆ†æå¦‚ä¸‹ï¼š</p><ul style="padding-left: 20px; margin: 10px 0;"><li><strong>åˆå§‹åŒ–å †ï¼š</strong>O(n)ï¼Œnä¸ºä¸åŒå­—ç¬¦æ•°</li><li><strong>åˆå¹¶æ“ä½œï¼š</strong>è¿›è¡Œn-1æ¬¡åˆå¹¶</li><li><strong>æ¯æ¬¡åˆå¹¶ï¼š</strong>2æ¬¡å‡ºé˜Ÿ + 1æ¬¡å…¥é˜Ÿ = O(log n)</li><li><strong>æ€»ä½“å¤æ‚åº¦ï¼š</strong>(n-1) Ã— O(log n) = O(n log n)</li></ul><p>ç©ºé—´å¤æ‚åº¦ä¸ºO(n)ï¼Œä¸»è¦ç”¨äºå­˜å‚¨æ ‘èŠ‚ç‚¹å’Œä¼˜å…ˆé˜Ÿåˆ—ã€‚</p></div></div></div></div></div><!-- å­¦ä¹ æ£€éªŒ --><!-- å¯¼èˆªæŒ‰é’® --><div style="text-align: center; margin-top: 40px;"><a href="{% url 'knowledge_app:index' %}" class="unified-btn unified-btn-primary"><span>ğŸ </span>
            è¿”å›é¦–é¡µ
        </a><a href="{% url 'knowledge_app:cs_universe' %}" class="unified-btn unified-btn-secondary"><span>ğŸŒŒ</span>
            æ¢ç´¢CSå®‡å®™
        </a></div></div><style>.queue-item {background:rgba(76, 175, 80, 0.8);color:white;padding:8px 12px;border-radius:20px;font-family:monospace;font-weight:bold;display:inline-block}.queue-item.selected {background:rgba(239, 68, 68, 0.9);animation:pulse 1s infinite}@keyframes pulse {0%, 100% {transform:scale(1)}50% {transform:scale(1.1)}}.code-tab {transition:all 0.3s ease}.code-tab:hover {background:#a0aec0 !important}.code-tab.active {background:#667eea !important;color:white !important}.copy-btn:hover {background:#2d3748 !important;transform:translateY(-1px)}.question-header:hover {background:#5a67d8 !important}</style><script>const canvas = document.getElementById('canvas'); const ctx = canvas.getContext('2d'); const status = document.getElementById('status'); class HuffmanNode { constructor(char = null, freq = 0, left = null, right = null) { this.char = char; this.freq = freq; this.left = left; this.right = right; this.x = 0; this.y = 0; this.targetX = 0; this.targetY = 0; this.id = Math.random().toString(36).substr(2, 9); this.isLeaf = char !== null; this.highlight = false; this.isNew = false; this.visible = true; this.animating = false; this.subtreeWidth = 0; } isAnimating() { const threshold = 2; return Math.abs(this.x - this.targetX) > threshold || Math.abs(this.y - this.targetY) > threshold; } } class PriorityQueue { constructor() { this.items = []; } enqueue(node) { if (this.items.length === 0) { this.items.push(node); } else { let added = false; for (let i = 0; i < this.items.length; i++) { if (node.freq < this.items[i].freq || (node.freq === this.items[i].freq && node.id < this.items[i].id)) { this.items.splice(i, 0, node); added = true; break; } } if (!added) { this.items.push(node); } } } dequeue() { return this.items.shift(); } size() { return this.items.length; } toArray() { return [...this.items]; } } let originalData = []; let queue = new PriorityQueue(); let allNodes = []; let currentStep = 0; let isAnimating = false; let isAutoPlaying = false; let selectedNodes = []; let animationFrame = null; let isLayoutOptimizing = false; function parseInput() { const input = document.getElementById('inputData').value.trim(); if (!input) { status.textContent = "âŒ è¯·è¾“å…¥æ•°æ®"; status.className = "info-box info-box-error"; return; } try { originalData = []; const pairs = input.split(','); pairs.forEach(pair => { const [char, freqStr] = pair.split(':'); const freq = parseInt(freqStr.trim()); if (isNaN(freq)) { throw new Error(`æ— æ•ˆçš„é¢‘ç‡å€¼: ${freqStr}`); } originalData.push({ char: char.trim(), freq }); }); if (originalData.length < 2) { throw new Error("è‡³å°‘éœ€è¦ä¸¤ä¸ªå­—ç¬¦"); } originalData.sort((a, b) => a.freq - b.freq); status.textContent = `âœ… è§£ææˆåŠŸï¼${originalData.length} ä¸ªå­—ç¬¦å·²æŒ‰é¢‘ç‡æ’åº`; status.className = "info-box info-box-success"; displayQueue(); } catch (error) { status.textContent = `âŒ ${error.message}`; status.className = "info-box info-box-error"; } } function startAnimation() { if (originalData.length < 2) { status.textContent = "âŒ è¯·å…ˆè§£ææ•°æ®"; status.className = "info-box info-box-error"; return; } queue = new PriorityQueue(); allNodes = []; selectedNodes = []; currentStep = 0; isAnimating = false; isAutoPlaying = false; isLayoutOptimizing = false; originalData.forEach((data, index) => { const node = new HuffmanNode(data.char, data.freq); allNodes.push(node); queue.enqueue(node); }); layoutInitialNodes(); status.textContent = "ğŸš€ å¼€å§‹æ„å»ºå“ˆå¤«æ›¼æ ‘ - åˆå§‹çŠ¶æ€"; status.className = "info-box info-box-info"; document.getElementById('nextBtn').disabled = false; document.getElementById('autoBtn').disabled = false; displayQueue(); startDrawLoop(); } function layoutInitialNodes() { const nodes = queue.toArray(); const spacing = (canvas.width - 200) / (nodes.length + 1); const y = canvas.height - 80; nodes.forEach((node, index) => { node.x = node.targetX = 100 + spacing * (index + 1); node.y = node.targetY = y; node.visible = true; node.highlight = false; node.isNew = false; }); } function nextStep() { if (queue.size() <= 1) { if (!isLayoutOptimizing) { optimizeTreeLayout(); } else { status.textContent = "ğŸ‰ å“ˆå¤«æ›¼æ ‘æ„å»ºå®Œæˆï¼æ ‡å‡†äºŒå‰æ ‘å¸ƒå±€å·²ä¼˜åŒ–"; status.className = "info-box info-box-success"; document.getElementById('nextBtn').disabled = true; document.getElementById('autoBtn').disabled = true; isAutoPlaying = false; } return; } if (isAnimating) return; currentStep++; const left = queue.dequeue(); const right = queue.dequeue(); selectedNodes = [left, right]; left.highlight = true; right.highlight = true; status.textContent = `ğŸ¯ ç¬¬${currentStep}æ­¥ï¼šé€‰æ‹©æœ€å°çš„ä¸¤ä¸ªèŠ‚ç‚¹ ${left.char || 'N'}(${left.freq}) å’Œ ${right.char || 'N'}(${right.freq})`; status.className = "info-box info-box-warning"; displayQueue(); setTimeout(() => { mergeNodes(left, right); }, 1500); } function mergeNodes(left, right) { isAnimating = true; const mergeLevel = Math.max(getNodeLevel(left), getNodeLevel(right)) + 1; const mergeY = canvas.height - 80 - (mergeLevel * 70); const childY = mergeY + 70; const centerX = (left.x + right.x) / 2; const spacing = 100; left.targetX = centerX - spacing / 2; left.targetY = childY; right.targetX = centerX + spacing / 2; right.targetY = childY; status.textContent = `ğŸ”„ ç¬¬${currentStep}æ­¥ï¼šå°† ${left.char || 'N'}(${left.freq}) å’Œ ${right.char || 'N'}(${right.freq}) ç§»åŠ¨åˆ°åŒä¸€æ°´å¹³çº¿`; Promise.all([ animateNodeToPositionPromise(left), animateNodeToPositionPromise(right) ]).then(() => { const merged = new HuffmanNode(null, left.freq + right.freq, left, right); merged.targetX = centerX; merged.targetY = mergeY; merged.x = centerX; merged.y = childY; merged.isNew = true; merged.visible = true; allNodes.push(merged); queue.enqueue(merged); status.textContent = `âœ¨ ç¬¬${currentStep}æ­¥ï¼šåˆ›å»ºæ–°èŠ‚ç‚¹(${merged.freq})`; animateNodeToPosition(merged, () => { left.highlight = false; right.highlight = false; merged.isNew = false; selectedNodes = []; isAnimating = false; status.textContent = `âœ… ç¬¬${currentStep}æ­¥å®Œæˆï¼š${left.char || 'N'}(${left.freq}) + ${right.char || 'N'}(${right.freq}) â†’ æ–°èŠ‚ç‚¹(${merged.freq})`; status.className = "info-box info-box-success"; displayQueue(); if (isAutoPlaying && (queue.size() > 1 || !isLayoutOptimizing)) { setTimeout(() => nextStep(), 1000); } }); }); } function getNodeLevel(node) { if (!node.left && !node.right) { return 0; } const leftLevel = node.left ? getNodeLevel(node.left) : -1; const rightLevel = node.right ? getNodeLevel(node.right) : -1; return Math.max(leftLevel, rightLevel) + 1; } function animateNodeToPositionPromise(node) { return new Promise((resolve) => { animateNodeToPosition(node, resolve); }); } function animateNodeToPosition(node, callback) { const animate = () => { const dx = node.targetX - node.x; const dy = node.targetY - node.y; const speed = 0.12; if (Math.abs(dx) > 1 || Math.abs(dy) > 1) { node.x += dx * speed; node.y += dy * speed; requestAnimationFrame(animate); } else { node.x = node.targetX; node.y = node.targetY; if (callback) callback(); } }; animate(); } function optimizeTreeLayout() { if (queue.size() !== 1) return; isLayoutOptimizing = true; status.textContent = "ğŸ¨ ä¼˜åŒ–ä¸­ï¼šæ­£åœ¨è°ƒæ•´ä¸ºæ ‡å‡†äºŒå‰æ ‘å¸ƒå±€..."; status.className = "info-box info-box-warning"; const root = queue.items[0]; calculateStandardBinaryTreeLayout(root); animateAllNodesToStandardLayout(() => { status.textContent = "ğŸŒŸ å¸ƒå±€ä¼˜åŒ–å®Œæˆï¼ç‚¹å‡»ä¸‹ä¸€æ­¥æŸ¥çœ‹æœ€ç»ˆç»“æœ"; status.className = "info-box info-box-info"; isLayoutOptimizing = false; if (isAutoPlaying) { setTimeout(() => nextStep(), 2000); } }); } function calculateStandardBinaryTreeLayout(root) { calculateSubtreeWidths(root); const treeWidth = root.subtreeWidth; const canvasMargin = 40; const availableWidth = canvas.width - 2 * canvasMargin; const treeHeight = getTreeHeight(root); const levelHeight = Math.max(70, (canvas.height - 100) / (treeHeight + 1)); assignNodePositions(root, canvasMargin, canvasMargin + availableWidth, 40, levelHeight); } function calculateSubtreeWidths(node) { if (!node) return 0; if (node.isLeaf) { node.subtreeWidth = 1; return 1; } const leftWidth = node.left ? calculateSubtreeWidths(node.left) : 0; const rightWidth = node.right ? calculateSubtreeWidths(node.right) : 0; node.subtreeWidth = leftWidth + rightWidth; return node.subtreeWidth; } function getTreeHeight(node) { if (!node) return -1; if (node.isLeaf) return 0; const leftHeight = node.left ? getTreeHeight(node.left) : -1; const rightHeight = node.right ? getTreeHeight(node.right) : -1; return Math.max(leftHeight, rightHeight) + 1; } function assignNodePositions(node, leftBound, rightBound, y, levelHeight) { if (!node) return leftBound; let currentX = leftBound; if (node.isLeaf) { node.targetX = (leftBound + rightBound) / 2; node.targetY = y; return rightBound; } const nextY = y + levelHeight; let leftChildEnd = currentX; let rightChildStart = currentX; if (node.left) { const leftWidth = node.left.subtreeWidth; const leftSpace = (rightBound - leftBound) * (leftWidth / node.subtreeWidth); rightChildStart = assignNodePositions(node.left, currentX, currentX + leftSpace, nextY, levelHeight); leftChildEnd = rightChildStart; } if (node.right) { assignNodePositions(node.right, rightChildStart, rightBound, nextY, levelHeight); } if (node.left && node.right) { node.targetX = (node.left.targetX + node.right.targetX) / 2; } else if (node.left) { node.targetX = node.left.targetX; } else if (node.right) { node.targetX = node.right.targetX; } node.targetY = y; return rightBound; } function animateAllNodesToStandardLayout(callback) { const animateAll = () => { let allReached = true; const speed = 0.06; allNodes.forEach(node => { if (!node.visible) return; const dx = node.targetX - node.x; const dy = node.targetY - node.y; if (Math.abs(dx) > 1 || Math.abs(dy) > 1) { node.x += dx * speed; node.y += dy * speed; allReached = false; } else { node.x = node.targetX; node.y = node.targetY; } }); if (!allReached) { requestAnimationFrame(animateAll); } else { if (callback) callback(); } }; animateAll(); } function startDrawLoop() { const draw = () => { ctx.clearRect(0, 0, canvas.width, canvas.height); allNodes.forEach(node => { if (node.visible && node.left && node.right) { drawConnection(node, node.left); drawConnection(node, node.right); } }); allNodes.forEach(node => { if (node.visible) { drawNode(node); } }); if (document.getElementById('nextBtn').disabled === false || isAnimating || isLayoutOptimizing) { requestAnimationFrame(draw); } }; draw(); } function drawConnection(parent, child) { if (!parent.visible || !child.visible) return; const isLeftChild = parent.left === child; if (queue.size() <= 1 || isLayoutOptimizing) { ctx.strokeStyle = isLeftChild ? '#3b82f6' : '#10b981'; } else { ctx.strokeStyle = '#4a90e2'; } ctx.lineWidth = 2; ctx.beginPath(); ctx.moveTo(parent.x, parent.y + 20); ctx.lineTo(child.x, child.y - 20); ctx.stroke(); if (queue.size() <= 1 || isLayoutOptimizing) { const midX = (parent.x + child.x) / 2; const midY = (parent.y + child.y) / 2; ctx.fillStyle = 'white'; ctx.font = 'bold 10px Arial'; ctx.textAlign = 'center'; ctx.textBaseline = 'middle'; ctx.beginPath(); ctx.arc(midX, midY, 8, 0, 2 * Math.PI); ctx.fillStyle = isLeftChild ? '#3b82f6' : '#10b981'; ctx.fill(); ctx.fillStyle = 'white'; ctx.fillText(isLeftChild ? '0' : '1', midX, midY); } } function drawNode(node) { const radius = 25; const time = Date.now(); ctx.save(); ctx.shadowColor = 'rgba(0,0,0,0.2)'; ctx.shadowBlur = 5; ctx.shadowOffsetX = 2; ctx.shadowOffsetY = 2; const gradient = ctx.createRadialGradient(node.x, node.y, 0, node.x, node.y, radius); if (node.isLeaf) { gradient.addColorStop(0, '#4caf50'); gradient.addColorStop(1, '#388e3c'); } else { gradient.addColorStop(0, '#2196f3'); gradient.addColorStop(1, '#1976d2'); } ctx.fillStyle = gradient; ctx.beginPath(); ctx.arc(node.x, node.y, radius, 0, 2 * Math.PI); ctx.fill(); ctx.restore(); if (node.highlight) { const alpha = 0.6 + 0.4 * Math.sin(time * 0.008); ctx.strokeStyle = `rgba(244, 67, 54, ${alpha})`; ctx.lineWidth = 4; ctx.beginPath(); ctx.arc(node.x, node.y, radius + 3, 0, 2 * Math.PI); ctx.stroke(); } if (node.isNew) { const alpha = 0.6 + 0.4 * Math.sin(time * 0.01); ctx.strokeStyle = `rgba(255, 193, 7, ${alpha})`; ctx.lineWidth = 5; ctx.beginPath(); ctx.arc(node.x, node.y, radius + 5, 0, 2 * Math.PI); ctx.stroke(); } ctx.strokeStyle = '#333'; ctx.lineWidth = 2; ctx.beginPath(); ctx.arc(node.x, node.y, radius, 0, 2 * Math.PI); ctx.stroke(); ctx.fillStyle = 'white'; ctx.textAlign = 'center'; ctx.textBaseline = 'middle'; ctx.font = 'bold 12px Arial'; if (node.isLeaf) { ctx.fillText(node.char, node.x, node.y - 3); ctx.font = 'bold 9px Arial'; ctx.fillText(node.freq.toString(), node.x, node.y + 7); } else { ctx.fillText(node.freq.toString(), node.x, node.y); } } function displayQueue() { const queueDiv = document.getElementById('queueDisplay'); queueDiv.innerHTML = ''; const items = queue.toArray(); items.forEach(node => { const div = document.createElement('div'); div.className = 'queue-item'; if (selectedNodes.includes(node)) { div.className += ' selected'; } div.textContent = `${node.char || 'N'}(${node.freq})`; queueDiv.appendChild(div); }); if (items.length === 0) { const div = document.createElement('div'); div.className = 'queue-item'; div.textContent = 'é˜Ÿåˆ—ä¸ºç©º'; queueDiv.appendChild(div); } } function autoPlay() { if (isAutoPlaying) { isAutoPlaying = false; document.getElementById('autoBtn').innerHTML = "<span>â–¶ï¸</span> è‡ªåŠ¨æ’­æ”¾"; } else { isAutoPlaying = true; document.getElementById('autoBtn').innerHTML = "<span>â¸ï¸</span> æš‚åœæ’­æ”¾"; if ((queue.size() > 1 || !isLayoutOptimizing) && !isAnimating) { nextStep(); } } } function resetAnimation() { isAnimating = false; isAutoPlaying = false; isLayoutOptimizing = false; currentStep = 0; selectedNodes = []; allNodes = []; queue = new PriorityQueue(); document.getElementById('nextBtn').disabled = true; document.getElementById('autoBtn').disabled = true; document.getElementById('autoBtn').innerHTML = "<span>â–¶ï¸</span> è‡ªåŠ¨æ’­æ”¾"; status.textContent = "ğŸ”„ å·²é‡ç½®ï¼Œè¯·é‡æ–°å¼€å§‹"; status.className = "info-box info-box-info"; const queueDiv = document.getElementById('queueDisplay'); queueDiv.innerHTML = '<div class="queue-item">ç­‰å¾…æ•°æ®...</div>'; ctx.clearRect(0, 0, canvas.width, canvas.height); } function showCode(lang) { document.querySelectorAll('.code-content').forEach(el => el.style.display = 'none'); document.querySelectorAll('.code-tab').forEach(el => { el.style.background = '#e2e8f0'; el.style.color = '#4a5568'; el.classList.remove('active'); }); document.getElementById(lang + '-code').style.display = 'block'; const activeTab = document.querySelector(`[onclick="showCode('${lang}')"]`); activeTab.style.background = '#667eea'; activeTab.style.color = 'white'; activeTab.classList.add('active'); } function copyCode(lang) { const codeElement = document.getElementById(lang + '-code').querySelector('pre'); const text = codeElement.textContent; if (navigator.clipboard && navigator.clipboard.writeText) { navigator.clipboard.writeText(text).then(() => { const btn = document.querySelector(`#${lang}-code .copy-btn`); const originalText = btn.textContent; btn.textContent = 'âœ… å·²å¤åˆ¶'; btn.style.background = '#48bb78'; setTimeout(() => { btn.textContent = originalText; btn.style.background = '#4a5568'; }, 2000); }).catch(err => { console.error('å¤åˆ¶å¤±è´¥:', err); fallbackCopyTextToClipboard(text, lang); }); } else { fallbackCopyTextToClipboard(text, lang); } } function fallbackCopyTextToClipboard(text, lang) { const textArea = document.createElement("textarea"); textArea.value = text; textArea.style.position = "fixed"; textArea.style.left = "-999999px"; textArea.style.top = "-999999px"; document.body.appendChild(textArea); textArea.focus(); textArea.select(); try { document.execCommand('copy'); const btn = document.querySelector(`#${lang}-code .copy-btn`); const originalText = btn.textContent; btn.textContent = 'âœ… å·²å¤åˆ¶'; btn.style.background = '#48bb78'; setTimeout(() => { btn.textContent = originalText; btn.style.background = '#4a5568'; }, 2000); } catch (err) { console.error('Fallback: å¤åˆ¶å¤±è´¥', err); } document.body.removeChild(textArea); } function toggleQuestion(num) { const content = document.getElementById(`question-${num}`); const arrow = document.getElementById(`arrow-${num}`); if (content.style.display === 'none' || content.style.display === '') { content.style.display = 'block'; arrow.textContent = 'â–²'; } else { content.style.display = 'none'; arrow.textContent = 'â–¼'; const answer = document.getElementById(`answer-${num}`); if (answer) { answer.style.display = 'none'; const btn = answer.previousElementSibling; if (btn) { btn.innerHTML = '<span>ğŸ’¡</span> æŸ¥çœ‹ç­”æ¡ˆ'; } } } } function showAnswer(num) { const answer = document.getElementById(`answer-${num}`); const btn = answer.previousElementSibling; if (answer.style.display === 'none' || answer.style.display === '') { answer.style.display = 'block'; btn.innerHTML = '<span>ğŸ”¼</span> éšè—ç­”æ¡ˆ'; btn.style.background = '#ed8936'; } else { answer.style.display = 'none'; btn.innerHTML = '<span>ğŸ’¡</span> æŸ¥çœ‹ç­”æ¡ˆ'; btn.style.background = ''; } } resetAnimation();</script>
{% endblock %}