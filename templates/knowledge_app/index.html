{% extends 'knowledge_app/base.html' %}

{% block title %}é¦–é¡µ - è®¡ç®—æœºç§‘å­¦å­¦ä¹ å¹³å°{% endblock %}

{% block extra_css %}
<style>:root {--bg-card:rgba(255, 255, 255, 0.95);--border-radius:12px;--border-radius-lg:20px;--shadow-md:0 8px 32px rgba(0, 0, 0, 0.12);--shadow-lg:0 16px 64px rgba(0, 0, 0, 0.15);--text-inverse:#ffffff;--text-primary:#2d3748;--text-secondary:#4a5568;--primary-color:#667eea;--secondary-color:#764ba2;--accent-color:#4ecdc4;--gradient-primary:linear-gradient(135deg, #667eea 0%, #764ba2 100%);--gradient-secondary:linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%);--gradient-warm:linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);--gradient-cool:linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)}.stats-section {display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:20px;margin-bottom:40px;position:relative;z-index:2}.stat-card {background:rgba(255, 255, 255, 0.15);backdrop-filter:blur(20px);border-radius:var(--border-radius-lg);padding:30px 25px;text-align:center;color:var(--text-inverse);border:1px solid rgba(255, 255, 255, 0.25);transition:all 0.4s cubic-bezier(0.4, 0, 0.2, 1);position:relative;overflow:hidden;z-index:3;box-shadow:0 8px 32px rgba(0, 0, 0, 0.1)}.stat-card::before {content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);transform:rotate(45deg);transition:all 0.6s ease;opacity:0}.stat-card:hover::before {animation:shine 0.6s ease}.stat-card:hover {transform:translateY(-8px) scale(1.03);background:rgba(255, 255, 255, 0.25);box-shadow:0 20px 60px rgba(0, 0, 0, 0.25);border-color:rgba(255, 255, 255, 0.4);z-index:4}.stat-card:hover::before {animation:shimmer 2s ease-in-out infinite}@keyframes shimmer {0% {transform:translateX(-100%) translateY(-100%) rotate(45deg)}50% {transform:translateX(100%) translateY(100%) rotate(45deg)}100% {transform:translateX(200%) translateY(200%) rotate(45deg)}}@keyframes fadeInUp {from {opacity:0;transform:translateY(30px)}to {opacity:1;transform:translateY(0)}}@keyframes slideInLeft {from {opacity:0;transform:translateX(-30px)}to {opacity:1;transform:translateX(0)}}@keyframes slideInRight {from {opacity:0;transform:translateX(30px)}to {opacity:1;transform:translateX(0)}}.stats-section {animation:fadeInUp 0.8s ease-out}.daily-term-widget {animation:slideInLeft 0.8s ease-out 0.2s both}.universe-section {animation:slideInRight 0.8s ease-out 0.4s both}.knowledge-grid {animation:fadeInUp 0.8s ease-out 0.6s both}.stat-number {font-size:3rem;font-weight:800;margin-bottom:12px;background:linear-gradient(135deg, #ffffff 0%, #f8f9ff 50%, #e8f0ff 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-shadow:0 2px 4px rgba(0, 0, 0, 0.1);letter-spacing:-0.5px;line-height:1;transition:all 0.3s ease}.stat-card:hover .stat-number {transform:scale(1.1);filter:brightness(1.2)}.stat-label {font-size:1.1rem;font-weight:500;opacity:0.95;letter-spacing:0.8px;text-transform:uppercase;transition:all 0.3s ease}.stat-card:hover .stat-label {opacity:1;transform:translateY(-2px)}.daily-term-widget {background:linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(248, 250, 252, 0.95) 100%);backdrop-filter:blur(20px);border-radius:var(--border-radius-lg);padding:30px;margin-bottom:40px;box-shadow:0 12px 40px rgba(0, 0, 0, 0.08), 0 4px 16px rgba(0, 0, 0, 0.04);border:1px solid rgba(255, 255, 255, 0.6);transition:all 0.4s cubic-bezier(0.4, 0, 0.2, 1);position:relative;overflow:hidden}.daily-term-widget::before {content:'';position:absolute;top:0;left:0;right:0;height:4px;background:var(--gradient-secondary);border-radius:var(--border-radius-lg) var(--border-radius-lg) 0 0}.daily-term-widget::after {content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle, rgba(102, 126, 234, 0.05) 0%, transparent 70%);opacity:0;transition:opacity 0.4s ease;pointer-events:none}.daily-term-widget:hover {transform:translateY(-6px) scale(1.01);box-shadow:0 20px 60px rgba(0, 0, 0, 0.12), 0 8px 24px rgba(0, 0, 0, 0.08);border-color:rgba(255, 255, 255, 0.8)}.daily-term-widget:hover::after {opacity:1}.widget-header {display:flex;align-items:center;justify-content:space-between;margin-bottom:25px;position:relative}.widget-icon {font-size:2.2rem;background:var(--gradient-secondary);border-radius:16px;width:56px;height:56px;display:flex;align-items:center;justify-content:center;margin-right:18px;box-shadow:0 4px 16px rgba(78, 205, 196, 0.3);transition:all 0.3s ease;position:relative;overflow:hidden}.widget-icon::before {content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(45deg, transparent, rgba(255,255,255,0.2), transparent);transform:rotate(45deg);transition:transform 0.6s ease}.daily-term-widget:hover .widget-icon {transform:scale(1.05) rotate(5deg);box-shadow:0 6px 20px rgba(78, 205, 196, 0.4)}.daily-term-widget:hover .widget-icon::before {transform:translateX(100%) rotate(45deg)}.widget-title {flex:1}.widget-title h3 {margin:0 0 4px 0;font-size:1.4rem;font-weight:800;color:var(--text-primary);background:linear-gradient(135deg, var(--text-primary) 0%, var(--text-secondary) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.widget-date {font-size:0.85rem;font-weight:600;color:var(--accent-color);background:linear-gradient(135deg, rgba(78, 205, 196, 0.1) 0%, rgba(68, 160, 141, 0.1) 100%);padding:6px 12px;border-radius:20px;margin-left:12px;border:1px solid rgba(78, 205, 196, 0.2);letter-spacing:0.5px;transition:all 0.3s ease}.daily-term-widget:hover .widget-date {background:linear-gradient(135deg, rgba(78, 205, 196, 0.15) 0%, rgba(68, 160, 141, 0.15) 100%);border-color:rgba(78, 205, 196, 0.3);transform:scale(1.05)}.widget-expand {background:#f8f9fa;border:none;border-radius:var(--border-radius-sm);width:32px;height:32px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all 0.3s ease;color:#666}.widget-expand:hover {background:#e9ecef;color:var(--text-primary);transform:scale(1.1)}.widget-content {color:var(--text-primary)}.term-name {font-size:1.6rem;font-weight:700;background:linear-gradient(135deg, #2c3e50 0%, #3498db 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin:0 0 12px 0;transition:all 0.3s ease}.daily-term-widget:hover .term-name {transform:translateX(4px)}.term-preview {font-size:1.05rem;line-height:1.7;color:var(--text-secondary);margin-bottom:18px;position:relative;padding-left:16px;transition:all 0.3s ease}.term-preview::before {content:'';position:absolute;left:0;top:8px;width:3px;height:60%;background:var(--gradient-secondary);border-radius:2px;transition:all 0.3s ease}.daily-term-widget:hover .term-preview {color:var(--text-primary)}.daily-term-widget:hover .term-preview::before {height:80%;width:4px}.term-meta {display:flex;gap:12px;margin-bottom:24px;flex-wrap:wrap}.term-category, .term-difficulty {padding:8px 16px;border-radius:20px;font-size:0.75rem;font-weight:700;text-transform:uppercase;letter-spacing:0.5px;transition:all 0.3s ease;position:relative;overflow:hidden}.term-category::before, .term-difficulty::before {content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);transition:left 0.5s ease}.daily-term-widget:hover .term-category::before, .daily-term-widget:hover .term-difficulty::before {left:100%}.term-category {background:linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);color:#1976d2;border:1px solid rgba(25, 118, 210, 0.2)}.term-difficulty {background:linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);color:#7b1fa2;border:1px solid rgba(123, 31, 162, 0.2)}.term-difficulty.difficulty-beginner {background:linear-gradient(135deg, #e8f5e8 0%, #c8e6c8 100%);color:#2e7d32;border-color:rgba(46, 125, 50, 0.2)}.term-difficulty.difficulty-intermediate {background:linear-gradient(135deg, #fff3e0 0%, #ffcc02 100%);color:#f57c00;border-color:rgba(245, 124, 0, 0.2)}.term-difficulty.difficulty-advanced {background:linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);color:#d32f2f;border-color:rgba(211, 47, 47, 0.2)}.daily-term-widget:hover .term-category, .daily-term-widget:hover .term-difficulty {transform:translateY(-2px) scale(1.05);box-shadow:0 4px 12px rgba(0, 0, 0, 0.1)}.widget-actions {display:flex;gap:14px;margin-top:8px}.widget-btn {padding:12px 24px;border-radius:25px;border:none;font-weight:700;cursor:pointer;transition:all 0.4s cubic-bezier(0.4, 0, 0.2, 1);text-decoration:none;font-size:0.9rem;display:inline-flex;align-items:center;justify-content:center;position:relative;overflow:hidden;letter-spacing:0.5px}.widget-btn::before {content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);transition:left 0.5s ease}.widget-btn:hover::before {left:100%}.widget-btn.primary {background:var(--gradient-secondary);color:var(--text-inverse);box-shadow:0 6px 20px rgba(78, 205, 196, 0.3);border:1px solid rgba(255, 255, 255, 0.2)}.widget-btn.primary:hover {transform:translateY(-3px) scale(1.05);box-shadow:0 10px 30px rgba(78, 205, 196, 0.4);filter:brightness(1.1)}.widget-btn.secondary {background:linear-gradient(135deg, rgba(248, 249, 250, 0.9) 0%, rgba(233, 236, 239, 0.9) 100%);color:var(--text-secondary);border:1px solid rgba(222, 226, 230, 0.8);backdrop-filter:blur(10px)}.widget-btn.secondary:hover {background:linear-gradient(135deg, rgba(233, 236, 239, 0.95) 0%, rgba(206, 212, 218, 0.95) 100%);color:var(--text-primary);text-decoration:none;transform:translateY(-2px) scale(1.02);box-shadow:0 4px 12px rgba(0, 0, 0, 0.1);border-color:rgba(206, 212, 218, 0.9)}.universe-section {margin-bottom:40px;position:relative;z-index:2}.universe-card {background:linear-gradient(135deg, rgba(102, 126, 234, 0.25) 0%, rgba(118, 75, 162, 0.25) 100%);backdrop-filter:blur(25px);border-radius:var(--border-radius-lg);padding:35px;color:var(--text-inverse);border:2px solid rgba(102, 126, 234, 0.4);transition:all 0.5s cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;position:relative;overflow:hidden;display:flex;align-items:center;gap:30px;z-index:3;box-shadow:0 12px 40px rgba(102, 126, 234, 0.2)}.universe-card::before {content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);transition:left 0.6s ease}.universe-card:hover::before {left:100%}.universe-card:hover {transform:translateY(-8px) scale(1.03);box-shadow:0 25px 60px rgba(102, 126, 234, 0.35), 0 10px 30px rgba(118, 75, 162, 0.2);border-color:rgba(102, 126, 234, 0.7);background:linear-gradient(135deg, rgba(102, 126, 234, 0.3) 0%, rgba(118, 75, 162, 0.3) 100%);z-index:4}.modal-overlay {position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0, 0, 0, 0.6);backdrop-filter:blur(8px);display:none;justify-content:center;align-items:center;z-index:10000;animation:fadeIn 0.3s ease}.modal-overlay.show {display:flex}.modal-card {background:var(--bg-card);border-radius:25px;max-width:600px;width:90%;max-height:80vh;overflow-y:auto;box-shadow:var(--shadow-md);transform:scale(0.9);transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);position:relative}.modal-overlay.show .modal-card {transform:scale(1)}.modal-header {padding:30px 30px 20px;border-bottom:1px solid #f0f0f0;display:flex;align-items:flex-start;gap:20px;position:relative}.modal-icon {font-size:3rem;background:linear-gradient(135deg, var(--accent-color), #44a08d);border-radius:var(--border-radius);width:70px;height:70px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.modal-title-section {flex:1}.modal-title {font-size:1.8rem;font-weight:700;color:var(--text-primary);margin:0 0 10px 0;line-height:1.3}.modal-meta {display:flex;gap:10px;flex-wrap:wrap}.modal-category, .modal-difficulty {padding:4px 12px;border-radius:12px;font-size:0.8rem;font-weight:600;text-transform:uppercase}.modal-category {background:#e3f2fd;color:#1976d2}.modal-difficulty {background:#f3e5f5;color:#7b1fa2}.modal-difficulty.beginner {background:#e8f5e8;color:#2e7d32}.modal-difficulty.intermediate {background:#fff3e0;color:#f57c00}.modal-difficulty.advanced {background:#ffebee;color:#d32f2f}.modal-close {position:absolute;top:15px;right:15px;background:#f5f5f5;border:none;border-radius:50%;width:35px;height:35px;font-size:1.5rem;color:#666;cursor:pointer;transition:all 0.3s ease;display:flex;align-items:center;justify-content:center}.modal-close:hover {background:#e0e0e0;color:var(--text-primary);transform:rotate(90deg)}.modal-content {padding:20px 30px 30px}.modal-description {font-size:1.1rem;line-height:1.7;color:#555;margin-bottom:25px}.modal-features {margin-bottom:30px}.feature-list {list-style:none;padding:0;margin:0}.feature-item {display:flex;align-items:center;gap:12px;padding:10px 0;border-bottom:1px solid #f0f0f0}.feature-item:last-child {border-bottom:none}.feature-icon {font-size:1.2rem;width:24px;text-align:center}.feature-text {flex:1;color:#666}.modal-actions {display:flex;gap:15px;justify-content:center;padding-top:20px;border-top:1px solid #f0f0f0}.modal-btn {padding:12px 24px;border-radius:25px;border:none;font-weight:600;cursor:pointer;transition:all 0.3s ease;font-size:1rem;display:flex;align-items:center;gap:8px}.modal-btn.primary {background:linear-gradient(135deg, var(--accent-color), #44a08d);color:var(--text-inverse);box-shadow:0 4px 15px rgba(78, 205, 196, 0.3)}.modal-btn.primary:hover {transform:translateY(-2px);box-shadow:0 8px 25px rgba(78, 205, 196, 0.4)}.modal-btn.secondary {background:#f8f9fa;color:#6c757d;border:1px solid #dee2e6}.modal-btn.secondary:hover {background:#e9ecef;color:#495057}.term-card-content {padding:0}.term-summary, .term-details, .term-features {margin-bottom:25px;padding-bottom:20px;border-bottom:1px solid #f0f0f0}.term-features {border-bottom:none}.term-card-content h4 {margin:0 0 15px 0;font-size:16px;font-weight:600;color:#333;display:flex;align-items:center;gap:8px}.term-card-content p {margin:0 0 10px 0;line-height:1.6;color:#555}.term-card-content ul {margin:10px 0;padding-left:0;list-style:none}.term-card-content li {margin:8px 0;padding-left:20px;position:relative;color:#555;line-height:1.5}.term-card-content li::before {content:'â€¢';position:absolute;left:0;color:#667eea;font-weight:bold}@keyframes fadeIn {from {opacity:0}to {opacity:1}}@keyframes slideUp {from {opacity:0;transform:translateY(30px) scale(0.9)}to {opacity:1;transform:translateY(0) scale(1)}}.universe-icon {font-size:4rem;animation:float 3s ease-in-out infinite}@keyframes float {0%, 100% {transform:translateY(0px)}50% {transform:translateY(-10px)}}.universe-content {flex:1}.universe-content h2 {font-size:2rem;margin-bottom:8px;background:linear-gradient(45deg, var(--primary-color), var(--secondary-color));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;font-weight:bold}.universe-content p {font-size:1.1rem;margin-bottom:15px;opacity:0.9}.universe-features {display:flex;flex-wrap:wrap;gap:10px}.universe-features span {background:rgba(255, 255, 255, 0.1);padding:5px 12px;border-radius:var(--border-radius-lg);font-size:0.9rem;border:1px solid rgba(255, 255, 255, 0.2);transition:all 0.3s ease}.universe-features span:hover {background:rgba(255, 255, 255, 0.2);transform:translateY(-2px)}.universe-arrow {font-size:2rem;color:var(--primary-color);transition:all 0.3s ease}.universe-card:hover .universe-arrow {transform:translateX(10px);color:var(--secondary-color)}@media (max-width:768px) {.universe-card {flex-direction:column;text-align:center;gap:15px}.universe-icon {font-size:3rem}.universe-content h2 {font-size:1.5rem}.universe-features {justify-content:center}}.search-filter-section {margin-bottom:40px}.search-box {max-width:500px;margin:0 auto 20px;position:relative}.search-box input {width:100%;padding:15px 50px 15px 20px;border:none;border-radius:25px;font-size:1rem;box-shadow:var(--shadow-md);background:var(--bg-card);transition:all 0.3s ease}.search-box input:focus {outline:none;box-shadow:0 4px 25px rgba(102, 126, 234, 0.3);transform:scale(1.02)}.search-box .search-icon {position:absolute;right:20px;top:50%;transform:translateY(-50%);color:#999;font-size:1.2rem;pointer-events:none}.filter-section {display:flex;justify-content:center;gap:10px;margin-bottom:30px;flex-wrap:wrap}.filter-btn {background:rgba(255, 255, 255, 0.2);color:var(--text-inverse);border:1px solid rgba(255, 255, 255, 0.3);padding:10px 20px;border-radius:25px;cursor:pointer;transition:all 0.3s ease;font-size:0.9rem;font-weight:500}.filter-btn:hover, .filter-btn.active {background:rgba(255, 255, 255, 0.3);transform:translateY(-2px);box-shadow:var(--shadow-md)}.filter-btn.active {border-color:rgba(255, 255, 255, 0.6);font-weight:600}.navigation-section {margin-bottom:60px;animation:fadeInUp 0.6s ease}.section-title {color:var(--text-inverse);font-size:2.5rem;text-align:center;margin-bottom:40px;font-weight:700;text-shadow:2px 2px 4px rgba(0,0,0,0.3)}.nav-subtitle {color:var(--text-inverse);font-size:2.2rem;margin-bottom:40px;font-weight:800;text-align:center;text-shadow:2px 2px 8px rgba(0,0,0,0.3);position:relative;letter-spacing:1px}.nav-subtitle::after {content:'';position:absolute;bottom:-12px;left:50%;transform:translateX(-50%);width:100px;height:4px;background:linear-gradient(90deg, var(--primary-color) 0%, var(--secondary-color) 100%);border-radius:2px;box-shadow:0 2px 8px rgba(102, 126, 234, 0.4)}.stars-navigation {margin-bottom:50px}.stars-grid {display:grid;grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));gap:25px;margin-bottom:40px}.star-card {background:rgba(255, 255, 255, 0.1);backdrop-filter:blur(15px);border-radius:var(--border-radius-lg);padding:30px;text-align:center;color:var(--text-inverse);border:2px solid rgba(255, 255, 255, 0.2);transition:all 0.4s ease;cursor:pointer;position:relative;overflow:hidden}.star-card::before {content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);transform:rotate(45deg);transition:all 0.6s ease;opacity:0}.star-card:hover::before {animation:shine 0.8s ease}.star-card:hover {transform:translateY(-10px) scale(1.05);box-shadow:var(--shadow-md);border-color:rgba(255, 255, 255, 0.4)}.star-icon {font-size:3rem;margin-bottom:15px;display:block}.star-card h4 {font-size:1.4rem;margin-bottom:10px;font-weight:700}.star-card p {font-size:1rem;opacity:0.8;line-height:1.5}.planets-navigation {margin-bottom:60px;position:relative}.planets-navigation::before {content:'';position:absolute;top:-20px;left:50%;transform:translateX(-50%);width:200px;height:2px;background:linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.3) 50%, transparent 100%)}.planets-grid {display:grid;grid-template-columns:repeat(auto-fit, minmax(280px, 1fr));gap:25px;max-width:1200px;margin:0 auto;padding:0 20px}.planet-card {background:linear-gradient(145deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0.06) 100%);backdrop-filter:blur(20px);border-radius:var(--border-radius-lg);padding:35px 25px;text-align:center;color:var(--text-inverse);border:1px solid rgba(255, 255, 255, 0.2);transition:all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);cursor:pointer;position:relative;overflow:hidden;box-shadow:var(--shadow-md)}.planet-card::before {content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(145deg, rgba(102, 126, 234, 0.15) 0%, rgba(118, 75, 162, 0.15) 100%);opacity:0;transition:opacity 0.3s ease;border-radius:var(--border-radius-lg)}.planet-card:hover::before {opacity:1}.planet-card:hover {transform:translateY(-10px) scale(1.03);box-shadow:0 25px 50px rgba(0,0,0,0.2), 0 0 0 1px rgba(255, 255, 255, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.3);border-color:rgba(255, 255, 255, 0.4)}.planet-icon {font-size:3.2rem;margin-bottom:18px;display:block;filter:drop-shadow(0 4px 12px rgba(0,0,0,0.2));transition:all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);position:relative;z-index:2}.planet-card:hover .planet-icon {transform:scale(1.15) rotate(8deg);filter:drop-shadow(0 8px 20px rgba(0,0,0,0.3))}.planet-card h4 {font-size:1.5rem;margin-bottom:12px;font-weight:700;position:relative;z-index:2;text-shadow:2px 2px 6px rgba(0,0,0,0.2);letter-spacing:0.5px}.planet-card p {font-size:1rem;opacity:0.92;line-height:1.6;margin-bottom:18px;position:relative;z-index:2;text-shadow:1px 1px 3px rgba(0,0,0,0.15);font-weight:400}.planet-category {background:linear-gradient(135deg, rgba(255, 255, 255, 0.25) 0%, rgba(255, 255, 255, 0.15) 100%);padding:8px 18px;border-radius:25px;font-size:0.9rem;font-weight:600;display:inline-block;border:1px solid rgba(255, 255, 255, 0.25);backdrop-filter:blur(10px);position:relative;z-index:2;text-shadow:none;transition:all 0.3s ease;letter-spacing:0.3px}.planet-card:hover .planet-category {background:linear-gradient(135deg, rgba(255, 255, 255, 0.35) 0%, rgba(255, 255, 255, 0.25) 100%);border-color:rgba(255, 255, 255, 0.4);transform:scale(1.08);box-shadow:var(--shadow-md)}.planet-card[onclick*="single-linklist"] {background:linear-gradient(145deg, rgba(168, 85, 247, 0.15) 0%, rgba(147, 51, 234, 0.08) 100%);border-color:rgba(168, 85, 247, 0.3)}.planet-card[onclick*="single-linklist"]:hover {background:linear-gradient(145deg, rgba(168, 85, 247, 0.25) 0%, rgba(147, 51, 234, 0.15) 100%);border-color:rgba(168, 85, 247, 0.5)}.planet-card[onclick*="stack"] {background:linear-gradient(145deg, rgba(34, 197, 94, 0.15) 0%, rgba(22, 163, 74, 0.08) 100%);border-color:rgba(34, 197, 94, 0.3)}.planet-card[onclick*="stack"]:hover {background:linear-gradient(145deg, rgba(34, 197, 94, 0.25) 0%, rgba(22, 163, 74, 0.15) 100%);border-color:rgba(34, 197, 94, 0.5)}.planet-card[onclick*="queue"] {background:linear-gradient(145deg, rgba(59, 130, 246, 0.15) 0%, rgba(37, 99, 235, 0.08) 100%);border-color:rgba(59, 130, 246, 0.3)}.planet-card[onclick*="queue"]:hover {background:linear-gradient(145deg, rgba(59, 130, 246, 0.25) 0%, rgba(37, 99, 235, 0.15) 100%);border-color:rgba(59, 130, 246, 0.5)}.planet-card[onclick*="divide_conquer"] {background:linear-gradient(145deg, rgba(245, 158, 11, 0.15) 0%, rgba(217, 119, 6, 0.08) 100%);border-color:rgba(245, 158, 11, 0.3)}.planet-card[onclick*="divide_conquer"]:hover {background:linear-gradient(145deg, rgba(245, 158, 11, 0.25) 0%, rgba(217, 119, 6, 0.15) 100%);border-color:rgba(245, 158, 11, 0.5)}.planet-card[onclick*="dynamic_programming"] {background:linear-gradient(145deg, rgba(236, 72, 153, 0.15) 0%, rgba(219, 39, 119, 0.08) 100%);border-color:rgba(236, 72, 153, 0.3)}.planet-card[onclick*="dynamic_programming"]:hover {background:linear-gradient(145deg, rgba(236, 72, 153, 0.25) 0%, rgba(219, 39, 119, 0.15) 100%);border-color:rgba(236, 72, 153, 0.5)}.planet-card[onclick*="data_link_layer"] {background:linear-gradient(145deg, rgba(14, 165, 233, 0.15) 0%, rgba(2, 132, 199, 0.08) 100%);border-color:rgba(14, 165, 233, 0.3)}.planet-card[onclick*="data_link_layer"]:hover {background:linear-gradient(145deg, rgba(14, 165, 233, 0.25) 0%, rgba(2, 132, 199, 0.15) 100%);border-color:rgba(14, 165, 233, 0.5)}.planet-card[onclick*="process_management"] {background:linear-gradient(145deg, rgba(239, 68, 68, 0.15) 0%, rgba(220, 38, 38, 0.08) 100%);border-color:rgba(239, 68, 68, 0.3)}.planet-card[onclick*="process_management"]:hover {background:linear-gradient(145deg, rgba(239, 68, 68, 0.25) 0%, rgba(220, 38, 38, 0.15) 100%);border-color:rgba(239, 68, 68, 0.5)}.planet-card[onclick*="sql_language"] {background:linear-gradient(145deg, rgba(16, 185, 129, 0.15) 0%, rgba(5, 150, 105, 0.08) 100%);border-color:rgba(16, 185, 129, 0.3)}.planet-card[onclick*="sql_language"]:hover {background:linear-gradient(145deg, rgba(16, 185, 129, 0.25) 0%, rgba(5, 150, 105, 0.15) 100%);border-color:rgba(16, 185, 129, 0.5)}@keyframes planetFloat {0%, 100% {transform:translateY(0px)}50% {transform:translateY(-5px)}}@keyframes planetGlow {0%, 100% {box-shadow:var(--shadow-md)}50% {box-shadow:0 12px 40px rgba(102, 126, 234, 0.2)}}.planet-card {animation:planetFloat 6s ease-in-out infinite}.planet-card:nth-child(1) {animation-delay:0s}.planet-card:nth-child(2) {animation-delay:0.5s}.planet-card:nth-child(3) {animation-delay:1s}.planet-card:nth-child(4) {animation-delay:1.5s}.planet-card:nth-child(5) {animation-delay:2s}.planet-card:nth-child(6) {animation-delay:2.5s}.planet-card:nth-child(7) {animation-delay:3s}.planet-card:nth-child(8) {animation-delay:3.5s}.planet-card:hover {animation:none}@keyframes fadeInUp {from {opacity:0;transform:translateY(30px)}to {opacity:1;transform:translateY(0)}}.planets-grid .planet-card {animation:fadeInUp 0.6s ease forwards;opacity:0}.planets-grid .planet-card:nth-child(1) {animation-delay:0.1s}.planets-grid .planet-card:nth-child(2) {animation-delay:0.2s}.planets-grid .planet-card:nth-child(3) {animation-delay:0.3s}.planets-grid .planet-card:nth-child(4) {animation-delay:0.4s}.planets-grid .planet-card:nth-child(5) {animation-delay:0.5s}.planets-grid .planet-card:nth-child(6) {animation-delay:0.6s}.planets-grid .planet-card:nth-child(7) {animation-delay:0.7s}.planets-grid .planet-card:nth-child(8) {animation-delay:0.8s}.planet-card::after {content:'';position:absolute;top:50%;left:50%;width:0;height:0;background:radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);border-radius:50%;transform:translate(-50%, -50%);transition:all 0.6s ease;pointer-events:none}.planet-card:hover::after {width:200px;height:200px}.planet-card:active {transform:translateY(-8px) scale(0.98);transition:all 0.1s ease}.nav-subtitle {background:linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);backdrop-filter:blur(10px);border-radius:var(--border-radius);padding:20px 40px;margin:40px auto;max-width:400px;border:1px solid rgba(255,255,255,0.2);box-shadow:var(--shadow-md)}.planet-category {position:relative;overflow:hidden}.planet-category::before {content:'';position:absolute;left:0;top:0;height:100%;width:0;background:linear-gradient(90deg, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0.1) 100%);transition:width 0.3s ease}.planet-card:hover .planet-category::before {width:100%}.planet-card:has(.planet-category:contains("å·²å®ç°")) {border-color:rgba(34, 197, 94, 0.4)}.planet-card:has(.planet-category:contains("å·²å®ç°")) .planet-category {background:linear-gradient(135deg, rgba(34, 197, 94, 0.3) 0%, rgba(22, 163, 74, 0.2) 100%);border-color:rgba(34, 197, 94, 0.4);color:#f0fdf4}.planet-card:has(.planet-category:contains("éƒ¨åˆ†å®ç°")) .planet-category {background:linear-gradient(135deg, rgba(245, 158, 11, 0.3) 0%, rgba(217, 119, 6, 0.2) 100%);border-color:rgba(245, 158, 11, 0.4);color:#fffbeb}.planet-card:has(.planet-category:contains("å¾…å¼€å‘")) .planet-category {background:linear-gradient(135deg, rgba(156, 163, 175, 0.3) 0%, rgba(107, 114, 128, 0.2) 100%);border-color:rgba(156, 163, 175, 0.4);color:#f9fafb}@keyframes shimmer {0% {background-position:-200px 0}100% {background-position:200px 0}}.planet-card.loading {background:linear-gradient(90deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 100%);background-size:200px 100%;animation:shimmer 1.5s infinite}.category-section {margin-bottom:50px;animation:fadeInUp 0.6s ease}.category-title {color:var(--text-inverse);font-size:1.8rem;margin-bottom:25px;display:flex;align-items:center;gap:12px;font-weight:600;text-shadow:1px 1px 2px rgba(0,0,0,0.2)}.knowledge-grid {display:grid;grid-template-columns:repeat(auto-fit, minmax(320px, 1fr));gap:25px}.knowledge-card {background:var(--bg-card);border-radius:var(--border-radius-lg);padding:30px;box-shadow:var(--shadow-md);transition:all 0.4s ease;cursor:pointer;position:relative;overflow:hidden;border:2px solid transparent;z-index:2;margin-bottom:10px}.knowledge-card::before {content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(45deg, var(--primary-color), var(--secondary-color))}.knowledge-card:hover {transform:translateY(-8px) scale(1.02);box-shadow:var(--shadow-md);border-color:rgba(102, 126, 234, 0.3);z-index:5}.knowledge-card.implemented:hover {border-color:var(--success-color)}.card-icon {font-size:3.5rem;margin-bottom:20px;display:block;filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.1))}.card-title {font-size:1.4rem;font-weight:600;margin-bottom:15px;color:var(--text-primary);line-height:1.4}.card-description {color:#666;line-height:1.6;margin-bottom:25px;font-size:0.95rem}.card-meta {display:flex;justify-content:space-between;align-items:center;margin-top:20px;flex-wrap:wrap;gap:10px}.difficulty-badge {padding:6px 14px;border-radius:var(--border-radius-lg);font-size:0.8rem;font-weight:600;white-space:nowrap;text-transform:uppercase;letter-spacing:0.5px}.difficulty-beginner {background:linear-gradient(45deg, #d4edda, #c3e6cb);color:#155724}.difficulty-intermediate {background:linear-gradient(45deg, #fff3cd, #ffeaa7);color:#856404}.difficulty-advanced {background:linear-gradient(45deg, #f8d7da, #f5c6cb);color:#721c24}.card-actions {display:flex;gap:10px;margin-top:20px;padding-top:15px;border-top:1px solid #f0f0f0}.action-btn {flex:1;padding:10px 16px;border:none;border-radius:12px;font-weight:600;font-size:0.9rem;cursor:pointer;transition:all 0.3s ease;display:flex;align-items:center;justify-content:center;gap:6px}.action-btn.primary {background:linear-gradient(135deg, var(--accent-color), #44a08d);color:var(--text-inverse);box-shadow:0 3px 10px rgba(78, 205, 196, 0.3)}.action-btn.primary:hover {transform:translateY(-2px);box-shadow:0 6px 20px rgba(78, 205, 196, 0.4)}.action-btn:disabled {opacity:0.6;cursor:not-allowed;transform:none !important}.loading-animation p {color:#666}.no-results {text-align:center;color:var(--text-inverse);font-size:1.2rem;margin:60px 0;opacity:0.8;display:none}.no-results-icon {font-size:4rem;margin-bottom:20px;opacity:0.6}.loading-spinner {display:inline-block;width:20px;height:20px;border:3px solid rgba(255, 255, 255, 0.3);border-radius:50%;border-top-color:var(--text-inverse);animation:spin 1s ease-in-out infinite;margin-right:10px}@keyframes shine {0% {transform:translateX(-100%) translateY(-100%) rotate(45deg);opacity:0}50% {opacity:1}100% {transform:translateX(100%) translateY(100%) rotate(45deg);opacity:0}}@keyframes spin {to {transform:rotate(360deg)}}@keyframes fadeInUp {from {opacity:0;transform:translateY(30px)}to {opacity:1;transform:translateY(0)}}@keyframes pulse {0%, 100% {transform:scale(1)}50% {transform:scale(1.05)}}@keyframes shine {0% {transform:translateX(-100%) translateY(-100%) rotate(45deg);opacity:0}50% {opacity:1}100% {transform:translateX(100%) translateY(100%) rotate(45deg);opacity:0}}@media (max-width:768px) {.page-header h1 {font-size:2rem}.section-title {font-size:2rem}.nav-subtitle {font-size:1.8rem;margin-bottom:30px}.nav-subtitle::after {width:60px;height:3px;bottom:-8px}.stars-grid {grid-template-columns:1fr;gap:20px}.star-card {padding:25px}.star-icon {font-size:2.5rem}.star-card h4 {font-size:1.2rem}.planets-grid {grid-template-columns:repeat(auto-fit, minmax(260px, 1fr));gap:20px;padding:0 10px}.planet-card {padding:25px 20px;border-radius:16px}.planet-icon {font-size:2.8rem;margin-bottom:15px}.planet-card h4 {font-size:1.3rem;margin-bottom:10px}.planet-card p {font-size:0.95rem;margin-bottom:15px}.planet-category {padding:6px 14px;font-size:0.85rem}.planet-card:hover {transform:translateY(-5px) scale(1.01)}.knowledge-grid {grid-template-columns:1fr}.stats-section {grid-template-columns:repeat(2, 1fr)}.filter-section {padding:0 10px}.card-meta {flex-direction:column;align-items:flex-start}.category-title {font-size:1.5rem}}@media (max-width:480px) {.stats-section {grid-template-columns:1fr}.stat-number {font-size:2rem}.knowledge-card {padding:20px;margin-bottom:15px}.card-icon {font-size:2.5rem}.card-title {font-size:1.2rem}.knowledge-card:hover {transform:translateY(-3px) scale(1.01)}.stat-card:hover {transform:translateY(-3px) scale(1.01)}.universe-card:hover {transform:translateY(-3px) scale(1.01)}.daily-term-widget {padding:20px;margin-bottom:25px}.widget-header {flex-direction:column;align-items:flex-start;gap:10px}.widget-title {display:flex;align-items:center;width:100%}.widget-title h3 {font-size:1.2rem}.widget-expand {align-self:flex-end}.term-name {font-size:1.2rem}.widget-actions {flex-direction:column;gap:8px}.widget-btn {width:100%}.modal-card {width:95%;max-height:85vh;border-radius:var(--border-radius-lg)}.modal-header {padding:20px 20px 15px;flex-direction:column;text-align:center;gap:15px}.modal-icon {width:60px;height:60px;font-size:2.5rem;align-self:center}.modal-title {font-size:1.5rem}.modal-content {padding:15px 20px 25px}.modal-actions {flex-direction:column;align-items:stretch}.modal-btn {justify-content:center}}</style>
{% endblock %}

{% block content %}
<div class="container"><div class="page-header"><h1>ğŸš€ è®¡ç®—æœºç§‘å­¦å­¦ä¹ å¹³å°</h1><p>æ¢ç´¢è®¡ç®—æœºç§‘å­¦çš„ç²¾å½©ä¸–ç•Œï¼Œä»ç†è®ºåˆ°å®è·µï¼Œä¸€ç«™å¼å­¦ä¹ ä½“éªŒ</p></div><!-- ç»Ÿè®¡ä¿¡æ¯å¡ç‰‡ --><div class="stats-section"><div class="stat-card"><div class="stat-number">{{ total_points }}</div><div class="stat-label">çŸ¥è¯†ç‚¹æ€»æ•°</div></div><div class="stat-card"><div class="stat-number">{{ categories|length }}</div><div class="stat-label">å­¦ä¹ é¢†åŸŸ</div></div><div class="stat-card"><div class="stat-number">{{ implemented_count }}</div><div class="stat-label">å·²å®ç°æ•°é‡</div></div><div class="stat-card"><div class="stat-number">100%</div><div class="stat-label">å…è´¹å¼€æ”¾</div></div></div><!-- æ¯æ—¥åè¯å°çª—å£ -->
    {% if today_term %}
    <div class="daily-term-widget"><div class="widget-header"><div class="widget-icon">ğŸ“š</div><div class="widget-title"><h3>ä»Šæ—¥åè¯</h3><span class="widget-date">{{ current_date|date:"mæœˆdæ—¥" }}</span></div></div><div class="widget-content"><h4 class="term-name">{{ today_term.term }}</h4><p class="term-preview">{{ today_term.explanation|truncatewords:15 }}</p><div class="term-meta">
                {% if today_term.category %}
                <span class="term-category">{{ today_term.category }}</span>
                {% endif %}
                <span class="term-difficulty difficulty-{{ today_term.difficulty_level }}">
                    {{ today_term.get_difficulty_level_display }}
                </span></div><div class="widget-actions"><a href="{% url 'knowledge_app:daily_term' %}" class="widget-btn primary">
                    æŸ¥çœ‹è¯¦æƒ…
                </a><a href="{% url 'knowledge_app:daily_term' %}" class="widget-btn secondary">
                    æ›´å¤šåè¯
                </a></div></div></div>
    {% endif %}

    <!-- CS Universe ç‰¹æ®ŠæŒ‰é’® --><div class="universe-section"><div class="universe-card" onclick="window.location.href='{% url 'knowledge_app:cs_universe' %}'"><div class="universe-icon">ğŸŒŒ</div><div class="universe-content"><h2>CS Universe</h2><p>æ¢ç´¢3Dè®¡ç®—æœºç§‘å­¦çŸ¥è¯†å®‡å®™</p><div class="universe-features"><span>ğŸŒ  æ’æ˜Ÿ-è¡Œæ˜Ÿ-å«æ˜Ÿç»“æ„</span><span>ğŸ® 3Däº¤äº’å¼æ¢ç´¢</span><span>ğŸš€ æ²‰æµ¸å¼å­¦ä¹ ä½“éªŒ</span></div></div></div></div><!-- æœç´¢å’Œç­›é€‰åŒºåŸŸ --><div class="search-filter-section"><div class="search-box"><input type="text" id="searchInput" placeholder="ğŸ” æœç´¢çŸ¥è¯†ç‚¹..." onkeyup="filterKnowledge()"><span class="search-icon">ğŸ”</span></div><div class="filter-section"><button class="filter-btn active" onclick="filterByCategory('all')">ğŸŒŸ å…¨éƒ¨</button><button class="filter-btn" onclick="filterByCategory('data-structure')">ğŸ§  æ•°æ®ç»“æ„</button><button class="filter-btn" onclick="filterByCategory('algorithm')">âš¡ ç®—æ³•è®¾è®¡</button><button class="filter-btn" onclick="filterByCategory('network')">ğŸŒ è®¡ç®—æœºç½‘ç»œ</button><button class="filter-btn" onclick="filterByCategory('system')">ğŸ’» æ“ä½œç³»ç»Ÿ</button><button class="filter-btn" onclick="filterByCategory('database')">ğŸ—„ï¸ æ•°æ®åº“ç³»ç»Ÿ</button><button class="filter-btn" onclick="filterByCategory('software')">ğŸ› ï¸ è½¯ä»¶å·¥ç¨‹</button><button class="filter-btn" onclick="filterByCategory('security')">ğŸ” ä¿¡æ¯å®‰å…¨</button></div></div><!-- å­¦ç§‘å¯¼èˆªåŒºåŸŸ --><div class="navigation-section"><h2 class="section-title">ğŸŒŸ å­¦ç§‘å¯¼èˆª</h2><!-- æ’æ˜Ÿå¯¼èˆª - å¤§åˆ†ç±» --><div class="stars-navigation"><h3 class="nav-subtitle">ğŸŒŸ å­¦ç§‘å¤§ç±»</h3><div class="stars-grid"><div class="star-card" onclick="window.location.href='{% url 'knowledge_app:data_structures' %}'"><div class="star-icon">ğŸ§ </div><h4>æ•°æ®ç»“æ„</h4><p>çº¿æ€§ç»“æ„ã€æ ‘ã€å›¾ç­‰æ•°æ®ç»„ç»‡æ–¹å¼</p></div><div class="star-card" onclick="window.location.href='{% url 'knowledge_app:algorithm_design' %}'"><div class="star-icon">ğŸ§ </div><h4>ç®—æ³•è®¾è®¡</h4><p>åˆ†æ²»ã€åŠ¨æ€è§„åˆ’ã€è´ªå¿ƒç­‰ç®—æ³•æŠ€å·§</p></div><div class="star-card" onclick="window.location.href='{% url 'knowledge_app:computer_networks' %}'"><div class="star-icon">ğŸŒ</div><h4>è®¡ç®—æœºç½‘ç»œ</h4><p>ç½‘ç»œåè®®ã€é€šä¿¡åŸç†ã€ç½‘ç»œå®‰å…¨</p></div><div class="star-card" onclick="window.location.href='{% url 'knowledge_app:operating_systems' %}'"><div class="star-icon">ğŸ’»</div><h4>æ“ä½œç³»ç»Ÿ</h4><p>è¿›ç¨‹ç®¡ç†ã€å†…å­˜ç®¡ç†ã€æ–‡ä»¶ç³»ç»Ÿ</p></div><div class="star-card" onclick="window.location.href='{% url 'knowledge_app:database_systems' %}'"><div class="star-icon">ğŸ—„ï¸</div><h4>æ•°æ®åº“ç³»ç»Ÿ</h4><p>å…³ç³»æ¨¡å‹ã€SQLã€äº‹åŠ¡å¤„ç†</p></div><div class="star-card" onclick="window.location.href='{% url 'knowledge_app:software_engineering' %}'"><div class="star-icon">ğŸ¤–</div><h4>è½¯ä»¶å·¥ç¨‹</h4><p>éœ€æ±‚åˆ†æã€ç³»ç»Ÿè®¾è®¡ã€é¡¹ç›®ç®¡ç†</p></div><div class="star-card" onclick="window.location.href='{% url 'knowledge_app:knowledge_graph' %}'"><div class="star-icon">ğŸ•¸ï¸</div><h4>çŸ¥è¯†å›¾è°±</h4><p>å¯è§†åŒ–æ¦‚å¿µå…³ç³»ï¼Œæ„å»ºçŸ¥è¯†ä½“ç³»</p></div>

                {% if user.is_authenticated %}
                <div class="star-card" onclick="window.location.href='{% url 'knowledge_app:quiz_dashboard' %}'" style="border: 2px solid #ffd700; background: linear-gradient(135deg, rgba(255,215,0,0.2) 0%, rgba(255,165,0,0.2) 100%);"><div class="star-icon">ğŸ“š</div><h4>ä¸ªäººé¢˜åº“</h4><p>åˆ›å»ºä¸“å±é¢˜åº“ï¼Œæ™ºèƒ½å­¦ä¹ åˆ†æ</p></div>
                {% endif %}

            </div></div><!-- çƒ­é—¨ä¸»é¢˜å¯¼èˆª - å…¨æ–°è®¾è®¡ --><div class="planets-navigation"><div class="nav-subtitle"><span style="font-size: 2.5rem; margin-right: 15px;">ğŸŒŸ</span>
                çƒ­é—¨ä¸»é¢˜
                <span style="font-size: 2.5rem; margin-left: 15px;">ğŸŒŸ</span></div><div style="text-align: center; margin-bottom: 30px; color: rgba(255,255,255,0.8); font-size: 1rem;"><span style="background: rgba(255,255,255,0.1); padding: 8px 16px; border-radius: var(--border-radius-lg); margin: 0 10px;">
                    âœ… 3ä¸ªå·²å®ç°
                </span><span style="background: rgba(255,255,255,0.1); padding: 8px 16px; border-radius: var(--border-radius-lg); margin: 0 10px;">
                    ğŸš§ 1ä¸ªéƒ¨åˆ†å®ç°
                </span><span style="background: rgba(255,255,255,0.1); padding: 8px 16px; border-radius: var(--border-radius-lg); margin: 0 10px;">
                    â³ 4ä¸ªå¾…å¼€å‘
                </span></div><div class="planets-grid"><div class="planet-card" onclick="window.location.href='/learn/single-linklist/'"><div class="planet-icon">ğŸ”—</div><h4>é“¾è¡¨</h4><p>å•é“¾è¡¨ã€åŒé“¾è¡¨ã€å¾ªç¯é“¾è¡¨çš„å®ç°ä¸åº”ç”¨</p><span class="planet-category">æ•°æ®ç»“æ„ â€¢ å·²å®ç°</span></div><div class="planet-card" onclick="window.location.href='{% url 'knowledge_app:stack' %}'"><div class="planet-icon">ğŸ“š</div><h4>æ ˆ</h4><p>åè¿›å…ˆå‡ºçš„çº¿æ€§æ•°æ®ç»“æ„ï¼Œæ”¯æŒå®Œæ•´æ¼”ç¤º</p><span class="planet-category">æ•°æ®ç»“æ„ â€¢ å·²å®ç°</span></div><div class="planet-card" onclick="window.location.href='{% url 'knowledge_app:queue' %}'"><div class="planet-icon">ğŸš¶â€â™‚ï¸</div><h4>é˜Ÿåˆ—</h4><p>å…ˆè¿›å…ˆå‡ºçš„çº¿æ€§æ•°æ®ç»“æ„ï¼Œå¤šç§å®ç°æ–¹å¼</p><span class="planet-category">æ•°æ®ç»“æ„ â€¢ éƒ¨åˆ†å®ç°</span></div><div class="planet-card" onclick="window.location.href='{% url 'knowledge_app:divide_conquer' %}'"><div class="planet-icon">âš¡</div><h4>åˆ†æ²»ç®—æ³•</h4><p>åˆ†è€Œæ²»ä¹‹çš„ç®—æ³•è®¾è®¡ç­–ç•¥ä¸ç»å…¸åº”ç”¨</p><span class="planet-category">ç®—æ³•è®¾è®¡ â€¢ å¾…å¼€å‘</span></div><div class="planet-card" onclick="window.location.href='{% url 'knowledge_app:dynamic_programming' %}'"><div class="planet-icon">ğŸ’</div><h4>åŠ¨æ€è§„åˆ’</h4><p>æœ€ä¼˜å­ç»“æ„çš„ç®—æ³•æŠ€å·§ä¸ç»å…¸é—®é¢˜</p><span class="planet-category">ç®—æ³•è®¾è®¡ â€¢ å¾…å¼€å‘</span></div><div class="planet-card" onclick="window.location.href='{% url 'knowledge_app:data_link_layer' %}'"><div class="planet-icon">ğŸŒ</div><h4>æ•°æ®é“¾è·¯å±‚</h4><p>å¸§ä¼ è¾“ã€å·®é”™æ§åˆ¶ã€æµé‡æ§åˆ¶æœºåˆ¶</p><span class="planet-category">è®¡ç®—æœºç½‘ç»œ â€¢ å·²å®ç°</span></div><div class="planet-card" onclick="window.location.href='{% url 'knowledge_app:process_management' %}'"><div class="planet-icon">âš™ï¸</div><h4>è¿›ç¨‹ç®¡ç†</h4><p>è¿›ç¨‹åˆ›å»ºã€è°ƒåº¦ã€åŒæ­¥ä¸é€šä¿¡</p><span class="planet-category">æ“ä½œç³»ç»Ÿ â€¢ å¾…å¼€å‘</span></div><div class="planet-card" onclick="window.location.href='{% url 'knowledge_app:sql_language' %}'"><div class="planet-icon">ğŸ—ƒï¸</div><h4>SQLè¯­è¨€</h4><p>æ•°æ®å®šä¹‰ã€æ“ä½œã€æ§åˆ¶è¯­è¨€è¯¦è§£</p><span class="planet-category">æ•°æ®åº“ç³»ç»Ÿ â€¢ å¾…å¼€å‘</span></div></div></div></div><!-- çŸ¥è¯†ç‚¹åˆ†ç±»å±•ç¤º -->
    {% for category_name, points in categories.items %}
    <div class="category-section" data-category="{{ category_name }}"><h2 class="category-title">
            {% if category_name == "è®¡ç®—æœºç½‘ç»œ" %}ğŸŒ
            {% elif category_name == "ç®—æ³•ä¸æ•°æ®ç»“æ„" %}ğŸ§ 
            {% elif category_name == "ä¿¡æ¯å®‰å…¨" %}ğŸ”
            {% elif category_name == "æ“ä½œç³»ç»Ÿ" %}ğŸ’»
            {% elif category_name == "æ•°æ®åº“" %}ğŸ—„ï¸
            {% elif category_name == "äººå·¥æ™ºèƒ½" %}ğŸ¤–
            {% else %}ğŸ“š
            {% endif %}
            {{ category_name }}
            <small style="font-size: 0.6em; opacity: 0.7;">({{ points|length }} ä¸ª)</small></h2><div class="knowledge-grid">
            {% for point in points %}
            <div class="knowledge-card {% if not point.is_implemented %}coming-soon{% else %}implemented{% endif %}"
                 data-title="{{ point.title }}"
                 data-description="{{ point.description }}"
                 data-category="{{ point.category }}"
                 data-difficulty="{{ point.difficulty }}"
                 data-slug="{{ point.slug }}"><span class="card-icon">{{ point.icon }}</span><h3 class="card-title">{{ point.title }}</h3><p class="card-description">{{ point.description }}</p><div class="card-meta"><span class="difficulty-badge difficulty-{{ point.difficulty }}">
                        {% if point.difficulty == 'beginner' %}åˆçº§
                        {% elif point.difficulty == 'intermediate' %}ä¸­çº§
                        {% else %}é«˜çº§
                        {% endif %}
                    </span></div><div class="card-actions"><button class="action-btn primary"
                            onclick="showKnowledgeDetail('{{ point.slug }}', '{{ point.title }}', '{{ point.description }}', '{{ point.category }}', '{{ point.difficulty }}', {{ point.is_implemented|yesno:'true,false' }})">
                        ğŸš€ å¼€å§‹å­¦ä¹ 
                    </button><!-- ç»ƒä¹ åŠŸèƒ½å·²ç§»é™¤ --></div><!-- ç»ƒä¹ è¿›åº¦æ¡å·²ç§»é™¤ --></div>
            {% endfor %}
        </div></div>
    {% empty %}
    <div class="no-results" style="display: block;"><div class="no-results-icon">ğŸ“š</div><p>æš‚æ— çŸ¥è¯†ç‚¹æ•°æ®</p><p><small>è¯·è¿è¡Œåˆå§‹åŒ–å‘½ä»¤ï¼š<code>python manage.py init_knowledge</code></small></p></div>
    {% endfor %}

    <div id="noResults" class="no-results"><div class="no-results-icon">ğŸ”</div><p>æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„çŸ¥è¯†ç‚¹</p><p><small>è¯·å°è¯•å…¶ä»–å…³é”®è¯æˆ–ç­›é€‰æ¡ä»¶</small></p></div></div><!-- çŸ¥è¯†ç‚¹è¯¦æƒ…æ¨¡æ€æ¡† --><div id="knowledgeModal" class="modal-overlay" onclick="closeKnowledgeModal()"><div class="modal-card" onclick="event.stopPropagation()"><div class="modal-header"><div class="modal-icon" id="modalIcon">ğŸ§®</div><div class="modal-title-section"><h2 class="modal-title" id="modalTitle">çŸ¥è¯†ç‚¹æ ‡é¢˜</h2><div class="modal-meta"><span class="modal-category" id="modalCategory">åˆ†ç±»</span><span class="modal-difficulty" id="modalDifficulty">éš¾åº¦</span></div></div><button class="modal-close" onclick="closeKnowledgeModal()">Ã—</button></div><div class="modal-content"><div class="modal-description" id="modalDescription">
                çŸ¥è¯†ç‚¹è¯¦ç»†æè¿°...
            </div><div class="modal-features" id="modalFeatures"><!-- åŠŸèƒ½ç‰¹æ€§å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  --></div><div class="modal-actions"><button class="modal-btn primary" id="modalPrimaryBtn" onclick="handlePrimaryAction()">
                    ğŸš€ å¼€å§‹å­¦ä¹ 
                </button><button class="modal-btn secondary" onclick="closeKnowledgeModal()">
                    ğŸ“š ç¨åå­¦ä¹ 
                </button></div></div></div></div></div><div class="result-details" id="resultDetails"><!-- è¯¦ç»†ç»“æœå°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ --></div></div></div></div></div></div>
-->
{% endblock %}

{% block extra_js %}
<script>let currentCategory = 'all'; let currentKnowledgeSlug = null; let currentKnowledgeCategory = null; function filterKnowledge() { const searchTerm = document.getElementById('searchInput').value.toLowerCase(); const cards = document.querySelectorAll('.knowledge-card'); const categories = document.querySelectorAll('.category-section'); let hasVisibleCards = false; cards.forEach(card => { const title = card.dataset.title.toLowerCase(); const description = card.dataset.description.toLowerCase(); const category = card.dataset.category; const matchesSearch = title.includes(searchTerm) || description.includes(searchTerm); const matchesCategory = currentCategory === 'all' || category === currentCategory; if (matchesSearch && matchesCategory) { card.style.display = 'block'; hasVisibleCards = true; } else { card.style.display = 'none'; } }); categories.forEach(category => { const visibleCards = category.querySelectorAll('.knowledge-card[style="display: block"], .knowledge-card:not([style*="display: none"])'); const shouldShow = searchTerm === '' && currentCategory === 'all' ? true : visibleCards.length > 0; category.style.display = shouldShow ? 'block' : 'none'; }); document.getElementById('noResults').style.display = !hasVisibleCards ? 'block' : 'none'; } function filterByCategory(category) { currentCategory = category; document.querySelectorAll('.filter-btn').forEach(btn => { btn.classList.remove('active'); }); event.target.classList.add('active'); filterKnowledge(); } function showKnowledgeDetail(slug, title, description, category, difficulty, isImplemented) { currentKnowledgeSlug = slug; currentKnowledgeCategory = category; document.getElementById('modalTitle').textContent = title; document.getElementById('modalDescription').textContent = description; document.getElementById('modalCategory').textContent = getCategoryDisplayName(category); const difficultyElement = document.getElementById('modalDifficulty'); difficultyElement.textContent = getDifficultyDisplayName(difficulty); difficultyElement.className = `modal-difficulty ${difficulty}`; document.getElementById('modalIcon').textContent = getCategoryIcon(category); const featuresContainer = document.getElementById('modalFeatures'); featuresContainer.innerHTML = generateFeaturesList(slug, isImplemented); const primaryBtn = document.getElementById('modalPrimaryBtn'); primaryBtn.innerHTML = 'ğŸš€ å¼€å§‹å­¦ä¹ '; primaryBtn.onclick = () => handlePrimaryAction(); const modal = document.getElementById('knowledgeModal'); modal.classList.add('show'); document.body.style.overflow = 'hidden'; } function closeKnowledgeModal() { const modal = document.getElementById('knowledgeModal'); modal.classList.remove('show'); document.body.style.overflow = ''; currentKnowledgeSlug = null; } function handlePrimaryAction() { if (currentKnowledgeSlug) { const urlMap = { 'hamming-code': '/learn/hamming-code/', 'crc-check': '/learn/crc-check/', 'single-linklist': '/learn/single-linklist/', 'linked-list': '/learn/single-linklist/', 'graph-dfs': '{% url "knowledge_app:graph_dfs" %}' }; const url = urlMap[currentKnowledgeSlug]; if (url) { window.location.href = url; } else { window.location.href = `/learn/${currentKnowledgeSlug}/`; } } closeKnowledgeModal(); } function getCategoryDisplayName(category) { const categoryMap = { 'data-structure': 'æ•°æ®ç»“æ„', 'algorithm': 'ç®—æ³•è®¾è®¡', 'network': 'è®¡ç®—æœºç½‘ç»œ', 'system': 'æ“ä½œç³»ç»Ÿ', 'database': 'æ•°æ®åº“ç³»ç»Ÿ', 'security': 'ä¿¡æ¯å®‰å…¨', 'software': 'è½¯ä»¶å·¥ç¨‹', 'ai': 'äººå·¥æ™ºèƒ½' }; return categoryMap[category] || category; } function getDifficultyDisplayName(difficulty) { const difficultyMap = { 'beginner': 'åˆçº§', 'intermediate': 'ä¸­çº§', 'advanced': 'é«˜çº§' }; return difficultyMap[difficulty] || difficulty; } function getCategoryIcon(category) { const iconMap = { 'data-structure': 'ğŸ§ ', 'algorithm': 'âš¡', 'network': 'ğŸŒ', 'system': 'ğŸ’»', 'database': 'ğŸ—„ï¸', 'security': 'ğŸ”', 'software': 'ğŸ› ï¸', 'ai': 'ğŸ¤–' }; return iconMap[category] || 'ğŸ“š'; } function generateFeaturesList(slug, isImplemented) { const features = { 'hamming-code': [ { icon: 'ğŸ”¢', text: 'äº¤äº’å¼ç¼–ç è¿‡ç¨‹æ¼”ç¤º' }, { icon: 'ğŸ”', text: 'é”™è¯¯æ£€æµ‹ä¸çº æ­£åŸç†' }, { icon: 'ğŸ“Š', text: 'å®æ—¶è®¡ç®—æ­¥éª¤å±•ç¤º' }, { icon: 'ğŸ¯', text: 'å¤šç§æ•°æ®é•¿åº¦æ”¯æŒ' } ], 'crc-check': [ { icon: 'ğŸ”„', text: 'å¾ªç¯å†—ä½™æ ¡éªŒç®—æ³•' }, { icon: 'ğŸ“ˆ', text: 'å¤šé¡¹å¼é™¤æ³•å¯è§†åŒ–' }, { icon: 'âœ…', text: 'æ•°æ®å®Œæ•´æ€§éªŒè¯' }, { icon: 'ğŸ®', text: 'è‡ªå®šä¹‰æ•°æ®è¾“å…¥' } ], 'linked-list': [ { icon: 'ğŸ”—', text: 'å•é“¾è¡¨åŸºæœ¬æ“ä½œ' }, { icon: 'â•', text: 'æ’å…¥ã€åˆ é™¤ã€æŸ¥æ‰¾' }, { icon: 'ğŸ¨', text: 'å¯è§†åŒ–æ“ä½œè¿‡ç¨‹' }, { icon: 'ğŸ“', text: 'æ“ä½œå†å²è®°å½•' } ], 'graph-dfs': [ { icon: 'ğŸŒ²', text: 'æ·±åº¦ä¼˜å…ˆæœç´¢ç®—æ³•' }, { icon: 'ğŸ¯', text: 'å›¾çš„éå†å¯è§†åŒ–' }, { icon: 'ğŸ“Š', text: 'æœç´¢è·¯å¾„å±•ç¤º' }, { icon: 'ğŸ”„', text: 'é€’å½’è¿‡ç¨‹æ¼”ç¤º' } ] }; const defaultFeatures = [ { icon: 'ğŸ“š', text: 'ç†è®ºçŸ¥è¯†è®²è§£' }, { icon: 'ğŸ’¡', text: 'å®é™…åº”ç”¨æ¡ˆä¾‹' }, { icon: 'ğŸ¯', text: 'é‡ç‚¹éš¾ç‚¹è§£æ' }, { icon: 'ğŸš€', text: 'å®è·µåº”ç”¨æŒ‡å¯¼' } ]; const featureList = features[slug] || defaultFeatures; let html = '<ul class="feature-list">'; featureList.forEach(feature => { html += ` <li class="feature-item"><span class="feature-icon">${feature.icon}</span><span class="feature-text">${feature.text}</span></li> `; }); html += '</ul>'; return html; } function closeExerciseModal() { const modal = document.getElementById('exerciseModal'); modal.classList.remove('show'); document.body.style.overflow = ''; currentExerciseData = null; currentQuestionIndex = 0; userAnswers = []; if (exerciseTimer) { clearInterval(exerciseTimer); exerciseTimer = null; } } function showExerciseStage(stageName) { const stages = ['Generate', 'Loading', 'Answer', 'Result']; stages.forEach(stage => { document.getElementById(`exercise${stage}Stage`).style.display = 'none'; }); const targetStage = stageName.charAt(0).toUpperCase() + stageName.slice(1); document.getElementById(`exercise${targetStage}Stage`).style.display = 'block'; } async function startGenerateExercises() { if (!currentExerciseData) return; const difficulty = document.getElementById('exerciseDifficulty').value; const count = parseInt(document.getElementById('exerciseCount').value); showExerciseStage('loading'); const loadingTexts = [ 'æ­£åœ¨åˆ†æçŸ¥è¯†ç‚¹ï¼Œç”Ÿæˆä¸ªæ€§åŒ–ç»ƒä¹ é¢˜...', 'æ­£åœ¨è®¾è®¡é¢˜ç›®ç±»å‹å’Œéš¾åº¦...', 'æ­£åœ¨ç”Ÿæˆè¯¦ç»†è§£ç­”å’Œè§£é‡Š...', 'æ­£åœ¨ä¼˜åŒ–é¢˜ç›®è´¨é‡...', 'å³å°†å®Œæˆï¼Œè¯·ç¨å€™...' ]; let textIndex = 0; const textInterval = setInterval(() => { document.getElementById('loadingText').textContent = loadingTexts[textIndex]; textIndex = (textIndex + 1) % loadingTexts.length; }, 2000); try { console.log('å‘é€ç»ƒä¹ ç”Ÿæˆè¯·æ±‚:', { knowledge_point: currentExerciseData.knowledgePoint, difficulty: difficulty, count: count }); const response = await fetch('/api/exercises/generate/', { method: 'POST', headers: { 'Content-Type': 'application/json', 'X-CSRFToken': getCookie('csrftoken') }, body: JSON.stringify({ knowledge_point: currentExerciseData.knowledgePoint, difficulty: difficulty, count: count }) }); console.log('å“åº”çŠ¶æ€:', response.status); const data = await response.json(); console.log('å“åº”æ•°æ®:', data); clearInterval(textInterval); if (data.success) { currentExerciseData.sessionId = data.data.session_id; currentExerciseData.exercises = data.data.exercises; currentExerciseData.totalQuestions = data.data.total_questions; currentQuestionIndex = 0; userAnswers = new Array(data.data.total_questions).fill(''); startAnswering(); } else { if (data.message && data.message.includes('ç™»å½•')) { showMessage('è¯·å…ˆç™»å½•åå†ä½¿ç”¨ç»ƒä¹ åŠŸèƒ½', 'error'); setTimeout(() => { if (confirm('éœ€è¦ç™»å½•æ‰èƒ½ä½¿ç”¨ç»ƒä¹ åŠŸèƒ½ï¼Œæ˜¯å¦ç°åœ¨ç™»å½•ï¼Ÿ')) { window.location.href = '/admin/login/'; } }, 2000); } else { showMessage(data.message || 'æ“ä½œå¤±è´¥', 'error'); } closeExerciseModal(); } } catch (error) { clearInterval(textInterval); console.error('Generate exercises error:', error); showMessage('ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•', 'error'); closeExerciseModal(); } } function startAnswering() { showExerciseStage('answer'); document.getElementById('totalQuestions').textContent = currentExerciseData.totalQuestions; exerciseStartTime = new Date(); startTimer(); showQuestion(0); } function startTimer() { exerciseTimer = setInterval(() => { if (exerciseStartTime) { const elapsed = Math.floor((new Date() - exerciseStartTime) / 1000); const minutes = Math.floor(elapsed / 60); const seconds = elapsed % 60; document.getElementById('timeElapsed').textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`; } }, 1000); } function showQuestion(index) { if (!currentExerciseData.exercises || index >= currentExerciseData.exercises.length) { return; } currentQuestionIndex = index; const exercise = currentExerciseData.exercises[index]; document.getElementById('currentQuestion').textContent = index + 1; const progressPercent = ((index + 1) / currentExerciseData.totalQuestions) * 100; document.getElementById('exerciseProgressFill').style.width = `${progressPercent}%`; const questionContainer = document.getElementById('questionContainer'); questionContainer.innerHTML = generateQuestionHTML(exercise, index); document.getElementById('prevBtn').disabled = index === 0; const isLastQuestion = index === currentExerciseData.totalQuestions - 1; document.getElementById('nextBtn').style.display = isLastQuestion ? 'none' : 'inline-flex'; document.getElementById('submitBtn').style.display = isLastQuestion ? 'inline-flex' : 'none'; restoreUserAnswer(index); } function generateQuestionHTML(exercise, index) { let html = ` <div class="question-item"><div class="question-title"> ${index + 1}. ${exercise.question} </div> `; if (exercise.type === 'choice') { html += '<div class="question-options">'; exercise.options.forEach((option, optionIndex) => { const optionLetter = String.fromCharCode(65 + optionIndex); html += ` <div class="option-item" onclick="selectOption(${index}, '${optionLetter}')"><input type="radio" name="question_${index}" value="${optionLetter}" id="option_${index}_${optionIndex}"><label class="option-text" for="option_${index}_${optionIndex}">${option}</label></div> `; }); html += '</div>'; } else if (exercise.type === 'fill') { html += ` <div class="question-options"><input type="text" class="fill-input" id="fill_${index}" placeholder="è¯·è¾“å…¥æ‚¨çš„ç­”æ¡ˆ..." onchange="updateAnswer(${index}, this.value)"></div> `; } else if (exercise.type === 'analysis') { html += ` <div class="question-options"><textarea class="fill-input" id="analysis_${index}" placeholder="è¯·è¾“å…¥æ‚¨çš„åˆ†æ..." rows="5" onchange="updateAnswer(${index}, this.value)"></textarea></div> `; } html += '</div>'; return html; } function initPlanetCards() { const planetCards = document.querySelectorAll('.planet-card'); planetCards.forEach((card, index) => { card.addEventListener('mouseenter', function() { this.style.transform = 'translateY(-10px) scale(1.03)'; const nextCard = planetCards[index + 1]; const prevCard = planetCards[index - 1]; if (nextCard) { nextCard.style.transform = 'translateY(-2px) scale(1.01)'; nextCard.style.transition = 'all 0.3s ease'; } if (prevCard) { prevCard.style.transform = 'translateY(-2px) scale(1.01)'; prevCard.style.transition = 'all 0.3s ease'; } }); card.addEventListener('mouseleave', function() { const nextCard = planetCards[index + 1]; const prevCard = planetCards[index - 1]; if (nextCard) { nextCard.style.transform = ''; } if (prevCard) { prevCard.style.transform = ''; } }); card.addEventListener('click', function(e) { const ripple = document.createElement('div'); ripple.style.position = 'absolute'; ripple.style.borderRadius = '50%'; ripple.style.background = 'rgba(255,255,255,0.6)'; ripple.style.transform = 'scale(0)'; ripple.style.animation = 'ripple 0.6s linear'; ripple.style.pointerEvents = 'none'; const rect = this.getBoundingClientRect(); const size = Math.max(rect.width, rect.height); ripple.style.width = ripple.style.height = size + 'px'; ripple.style.left = (e.clientX - rect.left - size / 2) + 'px'; ripple.style.top = (e.clientY - rect.top - size / 2) + 'px'; this.appendChild(ripple); setTimeout(() => { ripple.remove(); }, 600); }); }); } const rippleStyle = document.createElement('style'); rippleStyle.textContent = ` @keyframes ripple { to { transform: scale(2); opacity: 0; } } `; document.head.appendChild(rippleStyle); document.addEventListener('DOMContentLoaded', function() { initPlanetCards(); const searchInput = document.getElementById('searchInput'); searchInput.addEventListener('keypress', function(e) { if (e.key === 'Enter') { filterKnowledge(); } }); document.addEventListener('keydown', function(e) { if (e.key === 'Escape') { closeKnowledgeModal(); } }); let searchTimeout; searchInput.addEventListener('input', function() { clearTimeout(searchTimeout); searchTimeout = setTimeout(filterKnowledge, 300); }); const cards = document.querySelectorAll('.knowledge-card'); cards.forEach(card => { card.addEventListener('mouseenter', function() { if (!this.classList.contains('coming-soon')) { this.style.transform = 'translateY(-12px) scale(1.03)'; } else { this.style.transform = 'translateY(-5px) scale(1.01)'; } }); card.addEventListener('mouseleave', function() { this.style.transform = ''; }); card.addEventListener('click', function(e) { const ripple = document.createElement('div'); const rect = this.getBoundingClientRect(); const size = Math.max(rect.width, rect.height); const x = e.clientX - rect.left - size / 2; const y = e.clientY - rect.top - size / 2; ripple.style.cssText = ` position: absolute; width: ${size}px; height: ${size}px; left: ${x}px; top: ${y}px; background: rgba(102, 126, 234, 0.3); border-radius: 50%; transform: scale(0); animation: ripple 0.6s ease-out; pointer-events: none; z-index: 1; `; this.style.position = 'relative'; this.appendChild(ripple); setTimeout(() => { ripple.remove(); }, 600); }); }); const statCards = document.querySelectorAll('.stat-card'); statCards.forEach((card, index) => { card.style.opacity = '0'; card.style.transform = 'translateY(30px)'; card.style.transition = 'all 0.6s ease'; setTimeout(() => { card.style.opacity = '1'; card.style.transform = 'translateY(0)'; }, index * 150); }); const categoryTitles = document.querySelectorAll('.category-title'); const observerOptions = { threshold: 0.1, rootMargin: '0px 0px -50px 0px' }; const observer = new IntersectionObserver((entries) => { entries.forEach(entry => { if (entry.isIntersecting) { entry.target.style.animation = 'fadeInUp 0.6s ease forwards'; } }); }, observerOptions); categoryTitles.forEach(title => { observer.observe(title); }); document.addEventListener('keydown', function(e) { if ((e.ctrlKey || e.metaKey) && e.key === 'k') { e.preventDefault(); searchInput.focus(); searchInput.select(); } if (e.key === 'Escape' && document.activeElement === searchInput) { searchInput.value = ''; filterKnowledge(); searchInput.blur(); } }); if ('IntersectionObserver' in window) { const imageObserver = new IntersectionObserver((entries) => { entries.forEach(entry => { if (entry.isIntersecting) { const img = entry.target; if (img.dataset.src) { img.src = img.dataset.src; img.removeAttribute('data-src'); imageObserver.unobserve(img); } } }); }); document.querySelectorAll('img[data-src]').forEach(img => { imageObserver.observe(img); }); } const searchSuggestions = [ 'æµ·æ˜ç ', 'CRC', 'æ’åºç®—æ³•', 'åŠ å¯†', 'æ•°æ®ç»“æ„', 'ç½‘ç»œåè®®', 'æ“ä½œç³»ç»Ÿ', 'æ•°æ®åº“', 'æœºå™¨å­¦ä¹ ' ]; searchInput.addEventListener('focus', function() { }); }); const style = document.createElement('style'); style.textContent = ` @keyframes ripple { to { transform: scale(4); opacity: 0; } } @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } } `; document.head.appendChild(style); function selectOption(questionIndex, optionValue) { userAnswers[questionIndex] = optionValue; const options = document.querySelectorAll(`input[name="question_${questionIndex}"]`); options.forEach(option => { option.checked = option.value === optionValue; option.closest('.option-item').classList.toggle('selected', option.checked); }); } function updateAnswer(questionIndex, value) { userAnswers[questionIndex] = value; } function restoreUserAnswer(questionIndex) { const answer = userAnswers[questionIndex]; if (!answer) return; const exercise = currentExerciseData.exercises[questionIndex]; if (exercise.type === 'choice') { const option = document.querySelector(`input[name="question_${questionIndex}"][value="${answer}"]`); if (option) { option.checked = true; option.closest('.option-item').classList.add('selected'); } } else if (exercise.type === 'fill') { const input = document.getElementById(`fill_${questionIndex}`); if (input) input.value = answer; } else if (exercise.type === 'analysis') { const textarea = document.getElementById(`analysis_${questionIndex}`); if (textarea) textarea.value = answer; } } function previousQuestion() { if (currentQuestionIndex > 0) { showQuestion(currentQuestionIndex - 1); } } function nextQuestion() { if (currentQuestionIndex < currentExerciseData.totalQuestions - 1) { showQuestion(currentQuestionIndex + 1); } } async function submitExercises() { if (!currentExerciseData.sessionId) return; const unansweredCount = userAnswers.filter(answer => !answer || answer.trim() === '').length; if (unansweredCount > 0) { const confirmed = confirm(`è¿˜æœ‰ ${unansweredCount} é“é¢˜æœªå›ç­”ï¼Œç¡®å®šè¦æäº¤å—ï¼Ÿ`); if (!confirmed) return; } const submitBtn = document.getElementById('submitBtn'); const originalText = submitBtn.innerHTML; submitBtn.innerHTML = 'â³ æäº¤ä¸­...'; submitBtn.disabled = true; try { const response = await fetch('/api/exercises/submit/', { method: 'POST', headers: { 'Content-Type': 'application/json', 'X-CSRFToken': getCookie('csrftoken') }, body: JSON.stringify({ session_id: currentExerciseData.sessionId, answers: userAnswers }) }); const data = await response.json(); if (data.success) { if (exerciseTimer) { clearInterval(exerciseTimer); exerciseTimer = null; } await showExerciseResults(currentExerciseData.sessionId); } else { showMessage(data.message || 'æäº¤å¤±è´¥', 'error'); submitBtn.innerHTML = originalText; submitBtn.disabled = false; } } catch (error) { console.error('Submit exercises error:', error); showMessage('ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•', 'error'); submitBtn.innerHTML = originalText; submitBtn.disabled = false; } } async function showExerciseResults(sessionId) { try { const response = await fetch(`/api/exercises/report/${sessionId}/`); const data = await response.json(); if (data.success) { const report = data.data; showExerciseStage('result'); const resultSummary = document.getElementById('resultSummary'); resultSummary.innerHTML = generateResultSummaryHTML(report); const resultDetails = document.getElementById('resultDetails'); resultDetails.innerHTML = generateResultDetailsHTML(report); updateKnowledgePointProgress(currentExerciseData.knowledgePoint, report); } else { showMessage('è·å–ç»“æœå¤±è´¥', 'error'); } } catch (error) { console.error('Get exercise results error:', error); showMessage('è·å–ç»“æœå¤±è´¥', 'error'); } } function generateResultSummaryHTML(report) { const scoreColor = report.score >= 80 ? 'var(--accent-color)' : report.score >= 60 ? '#f39c12' : '#e74c3c'; const scoreEmoji = report.score >= 80 ? 'ğŸ‰' : report.score >= 60 ? 'ğŸ‘' : 'ğŸ’ª'; return ` <div class="result-card"><div class="result-score" style="color: ${scoreColor}"><div class="score-circle"><span class="score-number">${report.score}</span><span class="score-unit">åˆ†</span></div><div class="score-emoji">${scoreEmoji}</div></div><div class="result-stats"><div class="stat-item"><span class="stat-label">æ­£ç¡®ç‡</span><span class="stat-value">${report.accuracy_rate.toFixed(1)}%</span></div><div class="stat-item"><span class="stat-label">æ­£ç¡®é¢˜æ•°</span><span class="stat-value">${report.correct_count}/${report.total_questions}</span></div><div class="stat-item"><span class="stat-label">ç”¨æ—¶</span><span class="stat-value">${Math.floor(report.time_spent / 60)}:${(report.time_spent % 60).toString().padStart(2, '0')}</span></div></div><div class="result-message"> ${getScoreMessage(report.score)} </div></div> `; } function generateResultDetailsHTML(report) { let html = '<div class="result-questions">'; report.exercises_detail.forEach((exercise, index) => { const isCorrect = exercise.is_correct; const statusIcon = isCorrect ? 'âœ…' : 'âŒ'; const statusClass = isCorrect ? 'correct' : 'incorrect'; html += ` <div class="result-question ${statusClass}"><div class="result-question-header"><span class="question-number">${index + 1}</span><span class="question-status">${statusIcon}</span></div><div class="result-question-content"><div class="question-text">${exercise.question}</div><div class="answer-comparison"><div class="user-answer"><strong>æ‚¨çš„ç­”æ¡ˆï¼š</strong> ${exercise.user_answer || 'æœªå›ç­”'} </div><div class="correct-answer"><strong>æ­£ç¡®ç­”æ¡ˆï¼š</strong> ${exercise.correct_answer} </div></div><div class="question-explanation"><strong>è§£æï¼š</strong> ${exercise.explanation} </div></div></div> `; }); html += '</div>'; return html; } function getScoreMessage(score) { if (score >= 90) return 'ğŸ‰ ä¼˜ç§€ï¼æ‚¨å¯¹è¿™ä¸ªçŸ¥è¯†ç‚¹æŒæ¡å¾—å¾ˆå¥½ï¼'; if (score >= 80) return 'ğŸ‘ è‰¯å¥½ï¼ç»§ç»­ä¿æŒè¿™ä¸ªå­¦ä¹ çŠ¶æ€ï¼'; if (score >= 60) return 'ğŸ“š åŠæ ¼ï¼å»ºè®®å†å¤ä¹ ä¸€ä¸‹ç›¸å…³æ¦‚å¿µã€‚'; return 'ğŸ’ª éœ€è¦åŠ å¼ºï¼å»ºè®®é‡æ–°å­¦ä¹ è¿™ä¸ªçŸ¥è¯†ç‚¹ã€‚'; } function updateKnowledgePointProgress(knowledgePoint, report) { const progressElement = document.getElementById(`progress-${knowledgePoint}`); if (progressElement) { progressElement.style.display = 'block'; const progressCount = progressElement.querySelector('.progress-count'); const progressFill = progressElement.querySelector('.progress-fill'); if (progressCount) { progressCount.textContent = `1/1`; } if (progressFill) { progressFill.style.width = `${report.accuracy_rate}%`; } } }</script>
{% endblock %}