{% extends 'knowledge_app/base.html' %}

{% block title %}{{ knowledge_point.title }} - è®¡ç®—æœºç§‘å­¦å­¦ä¹ å¹³å°{% endblock %}

{% block extra_css %}
<style>.knowledge-container {max-width:1000px;margin:0 auto;padding:20px;min-height:100vh;position:relative;z-index:1}.knowledge-header {background:rgba(255, 255, 255, 0.1);backdrop-filter:blur(15px);border-radius:var(--border-radius-lg);padding:40px;margin-bottom:30px;color:var(--text-inverse);text-align:center;position:relative;z-index:2}.knowledge-icon {font-size:4rem;margin-bottom:20px;display:block}.knowledge-title {font-size:2.5rem;font-weight:700;margin-bottom:15px}.knowledge-meta {display:flex;justify-content:center;gap:30px;margin-top:20px;flex-wrap:wrap}.meta-item {display:flex;align-items:center;gap:8px;background:rgba(255, 255, 255, 0.1);padding:8px 16px;border-radius:var(--border-radius-lg);font-size:0.9rem}.knowledge-content {background:var(--bg-card);border-radius:var(--border-radius-lg);padding:40px;box-shadow:var(--shadow-md);margin-bottom:30px;position:relative;z-index:2}.content-section {margin-bottom:40px}.section-title {font-size:1.5rem;font-weight:600;color:var(--text-primary);margin-bottom:20px;padding-bottom:10px;border-bottom:2px solid var(--accent-color);display:flex;align-items:center;gap:10px}.description {font-size:1.1rem;line-height:1.8;color:#666;margin-bottom:30px}.status-banner {padding:20px;border-radius:var(--border-radius);margin-bottom:30px;text-align:center}.status-implemented {background:linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);color:#155724;border:1px solid #c3e6cb}.status-developing {background:linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);color:#856404;border:1px solid #ffeaa7}.action-buttons {display:flex;gap:15px;justify-content:center;margin-top:30px;flex-wrap:wrap}.btn {padding:12px 24px;border-radius:var(--border-radius);text-decoration:none;font-weight:600;transition:all 0.3s ease;border:none;cursor:pointer;font-size:1rem;display:flex;align-items:center;gap:8px}.btn-primary {background:linear-gradient(135deg, var(--accent-color) 0%, #44a08d 100%);color:var(--text-inverse)}.btn-primary:hover {transform:translateY(-2px);box-shadow:0 8px 25px rgba(78, 205, 196, 0.3);text-decoration:none;color:var(--text-inverse);z-index:3}.btn-secondary {background:#f8f9fa;color:var(--text-primary);border:1px solid #ddd}.btn-secondary:hover {background:#e9ecef;transform:translateY(-2px);text-decoration:none;color:var(--text-primary);z-index:3}.related-topics {background:#f8f9fa;border-radius:var(--border-radius);padding:30px;margin-top:30px}.related-grid {display:grid;grid-template-columns:repeat(auto-fit, minmax(250px, 1fr));gap:15px;margin-top:20px}.related-item {background:var(--bg-card);padding:15px;border-radius:var(--border-radius);border:1px solid #e9ecef;transition:all 0.3s ease;text-decoration:none;color:var(--text-primary)}.related-item:hover {transform:translateY(-2px);box-shadow:var(--shadow-md);text-decoration:none;color:var(--accent-color)}.breadcrumb {color:var(--text-inverse);margin-bottom:20px;opacity:0.9}.breadcrumb a {color:var(--text-inverse);text-decoration:none}.breadcrumb a:hover {text-decoration:underline}.progress-section {background:linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);border-radius:var(--border-radius);padding:25px;margin-bottom:30px}.progress-bar {width:100%;height:8px;background:#e9ecef;border-radius:4px;overflow:hidden;margin:15px 0}.progress-fill {height:100%;background:linear-gradient(90deg, var(--accent-color) 0%, #44a08d 100%);border-radius:4px;transition:width 0.3s ease}@media (max-width:768px) {.knowledge-container {padding:15px}.knowledge-header {padding:30px 20px;margin-bottom:20px}.knowledge-title {font-size:2rem}.knowledge-meta {gap:15px;flex-direction:column}.knowledge-content {padding:25px;margin-bottom:20px}.action-buttons {flex-direction:column;align-items:center;gap:10px}.btn {width:100%;max-width:250px;justify-content:center}.related-grid {grid-template-columns:1fr}.btn:hover {transform:translateY(-1px)}.status-banner {padding:15px;margin-bottom:20px}.progress-section {padding:20px;margin-bottom:20px}}</style>
{% endblock %}

{% block content %}
<div class="knowledge-container"><!-- é¢åŒ…å±‘å¯¼èˆª --><nav class="breadcrumb"><a href="{% url 'knowledge_app:index' %}">é¦–é¡µ</a> ><a href="{% url 'knowledge_app:search' %}?category={{ knowledge_point.category }}">{{ knowledge_point.category_display }}</a> > 
        {{ knowledge_point.title }}
    </nav><!-- çŸ¥è¯†ç‚¹å¤´éƒ¨ --><div class="knowledge-header"><span class="knowledge-icon">{{ knowledge_point.icon }}</span><h1 class="knowledge-title">{{ knowledge_point.title }}</h1><p class="description">{{ knowledge_point.description }}</p><div class="knowledge-meta"><div class="meta-item"><span>ğŸ“‚</span>
                {{ knowledge_point.category_display }}
            </div><div class="meta-item"><span>ğŸ“Š</span>
                {% if knowledge_point.difficulty == 'beginner' %}åˆçº§
                {% elif knowledge_point.difficulty == 'intermediate' %}ä¸­çº§
                {% else %}é«˜çº§{% endif %}
            </div><div class="meta-item"><span>â­</span>
                {% if knowledge_point.is_implemented %}å·²å®ç°{% else %}å¼€å‘ä¸­{% endif %}
            </div></div></div><!-- å­¦ä¹ è¿›åº¦ï¼ˆä»…ç™»å½•ç”¨æˆ·ï¼‰ -->
    {% if user.is_authenticated and user_progress %}
    <div class="progress-section"><h3 style="margin: 0 0 15px 0; color: var(--text-primary);">ğŸ“ˆ å­¦ä¹ è¿›åº¦</h3><div class="progress-bar"><div class="progress-fill" style="width: {{ user_progress.progress_percentage }}%"></div></div><div style="display: flex; justify-content: space-between; font-size: 0.9rem; color: #666;"><span>è¿›åº¦: {{ user_progress.progress_percentage|floatformat:1 }}%</span><span>çŠ¶æ€: {{ user_progress.get_status_display }}</span></div></div>
    {% endif %}

    <!-- çŠ¶æ€æ¨ªå¹… -->
    {% if knowledge_point.is_implemented %}
    <div class="status-banner status-implemented"><h3 style="margin: 0 0 10px 0;">âœ… æ­¤çŸ¥è¯†ç‚¹å·²å®ç°</h3><p style="margin: 0;">æ‚¨å¯ä»¥å¼€å§‹å­¦ä¹ è¿™ä¸ªçŸ¥è¯†ç‚¹çš„è¯¦ç»†å†…å®¹</p></div>
    {% else %}
    <div class="status-banner status-developing"><h3 style="margin: 0 0 10px 0;">ğŸš§ æ­¤çŸ¥è¯†ç‚¹æ­£åœ¨å¼€å‘ä¸­</h3><p style="margin: 0;">æˆ‘ä»¬æ­£åœ¨åŠªåŠ›ä¸ºæ‚¨å‡†å¤‡è¿™ä¸ªçŸ¥è¯†ç‚¹çš„å†…å®¹ï¼Œæ•¬è¯·æœŸå¾…ï¼</p></div>
    {% endif %}

    <!-- ä¸»è¦å†…å®¹ --><div class="knowledge-content">
        {% if knowledge_point.is_implemented %}
            <!-- å¦‚æœå·²å®ç°ï¼Œæ˜¾ç¤ºå®ç°çŠ¶æ€çš„å†…å®¹ --><div class="content-section"><h2 class="section-title"><span>ğŸ¯</span> å¼€å§‹å­¦ä¹ 
                </h2><p>è¿™ä¸ªçŸ¥è¯†ç‚¹å·²ç»å®ç°ï¼Œæ‚¨å¯ä»¥å¼€å§‹è¯¦ç»†çš„å­¦ä¹ ã€‚</p><p>ç‚¹å‡»ä¸‹æ–¹çš„"å¼€å§‹å­¦ä¹ "æŒ‰é’®æ¥è®¿é—®å…·ä½“çš„å­¦ä¹ å†…å®¹ã€‚</p></div>
        {% else %}
            <!-- å¦‚æœæœªå®ç°ï¼Œæ˜¾ç¤ºé€šç”¨å†…å®¹ --><div class="content-section"><h2 class="section-title"><span>ğŸ“–</span> çŸ¥è¯†ç‚¹æ¦‚è¿°
                </h2><p>{{ knowledge_point.title }} æ˜¯ {{ knowledge_point.category_display }} é¢†åŸŸä¸­çš„é‡è¦æ¦‚å¿µã€‚</p><p>è¿™ä¸ªçŸ¥è¯†ç‚¹æ¶µç›–äº†ç›¸å…³çš„ç†è®ºåŸºç¡€ã€å®é™…åº”ç”¨å’Œè§£å†³æ–¹æ¡ˆã€‚</p></div><div class="content-section"><h2 class="section-title"><span>ğŸ¯</span> å­¦ä¹ ç›®æ ‡
                </h2><ul><li>ç†è§£ {{ knowledge_point.title }} çš„åŸºæœ¬æ¦‚å¿µå’ŒåŸç†</li><li>æŒæ¡ç›¸å…³çš„ç®—æ³•å’Œæ•°æ®ç»“æ„</li><li>èƒ½å¤Ÿåœ¨å®é™…é—®é¢˜ä¸­åº”ç”¨æ‰€å­¦çŸ¥è¯†</li><li>äº†è§£æœ€ä½³å®è·µå’Œå¸¸è§é™·é˜±</li></ul></div><div class="content-section"><h2 class="section-title"><span>â°</span> é¢„è®¡å­¦ä¹ æ—¶é—´
                </h2><p>æ ¹æ®éš¾åº¦çº§åˆ«ï¼Œå»ºè®®å­¦ä¹ æ—¶é—´ï¼š</p><ul>
                    {% if knowledge_point.difficulty == 'beginner' %}
                    <li>ç†è®ºå­¦ä¹ ï¼š1-2å°æ—¶</li><li>å®è·µç»ƒä¹ ï¼š2-3å°æ—¶</li>
                    {% elif knowledge_point.difficulty == 'intermediate' %}
                    <li>ç†è®ºå­¦ä¹ ï¼š2-3å°æ—¶</li><li>å®è·µç»ƒä¹ ï¼š4-6å°æ—¶</li>
                    {% else %}
                    <li>ç†è®ºå­¦ä¹ ï¼š3-4å°æ—¶</li><li>å®è·µç»ƒä¹ ï¼š6-8å°æ—¶</li>
                    {% endif %}
                </ul></div>
        {% endif %}
    </div><!-- æ“ä½œæŒ‰é’® --><div class="action-buttons">
        {% if knowledge_point.is_implemented %}
        <a href="#" class="btn btn-primary" onclick="startLearning('{{ knowledge_point.slug }}')"><span>ğŸš€</span> å¼€å§‹å­¦ä¹ 
        </a>
        {% endif %}
        <a href="{% url 'knowledge_app:search' %}?category={{ knowledge_point.category }}" class="btn btn-secondary"><span>ğŸ“š</span> æµè§ˆç›¸å…³å†…å®¹
        </a><a href="{% url 'knowledge_app:cs_universe' %}" class="btn btn-secondary"><span>ğŸŒŒ</span> è¿”å›CSå®‡å®™
        </a></div><!-- ç›¸å…³ä¸»é¢˜æ¨è --><div class="related-topics"><h3 style="margin: 0 0 20px 0; color: var(--text-primary);">ğŸ”— ç›¸å…³ä¸»é¢˜</h3><div class="related-grid"><!-- è¿™é‡Œå¯ä»¥æ·»åŠ ç›¸å…³ä¸»é¢˜çš„æ¨è --><div class="related-item"><h4 style="margin: 0 0 8px 0;">æ¢ç´¢æ›´å¤š</h4><p style="margin: 0; font-size: 0.9rem; color: #666;">
                    åœ¨ {{ knowledge_point.category_display }} åˆ†ç±»ä¸­å‘ç°æ›´å¤šç›¸å…³å†…å®¹
                </p></div></div></div></div>
{% endblock %}

{% block extra_js %}
<script>function startLearning(slug) { if (typeof startStudySession === 'function') { startStudySession(slug); } const implementedPages = { 'hamming-code': '/learn/hamming-code/', 'crc-check': '/learn/crc-check/', 'single-linklist': '/learn/single-linklist/', 'graph_dfs': '{% url "knowledge_app:graph_dfs" %}' }; if (implementedPages[slug]) { window.location.href = implementedPages[slug]; } else { alert('æ­¤çŸ¥è¯†ç‚¹çš„è¯¦ç»†å†…å®¹æ­£åœ¨å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼'); } } document.addEventListener('DOMContentLoaded', function() { const sections = document.querySelectorAll('.content-section'); sections.forEach((section, index) => { section.style.opacity = '0'; section.style.transform = 'translateY(20px)'; setTimeout(() => { section.style.transition = 'all 0.6s ease'; section.style.opacity = '1'; section.style.transform = 'translateY(0)'; }, index * 200); }); });</script>
{% endblock %}
