{% extends 'knowledge_app/base.html' %}
{% load static %}

{% block title %}çŸ¥è¯†å›¾è°± - CSå­¦ä¹ å¹³å°{% endblock %}

{% block extra_css %}
<style>.graph-container {max-width:1400px;margin:0 auto;padding:20px}.graph-header {text-align:center;margin-bottom:30px;padding:30px 20px;background:var(--bg-overlay);border-radius:var(--border-radius-lg);backdrop-filter:blur(15px);border:1px solid var(--border-color)}.graph-title {font-size:2.5rem;font-weight:700;margin-bottom:15px;background:var(--primary-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.graph-subtitle {font-size:1.2rem;color:var(--text-secondary);margin-bottom:20px}.graph-controls {display:flex;justify-content:center;gap:15px;flex-wrap:wrap;margin-top:20px}.control-group {display:flex;align-items:center;gap:8px}.control-label {font-weight:500;color:var(--text-primary)}.control-select, .control-input {padding:8px 12px;border:1px solid var(--border-color);border-radius:var(--border-radius-sm);background:var(--bg-primary);color:var(--text-primary)}.btn-control {padding:8px 16px;border:none;border-radius:var(--border-radius-sm);background:var(--primary-gradient);color:var(--text-inverse);cursor:pointer;font-weight:500;transition:all 0.3s ease}.btn-control:hover {transform:translateY(-2px);box-shadow:0 4px 12px var(--shadow-medium)}.graph-main {display:grid;grid-template-columns:1fr 350px;gap:20px;margin-top:30px}.graph-visualization {background:linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);border:2px solid rgba(102, 126, 234, 0.3);border-radius:var(--border-radius-lg);overflow:hidden;position:relative;min-height:700px;box-shadow:0 20px 60px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.1)}.graph-canvas {width:100%;height:700px;background:radial-gradient(ellipse at center, rgba(102, 126, 234, 0.1) 0%, transparent 70%);position:relative}.graph-loading {position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);text-align:center;color:rgba(255, 255, 255, 0.9);font-size:1.4rem;z-index:10;background:rgba(0, 0, 0, 0.6);padding:30px 40px;border-radius:var(--border-radius-lg);backdrop-filter:blur(15px);border:1px solid rgba(255, 255, 255, 0.2);box-shadow:var(--shadow-md)}.graph-loading div {animation:pulse 2s ease-in-out infinite}@keyframes pulse {0%, 100% {opacity:0.6;transform:scale(1)}50% {opacity:1;transform:scale(1.05)}}.graph-sidebar {display:flex;flex-direction:column;gap:20px}.sidebar-section {background:var(--bg-primary);border:1px solid var(--border-color);border-radius:16px;padding:20px}.section-title {font-size:1.2rem;font-weight:600;margin-bottom:15px;color:var(--text-primary);display:flex;align-items:center;gap:8px}.concept-details {display:none}.concept-details.show {display:block}.concept-name {font-size:1.4rem;font-weight:700;margin-bottom:10px;color:var(--primary-color)}.concept-meta {display:flex;gap:10px;margin-bottom:15px}.meta-badge {padding:4px 8px;border-radius:12px;font-size:0.8rem;font-weight:500}.category-badge {background:var(--primary-color);color:var(--text-inverse)}.difficulty-badge {background:var(--bg-tertiary);color:var(--text-primary)}.concept-description {color:var(--text-secondary);line-height:1.6;margin-bottom:15px}.concept-actions {display:flex;gap:10px;margin-top:15px}.btn-concept {flex:1;padding:8px 12px;border:none;border-radius:var(--border-radius-sm);cursor:pointer;font-weight:500;transition:all 0.3s ease}.btn-primary-concept {background:var(--primary-gradient);color:var(--text-inverse)}.btn-secondary-concept {background:var(--bg-secondary);color:var(--text-primary);border:1px solid var(--border-color)}.recommendations-list {display:flex;flex-direction:column;gap:12px}.recommendation-item {display:flex;align-items:center;padding:15px;background:linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);border-radius:12px;margin-bottom:12px;cursor:pointer;transition:all 0.3s ease;border:1px solid rgba(255,255,255,0.1)}.recommendation-item:hover {background:linear-gradient(135deg, rgba(102, 126, 234, 0.2) 0%, rgba(118, 75, 162, 0.2) 100%);transform:translateX(5px);border-color:rgba(102, 126, 234, 0.3);box-shadow:var(--shadow-md)}.rec-icon {font-size:1.5rem;margin-right:12px;filter:drop-shadow(0 2px 4px rgba(0,0,0,0.2))}.rec-content {flex:1}.rec-title {font-weight:600;color:var(--text-inverse);margin-bottom:4px;font-size:0.95rem}.rec-desc {font-size:0.85rem;color:rgba(255,255,255,0.8);line-height:1.3}.recommendation-name {font-weight:600;color:var(--text-primary);margin-bottom:4px}.recommendation-reason {font-size:0.8rem;color:var(--text-secondary)}.categories-list {display:flex;flex-direction:column;gap:8px}.category-item {display:flex;justify-content:space-between;align-items:center;padding:8px 12px;border-radius:var(--border-radius-sm);cursor:pointer;transition:all 0.3s ease}.category-item:hover {background:var(--bg-secondary)}.category-item.active {background:var(--primary-color);color:var(--text-inverse)}.category-name {font-weight:500}.category-count {font-size:0.9rem;opacity:0.8}@media (max-width:1024px) {.graph-main {grid-template-columns:1fr}.graph-sidebar {order:-1}.graph-controls {flex-direction:column;align-items:center}}@media (max-width:768px) {.graph-title {font-size:2rem}.graph-canvas {height:400px}.control-group {width:100%;justify-content:space-between}}</style>
{% endblock %}

{% block content %}
<div class="graph-container"><div class="graph-header"><h1 class="graph-title">ğŸ•¸ï¸ çŸ¥è¯†å›¾è°±</h1><p class="graph-subtitle">æ¢ç´¢è®¡ç®—æœºç§‘å­¦æ¦‚å¿µä¹‹é—´çš„å…³è”ï¼Œæ„å»ºç³»ç»ŸåŒ–çš„çŸ¥è¯†ä½“ç³»</p><div class="graph-controls"><div class="control-group"><label class="control-label">ğŸ” æœç´¢æ¦‚å¿µ:</label><input type="text" id="searchInput" placeholder="è¾“å…¥æ¦‚å¿µåç§°..." class="control-input" style="flex: 1; margin-right: 10px;"><button id="searchBtn" class="btn-control">æœç´¢</button></div><div class="control-group"><label class="control-label">åˆ†ç±»ç­›é€‰:</label><select id="categoryFilter" class="control-select"><option value="">å…¨éƒ¨åˆ†ç±»</option><option value="algorithm">ç®—æ³•</option><option value="data_structure">æ•°æ®ç»“æ„</option><option value="network">è®¡ç®—æœºç½‘ç»œ</option><option value="os">æ“ä½œç³»ç»Ÿ</option><option value="database">æ•°æ®åº“</option><option value="ai">äººå·¥æ™ºèƒ½</option></select></div><div class="control-group"><label class="control-label">å¸ƒå±€ç®—æ³•:</label><select id="layoutSelect" class="control-select"><option value="force_directed">åŠ›å¯¼å‘å¸ƒå±€</option><option value="hierarchical">å±‚æ¬¡å¸ƒå±€</option><option value="circular">åœ†å½¢å¸ƒå±€</option></select></div><div class="control-group"><label class="control-label">èŠ‚ç‚¹æ•°é‡:</label><input type="range" id="nodeCount" class="control-input" min="10" max="100" value="50"><span id="nodeCountValue">50</span></div><button id="refreshGraph" class="btn-control">ğŸ”„ åˆ·æ–°å›¾è°±</button><button id="resetView" class="btn-control">ğŸ¯ é‡ç½®è§†å›¾</button></div></div><div class="graph-main"><div class="graph-visualization"><div id="graphCanvas" class="graph-canvas"></div><div id="graphLoading" class="graph-loading"><div>ğŸ”„ æ­£åœ¨åŠ è½½çŸ¥è¯†å›¾è°±...</div></div></div><div class="graph-sidebar"><!-- æ¦‚å¿µè¯¦æƒ… --><div class="sidebar-section"><h3 class="section-title">ğŸ“– æ¦‚å¿µè¯¦æƒ…</h3><div id="conceptDetails" class="concept-details"><div class="concept-name" id="conceptName">é€‰æ‹©ä¸€ä¸ªæ¦‚å¿µ</div><div class="concept-meta" id="conceptMeta"></div><div class="concept-description" id="conceptDescription">
                        ç‚¹å‡»å›¾è°±ä¸­çš„èŠ‚ç‚¹æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
                    </div><div class="concept-actions"><button class="btn-concept btn-primary-concept" id="startLearning">
                            ğŸš€ å¼€å§‹å­¦ä¹ 
                        </button><button class="btn-concept btn-secondary-concept" id="viewRelated">
                            ğŸ”— ç›¸å…³æ¦‚å¿µ
                        </button></div></div></div><!-- å­¦ä¹ æ¨è --><div class="sidebar-section"><h3 class="section-title">ğŸ’¡ å­¦ä¹ æ¨è</h3><div id="recommendationsList" class="recommendations-list"><div class="recommendation-item"><div class="rec-icon">ğŸ¯</div><div class="rec-content"><div class="rec-title">æ–°æ‰‹å…¥é—¨è·¯å¾„</div><div class="rec-desc">æ•°ç»„ â†’ é“¾è¡¨ â†’ æ ˆ â†’ é˜Ÿåˆ—</div></div></div><div class="recommendation-item"><div class="rec-icon">ğŸš€</div><div class="rec-content"><div class="rec-title">ç®—æ³•è¿›é˜¶è·¯å¾„</div><div class="rec-desc">æ’åºç®—æ³• â†’ æœç´¢ç®—æ³• â†’ åŠ¨æ€è§„åˆ’</div></div></div><div class="recommendation-item"><div class="rec-icon">ğŸŒ</div><div class="rec-content"><div class="rec-title">ç½‘ç»œåŸºç¡€è·¯å¾„</div><div class="rec-desc">IPåè®® â†’ TCPåè®® â†’ HTTPåè®®</div></div></div></div><button id="generatePath" class="btn-control" style="width: 100%; margin-top: 15px;">
                    ğŸ—ºï¸ ç”Ÿæˆä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„
                </button></div><!-- åˆ†ç±»ç»Ÿè®¡ --><div class="sidebar-section"><h3 class="section-title">ğŸ“Š åˆ†ç±»ç»Ÿè®¡</h3><div class="categories-list"><div class="category-item active" onclick="filterByCategory('')"><span class="category-name">å…¨éƒ¨åˆ†ç±»</span><span class="category-count">{{ categories|length }}</span></div>
                    {% for category in categories %}
                    <div class="category-item" onclick="filterByCategory('{{ category.category }}')"><span class="category-name">{{ category.category }}</span><span class="category-count">{{ category.count }}</span></div>
                    {% endfor %}
                </div></div></div></div></div><!-- D3.js ç”¨äºå›¾è°±å¯è§†åŒ– --><script></script><script>let graphData = null; let selectedConcept = null; let svg = null; let simulation = null; document.addEventListener('DOMContentLoaded', function() { initializeGraph(); bindEvents(); }); function initializeGraph() { const container = document.getElementById('graphCanvas'); const width = container.clientWidth; const height = container.clientHeight; svg = d3.select('#graphCanvas') .append('svg') .attr('width', width) .attr('height', height); const zoom = d3.zoom() .scaleExtent([0.1, 3]) .on('zoom', function(event) { svg.select('g').attr('transform', event.transform); }); svg.call(zoom); const g = svg.append('g'); loadGraphData(); } function bindEvents() { document.getElementById('categoryFilter').addEventListener('change', loadGraphData); document.getElementById('layoutSelect').addEventListener('change', loadGraphData); document.getElementById('nodeCount').addEventListener('input', function() { document.getElementById('nodeCountValue').textContent = this.value; }); document.getElementById('nodeCount').addEventListener('change', loadGraphData); document.getElementById('refreshGraph').addEventListener('click', loadGraphData); document.getElementById('searchBtn').addEventListener('click', searchConcept); document.getElementById('searchInput').addEventListener('keypress', function(e) { if (e.key === 'Enter') { searchConcept(); } }); document.getElementById('resetView').addEventListener('click', resetView); document.getElementById('generatePath').addEventListener('click', generateLearningPath); document.getElementById('startLearning').addEventListener('click', startLearningConcept); document.getElementById('viewRelated').addEventListener('click', viewRelatedConcepts); } async function loadGraphData() { const loading = document.getElementById('graphLoading'); loading.style.display = 'block'; try { const category = document.getElementById('categoryFilter').value; const layout = document.getElementById('layoutSelect').value; const maxNodes = document.getElementById('nodeCount').value; const params = new URLSearchParams({ layout: layout, max_nodes: maxNodes }); if (category) { params.append('category', category); } const response = await fetch(`/api/graph/data/?${params}`); const data = await response.json(); if (data.success) { graphData = data.data; renderGraph(); } else { console.error('åŠ è½½å›¾è°±æ•°æ®å¤±è´¥:', data.error); } } catch (error) { console.error('ç½‘ç»œé”™è¯¯:', error); } finally { loading.style.display = 'none'; } } function renderGraph() { if (!graphData || !svg) return; const width = svg.attr('width'); const height = svg.attr('height'); const g = svg.select('g'); g.selectAll('*').remove(); simulation = d3.forceSimulation(graphData.nodes) .force('link', d3.forceLink(graphData.edges).id(d => d.id).distance(d => 80 + d.strength * 50)) .force('charge', d3.forceManyBody().strength(d => -200 - d.importance * 100)) .force('center', d3.forceCenter(width / 2, height / 2)) .force('collision', d3.forceCollide().radius(d => 15 + d.importance * 10)); const defs = g.append('defs'); const categories = [...new Set(graphData.nodes.map(d => d.category))]; categories.forEach(category => { const gradient = defs.append('linearGradient') .attr('id', `gradient-${category}`) .attr('x1', '0%').attr('y1', '0%') .attr('x2', '100%').attr('y2', '100%'); const colors = getCategoryColors(category); gradient.append('stop') .attr('offset', '0%') .attr('stop-color', colors.start); gradient.append('stop') .attr('offset', '100%') .attr('stop-color', colors.end); }); const links = g.append('g') .selectAll('line') .data(graphData.edges) .enter().append('line') .attr('stroke', d => getEdgeColor(d.type)) .attr('stroke-opacity', d => 0.4 + d.strength * 0.4) .attr('stroke-width', d => 1 + d.strength * 3) .attr('stroke-dasharray', d => d.type === 'prerequisite' ? '5,5' : 'none') .style('filter', 'drop-shadow(0 2px 4px rgba(0,0,0,0.2))'); const nodeGroup = g.append('g').selectAll('g') .data(graphData.nodes) .enter().append('g') .style('cursor', 'pointer') .call(d3.drag() .on('start', dragstarted) .on('drag', dragged) .on('end', dragended)) .on('click', function(event, d) { selectConcept(d.id); }) .on('mouseover', function(event, d) { d3.select(this).select('circle') .transition().duration(200) .attr('r', d => 8 + d.importance * 12) .style('filter', 'drop-shadow(0 4px 8px rgba(0,0,0,0.3))'); }) .on('mouseout', function(event, d) { d3.select(this).select('circle') .transition().duration(200) .attr('r', d => 6 + d.importance * 10) .style('filter', 'drop-shadow(0 2px 4px rgba(0,0,0,0.2))'); }); const nodes = nodeGroup.append('circle') .attr('r', d => 6 + d.importance * 10) .attr('fill', d => `url(#gradient-${d.category})`) .attr('stroke', '#ffffff') .attr('stroke-width', 3) .style('filter', 'drop-shadow(0 2px 4px rgba(0,0,0,0.2))'); const labels = nodeGroup.append('text') .text(d => d.name) .attr('font-size', d => `${10 + d.importance * 2}px`) .attr('font-weight', '600') .attr('dx', d => 8 + d.importance * 12) .attr('dy', 4) .attr('fill', '#ffffff') .attr('text-anchor', 'start') .style('pointer-events', 'none') .style('text-shadow', '1px 1px 2px rgba(0,0,0,0.8)') .style('font-family', 'Arial, sans-serif'); simulation.on('tick', function() { links .attr('x1', d => d.source.x) .attr('y1', d => d.source.y) .attr('x2', d => d.target.x) .attr('y2', d => d.target.y); nodeGroup .attr('transform', d => `translate(${d.x},${d.y})`); }); } function getCategoryColor(category) { const colors = { 'algorithm': '#ff6b6b', 'data_structure': 'var(--accent-color)', 'network': '#45b7d1', 'os': '#96ceb4', 'database': '#feca57', 'ai': '#ff9ff3', 'default': '#95a5a6' }; return colors[category] || colors.default; } function dragstarted(event, d) { if (!event.active) simulation.alphaTarget(0.3).restart(); d.fx = d.x; d.fy = d.y; } function dragged(event, d) { d.fx = event.x; d.fy = event.y; } function dragended(event, d) { if (!event.active) simulation.alphaTarget(0); d.fx = null; d.fy = null; } async function selectConcept(conceptId) { try { const response = await fetch(`/api/graph/concept/${conceptId}/`); const data = await response.json(); if (data.success) { selectedConcept = data.data; displayConceptDetails(); } } catch (error) { console.error('è·å–æ¦‚å¿µè¯¦æƒ…å¤±è´¥:', error); } } function displayConceptDetails() { if (!selectedConcept) return; const details = document.getElementById('conceptDetails'); const concept = selectedConcept.concept; document.getElementById('conceptName').textContent = concept.name; const meta = document.getElementById('conceptMeta'); meta.innerHTML = ` <span class="meta-badge category-badge">${concept.category}</span><span class="meta-badge difficulty-badge">${concept.difficulty}</span> `; document.getElementById('conceptDescription').textContent = concept.description; details.classList.add('show'); } function startLearningConcept() { if (!selectedConcept) return; fetch('/api/graph/record-learning/', { method: 'POST', headers: { 'Content-Type': 'application/json', 'X-CSRFToken': getCookie('csrftoken') }, body: JSON.stringify({ concept_id: selectedConcept.concept.id, study_time: 5 }) }).then(response => response.json()) .then(data => { if (data.success) { alert('å¼€å§‹å­¦ä¹ : ' + selectedConcept.concept.name); } }); } function viewRelatedConcepts() { if (!selectedConcept) return; const related = selectedConcept.related_concepts; if (related.length > 0) { let message = 'ç›¸å…³æ¦‚å¿µ:\n'; related.forEach(rel => { message += `â€¢ ${rel.concept.name} (${rel.relation_type})\n`; }); alert(message); } else { alert('æš‚æ— ç›¸å…³æ¦‚å¿µ'); } } function filterByCategory(category) { document.getElementById('categoryFilter').value = category; document.querySelectorAll('.category-item').forEach(item => { item.classList.remove('active'); }); event.target.closest('.category-item').classList.add('active'); loadGraphData(); } function searchConcept() { const searchTerm = document.getElementById('searchInput').value.trim(); if (!searchTerm) { alert('è¯·è¾“å…¥æœç´¢å…³é”®è¯'); return; } if (!graphData || !graphData.nodes) { alert('å›¾è°±æ•°æ®æœªåŠ è½½å®Œæˆï¼Œè¯·ç¨åå†è¯•'); return; } const matchedNodes = graphData.nodes.filter(node => node.name.toLowerCase().includes(searchTerm.toLowerCase()) || node.description.toLowerCase().includes(searchTerm.toLowerCase()) ); if (matchedNodes.length === 0) { alert(`æœªæ‰¾åˆ°åŒ…å«"${searchTerm}"çš„æ¦‚å¿µ`); return; } highlightNodes(matchedNodes); if (matchedNodes.length === 1) { selectConcept(matchedNodes[0].id); } else { alert(`æ‰¾åˆ° ${matchedNodes.length} ä¸ªåŒ¹é…çš„æ¦‚å¿µï¼Œå·²åœ¨å›¾è°±ä¸­é«˜äº®æ˜¾ç¤º`); } } function highlightNodes(nodes) { if (!svg) return; svg.selectAll('circle') .style('stroke', '#ffffff') .style('stroke-width', 3); nodes.forEach(node => { svg.selectAll('circle') .filter(d => d.id === node.id) .style('stroke', '#ff6b6b') .style('stroke-width', 5) .style('filter', 'drop-shadow(0 0 10px #ff6b6b)'); }); } function resetView() { if (!svg || !simulation) return; svg.transition().duration(750).call( d3.zoom().transform, d3.zoomIdentity ); svg.selectAll('circle') .style('stroke', '#ffffff') .style('stroke-width', 3) .style('filter', 'drop-shadow(0 2px 4px rgba(0,0,0,0.2))'); simulation.alpha(0.3).restart(); document.getElementById('searchInput').value = ''; } function generateLearningPath() { if (!graphData || !graphData.nodes) { alert('å›¾è°±æ•°æ®æœªåŠ è½½å®Œæˆï¼Œè¯·ç¨åå†è¯•'); return; } const learningPaths = { 'beginner': { title: 'ğŸ¯ æ–°æ‰‹å…¥é—¨è·¯å¾„', description: 'é€‚åˆç¼–ç¨‹åˆå­¦è€…çš„åŸºç¡€æ¦‚å¿µå­¦ä¹ é¡ºåº', path: ['æ•°ç»„', 'é“¾è¡¨', 'æ ˆ', 'é˜Ÿåˆ—', 'äºŒåˆ†æŸ¥æ‰¾', 'å†’æ³¡æ’åº'] }, 'intermediate': { title: 'ğŸš€ è¿›é˜¶æå‡è·¯å¾„', description: 'æŒæ¡åŸºç¡€åçš„ç®—æ³•å’Œæ•°æ®ç»“æ„è¿›é˜¶', path: ['äºŒå‰æ ‘', 'å“ˆå¸Œè¡¨', 'å¿«é€Ÿæ’åº', 'å½’å¹¶æ’åº', 'æ·±åº¦ä¼˜å…ˆæœç´¢', 'å¹¿åº¦ä¼˜å…ˆæœç´¢'] }, 'advanced': { title: 'ğŸ’ é«˜çº§ä¸“é¢˜è·¯å¾„', description: 'é«˜çº§ç®—æ³•å’Œç³»ç»Ÿè®¾è®¡ç›¸å…³æ¦‚å¿µ', path: ['å›¾', 'åŠ¨æ€è§„åˆ’', 'è´ªå¿ƒç®—æ³•', 'è¿›ç¨‹', 'çº¿ç¨‹', 'å†…å­˜ç®¡ç†'] }, 'network': { title: 'ğŸŒ ç½‘ç»œä¸“é¢˜è·¯å¾„', description: 'è®¡ç®—æœºç½‘ç»œç›¸å…³æ¦‚å¿µçš„å­¦ä¹ é¡ºåº', path: ['IPåè®®', 'TCPåè®®', 'HTTPåè®®'] }, 'database': { title: 'ğŸ—ƒï¸ æ•°æ®åº“è·¯å¾„', description: 'æ•°æ®åº“ç³»ç»Ÿç›¸å…³æ¦‚å¿µå­¦ä¹ ', path: ['å…³ç³»æ•°æ®åº“', 'SQL', 'äº‹åŠ¡'] } }; showLearningPathDialog(learningPaths); } function showLearningPathDialog(paths) { const dialog = document.createElement('div'); dialog.className = 'learning-path-dialog'; dialog.innerHTML = ` <div class="dialog-overlay" onclick="closeLearningPathDialog()"></div><div class="dialog-content"><div class="dialog-header"><h3>ğŸ—ºï¸ é€‰æ‹©å­¦ä¹ è·¯å¾„</h3><button onclick="closeLearningPathDialog()" class="dialog-close">Ã—</button></div><div class="dialog-body"> ${Object.entries(paths).map(([key, path]) => ` <div class="path-option" onclick="selectLearningPath('${key}')"><div class="path-title">${path.title}</div><div class="path-desc">${path.description}</div><div class="path-concepts">${path.path.join(' â†’ ')}</div></div> `).join('')} </div></div> `; document.body.appendChild(dialog); if (!document.getElementById('pathDialogStyles')) { const styles = document.createElement('style'); styles.id = 'pathDialogStyles'; styles.textContent = ` .learning-path-dialog { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1000; } .dialog-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); backdrop-filter: blur(5px); } .dialog-content { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); border-radius: var(--border-radius-lg); padding: 0; max-width: 600px; width: 90%; max-height: 80vh; overflow: hidden; box-shadow: var(--shadow-md); border: 1px solid rgba(255,255,255,0.2); } .dialog-header { padding: 25px 30px; border-bottom: 1px solid rgba(255,255,255,0.1); display: flex; justify-content: space-between; align-items: center; } .dialog-header h3 { margin: 0; color: var(--text-inverse); font-size: 1.5rem; } .dialog-close { background: none; border: none; color: var(--text-inverse); font-size: 1.5rem; cursor: pointer; padding: 5px; border-radius: 50%; width: 35px; height: 35px; display: flex; align-items: center; justify-content: center; } .dialog-close:hover { background: rgba(255,255,255,0.1); } .dialog-body { padding: 20px 30px 30px; max-height: 60vh; overflow-y: auto; } .path-option { padding: 20px; margin-bottom: 15px; background: rgba(255,255,255,0.05); border-radius: 12px; cursor: pointer; transition: all 0.3s ease; border: 1px solid rgba(255,255,255,0.1); } .path-option:hover { background: rgba(102, 126, 234, 0.2); border-color: rgba(102, 126, 234, 0.4); transform: translateY(-2px); } .path-title { font-size: 1.1rem; font-weight: 600; color: var(--text-inverse); margin-bottom: 8px; } .path-desc { font-size: 0.9rem; color: rgba(255,255,255,0.8); margin-bottom: 12px; line-height: 1.4; } .path-concepts { font-size: 0.85rem; color: rgba(255,255,255,0.7); font-family: monospace; background: rgba(0,0,0,0.2); padding: 8px 12px; border-radius: 6px; } `; document.head.appendChild(styles); } } function closeLearningPathDialog() { const dialog = document.querySelector('.learning-path-dialog'); if (dialog) { dialog.remove(); } } function selectLearningPath(pathKey) { const paths = { 'beginner': ['æ•°ç»„', 'é“¾è¡¨', 'æ ˆ', 'é˜Ÿåˆ—', 'äºŒåˆ†æŸ¥æ‰¾', 'å†’æ³¡æ’åº'], 'intermediate': ['äºŒå‰æ ‘', 'å“ˆå¸Œè¡¨', 'å¿«é€Ÿæ’åº', 'å½’å¹¶æ’åº', 'æ·±åº¦ä¼˜å…ˆæœç´¢', 'å¹¿åº¦ä¼˜å…ˆæœç´¢'], 'advanced': ['å›¾', 'åŠ¨æ€è§„åˆ’', 'è´ªå¿ƒç®—æ³•', 'è¿›ç¨‹', 'çº¿ç¨‹', 'å†…å­˜ç®¡ç†'], 'network': ['IPåè®®', 'TCPåè®®', 'HTTPåè®®'], 'database': ['å…³ç³»æ•°æ®åº“', 'SQL', 'äº‹åŠ¡'] }; const selectedPath = paths[pathKey]; if (selectedPath && graphData && graphData.nodes) { highlightLearningPath(selectedPath); closeLearningPathDialog(); alert(`å·²ä¸ºæ‚¨é«˜äº®æ˜¾ç¤º"${pathKey}"å­¦ä¹ è·¯å¾„ï¼\nå»ºè®®æŒ‰ç…§é«˜äº®é¡ºåºå­¦ä¹ è¿™äº›æ¦‚å¿µã€‚`); } } function highlightLearningPath(pathConcepts) { if (!svg) return; svg.selectAll('circle') .style('stroke', '#ffffff') .style('stroke-width', 3) .style('filter', 'drop-shadow(0 2px 4px rgba(0,0,0,0.2))'); pathConcepts.forEach((conceptName, index) => { const node = graphData.nodes.find(n => n.name === conceptName); if (node) { const color = `hsl(${120 + index * 30}, 70%, 50%)`; svg.selectAll('circle') .filter(d => d.id === node.id) .style('stroke', color) .style('stroke-width', 6) .style('filter', `drop-shadow(0 0 15px ${color})`); } }); } function getCookie(name) { let cookieValue = null; if (document.cookie && document.cookie !== '') { const cookies = document.cookie.split(';'); for (let i = 0; i < cookies.length; i++) { const cookie = cookies[i].trim(); if (cookie.substring(0, name.length + 1) === (name + '=')) { cookieValue = decodeURIComponent(cookie.substring(name.length + 1)); break; } } } return cookieValue; } function getCategoryColor(category) { const colors = { 'algorithm': '#ff6b6b', 'data_structure': 'var(--accent-color)', 'network': '#45b7d1', 'os': '#96ceb4', 'database': '#feca57', 'default': '#95a5a6' }; return colors[category] || colors.default; } function getCategoryColors(category) { const colorPairs = { 'algorithm': { start: '#ff6b6b', end: '#ee5a52' }, 'data_structure': { start: 'var(--accent-color)', end: '#44a08d' }, 'network': { start: '#45b7d1', end: '#3498db' }, 'os': { start: '#96ceb4', end: '#74b9a0' }, 'database': { start: '#feca57', end: '#ff9ff3' }, 'default': { start: '#95a5a6', end: '#7f8c8d' } }; return colorPairs[category] || colorPairs.default; } function getEdgeColor(type) { const colors = { 'prerequisite': '#e74c3c', 'related': '#3498db', 'implements': '#2ecc71', 'contains': '#f39c12', 'uses': '#9b59b6', 'default': '#95a5a6' }; return colors[type] || colors.default; }</script>
{% endblock %}
