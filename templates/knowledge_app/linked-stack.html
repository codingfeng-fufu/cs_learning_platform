{% extends 'knowledge_app/base.html' %}

{% block title %}{{ page_title|default:"é“¾å¼æ ˆ" }} - è®¡ç®—æœºç§‘å­¦å­¦ä¹ å¹³å°{% endblock %}

{% block content %}
<div class="page-container fade-in"><!-- é¢åŒ…å±‘å¯¼èˆª --><div class="breadcrumb"><a href="{% url 'knowledge_app:index' %}">é¦–é¡µ</a><span>></span><span>{{ breadcrumb_category|default:"æ•°æ®ç»“æ„" }}</span><span>></span><span>{{ page_title|default:"é“¾å¼æ ˆ" }}</span></div><!-- é¡µé¢å¤´éƒ¨ --><div class="page-header slide-in-left"><h1><span class="page-icon">ğŸ”—</span>
            é“¾å¼æ ˆ (Linked Stack)
        </h1><p>åŸºäºé“¾è¡¨å®ç°çš„åŠ¨æ€åè¿›å…ˆå‡º(LIFO)æ•°æ®ç»“æ„</p></div><!-- ğŸ“‹ çŸ¥è¯†ç‚¹æ¦‚è¿° --><div class="content-card slide-in-right"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ“‹</span>
                çŸ¥è¯†ç‚¹æ¦‚è¿°
            </h2><div class="info-box info-box-info"><span class="info-icon">ğŸ’¡</span><strong>æ ¸å¿ƒæ¦‚å¿µï¼š</strong>é“¾å¼æ ˆä½¿ç”¨é“¾è¡¨å®ç°æ ˆç»“æ„ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒåŒ…å«æ•°æ®å’ŒæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œå°±åƒä¸€ä¸²çç é¡¹é“¾ï¼Œæ¯é¢—çç éƒ½è¿æ¥ç€ä¸‹ä¸€é¢—ã€‚
            </div><div class="unified-grid unified-grid-2"><div class="grid-card"><span class="card-icon">ğŸ”‘</span><h4 class="card-title">å…³é”®æœ¯è¯­</h4><ul style="text-align: left; margin: 10px 0;"><li><strong>èŠ‚ç‚¹(Node)ï¼š</strong>åŒ…å«æ•°æ®åŸŸå’ŒæŒ‡é’ˆåŸŸçš„åŸºæœ¬å•å…ƒ</li><li><strong>æ•°æ®åŸŸ(Data)ï¼š</strong>å­˜å‚¨å®é™…æ•°æ®çš„éƒ¨åˆ†</li><li><strong>æŒ‡é’ˆåŸŸ(Next)ï¼š</strong>æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åœ°å€</li><li><strong>æ ˆé¡¶æŒ‡é’ˆ(Top)ï¼š</strong>æŒ‡å‘æ ˆé¡¶èŠ‚ç‚¹çš„æŒ‡é’ˆ</li><li><strong>åŠ¨æ€åˆ†é…ï¼š</strong>è¿è¡Œæ—¶æ ¹æ®éœ€è¦åˆ†é…å†…å­˜</li></ul></div><div class="grid-card"><span class="card-icon">ğŸ¯</span><h4 class="card-title">å­¦ä¹ ä¿¡æ¯</h4><p><strong>éš¾åº¦ç­‰çº§ï¼š</strong><span style="color: #ffc107;">ğŸŸ¡ è¿›é˜¶çº§</span></p><p><strong>å‰ç½®çŸ¥è¯†ï¼š</strong></p><ul style="text-align: left; margin: 10px 0;"><li>æŒ‡é’ˆå’Œå¼•ç”¨æ¦‚å¿µ</li><li>åŠ¨æ€å†…å­˜åˆ†é…</li><li>é¡ºåºæ ˆçš„åŸºæœ¬æ“ä½œ</li><li>é“¾è¡¨çš„åŸºæœ¬ç»“æ„</li></ul></div></div></div></div><!-- ğŸ” æ¦‚å¿µè¯¦è§£ --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ”</span>
                æ¦‚å¿µè¯¦è§£
            </h2><div class="unified-grid unified-grid-1"><div class="info-box info-box-warning"><span class="info-icon">ğŸ”„</span><strong>ç”Ÿæ´»ç±»æ¯”ï¼š</strong>æƒ³è±¡ä¸€æ¡çç é¡¹é“¾ï¼Œæ¯é¢—çç éƒ½ç”¨çº¿è¿æ¥ç€ä¸‹ä¸€é¢—ã€‚ä½ å¯ä»¥éšæ—¶åœ¨é¡¹é“¾å¤´éƒ¨æ·»åŠ æˆ–ç§»é™¤çç ï¼Œé¡¹é“¾ä¼šè‡ªåŠ¨è°ƒæ•´é•¿åº¦ï¼Œä¸éœ€è¦é¢„å…ˆå‡†å¤‡å›ºå®šå¤§å°çš„ç›’å­ï¼
                </div></div><h3>ğŸ—ï¸ æ ¸å¿ƒç»„æˆéƒ¨åˆ†</h3><div class="unified-grid unified-grid-2"><div class="grid-card"><span class="card-icon">ğŸ§©</span><h4 class="card-title">1. èŠ‚ç‚¹ç»“æ„</h4><p>æ¯ä¸ªèŠ‚ç‚¹åŒ…å«æ•°æ®åŸŸå’ŒæŒ‡é’ˆåŸŸï¼Œæ˜¯é“¾å¼æ ˆçš„åŸºæœ¬æ„å»ºå—ã€‚</p></div><div class="grid-card"><span class="card-icon">ğŸ“</span><h4 class="card-title">2. æ ˆé¡¶æŒ‡é’ˆ</h4><p>æŒ‡å‘é“¾è¡¨å¤´éƒ¨ï¼Œå³æ ˆé¡¶å…ƒç´ ï¼Œæ˜¯å”¯ä¸€çš„è®¿é—®å…¥å£ã€‚</p></div><div class="grid-card"><span class="card-icon">â¬†ï¸</span><h4 class="card-title">3. åŠ¨æ€å…¥æ ˆ</h4><p>åˆ›å»ºæ–°èŠ‚ç‚¹ï¼Œå°†å…¶è¿æ¥åˆ°åŸæ ˆé¡¶ï¼Œæ›´æ–°æ ˆé¡¶æŒ‡é’ˆã€‚</p></div><div class="grid-card"><span class="card-icon">â¬‡ï¸</span><h4 class="card-title">4. æ™ºèƒ½å‡ºæ ˆ</h4><p>ç§»é™¤æ ˆé¡¶èŠ‚ç‚¹ï¼Œæ›´æ–°æŒ‡é’ˆï¼Œé‡Šæ”¾å†…å­˜ç©ºé—´ã€‚</p></div></div><h3>âš–ï¸ ä¸é¡ºåºæ ˆçš„å¯¹æ¯”</h3><div class="unified-grid unified-grid-2"><div class="grid-card" style="border-left: 4px solid #28a745;"><span class="card-icon">âœ…</span><h4 class="card-title">é“¾å¼æ ˆä¼˜åŠ¿</h4><ul style="text-align: left;"><li>æ— å®¹é‡é™åˆ¶ï¼ŒåŠ¨æ€æ‰©å±•</li><li>å†…å­˜åˆ©ç”¨ç‡é«˜ï¼ŒæŒ‰éœ€åˆ†é…</li><li>ä¸ä¼šå‡ºç°æ ˆæº¢å‡ºé—®é¢˜</li><li>é€‚åˆå…ƒç´ æ•°é‡å˜åŒ–å¤§çš„åœºæ™¯</li></ul></div><div class="grid-card" style="border-left: 4px solid #dc3545;"><span class="card-icon">âŒ</span><h4 class="card-title">é“¾å¼æ ˆåŠ£åŠ¿</h4><ul style="text-align: left;"><li>éœ€è¦é¢å¤–çš„æŒ‡é’ˆç©ºé—´å¼€é”€</li><li>å†…å­˜è®¿é—®ä¸å¦‚æ•°ç»„è¿ç»­</li><li>å®ç°ç›¸å¯¹å¤æ‚</li><li>é¢‘ç¹åˆ†é…é‡Šæ”¾å½±å“æ€§èƒ½</li></ul></div></div><div class="info-box info-box-warning"><span class="info-icon">âš ï¸</span><strong>æ˜“æ··æ·†ç‚¹ï¼š</strong>åˆå­¦è€…å®¹æ˜“æ··æ·†æ ˆé¡¶æŒ‡é’ˆå’ŒèŠ‚ç‚¹çš„nextæŒ‡é’ˆã€‚è®°ä½ï¼šæ ˆé¡¶æŒ‡é’ˆæŒ‡å‘æ•´ä¸ªæ ˆçš„å…¥å£ï¼Œè€ŒnextæŒ‡é’ˆè¿æ¥ç›¸é‚»èŠ‚ç‚¹ã€‚
            </div></div></div><!-- ğŸ“Š å¯è§†åŒ–å±•ç¤º --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ“Š</span>
                å¯è§†åŒ–å±•ç¤º
            </h2><h3>ğŸ—ï¸ é™æ€ç»“æ„å›¾</h3><div style="background: #f8f9fa; padding: 20px; border-radius: 8px; text-align: center; margin: 20px 0;"><div style="font-family: monospace; font-size: 14px;"><div style="margin-bottom: 15px;"><strong>é“¾å¼æ ˆç»“æ„ç¤ºæ„å›¾</strong></div><div style="display: flex; justify-content: center; align-items: center; gap: 10px; margin: 20px 0;"><div style="background: #dc3545; color: white; padding: 8px 12px; border-radius: 5px;">top â†’</div><div style="border: 2px solid #007bff; padding: 8px; border-radius: 5px; background: #fff;"><div style="display: flex; gap: 5px;"><div style="background: #ffc107; padding: 4px 8px; border-radius: 3px;">30</div><div style="background: #28a745; padding: 4px 8px; border-radius: 3px; color: white;">â†’</div></div></div><div style="border: 2px solid #007bff; padding: 8px; border-radius: 5px; background: #fff;"><div style="display: flex; gap: 5px;"><div style="background: #ffc107; padding: 4px 8px; border-radius: 3px;">20</div><div style="background: #28a745; padding: 4px 8px; border-radius: 3px; color: white;">â†’</div></div></div><div style="border: 2px solid #007bff; padding: 8px; border-radius: 5px; background: #fff;"><div style="display: flex; gap: 5px;"><div style="background: #ffc107; padding: 4px 8px; border-radius: 3px;">10</div><div style="background: #6c757d; padding: 4px 8px; border-radius: 3px; color: white;">âˆ…</div></div></div></div><div style="font-size: 12px; color: #666;"><div>æ ˆé¡¶ â† â†’ â† â†’ æ ˆåº•</div><div style="margin-top: 5px;"><span style="background: #ffc107; padding: 2px 6px; border-radius: 3px;">æ•°æ®åŸŸ</span><span style="margin-left: 10px; background: #28a745; color: white; padding: 2px 6px; border-radius: 3px;">æŒ‡é’ˆåŸŸ</span></div></div></div></div><h3>ğŸ¬ åŠ¨æ€æ“ä½œæ¼”ç¤º</h3><div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 25px; border-radius: 15px; text-align: center; margin: 20px 0; box-shadow: 0 10px 30px rgba(0,0,0,0.3);"><canvas id="linkedStackCanvas" width="700" height="400" style="border: 3px solid #fff; border-radius: 12px; background: linear-gradient(to bottom, #f8f9ff 0%, #e6f3ff 100%); box-shadow: inset 0 2px 10px rgba(0,0,0,0.1);"></canvas><div style="margin-top: 20px;"><button id="pushBtn" onclick="pushNode()" class="animate-btn push-btn">ğŸ”— å…¥æ ˆ Push</button><button id="popBtn" onclick="popNode()" class="animate-btn pop-btn">âœ‚ï¸ å‡ºæ ˆ Pop</button><button id="resetBtn" onclick="resetStack()" class="animate-btn reset-btn">ğŸ”„ é‡ç½®</button></div><div id="stackStatus" style="margin-top: 15px; font-weight: bold; color: #fff; background: rgba(255,255,255,0.2); padding: 8px 16px; border-radius: 20px; display: inline-block;">
                    æ ˆé¡¶æŒ‡é’ˆ: top = null | æ ˆå¤§å°: 0 | çŠ¶æ€: ç©ºæ ˆ
                </div></div></div></div><!-- ğŸŒŸ å®é™…åº”ç”¨ --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸŒŸ</span>
                å®é™…åº”ç”¨
            </h2><div class="unified-grid unified-grid-3"><div class="grid-card"><span class="card-icon">ğŸ”™</span><h4 class="card-title">1. é€’å½’å‡½æ•°è°ƒç”¨</h4><p>ç¨‹åºè¿è¡Œæ—¶çš„å‡½æ•°è°ƒç”¨æ ˆï¼Œæ¯æ¬¡é€’å½’è°ƒç”¨éƒ½ä¼šåˆ›å»ºæ–°çš„æ ˆå¸§ï¼Œå‡½æ•°è¿”å›æ—¶è‡ªåŠ¨é”€æ¯ã€‚</p></div><div class="grid-card"><span class="card-icon">ğŸ§ </span><h4 class="card-title">2. å†…å­˜ç®¡ç†</h4><p>ç¼–ç¨‹è¯­è¨€çš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼ŒåŠ¨æ€è·Ÿè¸ªå¯¹è±¡çš„å¼•ç”¨å…³ç³»ï¼Œè‡ªåŠ¨æ¸…ç†æ— ç”¨å¯¹è±¡ã€‚</p></div><div class="grid-card"><span class="card-icon">ğŸ”„</span><h4 class="card-title">3. è¡¨è¾¾å¼è§£æ</h4><p>ç¼–è¯‘å™¨è§£æå¤æ‚è¡¨è¾¾å¼æ—¶ï¼Œä½¿ç”¨é“¾å¼æ ˆå¤„ç†åµŒå¥—çš„æ‹¬å·å’Œè¿ç®—ç¬¦ä¼˜å…ˆçº§ã€‚</p></div></div><h3>ğŸ’» å¤šè¯­è¨€ä»£ç ç¤ºä¾‹</h3><!-- è¯­è¨€é€‰æ‹©å™¨ --><div style="text-align: center; margin: 20px 0;"><button onclick="showCode('python')" id="pythonBtn" class="code-lang-btn active">ğŸ Python</button><button onclick="showCode('java')" id="javaBtn" class="code-lang-btn">â˜• Java</button><button onclick="showCode('cpp')" id="cppBtn" class="code-lang-btn">âš¡ C++</button></div><!-- Python ä»£ç  --><div id="pythonCode" class="code-container"><div class="code-header"><span>ğŸ Python å®ç°</span><button onclick="copyCode('python')" class="copy-btn">ğŸ“‹ å¤åˆ¶ä»£ç </button></div><pre id="pythonCodeBlock"><code>class Node:
    """é“¾è¡¨èŠ‚ç‚¹ç±»"""
    def __init__(self, data):
        self.data = data      # æ•°æ®åŸŸ
        self.next = None      # æŒ‡é’ˆåŸŸ

class LinkedStack:
    """é“¾å¼æ ˆç±»"""
    def __init__(self):
        self.top = None       # æ ˆé¡¶æŒ‡é’ˆ
        self.size = 0         # æ ˆå¤§å°

    def push(self, item):
        """å…¥æ ˆæ“ä½œ"""
        new_node = Node(item)  # åˆ›å»ºæ–°èŠ‚ç‚¹
        new_node.next = self.top  # æ–°èŠ‚ç‚¹æŒ‡å‘åŸæ ˆé¡¶
        self.top = new_node    # æ›´æ–°æ ˆé¡¶æŒ‡é’ˆ
        self.size += 1
        print(f"å…ƒç´  {item} å…¥æ ˆæˆåŠŸ")

    def pop(self):
        """å‡ºæ ˆæ“ä½œ"""
        if self.is_empty():
            print("æ ˆä¸ºç©ºï¼Œæ— æ³•å‡ºæ ˆ!")
            return None

        data = self.top.data   # ä¿å­˜æ ˆé¡¶æ•°æ®
        self.top = self.top.next  # æ ˆé¡¶æŒ‡é’ˆåç§»
        self.size -= 1
        print(f"å…ƒç´  {data} å‡ºæ ˆæˆåŠŸ")
        return data

    def peek(self):
        """æŸ¥çœ‹æ ˆé¡¶å…ƒç´ """
        if self.is_empty():
            return None
        return self.top.data

    def is_empty(self):
        """åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º"""
        return self.top is None

    def get_size(self):
        """è·å–æ ˆçš„å¤§å°"""
        return self.size

    def display(self):
        """æ˜¾ç¤ºæ ˆå†…å®¹"""
        if self.is_empty():
            print("æ ˆä¸ºç©º")
            return

        current = self.top
        elements = []
        while current:
            elements.append(str(current.data))
            current = current.next
        print("æ ˆå†…å®¹(æ ˆé¡¶â†’æ ˆåº•):", " -> ".join(elements))

# ä½¿ç”¨ç¤ºä¾‹
stack = LinkedStack()
stack.push(10)  # å…¥æ ˆ: [10]
stack.push(20)  # å…¥æ ˆ: [20, 10]
stack.push(30)  # å…¥æ ˆ: [30, 20, 10]
print("æ ˆé¡¶å…ƒç´ :", stack.peek())    # è¾“å‡º: 30
stack.display()  # æ˜¾ç¤ºæ ˆå†…å®¹
stack.pop()      # å‡ºæ ˆ: [20, 10]
print("æ ˆå¤§å°:", stack.get_size())   # è¾“å‡º: 2</code></pre></div><!-- Java ä»£ç  --><div id="javaCode" class="code-container" style="display: none;"><div class="code-header"><span>â˜• Java å®ç°</span><button onclick="copyCode('java')" class="copy-btn">ğŸ“‹ å¤åˆ¶ä»£ç </button></div><pre id="javaCodeBlock"><code>// èŠ‚ç‚¹ç±»
class Node {
    int data;        // æ•°æ®åŸŸ
    Node next;       // æŒ‡é’ˆåŸŸ

    public Node(int data) {
        this.data = data;
        this.next = null;
    }
}

// é“¾å¼æ ˆç±»
public class LinkedStack {
    private Node top;    // æ ˆé¡¶æŒ‡é’ˆ
    private int size;    // æ ˆå¤§å°

    public LinkedStack() {
        this.top = null;
        this.size = 0;
    }

    // å…¥æ ˆæ“ä½œ
    public void push(int item) {
        Node newNode = new Node(item);  // åˆ›å»ºæ–°èŠ‚ç‚¹
        newNode.next = top;             // æ–°èŠ‚ç‚¹æŒ‡å‘åŸæ ˆé¡¶
        top = newNode;                  // æ›´æ–°æ ˆé¡¶æŒ‡é’ˆ
        size++;
        System.out.println("å…ƒç´  " + item + " å…¥æ ˆæˆåŠŸ");
    }

    // å‡ºæ ˆæ“ä½œ
    public Integer pop() {
        if (isEmpty()) {
            System.out.println("æ ˆä¸ºç©ºï¼Œæ— æ³•å‡ºæ ˆ!");
            return null;
        }

        int data = top.data;    // ä¿å­˜æ ˆé¡¶æ•°æ®
        top = top.next;         // æ ˆé¡¶æŒ‡é’ˆåç§»
        size--;
        System.out.println("å…ƒç´  " + data + " å‡ºæ ˆæˆåŠŸ");
        return data;
    }

    // æŸ¥çœ‹æ ˆé¡¶å…ƒç´ 
    public Integer peek() {
        if (isEmpty()) {
            return null;
        }
        return top.data;
    }

    // åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º
    public boolean isEmpty() {
        return top == null;
    }

    // è·å–æ ˆçš„å¤§å°
    public int size() {
        return size;
    }

    // æ˜¾ç¤ºæ ˆå†…å®¹
    public void display() {
        if (isEmpty()) {
            System.out.println("æ ˆä¸ºç©º");
            return;
        }

        System.out.print("æ ˆå†…å®¹(æ ˆé¡¶â†’æ ˆåº•): ");
        Node current = top;
        while (current != null) {
            System.out.print(current.data);
            if (current.next != null) {
                System.out.print(" -> ");
            }
            current = current.next;
        }
        System.out.println();
    }

    // ä½¿ç”¨ç¤ºä¾‹
    public static void main(String[] args) {
        LinkedStack stack = new LinkedStack();
        stack.push(10);  // å…¥æ ˆ: [10]
        stack.push(20);  // å…¥æ ˆ: [20, 10]
        stack.push(30);  // å…¥æ ˆ: [30, 20, 10]
        System.out.println("æ ˆé¡¶å…ƒç´ : " + stack.peek());  // è¾“å‡º: 30
        stack.display(); // æ˜¾ç¤ºæ ˆå†…å®¹
        stack.pop();     // å‡ºæ ˆ: [20, 10]
        System.out.println("æ ˆå¤§å°: " + stack.size());    // è¾“å‡º: 2
    }
}</code></pre></div><!-- C++ ä»£ç  --><div id="cppCode" class="code-container" style="display: none;"><div class="code-header"><span>âš¡ C++ å®ç°</span><button onclick="copyCode('cpp')" class="copy-btn">ğŸ“‹ å¤åˆ¶ä»£ç </button></div><pre id="cppCodeBlock"><code>#include &lt;iostream&gt;
using namespace std;

// èŠ‚ç‚¹ç»“æ„ä½“
struct Node {
    int data;        // æ•°æ®åŸŸ
    Node* next;      // æŒ‡é’ˆåŸŸ

    Node(int value) : data(value), next(nullptr) {}
};

// é“¾å¼æ ˆç±»
class LinkedStack {
private:
    Node* top;       // æ ˆé¡¶æŒ‡é’ˆ
    int stackSize;   // æ ˆå¤§å°

public:
    LinkedStack() : top(nullptr), stackSize(0) {}

    // ææ„å‡½æ•°ï¼Œé‡Šæ”¾æ‰€æœ‰èŠ‚ç‚¹å†…å­˜
    ~LinkedStack() {
        while (!isEmpty()) {
            pop();
        }
    }

    // å…¥æ ˆæ“ä½œ
    void push(int item) {
        Node* newNode = new Node(item);  // åˆ›å»ºæ–°èŠ‚ç‚¹
        newNode-&gt;next = top;             // æ–°èŠ‚ç‚¹æŒ‡å‘åŸæ ˆé¡¶
        top = newNode;                   // æ›´æ–°æ ˆé¡¶æŒ‡é’ˆ
        stackSize++;
        cout &lt;&lt; "å…ƒç´  " &lt;&lt; item &lt;&lt; " å…¥æ ˆæˆåŠŸ" &lt;&lt; endl;
    }

    // å‡ºæ ˆæ“ä½œ
    bool pop() {
        if (isEmpty()) {
            cout &lt;&lt; "æ ˆä¸ºç©ºï¼Œæ— æ³•å‡ºæ ˆ!" &lt;&lt; endl;
            return false;
        }

        Node* temp = top;      // ä¸´æ—¶ä¿å­˜æ ˆé¡¶èŠ‚ç‚¹
        int data = top-&gt;data;  // ä¿å­˜æ ˆé¡¶æ•°æ®
        top = top-&gt;next;       // æ ˆé¡¶æŒ‡é’ˆåç§»
        delete temp;           // é‡Šæ”¾èŠ‚ç‚¹å†…å­˜
        stackSize--;
        cout &lt;&lt; "å…ƒç´  " &lt;&lt; data &lt;&lt; " å‡ºæ ˆæˆåŠŸ" &lt;&lt; endl;
        return true;
    }

    // æŸ¥çœ‹æ ˆé¡¶å…ƒç´ 
    bool peek(int&amp; result) {
        if (isEmpty()) {
            return false;
        }
        result = top-&gt;data;
        return true;
    }

    // åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º
    bool isEmpty() {
        return top == nullptr;
    }

    // è·å–æ ˆçš„å¤§å°
    int size() {
        return stackSize;
    }

    // æ˜¾ç¤ºæ ˆå†…å®¹
    void display() {
        if (isEmpty()) {
            cout &lt;&lt; "æ ˆä¸ºç©º" &lt;&lt; endl;
            return;
        }

        cout &lt;&lt; "æ ˆå†…å®¹(æ ˆé¡¶â†’æ ˆåº•): ";
        Node* current = top;
        while (current != nullptr) {
            cout &lt;&lt; current-&gt;data;
            if (current-&gt;next != nullptr) {
                cout &lt;&lt; " -&gt; ";
            }
            current = current-&gt;next;
        }
        cout &lt;&lt; endl;
    }
};

// ä½¿ç”¨ç¤ºä¾‹
int main() {
    LinkedStack stack;
    stack.push(10);  // å…¥æ ˆ: [10]
    stack.push(20);  // å…¥æ ˆ: [20, 10]
    stack.push(30);  // å…¥æ ˆ: [30, 20, 10]

    int topElement;
    if (stack.peek(topElement)) {
        cout &lt;&lt; "æ ˆé¡¶å…ƒç´ : " &lt;&lt; topElement &lt;&lt; endl;  // è¾“å‡º: 30
    }

    stack.display(); // æ˜¾ç¤ºæ ˆå†…å®¹
    stack.pop();     // å‡ºæ ˆ: [20, 10]
    cout &lt;&lt; "æ ˆå¤§å°: " &lt;&lt; stack.size() &lt;&lt; endl;    // è¾“å‡º: 2

    return 0;
}</code></pre></div></div></div><!-- âœ… å­¦ä¹ æ£€éªŒ --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">âœ…</span>
                å­¦ä¹ æ£€éªŒ
            </h2><h3>ğŸ¤” ç†è§£æ£€éªŒé—®é¢˜</h3><div class="qa-container"><div class="qa-item"><div class="question" onclick="toggleAnswer('answer1')"><span class="question-icon">â“</span><strong>é—®é¢˜1ï¼š</strong>é“¾å¼æ ˆç›¸æ¯”é¡ºåºæ ˆçš„æœ€å¤§ä¼˜åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿè¯·ä¸¾ä¾‹è¯´æ˜ã€‚
                        <span class="toggle-icon">â–¼</span></div><div id="answer1" class="answer"><span class="answer-icon">ğŸ’¡</span><strong>ç­”æ¡ˆï¼š</strong>é“¾å¼æ ˆçš„æœ€å¤§ä¼˜åŠ¿æ˜¯<strong>åŠ¨æ€å†…å­˜åˆ†é…ï¼Œæ— å®¹é‡é™åˆ¶</strong>ã€‚
                        <br><br><strong>ä¸¾ä¾‹è¯´æ˜ï¼š</strong><ul><li><strong>æ–‡æœ¬ç¼–è¾‘å™¨çš„æ’¤é”€åŠŸèƒ½ï¼š</strong>ç”¨æˆ·å¯èƒ½è¿›è¡Œæˆåƒä¸Šä¸‡æ¬¡æ“ä½œï¼Œé¡ºåºæ ˆéœ€è¦é¢„å…ˆåˆ†é…å·¨å¤§æ•°ç»„ï¼Œè€Œé“¾å¼æ ˆå¯ä»¥æŒ‰éœ€åˆ†é…</li><li><strong>é€’å½’ç®—æ³•ï¼š</strong>é€’å½’æ·±åº¦æ— æ³•é¢„çŸ¥ï¼Œé“¾å¼æ ˆå¯ä»¥æ ¹æ®å®é™…éœ€è¦åŠ¨æ€æ‰©å±•</li><li><strong>Webæµè§ˆå™¨å†å²è®°å½•ï¼š</strong>ç”¨æˆ·æµè§ˆçš„é¡µé¢æ•°é‡ä¸å›ºå®šï¼Œé“¾å¼æ ˆæ›´åŠ çµæ´»</li></ul><strong>å†…å­˜å¯¹æ¯”ï¼š</strong>é¡ºåºæ ˆæµªè´¹ç©ºé—´ï¼ˆé¢„åˆ†é…ï¼‰ï¼Œé“¾å¼æ ˆæŒ‰éœ€ä½¿ç”¨ï¼ˆå®æ—¶åˆ†é…ï¼‰ã€‚
                    </div></div><div class="qa-item"><div class="question" onclick="toggleAnswer('answer2')"><span class="question-icon">â“</span><strong>é—®é¢˜2ï¼š</strong>ä¸ºä»€ä¹ˆé“¾å¼æ ˆçš„å…¥æ ˆæ“ä½œæ€»æ˜¯åœ¨é“¾è¡¨å¤´éƒ¨è¿›è¡Œï¼Œè€Œä¸æ˜¯å°¾éƒ¨ï¼Ÿ
                        <span class="toggle-icon">â–¼</span></div><div id="answer2" class="answer"><span class="answer-icon">ğŸ’¡</span><strong>ç­”æ¡ˆï¼š</strong>åœ¨é“¾è¡¨å¤´éƒ¨æ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1)ï¼Œåœ¨å°¾éƒ¨æ“ä½œéœ€è¦O(n)ã€‚
                        <br><br><strong>è¯¦ç»†åˆ†æï¼š</strong><ul><li><strong>å¤´éƒ¨æ’å…¥ï¼š</strong>ç›´æ¥ä¿®æ”¹topæŒ‡é’ˆï¼Œæ–°èŠ‚ç‚¹æŒ‡å‘åŸå¤´èŠ‚ç‚¹ï¼Œæ“ä½œç®€å•å¿«é€Ÿ</li><li><strong>å°¾éƒ¨æ’å…¥ï¼š</strong>éœ€è¦éå†æ•´ä¸ªé“¾è¡¨æ‰¾åˆ°å°¾èŠ‚ç‚¹ï¼Œæ—¶é—´å¤æ‚åº¦O(n)</li><li><strong>æ ˆçš„ç‰¹æ€§ï¼š</strong>åªéœ€è¦è®¿é—®æ ˆé¡¶ï¼Œä¸éœ€è¦è®¿é—®ä¸­é—´æˆ–åº•éƒ¨å…ƒç´ </li></ul><div style="font-family: monospace; background: #f8f9fa; padding: 10px; border-radius: 5px; margin-top: 10px;">
                            å¤´éƒ¨æ“ä½œ: top â†’ [æ–°èŠ‚ç‚¹] â†’ [åŸèŠ‚ç‚¹1] â†’ [åŸèŠ‚ç‚¹2] â†’ null<br>
                            æ—¶é—´: O(1) âœ…<br><br>
                            å°¾éƒ¨æ“ä½œ: top â†’ [èŠ‚ç‚¹1] â†’ [èŠ‚ç‚¹2] â†’ ... â†’ [æ–°èŠ‚ç‚¹] â†’ null<br>
                            æ—¶é—´: O(n) âŒ
                        </div></div></div><div class="qa-item"><div class="question" onclick="toggleAnswer('answer3')"><span class="question-icon">â“</span><strong>é—®é¢˜3ï¼š</strong>é“¾å¼æ ˆçš„ç©ºé—´å¼€é”€åŒ…æ‹¬å“ªäº›éƒ¨åˆ†ï¼Ÿå¦‚ä½•è®¡ç®—ï¼Ÿ
                        <span class="toggle-icon">â–¼</span></div><div id="answer3" class="answer"><span class="answer-icon">ğŸ’¡</span><strong>ç­”æ¡ˆï¼š</strong>é“¾å¼æ ˆçš„ç©ºé—´å¼€é”€åŒ…æ‹¬æ•°æ®å­˜å‚¨å’ŒæŒ‡é’ˆå­˜å‚¨ä¸¤éƒ¨åˆ†ã€‚
                        <br><br><strong>ç©ºé—´ç»„æˆï¼š</strong><ul><li><strong>æ•°æ®åŸŸï¼š</strong>å­˜å‚¨å®é™…æ•°æ®ï¼Œå¤§å°å–å†³äºæ•°æ®ç±»å‹</li><li><strong>æŒ‡é’ˆåŸŸï¼š</strong>å­˜å‚¨ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åœ°å€ï¼Œé€šå¸¸ä¸º4å­—èŠ‚(32ä½)æˆ–8å­—èŠ‚(64ä½)</li><li><strong>æ ˆé¡¶æŒ‡é’ˆï¼š</strong>é¢å¤–çš„æŒ‡é’ˆå˜é‡ï¼ŒæŒ‡å‘æ ˆé¡¶èŠ‚ç‚¹</li></ul><strong>è®¡ç®—ç¤ºä¾‹ï¼š</strong><div style="font-family: monospace; background: #f8f9fa; padding: 10px; border-radius: 5px; margin-top: 10px;">
                            å‡è®¾å­˜å‚¨nä¸ªintç±»å‹æ•°æ®(4å­—èŠ‚)ï¼Œåœ¨64ä½ç³»ç»Ÿä¸Šï¼š<br>
                            - æ•°æ®åŸŸæ€»å¼€é”€: n Ã— 4å­—èŠ‚<br>
                            - æŒ‡é’ˆåŸŸæ€»å¼€é”€: n Ã— 8å­—èŠ‚<br>
                            - æ ˆé¡¶æŒ‡é’ˆ: 8å­—èŠ‚<br>
                            - æ€»å¼€é”€: n Ã— 12 + 8å­—èŠ‚<br><br>
                            ç›¸æ¯”é¡ºåºæ ˆ(n Ã— 4å­—èŠ‚)ï¼Œå¼€é”€å¢åŠ 200%
                        </div></div></div><div class="qa-item"><div class="question" onclick="toggleAnswer('answer4')"><span class="question-icon">â“</span><strong>é—®é¢˜4ï¼š</strong>ä»€ä¹ˆæƒ…å†µä¸‹åº”è¯¥é€‰æ‹©é“¾å¼æ ˆè€Œä¸æ˜¯é¡ºåºæ ˆï¼Ÿ
                        <span class="toggle-icon">â–¼</span></div><div id="answer4" class="answer"><span class="answer-icon">ğŸ’¡</span><strong>ç­”æ¡ˆï¼š</strong>ä»¥ä¸‹æƒ…å†µä¼˜å…ˆé€‰æ‹©é“¾å¼æ ˆï¼š
                        <br><br><div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;"><div><strong style="color: #28a745;">âœ… é€‰æ‹©é“¾å¼æ ˆçš„åœºæ™¯ï¼š</strong><ul><li>å…ƒç´ æ•°é‡æ— æ³•é¢„ä¼°æˆ–å˜åŒ–å¾ˆå¤§</li><li>éœ€è¦å¤„ç†å¤§é‡æ•°æ®ï¼Œå†…å­˜ç´§å¼ </li><li>é€’å½’æ·±åº¦ä¸ç¡®å®šçš„ç®—æ³•</li><li>é•¿æ—¶é—´è¿è¡Œçš„ç¨‹åºï¼Œéœ€è¦åŠ¨æ€ç®¡ç†</li><li>å¯¹å†…å­˜åˆ©ç”¨ç‡è¦æ±‚é«˜çš„åµŒå…¥å¼ç³»ç»Ÿ</li></ul></div><div><strong style="color: #dc3545;">âŒ ä¸å»ºè®®é“¾å¼æ ˆçš„åœºæ™¯ï¼š</strong><ul><li>é¢‘ç¹çš„å…¥æ ˆå‡ºæ ˆæ“ä½œï¼ˆæ€§èƒ½æ•æ„Ÿï¼‰</li><li>æ•°æ®é‡å°ä¸”å›ºå®šçš„ç®€å•åº”ç”¨</li><li>éœ€è¦éšæœºè®¿é—®æ ˆä¸­å…ƒç´ </li><li>å¯¹cacheæ€§èƒ½è¦æ±‚é«˜çš„ç³»ç»Ÿ</li><li>å†…å­˜ç®¡ç†å¤æ‚åº¦éœ€è¦æœ€å°åŒ–</li></ul></div></div><br><strong>ç»éªŒæ³•åˆ™ï¼š</strong>æ•°æ®é‡ä¸ç¡®å®šé€‰é“¾å¼æ ˆï¼Œæ•°æ®é‡ç¡®å®šä¸”æ€§èƒ½ä¼˜å…ˆé€‰é¡ºåºæ ˆã€‚
                    </div></div></div><h3>ğŸ“š å­¦ä¹ èµ„æºæ¨è</h3><div class="unified-grid unified-grid-2"><div class="info-box info-box-success"><span class="info-icon">ğŸ› ï¸</span><strong>å¯è§†åŒ–å·¥å…·ï¼š</strong>ä½¿ç”¨VisuAlgoçš„é“¾è¡¨å’Œæ ˆåŠ¨ç”»ï¼Œè§‚å¯ŸæŒ‡é’ˆå˜åŒ–å’Œå†…å­˜åˆ†é…è¿‡ç¨‹ã€‚
                </div><div class="info-box info-box-warning"><span class="info-icon">â¡ï¸</span><strong>ä¸‹ä¸€æ­¥å­¦ä¹ ï¼š</strong>æŒæ¡é“¾å¼æ ˆåï¼Œå»ºè®®å­¦ä¹ åŒç«¯é˜Ÿåˆ—ã€é“¾å¼é˜Ÿåˆ—ï¼Œç„¶åè¿›å…¥æ ‘ç»“æ„çš„å­¦ä¹ ã€‚
                </div></div></div></div><!-- å¯¼èˆªæŒ‰é’® --><div style="text-align: center; margin-top: 40px;"><a href="{% url 'knowledge_app:index' %}" class="unified-btn unified-btn-primary"><span>ğŸ </span>
            è¿”å›é¦–é¡µ
        </a><a href="{% url 'knowledge_app:cs_universe' %}" class="unified-btn unified-btn-secondary"><span>ğŸŒŒ</span>
            æ¢ç´¢CSå®‡å®™
        </a></div></div><style>.code-container {background:#f8f9fa;border-radius:12px;margin:20px 0;border:1px solid #dee2e6;overflow:hidden;box-shadow:0 4px 15px rgba(0,0,0,0.1);transition:transform 0.3s ease}.code-container:hover {transform:translateY(-2px)}.code-header {background:linear-gradient(135deg, #343a40 0%, #495057 100%);color:white;padding:15px 25px;display:flex;justify-content:space-between;align-items:center;border-bottom:3px solid #007bff}.code-lang-btn {background:linear-gradient(135deg, #6c757d 0%, #495057 100%);color:white;border:none;padding:10px 20px;border-radius:25px;margin:0 8px;cursor:pointer;transition:all 0.3s ease;font-weight:500;box-shadow:0 3px 10px rgba(0,0,0,0.2)}.code-lang-btn.active {background:linear-gradient(135deg, #007bff 0%, #0056b3 100%);transform:translateY(-2px);box-shadow:0 5px 15px rgba(0,123,255,0.4)}.code-lang-btn:hover {background:linear-gradient(135deg, #007bff 0%, #0056b3 100%);transform:translateY(-2px);box-shadow:0 5px 15px rgba(0,123,255,0.4)}.copy-btn {background:linear-gradient(135deg, #28a745 0%, #20c997 100%);color:white;border:none;padding:8px 16px;border-radius:20px;cursor:pointer;font-size:12px;font-weight:500;transition:all 0.3s ease;box-shadow:0 2px 8px rgba(40,167,69,0.3)}.copy-btn:hover {transform:translateY(-1px);box-shadow:0 4px 12px rgba(40,167,69,0.4)}.copy-btn.copied {background:linear-gradient(135deg, #17a2b8 0%, #138496 100%);animation:pulse 0.6s ease-in-out}@keyframes pulse {0% {transform:scale(1)}50% {transform:scale(1.05)}100% {transform:scale(1)}}.code-container pre {margin:0;padding:25px;font-family:'Courier New', 'Monaco', 'Menlo', monospace;font-size:14px;line-height:1.6;overflow-x:auto;background:linear-gradient(to bottom, #f8f9fa 0%, #ffffff 100%)}.animate-btn {background:linear-gradient(135deg, #28a745 0%, #20c997 100%);color:white;border:none;padding:12px 25px;border-radius:25px;margin:0 8px;cursor:pointer;font-size:14px;font-weight:600;transition:all 0.3s ease;box-shadow:0 4px 15px rgba(0,0,0,0.2);position:relative;overflow:hidden}.animate-btn:hover {transform:translateY(-3px);box-shadow:0 8px 25px rgba(0,0,0,0.3)}.animate-btn:active {transform:translateY(-1px)}.push-btn {background:linear-gradient(135deg, #28a745 0%, #20c997 100%)}.push-btn:hover {box-shadow:0 8px 25px rgba(40,167,69,0.4)}.pop-btn {background:linear-gradient(135deg, #dc3545 0%, #e83e8c 100%)}.pop-btn:hover {box-shadow:0 8px 25px rgba(220,53,69,0.4)}.reset-btn {background:linear-gradient(135deg, #6c757d 0%, #495057 100%)}.reset-btn:hover {box-shadow:0 8px 25px rgba(108,117,125,0.4)}.animate-btn:disabled {opacity:0.6;cursor:not-allowed;transform:none !important}.qa-container {margin:20px 0}.qa-item {border:1px solid #dee2e6;border-radius:12px;margin-bottom:15px;overflow:hidden;box-shadow:0 3px 12px rgba(0,0,0,0.08);transition:all 0.3s ease}.qa-item:hover {box-shadow:0 5px 20px rgba(0,0,0,0.12);transform:translateY(-2px)}.question {background:linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);padding:20px 25px;cursor:pointer;display:flex;align-items:center;transition:all 0.3s ease;user-select:none;border-bottom:1px solid transparent}.question:hover {background:linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%)}.question.active {background:linear-gradient(135deg, #007bff 0%, #0056b3 100%);color:white;border-bottom:1px solid #004085}.question-icon {margin-right:15px;font-size:18px;transition:transform 0.3s ease}.question.active .question-icon {transform:scale(1.2)}.toggle-icon {margin-left:auto;transition:transform 0.4s ease;font-size:14px;opacity:0.7}.question.active .toggle-icon {transform:rotate(180deg);opacity:1}.answer {padding:25px;background:linear-gradient(to bottom, #ffffff 0%, #f8f9fa 100%);border-top:1px solid #dee2e6;display:none;animation:slideDown 0.4s ease-out}.answer.show {display:block}.answer-icon {color:#28a745;margin-right:10px;font-size:16px}@keyframes slideDown {from {opacity:0;transform:translateY(-20px);max-height:0}to {opacity:1;transform:translateY(0);max-height:500px}}@media (max-width:768px) {.animate-btn {padding:10px 15px;font-size:12px;margin:5px}.code-lang-btn {padding:8px 12px;font-size:12px}#linkedStackCanvas {width:100%;max-width:600px;height:auto}}</style><script>let canvas, ctx; let nodes = []; let animating = false; let elementCounter = 10; let animationFrame = null; let particles = []; class StackNode { constructor(data, x, y) { this.data = data; this.x = x; this.y = y; this.targetX = x; this.targetY = y; this.next = null; this.alpha = 1; this.scale = 1; this.isAnimating = false; } update() { this.x += (this.targetX - this.x) * 0.1; this.y += (this.targetY - this.y) * 0.1; } draw(ctx) { ctx.save(); ctx.globalAlpha = this.alpha; ctx.translate(this.x, this.y); ctx.scale(this.scale, this.scale); const nodeWidth = 80; const nodeHeight = 50; const gradient = ctx.createLinearGradient(-nodeWidth/2, -nodeHeight/2, -nodeWidth/2, nodeHeight/2); gradient.addColorStop(0, '#ffd700'); gradient.addColorStop(0.5, '#ffc107'); gradient.addColorStop(1, '#ffb300'); ctx.fillStyle = gradient; ctx.fillRect(-nodeWidth/2, -nodeHeight/2, nodeWidth, nodeHeight); ctx.strokeStyle = '#ff8f00'; ctx.lineWidth = 3; ctx.strokeRect(-nodeWidth/2, -nodeHeight/2, nodeWidth, nodeHeight); ctx.strokeStyle = '#ff6f00'; ctx.lineWidth = 2; ctx.beginPath(); ctx.moveTo(-10, -nodeHeight/2); ctx.lineTo(-10, nodeHeight/2); ctx.stroke(); ctx.fillStyle = '#2c3e50'; ctx.font = 'bold 16px Arial'; ctx.textAlign = 'center'; ctx.fillText(this.data.toString(), -25, 5); if (this.next) { ctx.fillStyle = '#28a745'; ctx.font = 'bold 14px Arial'; ctx.fillText('â†’', 15, 5); } else { ctx.fillStyle = '#6c757d'; ctx.font = 'bold 14px Arial'; ctx.fillText('âˆ…', 15, 5); } ctx.restore(); if (this.next) { this.drawConnection(ctx); } } drawConnection(ctx) { const startX = this.x + 40; const startY = this.y; const endX = this.next.x - 40; const endY = this.next.y; ctx.strokeStyle = '#007bff'; ctx.lineWidth = 3; ctx.setLineDash([]); ctx.beginPath(); ctx.moveTo(startX, startY); if (Math.abs(startY - endY) < 10) { ctx.lineTo(endX, endY); } else { const controlX = startX + (endX - startX) / 2; ctx.quadraticCurveTo(controlX, startY, endX, endY); } ctx.stroke(); const angle = Math.atan2(endY - startY, endX - startX); const arrowSize = 8; ctx.fillStyle = '#007bff'; ctx.beginPath(); ctx.moveTo(endX, endY); ctx.lineTo(endX - arrowSize * Math.cos(angle - Math.PI / 6), endY - arrowSize * Math.sin(angle - Math.PI / 6)); ctx.lineTo(endX - arrowSize * Math.cos(angle + Math.PI / 6), endY - arrowSize * Math.sin(angle + Math.PI / 6)); ctx.fill(); } } class Particle { constructor(x, y, color) { this.x = x; this.y = y; this.vx = (Math.random() - 0.5) * 6; this.vy = (Math.random() - 0.5) * 6; this.life = 1.0; this.decay = 0.02; this.color = color; this.size = Math.random() * 4 + 2; } update() { this.x += this.vx; this.y += this.vy; this.life -= this.decay; this.vx *= 0.98; this.vy *= 0.98; } draw(ctx) { ctx.globalAlpha = this.life; ctx.fillStyle = this.color; ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fill(); ctx.globalAlpha = 1; } } window.onload = function() { canvas = document.getElementById('linkedStackCanvas'); if (canvas) { ctx = canvas.getContext('2d'); drawStack(); animate(); } }; function animate() { particles = particles.filter(particle => { particle.update(); return particle.life > 0; }); nodes.forEach(node => node.update()); drawStack(); if (particles.length > 0) { particles.forEach(particle => particle.draw(ctx)); } animationFrame = requestAnimationFrame(animate); } function createParticles(x, y, color, count = 10) { for (let i = 0; i < count; i++) { particles.push(new Particle(x, y, color)); } } function drawGradientBackground() { const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height); gradient.addColorStop(0, '#f8f9ff'); gradient.addColorStop(1, '#e6f3ff'); ctx.fillStyle = gradient; ctx.fillRect(0, 0, canvas.width, canvas.height); } function drawGrid() { ctx.strokeStyle = 'rgba(200, 200, 200, 0.2)'; ctx.lineWidth = 1; for (let i = 0; i < canvas.width; i += 40) { ctx.beginPath(); ctx.moveTo(i, 0); ctx.lineTo(i, canvas.height); ctx.stroke(); } for (let i = 0; i < canvas.height; i += 40) { ctx.beginPath(); ctx.moveTo(0, i); ctx.lineTo(canvas.width, i); ctx.stroke(); } } function drawStack() { ctx.clearRect(0, 0, canvas.width, canvas.height); drawGradientBackground(); drawGrid(); if (!animating) { ctx.fillStyle = 'rgba(0, 123, 255, 0.8)'; ctx.font = 'bold 16px Arial'; ctx.textAlign = 'center'; ctx.fillText('é“¾å¼æ ˆåŠ¨æ€æ¼”ç¤º - èŠ‚ç‚¹é€šè¿‡æŒ‡é’ˆè¿æ¥', canvas.width / 2, 30); } if (nodes.length > 0) { const topNode = nodes[0]; ctx.fillStyle = '#dc3545'; ctx.font = 'bold 18px Arial'; ctx.textAlign = 'right'; ctx.fillText('top â†’', topNode.x - 50, topNode.y + 6); ctx.strokeStyle = '#dc3545'; ctx.fillStyle = '#dc3545'; ctx.lineWidth = 4; const arrowX = topNode.x - 45; const arrowY = topNode.y; ctx.beginPath(); ctx.moveTo(arrowX, arrowY); ctx.lineTo(topNode.x - 40, arrowY); ctx.stroke(); ctx.beginPath(); ctx.moveTo(topNode.x - 35, arrowY - 8); ctx.lineTo(topNode.x - 35, arrowY + 8); ctx.lineTo(topNode.x - 40, arrowY); ctx.fill(); } else { ctx.fillStyle = '#6c757d'; ctx.font = 'bold 24px Arial'; ctx.textAlign = 'center'; ctx.fillText('æ ˆä¸ºç©º (top = null)', canvas.width / 2, canvas.height / 2); ctx.fillStyle = '#dc3545'; ctx.font = 'bold 18px Arial'; ctx.fillText('top â†’ null', canvas.width / 2, canvas.height / 2 + 40); } nodes.forEach(node => node.draw(ctx)); updateStatus(); } function updateStatus() { const statusDiv = document.getElementById('stackStatus'); if (statusDiv) { const topValue = nodes.length > 0 ? nodes[0].data : 'null'; const status = nodes.length === 0 ? 'ç©ºæ ˆ' : 'æ­£å¸¸'; const statusColor = status === 'ç©ºæ ˆ' ? '#ffc107' : '#28a745'; statusDiv.innerHTML = `æ ˆé¡¶æŒ‡é’ˆ: top = ${topValue} | æ ˆå¤§å°: ${nodes.length} | çŠ¶æ€: <span style="color: ${statusColor};">${status}</span>`; } } function repositionNodes() { const startX = 150; const startY = 200; const nodeSpacing = 120; nodes.forEach((node, index) => { node.targetX = startX + index * nodeSpacing; node.targetY = startY; if (index < nodes.length - 1) { node.next = nodes[index + 1]; } else { node.next = null; } }); } function pushNode() { if (animating) return; animating = true; disableButtons(); const element = elementCounter++; const startX = 50; const startY = 100; const newNode = new StackNode(element, startX, startY); newNode.alpha = 0; newNode.scale = 0.5; nodes.unshift(newNode); repositionNodes(); createParticles(startX, startY, '#28a745', 15); let animationStep = 0; const animationDuration = 60; function animateStep() { animationStep++; const progress = animationStep / animationDuration; const easeProgress = 1 - Math.pow(1 - progress, 3); newNode.alpha = easeProgress; newNode.scale = 0.5 + 0.5 * easeProgress; if (progress >= 1) { newNode.alpha = 1; newNode.scale = 1; animating = false; enableButtons(); showMessage(`èŠ‚ç‚¹ ${element} å…¥æ ˆæˆåŠŸï¼`, '#28a745'); } else { requestAnimationFrame(animateStep); } } animateStep(); } function popNode() { if (animating || nodes.length === 0) { showMessage('æ ˆä¸ºç©ºï¼Œæ— æ³•å‡ºæ ˆï¼', '#dc3545'); return; } animating = true; disableButtons(); const topNode = nodes[0]; const element = topNode.data; createParticles(topNode.x, topNode.y, '#dc3545', 20); let animationStep = 0; const animationDuration = 60; function animateStep() { animationStep++; const progress = animationStep / animationDuration; const easeProgress = Math.pow(progress, 2); topNode.y = topNode.targetY - progress * 100; topNode.alpha = Math.max(0, 1 - progress * 1.5); topNode.scale = 1 + progress * 0.3; if (progress >= 1) { nodes.shift(); repositionNodes(); animating = false; enableButtons(); showMessage(`èŠ‚ç‚¹ ${element} å‡ºæ ˆæˆåŠŸï¼`, '#dc3545'); } else { requestAnimationFrame(animateStep); } } animateStep(); } function resetStack() { if (animating) return; nodes.forEach(node => { createParticles(node.x, node.y, '#6c757d', 8); }); nodes = []; elementCounter = 10; showMessage('æ ˆå·²é‡ç½®ï¼', '#6c757d'); } function showMessage(message, color) { const messageDiv = document.createElement('div'); messageDiv.style.cssText = ` position: fixed; top: 20px; right: 20px; background: ${color}; color: white; padding: 12px 20px; border-radius: 25px; font-weight: bold; z-index: 1000; animation: slideInRight 0.3s ease-out; box-shadow: 0 4px 15px rgba(0,0,0,0.3); `; messageDiv.textContent = message; document.body.appendChild(messageDiv); setTimeout(() => { messageDiv.style.animation = 'slideOutRight 0.3s ease-in'; setTimeout(() => messageDiv.remove(), 300); }, 2500); } function disableButtons() { const pushBtn = document.getElementById('pushBtn'); const popBtn = document.getElementById('popBtn'); const resetBtn = document.getElementById('resetBtn'); if (pushBtn) pushBtn.disabled = true; if (popBtn) popBtn.disabled = true; if (resetBtn) resetBtn.disabled = true; } function enableButtons() { const pushBtn = document.getElementById('pushBtn'); const popBtn = document.getElementById('popBtn'); const resetBtn = document.getElementById('resetBtn'); if (pushBtn) pushBtn.disabled = false; if (popBtn) popBtn.disabled = false; if (resetBtn) resetBtn.disabled = false; } function showCode(language) { const pythonCode = document.getElementById('pythonCode'); const javaCode = document.getElementById('javaCode'); const cppCode = document.getElementById('cppCode'); if (pythonCode) pythonCode.style.display = 'none'; if (javaCode) javaCode.style.display = 'none'; if (cppCode) cppCode.style.display = 'none'; const pythonBtn = document.getElementById('pythonBtn'); const javaBtn = document.getElementById('javaBtn'); const cppBtn = document.getElementById('cppBtn'); if (pythonBtn) pythonBtn.classList.remove('active'); if (javaBtn) javaBtn.classList.remove('active'); if (cppBtn) cppBtn.classList.remove('active'); const targetCode = document.getElementById(language + 'Code'); const targetBtn = document.getElementById(language + 'Btn'); if (targetCode) targetCode.style.display = 'block'; if (targetBtn) targetBtn.classList.add('active'); } function copyCode(language) { const codeBlock = document.getElementById(language + 'CodeBlock'); if (!codeBlock) return; const text = codeBlock.textContent || codeBlock.innerText; const btn = event.target; if (navigator.clipboard && window.isSecureContext) { navigator.clipboard.writeText(text).then(() => { showCopySuccess(btn); }).catch(() => { fallbackCopyToClipboard(text, btn); }); } else { fallbackCopyToClipboard(text, btn); } } function fallbackCopyToClipboard(text, btn) { const textArea = document.createElement('textarea'); textArea.value = text; textArea.style.position = 'fixed'; textArea.style.left = '-999999px'; textArea.style.top = '-999999px'; document.body.appendChild(textArea); textArea.focus(); textArea.select(); try { document.execCommand('copy'); showCopySuccess(btn); } catch (err) { console.error('å¤åˆ¶å¤±è´¥:', err); showCopyError(btn); } finally { document.body.removeChild(textArea); } } function showCopySuccess(btn) { const originalText = btn.innerHTML; btn.innerHTML = 'âœ… å·²å¤åˆ¶ï¼'; btn.classList.add('copied'); setTimeout(() => { btn.innerHTML = originalText; btn.classList.remove('copied'); }, 2000); } function showCopyError(btn) { const originalText = btn.innerHTML; btn.innerHTML = 'âŒ å¤åˆ¶å¤±è´¥'; btn.style.background = 'linear-gradient(135deg, #dc3545 0%, #c82333 100%)'; setTimeout(() => { btn.innerHTML = originalText; btn.style.background = ''; }, 2000); } function toggleAnswer(answerId) { const answer = document.getElementById(answerId); if (!answer) return; const question = answer.previousElementSibling; if (answer.classList.contains('show')) { answer.classList.remove('show'); question.classList.remove('active'); } else { document.querySelectorAll('.answer').forEach(a => a.classList.remove('show')); document.querySelectorAll('.question').forEach(q => q.classList.remove('active')); answer.classList.add('show'); question.classList.add('active'); } } const style = document.createElement('style'); style.textContent = ` @keyframes slideInRight { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } } @keyframes slideOutRight { from { transform: translateX(0); opacity: 1; } to { transform: translateX(100%); opacity: 0; } } `; document.head.appendChild(style);</script>

{% endblock %}