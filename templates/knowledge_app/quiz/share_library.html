{% extends 'knowledge_app/quiz/base_quiz.html' %}

{% block title %}åˆ†äº«é¢˜åº“ - {{ library.name }}{% endblock %}

{% block content %}
<div class="quiz-container"><!-- é¢åŒ…å±‘å¯¼èˆª --><div class="quiz-breadcrumb"><a href="{% url 'knowledge_app:quiz_dashboard' %}">ä¸ªäººé¢˜åº“</a><span class="quiz-breadcrumb-separator">></span><a href="{% url 'knowledge_app:quiz_library_detail' library.id %}">{{ library.name }}</a><span class="quiz-breadcrumb-separator">></span><span>åˆ†äº«é¢˜åº“</span></div><div class="quiz-card"><div style="text-align: center; margin-bottom: 2rem;"><h1 style="color: black !important; margin-bottom: 0.5rem;">ğŸ“¤ åˆ†äº«é¢˜åº“</h1><p style="color: black !important;">å°†ä½ çš„é¢˜åº“åˆ†äº«ç»™å…¶ä»–ç”¨æˆ·</p></div><!-- é¢˜åº“ä¿¡æ¯ --><div style="background: var(--quiz-gray-50); padding: 1.5rem; border-radius: var(--quiz-radius-lg); margin-bottom: 2rem; border-left: 4px solid var(--quiz-primary);"><h3 style="color: black !important; margin: 0 0 0.5rem 0;">{{ library.name }}</h3><p style="color: black !important; margin: 0 0 1rem 0;">{{ library.description|default:"æš‚æ— æè¿°" }}</p><div style="display: flex; gap: 1rem; font-size: 0.9rem; color: black !important;"><span>ğŸ“Š {{ library.total_questions }} é“é¢˜ç›®</span><span>ğŸ“… åˆ›å»ºäº {{ library.created_at|date:"Y-m-d" }}</span></div></div><!-- åˆ†äº«è¡¨å• --><form method="post" style="max-width: 600px; margin: 0 auto;">
            {% csrf_token %}
            
            <!-- åˆ†äº«ç±»å‹ --><div class="quiz-form-group"><label class="quiz-form-label">åˆ†äº«ç±»å‹</label><div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;"><label style="display: flex; align-items: center; padding: 1rem; background: white; border: 2px solid var(--quiz-gray-200); border-radius: var(--quiz-radius); cursor: pointer; transition: var(--quiz-transition);" onclick="selectShareType('private')"><input type="radio" name="share_type" value="private" style="margin-right: 0.5rem;" onchange="toggleShareOptions()"><div><div style="font-weight: 600; color: black !important;">ğŸ‘¤ ç§å¯†åˆ†äº«</div><div style="font-size: 0.8rem; color: black !important;">åˆ†äº«ç»™ç‰¹å®šç”¨æˆ·</div></div></label><label style="display: flex; align-items: center; padding: 1rem; background: white; border: 2px solid var(--quiz-gray-200); border-radius: var(--quiz-radius); cursor: pointer; transition: var(--quiz-transition);" onclick="selectShareType('link')"><input type="radio" name="share_type" value="link" style="margin-right: 0.5rem;" onchange="toggleShareOptions()"><div><div style="font-weight: 600; color: black !important;">ğŸ”— é“¾æ¥åˆ†äº«</div><div style="font-size: 0.8rem; color: black !important;">ç”Ÿæˆåˆ†äº«é“¾æ¥</div></div></label><label style="display: flex; align-items: center; padding: 1rem; background: white; border: 2px solid var(--quiz-gray-200); border-radius: var(--quiz-radius); cursor: pointer; transition: var(--quiz-transition);" onclick="selectShareType('public')"><input type="radio" name="share_type" value="public" style="margin-right: 0.5rem;" onchange="toggleShareOptions()"><div><div style="font-weight: 600; color: black !important;">ğŸŒ å…¬å¼€åˆ†äº«</div><div style="font-size: 0.8rem; color: black !important;">æ‰€æœ‰äººå¯è§</div></div></label></div></div><!-- ç§å¯†åˆ†äº«é€‰é¡¹ --><div id="privateOptions" style="display: none;"><div class="quiz-form-group"><label for="shared_to_username" class="quiz-form-label">åˆ†äº«ç»™ç”¨æˆ·</label><input type="text" id="shared_to_username" name="shared_to_username" class="quiz-form-control" placeholder="è¾“å…¥ç”¨æˆ·å" list="userList"><datalist id="userList">
                        {% for user in users %}
                        <option value="{{ user.username }}">{{ user.username }}</option>
                        {% endfor %}
                    </datalist></div></div><!-- æƒé™è®¾ç½® --><div class="quiz-form-group"><label class="quiz-form-label">è®¿é—®æƒé™</label><div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;"><label style="display: flex; align-items: center; padding: 0.75rem; background: white; border: 2px solid var(--quiz-gray-200); border-radius: var(--quiz-radius); cursor: pointer;"><input type="radio" name="permission" value="view" checked style="margin-right: 0.5rem;"><div><div style="font-weight: 600; color: black !important;">ğŸ‘€ ä»…æŸ¥çœ‹</div><div style="font-size: 0.8rem; color: black !important;">åªèƒ½æŸ¥çœ‹é¢˜ç›®</div></div></label><label style="display: flex; align-items: center; padding: 0.75rem; background: white; border: 2px solid var(--quiz-gray-200); border-radius: var(--quiz-radius); cursor: pointer;"><input type="radio" name="permission" value="copy" style="margin-right: 0.5rem;"><div><div style="font-weight: 600; color: black !important;">ğŸ“‹ å¯å¤åˆ¶</div><div style="font-size: 0.8rem; color: black !important;">å¯ä»¥å¤åˆ¶é¢˜åº“</div></div></label></div></div><!-- åˆ†äº«ç•™è¨€ --><div class="quiz-form-group"><label for="message" class="quiz-form-label">åˆ†äº«ç•™è¨€ï¼ˆå¯é€‰ï¼‰</label><textarea id="message" name="message" class="quiz-form-control" rows="3" placeholder="å†™ç‚¹ä»€ä¹ˆç»™æ¥æ”¶è€…..."></textarea></div><!-- è¿‡æœŸæ—¶é—´ --><div class="quiz-form-group"><label for="expires_days" class="quiz-form-label">æœ‰æ•ˆæœŸï¼ˆå¯é€‰ï¼‰</label><select id="expires_days" name="expires_days" class="quiz-form-control"><option value="">æ°¸ä¸è¿‡æœŸ</option><option value="1">1å¤©</option><option value="7">7å¤©</option><option value="30">30å¤©</option><option value="90">90å¤©</option></select></div><!-- æäº¤æŒ‰é’® --><div style="text-align: center; margin-top: 2rem;"><button type="submit" class="quiz-btn quiz-btn-primary"><span>ğŸ“¤</span><span>åˆ›å»ºåˆ†äº«</span></button><a href="{% url 'knowledge_app:quiz_library_detail' library.id %}" class="quiz-btn quiz-btn-outline" style="margin-left: 1rem;"><span>â†©ï¸</span><span>è¿”å›</span></a></div></form></div></div><script>function selectShareType(type) { document.querySelectorAll('input[name="share_type"]').forEach(radio => { const label = radio.closest('label'); if (radio.value === type) { radio.checked = true; label.style.borderColor = 'var(--quiz-primary)'; label.style.background = 'rgba(99, 102, 241, 0.1)'; } else { radio.checked = false; label.style.borderColor = 'var(--quiz-gray-200)'; label.style.background = 'white'; } }); toggleShareOptions(); } function toggleShareOptions() { const shareType = document.querySelector('input[name="share_type"]:checked')?.value; const privateOptions = document.getElementById('privateOptions'); if (shareType === 'private') { privateOptions.style.display = 'block'; } else { privateOptions.style.display = 'none'; } } document.querySelectorAll('input[name="permission"]').forEach(radio => { radio.addEventListener('change', function() { document.querySelectorAll('input[name="permission"]').forEach(r => { const label = r.closest('label'); if (r.checked) { label.style.borderColor = 'var(--quiz-primary)'; label.style.background = 'rgba(99, 102, 241, 0.1)'; } else { label.style.borderColor = 'var(--quiz-gray-200)'; label.style.background = 'white'; } }); }); }); document.addEventListener('DOMContentLoaded', function() { const checkedPermission = document.querySelector('input[name="permission"]:checked'); if (checkedPermission) { const label = checkedPermission.closest('label'); label.style.borderColor = 'var(--quiz-primary)'; label.style.background = 'rgba(99, 102, 241, 0.1)'; } });</script>
{% endblock %}
