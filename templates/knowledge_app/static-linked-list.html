
{% extends 'knowledge_app/base.html' %}

{% block title %}{{ page_title|default:"é™æ€é“¾è¡¨" }} - è®¡ç®—æœºç§‘å­¦å­¦ä¹ å¹³å°{% endblock %}

{% block content %}
<div class="page-container fade-in">
    <!-- é¢åŒ…å±‘å¯¼èˆª -->
    <div class="breadcrumb">
        <a href="{% url 'knowledge_app:index' %}">é¦–é¡µ</a>
        <span>></span>
        <span>{{ breadcrumb_category|default:"æ•°æ®ç»“æ„" }}</span>
        <span>></span>
        <span>{{ page_title|default:"é™æ€é“¾è¡¨" }}</span>
    </div>

    <!-- é¡µé¢å¤´éƒ¨ -->
    <div class="page-header slide-in-left">
        <h1>
            <span class="page-icon">{{ page_icon|default:"ğŸ”—" }}</span>
            {{ page_title|default:"é™æ€é“¾è¡¨" }}
        </h1>
        <p>{{ page_description|default:"ç”¨æ•°ç»„æ¨¡æ‹Ÿé“¾è¡¨ï¼Œæ—¢æœ‰æ•°ç»„çš„éšæœºè®¿é—®åˆæœ‰é“¾è¡¨çš„åŠ¨æ€ç‰¹æ€§" }}</p>
    </div>

    <!-- ğŸ“‹ çŸ¥è¯†ç‚¹æ¦‚è¿° -->
    <div class="content-card slide-in-right">
        <div class="content-section">
            <h2 class="section-title">
                <span class="section-icon">ğŸ“‹</span>
                çŸ¥è¯†ç‚¹æ¦‚è¿°
            </h2>
            <div class="overview-content">
                <div class="concept-intro">
                    <p><strong>æ ¸å¿ƒæ¦‚å¿µï¼š</strong>é™æ€é“¾è¡¨ç”¨æ•°ç»„æ¥æ¨¡æ‹Ÿé“¾è¡¨ç»“æ„ï¼Œå°±åƒç”¨åœè½¦ä½ç¼–å·æ¥ç®¡ç†æ±½è½¦åœæ”¾ï¼Œæ¯è¾†è½¦éƒ½çŸ¥é“ä¸‹ä¸€è¾†è½¦çš„åœè½¦ä½å·ç ï¼Œæ— éœ€å®é™…çš„ç‰©ç†è¿æ¥ï¼</p>
                </div>

                <div class="unified-grid unified-grid-2">
                    <div class="info-box info-box-info">
                        <h3>ğŸ·ï¸ å…³é”®æœ¯è¯­</h3>
                        <ul>
                            <li><strong>é™æ€å­˜å‚¨ï¼š</strong>ä½¿ç”¨æ•°ç»„é¢„åˆ†é…å›ºå®šå¤§å°çš„å­˜å‚¨ç©ºé—´</li>
                            <li><strong>æ¸¸æ ‡(Cursor)ï¼š</strong>æŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ çš„æ•°ç»„ä¸‹æ ‡</li>
                            <li><strong>æ•°æ®åŸŸï¼š</strong>å­˜å‚¨å®é™…æ•°æ®çš„å­—æ®µ</li>
                            <li><strong>å¤‡ç”¨é“¾è¡¨ï¼š</strong>ç®¡ç†ç©ºé—²å­˜å‚¨ç©ºé—´çš„é“¾è¡¨</li>
                            <li><strong>å¤´èŠ‚ç‚¹ï¼š</strong>ä¸å­˜å‚¨æ•°æ®ï¼Œåªç”¨æ¥æ ‡è®°é“¾è¡¨å¼€å§‹</li>
                        </ul>
                    </div>

                    <div class="info-box info-box-success">
                        <h3>ğŸ“Š å­¦ä¹ æŒ‡æ ‡</h3>
                        <p><strong>éš¾åº¦ç­‰çº§ï¼š</strong> <span class="badge badge-medium">è¿›é˜¶</span></p>
                        <p><strong>å‰ç½®çŸ¥è¯†ï¼š</strong></p>
                        <ul>
                            <li>æ•°ç»„åŸºç¡€æ“ä½œ âœ“</li>
                            <li>é“¾è¡¨åŸºæœ¬æ¦‚å¿µ âœ“</li>
                            <li>æŒ‡é’ˆ/å¼•ç”¨ç†è§£ âœ“</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ğŸ” æ¦‚å¿µè¯¦è§£ -->
    <div class="content-card">
        <div class="content-section">
            <h2 class="section-title">
                <span class="section-icon">ğŸ”</span>
                æ¦‚å¿µè¯¦è§£
            </h2>

            <div class="concept-details">
                <div class="concept-item">
                    <h3>ğŸ—ï¸ é™æ€é“¾è¡¨çš„ç»“æ„</h3>
                    <p>æƒ³è±¡ä¸€ä¸ªå…¬å¯“æ¥¼çš„ä½æˆ·ç®¡ç†ç³»ç»Ÿï¼š</p>
                    <ul>
                        <li>æ¯ä¸ªæˆ¿é—´(æ•°ç»„å…ƒç´ )éƒ½æœ‰å›ºå®šçš„æˆ¿å·(æ•°ç»„ä¸‹æ ‡)</li>
                        <li>æˆ¿é—´é‡Œä½ç€ä½æˆ·(æ•°æ®)å’Œä¸€å¼ çº¸æ¡(æ¸¸æ ‡)</li>
                        <li>çº¸æ¡ä¸Šå†™ç€ä¸‹ä¸€ä¸ªç›¸å…³ä½æˆ·çš„æˆ¿å·</li>
                        <li>ç‰©ä¸š(å¤‡ç”¨é“¾è¡¨)ç®¡ç†ç©ºæˆ¿é—´çš„ä¿¡æ¯</li>
                    </ul>
                </div>

                <div class="concept-item">
                    <h3>ğŸ”„ ä¸åŠ¨æ€é“¾è¡¨çš„å¯¹æ¯”</h3>
                    <div class="comparison-grid">
                        <div class="comparison-card">
                            <h4>ğŸ”— åŠ¨æ€é“¾è¡¨</h4>
                            <div class="pros-cons">
                                <div class="pros">
                                    <h5>âœ… ä¼˜ç‚¹</h5>
                                    <ul>
                                        <li>çœŸæ­£çš„åŠ¨æ€å†…å­˜åˆ†é…</li>
                                        <li>å†…å­˜ä½¿ç”¨æ›´çµæ´»</li>
                                        <li>ç†è®ºä¸Šæ— å¤§å°é™åˆ¶</li>
                                    </ul>
                                </div>
                                <div class="cons">
                                    <h5>âŒ ç¼ºç‚¹</h5>
                                    <ul>
                                        <li>éœ€è¦æŒ‡é’ˆæ”¯æŒ</li>
                                        <li>å†…å­˜ç¢ç‰‡é—®é¢˜</li>
                                        <li>é¢‘ç¹malloc/freeå¼€é”€å¤§</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="comparison-card">
                            <h4>ğŸ“Š é™æ€é“¾è¡¨</h4>
                            <div class="pros-cons">
                                <div class="pros">
                                    <h5>âœ… ä¼˜ç‚¹</h5>
                                    <ul>
                                        <li>ä¸éœ€è¦æŒ‡é’ˆæ“ä½œ</li>
                                        <li>å†…å­˜ç®¡ç†ç®€å•</li>
                                        <li>ç¼“å­˜å‹å¥½ï¼Œè®¿é—®æ•ˆç‡é«˜</li>
                                    </ul>
                                </div>
                                <div class="cons">
                                    <h5>âŒ ç¼ºç‚¹</h5>
                                    <ul>
                                        <li>æ•°ç»„å¤§å°å›ºå®š</li>
                                        <li>å¯èƒ½æµªè´¹å­˜å‚¨ç©ºé—´</li>
                                        <li>éœ€è¦é¢å¤–ç®¡ç†ç©ºé—²ç©ºé—´</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="concept-item">
                    <h3>âš ï¸ å…³é”®ç†è§£ç‚¹</h3>
                    <div class="key-points">
                        <div class="point-card">
                            <span class="point-icon">ğŸ¯</span>
                            <h4>æ¸¸æ ‡çš„ä½œç”¨</h4>
                            <p>æ¸¸æ ‡ä¸æ˜¯æŒ‡é’ˆï¼Œè€Œæ˜¯æ•°ç»„ä¸‹æ ‡ã€‚å®ƒå‘Šè¯‰æˆ‘ä»¬ä¸‹ä¸€ä¸ªèŠ‚ç‚¹åœ¨æ•°ç»„çš„å“ªä¸ªä½ç½®ã€‚</p>
                        </div>
                        <div class="point-card">
                            <span class="point-icon">ğŸ”„</span>
                            <h4>ç©ºé—´ç®¡ç†</h4>
                            <p>å¿…é¡»ç»´æŠ¤ä¸€ä¸ªå¤‡ç”¨é“¾è¡¨æ¥è®°å½•å“ªäº›æ•°ç»„ä½ç½®æ˜¯ç©ºé—²çš„ï¼Œå¯ä»¥ç”¨æ¥æ’å…¥æ–°å…ƒç´ ã€‚</p>
                        </div>
                        <div class="point-card">
                            <span class="point-icon">ğŸ“</span>
                            <h4>éšæœºè®¿é—®èƒ½åŠ›</h4>
                            <p>è™½ç„¶é€»è¾‘ä¸Šæ˜¯é“¾è¡¨ï¼Œä½†ç‰©ç†ä¸Šæ˜¯æ•°ç»„ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ä¸‹æ ‡ç›´æ¥è®¿é—®ä»»æ„å…ƒç´ ã€‚</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ğŸ“Š å¯è§†åŒ–å±•ç¤º -->
    <div class="content-card">
        <div class="content-section">
            <h2 class="section-title">
                <span class="section-icon">ğŸ“Š</span>
                å¯è§†åŒ–å±•ç¤º
            </h2>

            <!-- é™æ€ç»“æ„å›¾ -->
            <div class="visualization-container">
                <h3>ğŸ›ï¸ é™æ€é“¾è¡¨åŸºæœ¬ç»“æ„</h3>
                <div class="static-diagram">
                    <div class="array-visualization">
                        <div class="array-header">
                            <span>æ•°ç»„ä¸‹æ ‡</span>
                            <span>æ•°æ®åŸŸ</span>
                            <span>æ¸¸æ ‡åŸŸ</span>
                        </div>
                        <div class="array-row header-row">
                            <div class="index">0</div>
                            <div class="data">HEAD</div>
                            <div class="cursor">1</div>
                        </div>
                        <div class="array-row active-row">
                            <div class="index">1</div>
                            <div class="data">A</div>
                            <div class="cursor">3</div>
                        </div>
                        <div class="array-row free-row">
                            <div class="index">2</div>
                            <div class="data">-</div>
                            <div class="cursor">4</div>
                        </div>
                        <div class="array-row active-row">
                            <div class="index">3</div>
                            <div class="data">B</div>
                            <div class="cursor">5</div>
                        </div>
                        <div class="array-row free-row">
                            <div class="index">4</div>
                            <div class="data">-</div>
                            <div class="cursor">0</div>
                        </div>
                        <div class="array-row active-row">
                            <div class="index">5</div>
                            <div class="data">C</div>
                            <div class="cursor">0</div>
                        </div>
                    </div>

                    <div class="legend">
                        <div class="legend-item">
                            <div class="legend-color header-color"></div>
                            <span>å¤´èŠ‚ç‚¹(ä¸å­˜æ•°æ®)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color active-color"></div>
                            <span>ä½¿ç”¨ä¸­çš„èŠ‚ç‚¹</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color free-color"></div>
                            <span>ç©ºé—²èŠ‚ç‚¹</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-cursor">0</div>
                            <span>æ¸¸æ ‡=0è¡¨ç¤ºé“¾è¡¨ç»“æŸæˆ–å¤‡ç”¨é“¾è¡¨ç»“æŸ</span>
                        </div>
                    </div>
                </div>

                <!-- é€»è¾‘é“¾è¡¨å±•ç¤º -->
                <h3>ğŸ”— é€»è¾‘é“¾è¡¨ç»“æ„</h3>
                <div class="logical-chain">
                    <div class="chain-node">
                        <div class="node-content">HEAD</div>
                        <div class="node-index">[0]</div>
                    </div>
                    <div class="arrow">â†’</div>
                    <div class="chain-node">
                        <div class="node-content">A</div>
                        <div class="node-index">[1]</div>
                    </div>
                    <div class="arrow">â†’</div>
                    <div class="chain-node">
                        <div class="node-content">B</div>
                        <div class="node-index">[3]</div>
                    </div>
                    <div class="arrow">â†’</div>
                    <div class="chain-node">
                        <div class="node-content">C</div>
                        <div class="node-index">[5]</div>
                    </div>
                    <div class="arrow">â†’</div>
                    <div class="null-node">NULL</div>
                </div>

                <!-- åŠ¨æ€æ“ä½œæ¼”ç¤º -->
                <h3>ğŸ¬ åŠ¨æ€æ“ä½œæ¼”ç¤º</h3>
                <div class="animation-controls">
                    <div class="control-panel">
                        <button id="insertBtn" class="unified-btn unified-btn-primary">æ’å…¥å…ƒç´ </button>
                        <button id="deleteBtn" class="unified-btn unified-btn-warning">åˆ é™¤å…ƒç´ </button>
                        <input type="text" id="insertValue" placeholder="è¾“å…¥å­—ç¬¦" maxlength="1">
                        <input type="number" id="insertPosition" placeholder="ä½ç½®" min="1" max="5">
                        <input type="number" id="deletePosition" placeholder="åˆ é™¤ä½ç½®" min="1" max="5">
                        <button id="resetBtn" class="unified-btn">é‡ç½®</button>
                    </div>
                    <div class="step-info" id="stepInfo">ç‚¹å‡»æ“ä½œæŒ‰é’®å¼€å§‹æ¼”ç¤º</div>
                </div>

                <div class="canvas-container">
                    <canvas id="staticListCanvas" width="900" height="500"></canvas>
                </div>

                <!-- æ“ä½œæ­¥éª¤è¯´æ˜ -->
                <div class="operation-steps">
                    <div class="step-card">
                        <h4>â• æ’å…¥æ­¥éª¤</h4>
                        <ol>
                            <li>ä»å¤‡ç”¨é“¾è¡¨ä¸­å–å‡ºä¸€ä¸ªç©ºé—²èŠ‚ç‚¹</li>
                            <li>åœ¨è¯¥èŠ‚ç‚¹ä¸­å­˜å…¥æ–°æ•°æ®</li>
                            <li>æ‰¾åˆ°æ’å…¥ä½ç½®çš„å‰é©±èŠ‚ç‚¹</li>
                            <li>ä¿®æ”¹æ¸¸æ ‡æŒ‡å‘ï¼Œå»ºç«‹æ–°çš„é“¾æ¥å…³ç³»</li>
                            <li>æ›´æ–°å¤‡ç”¨é“¾è¡¨å¤´æŒ‡é’ˆ</li>
                        </ol>
                    </div>

                    <div class="step-card">
                        <h4>ğŸ—‘ï¸ åˆ é™¤æ­¥éª¤</h4>
                        <ol>
                            <li>æ‰¾åˆ°è¦åˆ é™¤èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹</li>
                            <li>ä¿®æ”¹å‰é©±èŠ‚ç‚¹çš„æ¸¸æ ‡ï¼Œè·³è¿‡è¦åˆ é™¤çš„èŠ‚ç‚¹</li>
                            <li>æ¸…ç©ºè¢«åˆ é™¤èŠ‚ç‚¹çš„æ•°æ®</li>
                            <li>å°†è¢«åˆ é™¤èŠ‚ç‚¹åŠ å…¥å¤‡ç”¨é“¾è¡¨</li>
                            <li>æ›´æ–°å¤‡ç”¨é“¾è¡¨å¤´æŒ‡é’ˆ</li>
                        </ol>
                    </div>

                    <div class="step-card">
                        <h4>ğŸ”§ å¤‡ç”¨é“¾è¡¨ç®¡ç†</h4>
                        <ol>
                            <li>åˆå§‹æ—¶æ‰€æœ‰ç©ºèŠ‚ç‚¹è¿æˆå¤‡ç”¨é“¾è¡¨</li>
                            <li>æ’å…¥æ—¶ä»å¤‡ç”¨é“¾è¡¨å¤´éƒ¨å–èŠ‚ç‚¹</li>
                            <li>åˆ é™¤æ—¶å°†èŠ‚ç‚¹åŠ å…¥å¤‡ç”¨é“¾è¡¨å¤´éƒ¨</li>
                            <li>å¤‡ç”¨é“¾è¡¨ä¸ºç©ºæ—¶æ— æ³•å†æ’å…¥æ–°å…ƒç´ </li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ğŸŒŸ å®é™…åº”ç”¨ -->
    <div class="content-card">
        <div class="content-section">
            <h2 class="section-title">
                <span class="section-icon">ğŸŒŸ</span>
                å®é™…åº”ç”¨
            </h2>

            <div class="applications">
                <div class="application-item">
                    <h3>ğŸ”Œ åµŒå…¥å¼ç³»ç»Ÿ</h3>
                    <p>åœ¨å†…å­˜å—é™çš„åµŒå…¥å¼è®¾å¤‡ä¸­ï¼Œé™æ€é“¾è¡¨é¿å…äº†åŠ¨æ€å†…å­˜åˆ†é…çš„å¼€é”€ï¼Œæä¾›å¯é¢„æµ‹çš„å†…å­˜ä½¿ç”¨ã€‚</p>
                </div>

                <div class="application-item">
                    <h3>ğŸ® æ¸¸æˆå¼€å‘</h3>
                    <p>æ¸¸æˆä¸­çš„å¯¹è±¡æ± ç®¡ç†ï¼Œé¢„åˆ†é…å›ºå®šæ•°é‡çš„æ¸¸æˆå¯¹è±¡ï¼Œé¿å…é¢‘ç¹åˆ›å»ºé”€æ¯å¯¼è‡´çš„æ€§èƒ½é—®é¢˜ã€‚</p>
                </div>

                <div class="application-item">
                    <h3>ğŸ“¡ å®æ—¶ç³»ç»Ÿ</h3>
                    <p>éœ€è¦ç¡®å®šæ€§å†…å­˜ç®¡ç†çš„å®æ—¶ç³»ç»Ÿï¼Œé™æ€é“¾è¡¨æä¾›äº†å¯é¢„æµ‹çš„æ“ä½œæ—¶é—´å¤æ‚åº¦ã€‚</p>
                </div>
            </div>

            <!-- ä»£ç ç¤ºä¾‹ -->
            <div class="code-examples">
                <h3>ğŸ’» ä»£ç å®ç°</h3>
                <div class="code-tabs">
                    <button class="tab-btn active" data-lang="cpp">C++</button>
                    <button class="tab-btn" data-lang="java">Java</button>
                    <button class="tab-btn" data-lang="python">Python</button>
                </div>

                <!-- C++ ä»£ç  -->
                <div class="code-content active" data-lang="cpp">
                    <div class="code-header">
                        <span>é™æ€é“¾è¡¨å®ç° - C++</span>
                        <button class="copy-btn" data-clipboard-target="cpp-code">ğŸ“‹ å¤åˆ¶</button>
                    </div>
                    <pre id="cpp-code"><code>
#include &lt;iostream&gt;
#define MAXSIZE 100

struct StaticNode {
    char data;      // æ•°æ®åŸŸ
    int cursor;     // æ¸¸æ ‡åŸŸï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡
};

class StaticLinkedList {
private:
    StaticNode nodes[MAXSIZE];
    int length;

public:
    StaticLinkedList() : length(0) {
        // åˆå§‹åŒ–å¤‡ç”¨é“¾è¡¨ï¼Œæ‰€æœ‰ç©ºé—²èŠ‚ç‚¹è¿æˆé“¾è¡¨
        for (int i = 0; i < MAXSIZE - 1; i++) {
            nodes[i].cursor = i + 1;
        }
        nodes[MAXSIZE - 1].cursor = 0;  // æœ€åä¸€ä¸ªèŠ‚ç‚¹æ¸¸æ ‡ä¸º0
        nodes[0].cursor = 1;            // å¤´èŠ‚ç‚¹åˆå§‹æŒ‡å‘ç¬¬ä¸€ä¸ªç©ºé—²èŠ‚ç‚¹
    }

    // åˆ†é…ä¸€ä¸ªç©ºé—²èŠ‚ç‚¹ï¼Œè¿”å›å…¶ä¸‹æ ‡
    int malloc_SL() {
        int i = nodes[0].cursor;        // å½“å‰å¤‡ç”¨é“¾è¡¨çš„ç¬¬ä¸€ä¸ªç©ºé—²èŠ‚ç‚¹
        if (i) {
            nodes[0].cursor = nodes[i].cursor;  // ä¿®æ”¹å¤‡ç”¨é“¾è¡¨å¤´
        }
        return i;
    }

    // é‡Šæ”¾ä¸‹æ ‡ä¸ºkçš„èŠ‚ç‚¹
    void free_SL(int k) {
        nodes[k].cursor = nodes[0].cursor;  // æŠŠè¦é‡Šæ”¾çš„èŠ‚ç‚¹æ’å…¥åˆ°å¤‡ç”¨é“¾è¡¨å¤´éƒ¨
        nodes[0].cursor = k;
    }

    // åœ¨ç¬¬iä¸ªä½ç½®æ’å…¥å…ƒç´ e
    bool insert(int i, char e) {
        if (i < 1 || i > length + 1) return false;

        int j = malloc_SL();            // è·å–ç©ºé—²èŠ‚ç‚¹
        if (!j) return false;           // å¤‡ç”¨é“¾è¡¨ä¸ºç©º

        nodes[j].data = e;              // å°†æ•°æ®èµ‹ç»™æ–°èŠ‚ç‚¹

        int k = 0;                      // kæŒ‡å‘å¤´èŠ‚ç‚¹
        for (int l = 1; l <= i - 1; l++) {  // æ‰¾åˆ°ç¬¬iä¸ªä½ç½®çš„å‰é©±
            k = nodes[k].cursor;
        }

        nodes[j].cursor = nodes[k].cursor;  // æ–°èŠ‚ç‚¹æŒ‡å‘åŸæ¥ç¬¬iä¸ªèŠ‚ç‚¹
        nodes[k].cursor = j;                // å‰é©±æŒ‡å‘æ–°èŠ‚ç‚¹

        length++;
        return true;
    }

    // åˆ é™¤ç¬¬iä¸ªä½ç½®çš„å…ƒç´ 
    bool remove(int i) {
        if (i < 1 || i > length) return false;

        int k = 0;                      // kæŒ‡å‘å¤´èŠ‚ç‚¹
        for (int j = 1; j <= i - 1; j++) {  // æ‰¾åˆ°ç¬¬iä¸ªä½ç½®çš„å‰é©±
            k = nodes[k].cursor;
        }

        int j = nodes[k].cursor;        // jæ˜¯è¦åˆ é™¤çš„èŠ‚ç‚¹
        nodes[k].cursor = nodes[j].cursor;  // å‰é©±æŒ‡å‘åˆ é™¤èŠ‚ç‚¹çš„åç»§

        free_SL(j);                     // é‡Šæ”¾åˆ é™¤çš„èŠ‚ç‚¹
        length--;
        return true;
    }

    // æ‰“å°é“¾è¡¨
    void display() {
        int p = nodes[0].cursor;        // pæŒ‡å‘ç¬¬ä¸€ä¸ªæ•°æ®èŠ‚ç‚¹
        std::cout << "é“¾è¡¨å†…å®¹: ";
        while (p) {
            std::cout << nodes[p].data << " ";
            p = nodes[p].cursor;
        }
        std::cout << std::endl;
    }
};
                    </code></pre>
                </div>

                <!-- Java ä»£ç  -->
                <div class="code-content" data-lang="java">
                    <div class="code-header">
                        <span>é™æ€é“¾è¡¨å®ç° - Java</span>
                        <button class="copy-btn" data-clipboard-target="java-code">ğŸ“‹ å¤åˆ¶</button>
                    </div>
                    <pre id="java-code"><code>
class StaticNode {
    char data;      // æ•°æ®åŸŸ
    int cursor;     // æ¸¸æ ‡åŸŸ

    StaticNode() {
        this.data = 0;
        this.cursor = 0;
    }
}

public class StaticLinkedList {
    private static final int MAXSIZE = 100;
    private StaticNode[] nodes;
    private int length;

    public StaticLinkedList() {
        nodes = new StaticNode[MAXSIZE];
        for (int i = 0; i < MAXSIZE; i++) {
            nodes[i] = new StaticNode();
        }

        // åˆå§‹åŒ–å¤‡ç”¨é“¾è¡¨
        for (int i = 0; i < MAXSIZE - 1; i++) {
            nodes[i].cursor = i + 1;
        }
        nodes[MAXSIZE - 1].cursor = 0;
        nodes[0].cursor = 1;
        length = 0;
    }

    // åˆ†é…ç©ºé—²èŠ‚ç‚¹
    private int mallocSL() {
        int i = nodes[0].cursor;
        if (i != 0) {
            nodes[0].cursor = nodes[i].cursor;
        }
        return i;
    }

    // é‡Šæ”¾èŠ‚ç‚¹
    private void freeSL(int k) {
        nodes[k].cursor = nodes[0].cursor;
        nodes[0].cursor = k;
    }

    // æ’å…¥å…ƒç´ 
    public boolean insert(int i, char e) {
        if (i < 1 || i > length + 1) return false;

        int j = mallocSL();
        if (j == 0) return false;

        nodes[j].data = e;

        int k = 0;
        for (int l = 1; l <= i - 1; l++) {
            k = nodes[k].cursor;
        }

        nodes[j].cursor = nodes[k].cursor;
        nodes[k].cursor = j;

        length++;
        return true;
    }

    // åˆ é™¤å…ƒç´ 
    public boolean remove(int i) {
        if (i < 1 || i > length) return false;

        int k = 0;
        for (int j = 1; j <= i - 1; j++) {
            k = nodes[k].cursor;
        }

        int j = nodes[k].cursor;
        nodes[k].cursor = nodes[j].cursor;

        freeSL(j);
        length--;
        return true;
    }

    // æ˜¾ç¤ºé“¾è¡¨
    public void display() {
        int p = nodes[0].cursor;
        System.out.print("é“¾è¡¨å†…å®¹: ");
        while (p != 0) {
            System.out.print(nodes[p].data + " ");
            p = nodes[p].cursor;
        }
        System.out.println();
    }

    public int getLength() {
        return length;
    }
}
                    </code></pre>
                </div>

                <!-- Python ä»£ç  -->
                <div class="code-content" data-lang="python">
                    <div class="code-header">
                        <span>é™æ€é“¾è¡¨å®ç° - Python</span>
                        <button class="copy-btn" data-clipboard-target="python-code">ğŸ“‹ å¤åˆ¶</button>
                    </div>
                    <pre id="python-code"><code>
class StaticNode:
    def __init__(self):
        self.data = None    # æ•°æ®åŸŸ
        self.cursor = 0     # æ¸¸æ ‡åŸŸ

class StaticLinkedList:
    def __init__(self, maxsize=100):
        self.MAXSIZE = maxsize
        self.nodes = [StaticNode() for _ in range(maxsize)]
        self.length = 0

        # åˆå§‹åŒ–å¤‡ç”¨é“¾è¡¨
        for i in range(maxsize - 1):
            self.nodes[i].cursor = i + 1
        self.nodes[maxsize - 1].cursor = 0
        self.nodes[0].cursor = 1

    def malloc_sl(self):
        """åˆ†é…ç©ºé—²èŠ‚ç‚¹"""
        i = self.nodes[0].cursor
        if i:
            self.nodes[0].cursor = self.nodes[i].cursor
        return i

    def free_sl(self, k):
        """é‡Šæ”¾èŠ‚ç‚¹"""
        self.nodes[k].cursor = self.nodes[0].cursor
        self.nodes[0].cursor = k

    def insert(self, i, e):
        """åœ¨ç¬¬iä¸ªä½ç½®æ’å…¥å…ƒç´ e"""
        if i < 1 or i > self.length + 1:
            return False

        j = self.malloc_sl()
        if not j:
            return False

        self.nodes[j].data = e

        # æ‰¾åˆ°ç¬¬iä¸ªä½ç½®çš„å‰é©±
        k = 0
        for l in range(1, i):
            k = self.nodes[k].cursor

        self.nodes[j].cursor = self.nodes[k].cursor
        self.nodes[k].cursor = j

        self.length += 1
        return True

    def remove(self, i):
        """åˆ é™¤ç¬¬iä¸ªä½ç½®çš„å…ƒç´ """
        if i < 1 or i > self.length:
            return False

        # æ‰¾åˆ°ç¬¬iä¸ªä½ç½®çš„å‰é©±
        k = 0
        for j in range(1, i):
            k = self.nodes[k].cursor

        j = self.nodes[k].cursor
        self.nodes[k].cursor = self.nodes[j].cursor

        self.free_sl(j)
        self.length -= 1
        return True

    def display(self):
        """æ˜¾ç¤ºé“¾è¡¨å†…å®¹"""
        p = self.nodes[0].cursor
        result = []
        while p:
            result.append(self.nodes[p].data)
            p = self.nodes[p].cursor
        print("é“¾è¡¨å†…å®¹:", " ".join(map(str, result)))
        return result

    def get_length(self):
        return self.length

# ä½¿ç”¨ç¤ºä¾‹
if __name__ == "__main__":
    sll = StaticLinkedList()
    sll.insert(1, 'A')
    sll.insert(2, 'B')
    sll.insert(3, 'C')
    sll.display()  # è¾“å‡º: A B C

    sll.remove(2)
    sll.display()  # è¾“å‡º: A C
                    </code></pre>
                </div>
            </div>
        </div>
    </div>

    <!-- âœ… å­¦ä¹ æ£€éªŒ -->
    <div class="content-card">
        <div class="content-section">
            <h2 class="section-title">
                <span class="section-icon">âœ…</span>
                å­¦ä¹ æ£€éªŒ
            </h2>

            <div class="quiz-container">
                <div class="quiz-item">
                    <h3>ğŸ¤” æ€è€ƒé¢˜1ï¼šç©ºé—´ç®¡ç†ç†è§£</h3>
                    <p><strong>é—®é¢˜ï¼š</strong>ä¸ºä»€ä¹ˆé™æ€é“¾è¡¨éœ€è¦å¤‡ç”¨é“¾è¡¨ï¼Ÿå¦‚æœæ²¡æœ‰å¤‡ç”¨é“¾è¡¨ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p>
                    <button class="answer-btn" onclick="toggleAnswer('answer1')">ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</button>
                    <div class="answer-content" id="answer1">
                        <p><strong>ç­”æ¡ˆï¼š</strong>å¤‡ç”¨é“¾è¡¨ç”¨äºç®¡ç†ç©ºé—²çš„æ•°ç»„å…ƒç´ ï¼Œå®ç°åŠ¨æ€çš„å†…å­˜åˆ†é…å’Œå›æ”¶ã€‚</p>
                        <p><strong>è§£é‡Šï¼š</strong>æ²¡æœ‰å¤‡ç”¨é“¾è¡¨å°±æ— æ³•çŸ¥é“å“ªäº›æ•°ç»„ä½ç½®æ˜¯ç©ºé—²çš„ï¼Œæ’å…¥æ–°å…ƒç´ æ—¶ä¸çŸ¥é“å¾€å“ªé‡Œæ”¾ï¼Œåˆ é™¤å…ƒç´ åä¹Ÿæ— æ³•å›æ”¶ç©ºé—´ä¾›åç»­ä½¿ç”¨ã€‚å¤‡ç”¨é“¾è¡¨å°±åƒä¸€ä¸ª"ç©ºæˆ¿é—´ç™»è®°å†Œ"ï¼Œè®°å½•æ‰€æœ‰å¯ç”¨çš„å­˜å‚¨ç©ºé—´ã€‚</p>
                    </div>
                </div>

                <div class="quiz-item">
                    <h3>ğŸ¤” æ€è€ƒé¢˜2ï¼šæ“ä½œå¤æ‚åº¦åˆ†æ</h3>
                    <p><strong>é—®é¢˜ï¼š</strong>é™æ€é“¾è¡¨æ’å…¥æ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</p>
                    <button class="answer-btn" onclick="toggleAnswer('answer2')">ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</button>
                    <div class="answer-content" id="answer2">
                        <p><strong>ç­”æ¡ˆï¼š</strong>O(n)ï¼Œå› ä¸ºéœ€è¦éå†æ‰¾åˆ°æ’å…¥ä½ç½®çš„å‰é©±èŠ‚ç‚¹ã€‚</p>
                        <p><strong>è§£é‡Šï¼š</strong>è™½ç„¶è·å–ç©ºé—²èŠ‚ç‚¹å’Œä¿®æ”¹æ¸¸æ ‡éƒ½æ˜¯O(1)æ“ä½œï¼Œä½†è¦åœ¨ç¬¬iä¸ªä½ç½®æ’å…¥ï¼Œéœ€è¦ä»å¤´èŠ‚ç‚¹å¼€å§‹éå†i-1æ¬¡æ‰¾åˆ°å‰é©±èŠ‚ç‚¹ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯O(n)çš„ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œå¦‚æœçŸ¥é“å…·ä½“çš„æ’å…¥èŠ‚ç‚¹ä½ç½®ï¼Œæ“ä½œå¯ä»¥æ˜¯O(1)çš„ã€‚</p>
                    </div>
                </div>

                <div class="quiz-item">
                    <h3>ğŸ¤” æ€è€ƒé¢˜3ï¼šæ¸¸æ ‡å€¼çš„å«ä¹‰</h3>
                    <p><strong>é—®é¢˜ï¼š</strong>åœ¨é™æ€é“¾è¡¨ä¸­ï¼Œæ¸¸æ ‡ä¸º0è¡¨ç¤ºä»€ä¹ˆå«ä¹‰ï¼Ÿä¸ºä»€ä¹ˆé€‰æ‹©0ä½œä¸ºç»“æŸæ ‡å¿—ï¼Ÿ</p>
                    <button class="answer-btn" onclick="toggleAnswer('answer3')">ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</button>
                    <div class="answer-content" id="answer3">
                        <p><strong>ç­”æ¡ˆï¼š</strong>æ¸¸æ ‡ä¸º0è¡¨ç¤ºé“¾è¡¨ç»“æŸï¼Œç±»ä¼¼äºåŠ¨æ€é“¾è¡¨ä¸­çš„NULLæŒ‡é’ˆã€‚</p>
                        <p><strong>è§£é‡Šï¼š</strong>é€‰æ‹©0ä½œä¸ºç»“æŸæ ‡å¿—æ˜¯å› ä¸ºæ•°ç»„ä¸‹æ ‡ä»0å¼€å§‹ï¼Œè€Œä¸‹æ ‡0é€šå¸¸è¢«å¤´èŠ‚ç‚¹å ç”¨ï¼Œä¸å­˜å‚¨å®é™…æ•°æ®ã€‚æ¸¸æ ‡ä¸º0æ„å‘³ç€"ä¸æŒ‡å‘ä»»ä½•æœ‰æ•ˆçš„æ•°æ®èŠ‚ç‚¹"ï¼Œè¿™æ ·è®¾è®¡æ—¢ç®€æ´åˆæ˜“äºç†è§£ã€‚</p>
                    </div>
                </div>

                <div class="quiz-item">
                    <h3>ğŸ¤” æ€è€ƒé¢˜4ï¼šé€‚ç”¨åœºæ™¯åˆ¤æ–­</h3>
                    <p><strong>é—®é¢˜ï¼š</strong>ä»€ä¹ˆæƒ…å†µä¸‹åº”è¯¥é€‰æ‹©é™æ€é“¾è¡¨è€Œä¸æ˜¯åŠ¨æ€é“¾è¡¨ï¼Ÿ</p>
                    <button class="answer-btn" onclick="toggleAnswer('answer4')">ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</button>
                    <div class="answer-content" id="answer4">
                        <p><strong>ç­”æ¡ˆï¼š</strong>å½“éœ€è¦é¿å…åŠ¨æ€å†…å­˜åˆ†é…ã€å†…å­˜å¤§å°å¯é¢„æµ‹ã€æˆ–è€…åœ¨ä¸æ”¯æŒæŒ‡é’ˆçš„ç¯å¢ƒä¸­æ—¶ã€‚</p>
                        <p><strong>è§£é‡Šï¼š</strong>é™æ€é“¾è¡¨é€‚ç”¨äºï¼šâ‘ åµŒå…¥å¼ç³»ç»Ÿ(å†…å­˜å—é™)ï¼›â‘¡å®æ—¶ç³»ç»Ÿ(éœ€è¦å¯é¢„æµ‹çš„æ€§èƒ½)ï¼›â‘¢ä¸æ”¯æŒæŒ‡é’ˆçš„æ—©æœŸç¼–ç¨‹è¯­è¨€ï¼›â‘£éœ€è¦é¿å…å†…å­˜ç¢ç‰‡çš„åœºæ™¯ï¼›â‘¤å¯¹è±¡æ•°é‡ç›¸å¯¹å›ºå®šçš„åº”ç”¨ã€‚</p>
                    </div>
                </div>

                <div class="quiz-item">
                    <h3>ğŸ¤” æ€è€ƒé¢˜5ï¼šä¼˜åŒ–æ€è€ƒ</h3>
                    <p><strong>é—®é¢˜ï¼š</strong>å¦‚ä½•ä¼˜åŒ–é™æ€é“¾è¡¨çš„æŸ¥æ‰¾æ“ä½œï¼Ÿèƒ½å¦åƒæ•°ç»„ä¸€æ ·å®ç°O(1)çš„éšæœºè®¿é—®ï¼Ÿ</p>
                    <button class="answer-btn" onclick="toggleAnswer('answer5')">ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</button>
                    <div class="answer-content" id="answer5">
                        <p><strong>ç­”æ¡ˆï¼š</strong>å¯ä»¥é€šè¿‡ç»´æŠ¤é¢å¤–çš„ç´¢å¼•è¡¨å®ç°å¿«é€Ÿè®¿é—®ï¼Œä½†è¿™ä¼šå¢åŠ ç©ºé—´å¤æ‚åº¦ã€‚</p>
                        <p><strong>è§£é‡Šï¼š</strong>ä¼ ç»Ÿé™æ€é“¾è¡¨æŒ‰é€»è¾‘é¡ºåºè®¿é—®æ˜¯O(n)çš„ï¼Œä½†å¯ä»¥ä¼˜åŒ–ï¼šâ‘ ç»´æŠ¤ä¸€ä¸ªç´¢å¼•æ•°ç»„ï¼Œè®°å½•æ¯ä¸ªé€»è¾‘ä½ç½®å¯¹åº”çš„ç‰©ç†ä¸‹æ ‡ï¼›â‘¡ä½¿ç”¨è·³è¡¨çš„æ€æƒ³ï¼Œè®¾ç½®å¤šçº§ç´¢å¼•ï¼›â‘¢å¯¹äºç‰¹å®šåº”ç”¨ï¼Œå¯ä»¥æŒ‰ç…§è®¿é—®é¢‘ç‡é‡æ–°æ’åˆ—ç‰©ç†å­˜å‚¨ã€‚ä½†è¿™äº›ä¼˜åŒ–éƒ½ä¼šç‰ºç‰²ç©ºé—´æˆ–å¢åŠ ç»´æŠ¤å¤æ‚åº¦ã€‚</p>
                    </div>
                </div>
            </div>

            <!-- è¿›é˜¶å­¦ä¹ å»ºè®® -->
            <div class="learning-progress">
                <h3>ğŸ“š è¿›é˜¶å­¦ä¹ è·¯å¾„</h3>
                <div class="progress-steps">
                    <div class="progress-step completed">
                        <span class="step-number">1</span>
                        <div class="step-content">
                            <h4>é™æ€é“¾è¡¨åŸºç¡€</h4>
                            <p>æŒæ¡æ•°ç»„æ¨¡æ‹Ÿé“¾è¡¨çš„åŸç†</p>
                        </div>
                    </div>
                    <div class="progress-step next">
                        <span class="step-number">2</span>
                        <div class="step-content">
                            <h4>å†…å­˜æ± æŠ€æœ¯</h4>
                            <p>å­¦ä¹ å†…å­˜æ± å’Œå¯¹è±¡æ± è®¾è®¡</p>
                        </div>
                    </div>
                    <div class="progress-step">
                        <span class="step-number">3</span>
                        <div class="step-content">
                            <h4>ç¼“å­˜å‹å¥½æ•°æ®ç»“æ„</h4>
                            <p>B+æ ‘ã€è·³è¡¨ç­‰ç»“æ„</p>
                        </div>
                    </div>
                    <div class="progress-step">
                        <span class="step-number">4</span>
                        <div class="step-content">
                            <h4>ç³»ç»Ÿçº§ä¼˜åŒ–</h4>
                            <p>åµŒå…¥å¼ã€å®æ—¶ç³»ç»Ÿåº”ç”¨</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- å¯¼èˆªæŒ‰é’® -->
    <div style="text-align: center; margin-top: 40px;">
        <a href="{% url 'knowledge_app:index' %}" class="unified-btn unified-btn-primary">
            <span>ğŸ </span>
            è¿”å›é¦–é¡µ
        </a>
        <a href="{% url 'knowledge_app:cs_universe' %}" class="unified-btn unified-btn-secondary">
            <span>ğŸŒŒ</span>
            æ¢ç´¢CSå®‡å®™
        </a>
    </div>
</div>

<!-- CSSæ ·å¼ -->
<style>
.overview-content {
    margin-top: 20px;
}

.concept-intro {
    background: linear-gradient(135deg, #e3f2fd, #f3e5f5);
    padding: 20px;
    border-radius: 10px;
    margin-bottom: 20px;
    border-left: 4px solid #2196F3;
}

.badge {
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: bold;
    color: white;
}

.badge-medium {
    background: #FF9800;
}

.concept-details {
    margin-top: 20px;
}

.concept-item {
    margin-bottom: 30px;
    padding: 20px;
    background: #fafafa;
    border-radius: 8px;
    border-left: 4px solid #4CAF50;
}

.comparison-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 15px;
}

.comparison-card {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    overflow: hidden;
}

.comparison-card h4 {
    background: linear-gradient(135deg, #4CAF50, #66BB6A);
    color: white;
    margin: 0;
    padding: 15px;
    text-align: center;
}

.pros-cons {
    padding: 15px;
}

.pros h5 {
    color: #4CAF50;
    margin: 0 0 8px 0;
}

.cons h5 {
    color: #f44336;
    margin: 15px 0 8px 0;
}

.pros-cons ul {
    margin: 0;
    padding-left: 20px;
    font-size: 14px;
}

.pros-cons li {
    margin-bottom: 4px;
}

.key-points {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 15px;
    margin-top: 15px;
}

.point-card {
    background: white;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    border-left: 4px solid #FF5722;
    display: flex;
    align-items: flex-start;
    gap: 12px;
}

.point-icon {
    font-size: 1.5em;
    flex-shrink: 0;
}

.point-card h4 {
    margin: 0 0 8px 0;
    color: #333;
    font-size: 16px;
}

.point-card p {
    margin: 0;
    color: #666;
    font-size: 14px;
    line-height: 1.4;
}

.visualization-container {
    margin-top: 20px;
}

.static-diagram {
    text-align: center;
    margin: 20px 0;
    padding: 20px;
    background: #f9f9f9;
    border-radius: 8px;
}

.array-visualization {
    max-width: 600px;
    margin: 0 auto;
    background: white;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.array-header {
    display: grid;
    grid-template-columns: 80px 1fr 80px;
    background: #333;
    color: white;
    font-weight: bold;
    padding: 10px;
}

.array-row {
    display: grid;
    grid-template-columns: 80px 1fr 80px;
    border-bottom: 1px solid #eee;
    align-items: center;
}

.array-row:last-child {
    border-bottom: none;
}

.index, .data, .cursor {
    padding: 12px;
    text-align: center;
}

.index {
    background: #f5f5f5;
    font-weight: bold;
    border-right: 1px solid #ddd;
}

.cursor {
    background: #f5f5f5;
    font-weight: bold;
    border-left: 1px solid #ddd;
}

.header-row {
    background: linear-gradient(135deg, #2196F3, #21CBF3);
    color: white;
}

.active-row {
    background: linear-gradient(135deg, #4CAF50, #66BB6A);
    color: white;
}

.free-row {
    background: linear-gradient(135deg, #FF9800, #FFB74D);
    color: white;
}

.legend {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 20px;
    margin-top: 20px;
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
}

.legend-color {
    width: 20px;
    height: 20px;
    border-radius: 4px;
    border: 1px solid #ddd;
}

.header-color {
    background: linear-gradient(135deg, #2196F3, #21CBF3);
}

.active-color {
    background: linear-gradient(135deg, #4CAF50, #66BB6A);
}

.free-color {
    background: linear-gradient(135deg, #FF9800, #FFB74D);
}

.legend-cursor {
    background: #f5f5f5;
    padding: 4px 8px;
    border-radius: 4px;
    border: 1px solid #ddd;
    font-weight: bold;
    font-family: monospace;
}

.logical-chain {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    gap: 10px;
    padding: 20px;
    background: white;
    border-radius: 8px;
    margin: 20px 0;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.chain-node {
    background: linear-gradient(135deg, #4CAF50, #66BB6A);
    color: white;
    padding: 12px;
    border-radius: 8px;
    text-align: center;
    min-width: 60px;
    font-weight: bold;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

.node-content {
    font-size: 18px;
    margin-bottom: 4px;
}

.node-index {
    font-size: 12px;
    opacity: 0.8;
}

.arrow {
    font-size: 20px;
    font-weight: bold;
    color: #666;
}

.null-node {
    background: #757575;
    color: white;
    padding: 12px;
    border-radius: 8px;
    font-weight: bold;
}

.animation-controls {
    margin: 20px 0;
    text-align: center;
}

.control-panel {
    margin-bottom: 15px;
}

.control-panel button,
.control-panel input {
    margin: 5px;
}

#insertValue {
    width: 100px;
}

#insertPosition,
#deletePosition {
    width: 80px;
}

.control-panel input {
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 4px;
}

.step-info {
    padding: 10px;
    background: #e3f2fd;
    border-radius: 4px;
    margin-bottom: 15px;
    font-weight: bold;
}

.canvas-container {
    text-align: center;
    background: white;
    border: 2px solid #ddd;
    border-radius: 8px;
    padding: 10px;
    margin: 15px 0;
}

#staticListCanvas {
    border: 1px solid #eee;
    border-radius: 4px;
}

.operation-steps {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 15px;
    margin-top: 20px;
}

.step-card {
    background: white;
    padding: 15px;
    border-radius: 8px;
    border-left: 4px solid #2196F3;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.step-card h4 {
    margin-top: 0;
    color: #1976D2;
}

.step-card ol {
    margin: 10px 0 0 20px;
}

.applications {
    margin-top: 20px;
}

.application-item {
    margin-bottom: 20px;
    padding: 15px;
    background: #f8f9fa;
    border-radius: 8px;
    border-left: 4px solid #FF5722;
}

.code-examples {
    margin-top: 30px;
}

.code-tabs {
    display: flex;
    margin-bottom: 0;
    border-bottom: 2px solid #e0e0e0;
}

.tab-btn {
    padding: 12px 24px;
    background: #f5f5f5;
    border: none;
    border-bottom: 2px solid transparent;
    cursor: pointer;
    font-weight: bold;
    transition: all 0.2s;
}

.tab-btn.active {
    background: #2196F3;
    color: white;
    border-bottom-color: #2196F3;
}

.code-content {
    display: none;
    background: #1e1e1e;
    border-radius: 0 0 8px 8px;
    overflow: hidden;
}

.code-content.active {
    display: block;
}

.code-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 15px;
    background: #333;
    color: white;
    font-size: 14px;
}

.copy-btn {
    background: #4CAF50;
    color: white;
    border: none;
    padding: 5px 10px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 12px;
    transition: background 0.2s;
}

.copy-btn:hover {
    background: #45a049;
}

pre {
    margin: 0;
    overflow-x: auto;
}

code {
    color: #f8f8f2;
    font-family: 'Monaco', 'Consolas', monospace;
    font-size: 14px;
    line-height: 1.5;
    display: block;
    padding: 20px;
}

.quiz-container {
    margin-top: 20px;
}

.quiz-item {
    margin-bottom: 25px;
    padding: 20px;
    background: white;
    border-radius: 8px;
    border: 1px solid #e0e0e0;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

.quiz-item h3 {
    color: #1976D2;
    margin-top: 0;
}

.answer-btn {
    background: #4CAF50;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    margin: 10px 0;
    font-weight: bold;
    transition: background 0.2s;
}

.answer-btn:hover {
    background: #45a049;
}

.answer-content {
    display: none;
    margin-top: 15px;
    padding: 15px;
    background: #e8f5e8;
    border-radius: 5px;
    border-left: 4px solid #4CAF50;
}

.answer-content.show {
    display: block;
    animation: fadeIn 0.3s ease-in;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
}

.learning-progress {
    margin-top: 30px;
    padding: 20px;
    background: linear-gradient(135deg, #e3f2fd, #f3e5f5);
    border-radius: 10px;
}

.progress-steps {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

.progress-step {
    display: flex;
    align-items: center;
    padding: 15px;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    opacity: 0.6;
    transition: all 0.3s;
}

.progress-step.completed {
    opacity: 1;
    border-left: 4px solid #4CAF50;
}

.progress-step.next {
    opacity: 1;
    border-left: 4px solid #FF9800;
    transform: scale(1.05);
}

.step-number {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 30px;
    height: 30px;
    background: #e0e0e0;
    color: white;
    border-radius: 50%;
    margin-right: 15px;
    font-weight: bold;
}

.progress-step.completed .step-number {
    background: #4CAF50;
}

.progress-step.next .step-number {
    background: #FF9800;
}

.step-content h4 {
    margin: 0 0 5px 0;
    color: #333;
}

.step-content p {
    margin: 0;
    color: #666;
    font-size: 14px;
}

@media (max-width: 768px) {
    .comparison-grid {
        grid-template-columns: 1fr;
    }

    .key-points {
        grid-template-columns: 1fr;
    }

    .operation-steps {
        grid-template-columns: 1fr;
    }

    .progress-steps {
        grid-template-columns: 1fr;
    }

    .code-tabs {
        flex-wrap: wrap;
    }

    .tab-btn {
        flex: 1;
        min-width: 80px;
    }

    .logical-chain {
        flex-direction: column;
    }

    .arrow {
        transform: rotate(90deg);
    }

    .array-header,
    .array-row {
        grid-template-columns: 60px 1fr 60px;
    }
}
</style>

<!-- JavaScript -->
<script>
// é™æ€é“¾è¡¨åŠ¨ç”»ç›¸å…³å˜é‡
let canvas, ctx;
let staticList = [];
let freeList = [];
let animationStep = 0;
let currentOperation = '';
let animationInProgress = false;

// åˆå§‹åŒ–é™æ€é“¾è¡¨æ¼”ç¤º
document.addEventListener('DOMContentLoaded', function() {
    canvas = document.getElementById('staticListCanvas');
    ctx = canvas.getContext('2d');

    // åˆå§‹åŒ–ä¸€ä¸ªç¤ºä¾‹é™æ€é“¾è¡¨
    initializeSampleList();
    drawStaticList();

    // ç»‘å®šäº‹ä»¶
    document.getElementById('insertBtn').addEventListener('click', () => {
        if (animationInProgress) return;

        const value = document.getElementById('insertValue').value.trim();
        const position = parseInt(document.getElementById('insertPosition').value);

        if (!value) {
            alert('è¯·è¾“å…¥è¦æ’å…¥çš„å­—ç¬¦');
            return;
        }
        if (!position || position < 1) {
            alert('è¯·è¾“å…¥æœ‰æ•ˆçš„æ’å…¥ä½ç½®ï¼ˆâ‰¥1ï¼‰');
            return;
        }

        startAnimation('insert', value, position);
    });

    document.getElementById('deleteBtn').addEventListener('click', () => {
        if (animationInProgress) return;

        const position = parseInt(document.getElementById('deletePosition').value);

        if (!position || position < 1) {
            alert('è¯·è¾“å…¥æœ‰æ•ˆçš„åˆ é™¤ä½ç½®ï¼ˆâ‰¥1ï¼‰');
            return;
        }

        startAnimation('delete', null, position);
    });

    document.getElementById('resetBtn').addEventListener('click', () => {
        if (animationInProgress) return;

        staticList = [];
        freeList = [];
        animationStep = 0;
        document.getElementById('stepInfo').textContent = 'å·²é‡ç½®ï¼Œç‚¹å‡»æ“ä½œæŒ‰é’®å¼€å§‹æ¼”ç¤º';
        initializeSampleList();
        drawStaticList();
    });
});

// åˆå§‹åŒ–ç¤ºä¾‹é™æ€é“¾è¡¨
function initializeSampleList() {
    // åˆ›å»ºå¤§å°ä¸º8çš„æ•°ç»„
    staticList = new Array(8);
    for (let i = 0; i < 8; i++) {
        staticList[i] = { data: null, cursor: 0, used: false };
    }

    // è®¾ç½®å¤´èŠ‚ç‚¹
    staticList[0] = { data: 'HEAD', cursor: 1, used: true };

    // è®¾ç½®æ•°æ®èŠ‚ç‚¹
    staticList[1] = { data: 'A', cursor: 3, used: true };
    staticList[3] = { data: 'B', cursor: 5, used: true };
    staticList[5] = { data: 'C', cursor: 0, used: true };

    // è®¾ç½®å¤‡ç”¨é“¾è¡¨ï¼š2->4->6->7->0
    staticList[2] = { data: null, cursor: 4, used: false };
    staticList[4] = { data: null, cursor: 6, used: false };
    staticList[6] = { data: null, cursor: 7, used: false };
    staticList[7] = { data: null, cursor: 0, used: false };

    // å¤‡ç”¨é“¾è¡¨å¤´æŒ‡é’ˆï¼ˆåœ¨å®é™…å®ç°ä¸­é€šå¸¸å•ç‹¬ç»´æŠ¤ï¼‰
    freeList = [2, 4, 6, 7];
}

// ç»˜åˆ¶é™æ€é“¾è¡¨
function drawStaticList() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    const startX = 50;
    const startY = 50;
    const cellWidth = 100;
    const cellHeight = 60;
    const spacing = 10;

    // ç»˜åˆ¶æ•°ç»„ç»“æ„
    for (let i = 0; i < staticList.length; i++) {
        const x = startX + i * (cellWidth + spacing);
        const y = startY;

        drawCell(x, y, cellWidth, cellHeight, i, staticList[i]);
    }

    // ç»˜åˆ¶é€»è¾‘é“¾è¡¨æŒ‡å‘å…³ç³»
    drawLogicalConnections();

    // ç»˜åˆ¶å¤‡ç”¨é“¾è¡¨
    drawFreeListConnections();

    // ç»˜åˆ¶è¯´æ˜
    drawLegend();
}

// ç»˜åˆ¶å•ä¸ªæ•°ç»„å…ƒç´ 
function drawCell(x, y, width, height, index, node) {
    // æ ¹æ®èŠ‚ç‚¹çŠ¶æ€é€‰æ‹©é¢œè‰²
    let bgColor, textColor, borderColor;

    if (index === 0) {
        // å¤´èŠ‚ç‚¹
        bgColor = '#2196F3';
        textColor = 'white';
        borderColor = '#1976D2';
    } else if (node.used) {
        // ä½¿ç”¨ä¸­çš„èŠ‚ç‚¹
        bgColor = '#4CAF50';
        textColor = 'white';
        borderColor = '#388E3C';
    } else {
        // ç©ºé—²èŠ‚ç‚¹
        bgColor = '#FF9800';
        textColor = 'white';
        borderColor = '#F57C00';
    }

    // ç»˜åˆ¶å¤–æ¡†
    ctx.fillStyle = bgColor;
    ctx.fillRect(x, y, width, height);
    ctx.strokeStyle = borderColor;
    ctx.lineWidth = 2;
    ctx.strokeRect(x, y, width, height);

    // ç»˜åˆ¶åˆ†å‰²çº¿
    ctx.beginPath();
    ctx.moveTo(x, y + height/2);
    ctx.lineTo(x + width, y + height/2);
    ctx.stroke();

    // ç»˜åˆ¶ç´¢å¼•
    ctx.fillStyle = '#333';
    ctx.font = 'bold 12px Arial';
    ctx.textAlign = 'center';
    ctx.fillText(`[${index}]`, x + width/2, y - 10);

    // ç»˜åˆ¶æ•°æ®åŸŸ
    ctx.fillStyle = textColor;
    ctx.font = 'bold 16px Arial';
    ctx.textAlign = 'center';
    const dataText = node.data || (node.used ? '?' : '-');
    ctx.fillText(dataText, x + width/2, y + height/4 + 5);

    // ç»˜åˆ¶æ¸¸æ ‡åŸŸ
    ctx.fillText(node.cursor.toString(), x + width/2, y + 3*height/4 + 5);

    // æ·»åŠ æ ‡ç­¾
    ctx.fillStyle = '#666';
    ctx.font = '10px Arial';
    ctx.fillText('æ•°æ®', x + width/4, y + height/4 - 8);
    ctx.fillText('æ¸¸æ ‡', x + 3*width/4, y + 3*height/4 - 8);
}

// ç»˜åˆ¶é€»è¾‘é“¾è¡¨è¿æ¥
function drawLogicalConnections() {
    ctx.strokeStyle = '#4CAF50';
    ctx.lineWidth = 3;

    let current = 0;
    const startY = 50;
    const cellWidth = 100;
    const cellHeight = 60;
    const spacing = 10;

    while (staticList[current] && staticList[current].cursor !== 0) {
        const next = staticList[current].cursor;

        const currentX = 50 + current * (cellWidth + spacing) + cellWidth/2;
        const nextX = 50 + next * (cellWidth + spacing) + cellWidth/2;
        const arrowY = startY + cellHeight + 20;

        // ç»˜åˆ¶ç®­å¤´
        drawArrow(currentX, arrowY, nextX, arrowY, '#4CAF50');

        current = next;
    }
}

// ç»˜åˆ¶å¤‡ç”¨é“¾è¡¨è¿æ¥
function drawFreeListConnections() {
    ctx.strokeStyle = '#FF9800';
    ctx.lineWidth = 2;
    ctx.setLineDash([5, 5]);

    const startY = 50;
    const cellWidth = 100;
    const cellHeight = 60;
    const spacing = 10;

    // ç»˜åˆ¶å¤‡ç”¨é“¾è¡¨çš„è¿æ¥
    for (let i = 0; i < staticList.length; i++) {
        if (!staticList[i].used && staticList[i].cursor !== 0) {
            const next = staticList[i].cursor;

            const currentX = 50 + i * (cellWidth + spacing) + cellWidth/2;
            const nextX = 50 + next * (cellWidth + spacing) + cellWidth/2;
            const arrowY = startY + cellHeight + 40;

            drawArrow(currentX, arrowY, nextX, arrowY, '#FF9800', true);
        }
    }

    ctx.setLineDash([]);
}

// ç»˜åˆ¶ç®­å¤´
function drawArrow(x1, y1, x2, y2, color, dashed = false) {
    ctx.strokeStyle = color;
    ctx.fillStyle = color;

    if (dashed) {
        ctx.setLineDash([5, 5]);
    }

    // ç»˜åˆ¶çº¿æ¡
    ctx.beginPath();
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.stroke();

    // ç»˜åˆ¶ç®­å¤´å¤´éƒ¨
    const angle = Math.atan2(y2 - y1, x2 - x1);
    const headlen = 10;

    ctx.beginPath();
    ctx.moveTo(x2, y2);
    ctx.lineTo(x2 - headlen * Math.cos(angle - Math.PI/6), y2 - headlen * Math.sin(angle - Math.PI/6));
    ctx.moveTo(x2, y2);
    ctx.lineTo(x2 - headlen * Math.cos(angle + Math.PI/6), y2 - headlen * Math.sin(angle + Math.PI/6));
    ctx.stroke();

    if (dashed) {
        ctx.setLineDash([]);
    }
}

// ç»˜åˆ¶å›¾ä¾‹
function drawLegend() {
    const legendY = canvas.height - 100;

    ctx.fillStyle = '#333';
    ctx.font = 'bold 14px Arial';
    ctx.textAlign = 'left';
    ctx.fillText('å›¾ä¾‹è¯´æ˜:', 20, legendY);

    ctx.font = '12px Arial';

    // å¤´èŠ‚ç‚¹
    ctx.fillStyle = '#2196F3';
    ctx.fillRect(20, legendY + 10, 20, 15);
    ctx.fillStyle = '#333';
    ctx.fillText('å¤´èŠ‚ç‚¹', 50, legendY + 22);

    // ä½¿ç”¨ä¸­èŠ‚ç‚¹
    ctx.fillStyle = '#4CAF50';
    ctx.fillRect(120, legendY + 10, 20, 15);
    ctx.fillStyle = '#333';
    ctx.fillText('ä½¿ç”¨ä¸­çš„èŠ‚ç‚¹', 150, legendY + 22);

    // ç©ºé—²èŠ‚ç‚¹
    ctx.fillStyle = '#FF9800';
    ctx.fillRect(250, legendY + 10, 20, 15);
    ctx.fillStyle = '#333';
    ctx.fillText('ç©ºé—²èŠ‚ç‚¹', 280, legendY + 22);

    // é€»è¾‘é“¾è¡¨
    ctx.strokeStyle = '#4CAF50';
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.moveTo(20, legendY + 40);
    ctx.lineTo(60, legendY + 40);
    ctx.stroke();
    drawArrow(60, legendY + 40, 60, legendY + 40, '#4CAF50');
    ctx.fillStyle = '#333';
    ctx.fillText('é€»è¾‘é“¾è¡¨è¿æ¥', 70, legendY + 45);

    // å¤‡ç”¨é“¾è¡¨
    ctx.strokeStyle = '#FF9800';
    ctx.lineWidth = 2;
    ctx.setLineDash([5, 5]);
    ctx.beginPath();
    ctx.moveTo(200, legendY + 40);
    ctx.lineTo(240, legendY + 40);
    ctx.stroke();
    ctx.setLineDash([]);
    drawArrow(240, legendY + 40, 240, legendY + 40, '#FF9800');
    ctx.fillStyle = '#333';
    ctx.fillText('å¤‡ç”¨é“¾è¡¨è¿æ¥', 250, legendY + 45);
}

// å¼€å§‹åŠ¨ç”»
function startAnimation(operation, value, position) {
    if (animationInProgress) return;

    animationInProgress = true;
    currentOperation = operation;
    animationStep = 0;

    if (operation === 'insert') {
        animateInsert(value, position);
    } else if (operation === 'delete') {
        animateDelete(position);
    }
}

// æ’å…¥åŠ¨ç”»
function animateInsert(value, position) {
    let step = 1;

    // æ£€æŸ¥ä½ç½®æ˜¯å¦åˆç†
    const currentLength = getListLength();
    if (position > currentLength + 1) {
        document.getElementById('stepInfo').textContent = `é”™è¯¯ï¼šä½ç½® ${position} è¶…å‡ºèŒƒå›´ï¼ˆå½“å‰é•¿åº¦ï¼š${currentLength}ï¼‰`;
        animationInProgress = false;
        return;
    }

    // æ£€æŸ¥æ˜¯å¦æœ‰ç©ºé—²èŠ‚ç‚¹
    const freeNodeIndex = getFreeNode();
    if (freeNodeIndex === -1) {
        document.getElementById('stepInfo').textContent = 'é”™è¯¯ï¼šæ²¡æœ‰å¯ç”¨çš„ç©ºé—²èŠ‚ç‚¹';
        animationInProgress = false;
        return;
    }

    document.getElementById('stepInfo').textContent = `æ­¥éª¤${step}: ä»å¤‡ç”¨é“¾è¡¨è·å–ç©ºé—²èŠ‚ç‚¹ [${freeNodeIndex}]`;

    // é«˜äº®ç©ºé—²èŠ‚ç‚¹
    highlightNode(freeNodeIndex, '#FFD700');

    setTimeout(() => {
        step++;
        document.getElementById('stepInfo').textContent = `æ­¥éª¤${step}: åœ¨èŠ‚ç‚¹ [${freeNodeIndex}] ä¸­å­˜å…¥æ•°æ® '${value}'`;

        // ä¿®æ”¹èŠ‚ç‚¹æ•°æ®
        staticList[freeNodeIndex].data = value;
        staticList[freeNodeIndex].used = true;
        drawStaticList();
        highlightNode(freeNodeIndex, '#FFD700');

        setTimeout(() => {
            step++;
            document.getElementById('stepInfo').textContent = `æ­¥éª¤${step}: å¯»æ‰¾æ’å…¥ä½ç½® ${position} çš„å‰é©±èŠ‚ç‚¹`;

            // æ‰¾åˆ°å‰é©±èŠ‚ç‚¹
            let prevIndex = 0;
            for (let i = 1; i < position; i++) {
                prevIndex = staticList[prevIndex].cursor;
            }

            highlightNode(prevIndex, '#FF5722');

            setTimeout(() => {
                step++;
                document.getElementById('stepInfo').textContent = `æ­¥éª¤${step}: ä¿®æ”¹æ¸¸æ ‡å»ºç«‹æ–°çš„é“¾æ¥å…³ç³»`;

                // ä¿®æ”¹æ¸¸æ ‡
                const nextIndex = staticList[prevIndex].cursor;
                staticList[freeNodeIndex].cursor = nextIndex;
                staticList[prevIndex].cursor = freeNodeIndex;

                drawStaticList();

                setTimeout(() => {
                    step++;
                    document.getElementById('stepInfo').textContent = `æ­¥éª¤${step}: æ’å…¥å®Œæˆï¼æ–°å…ƒç´  '${value}' å·²æ’å…¥åˆ°ä½ç½® ${position}`;
                    animationInProgress = false;
                }, 1500);
            }, 1500);
        }, 1500);
    }, 1500);
}

// åˆ é™¤åŠ¨ç”»
function animateDelete(position) {
    let step = 1;

    // æ£€æŸ¥ä½ç½®æ˜¯å¦åˆç†
    const currentLength = getListLength();
    if (position > currentLength || position < 1) {
        document.getElementById('stepInfo').textContent = `é”™è¯¯ï¼šä½ç½® ${position} è¶…å‡ºèŒƒå›´ï¼ˆå½“å‰é•¿åº¦ï¼š${currentLength}ï¼‰`;
        animationInProgress = false;
        return;
    }

    document.getElementById('stepInfo').textContent = `æ­¥éª¤${step}: å¯»æ‰¾è¦åˆ é™¤ä½ç½® ${position} çš„å‰é©±èŠ‚ç‚¹`;

    // æ‰¾åˆ°å‰é©±èŠ‚ç‚¹å’Œè¦åˆ é™¤çš„èŠ‚ç‚¹
    let prevIndex = 0;
    for (let i = 1; i < position; i++) {
        prevIndex = staticList[prevIndex].cursor;
    }
    const deleteIndex = staticList[prevIndex].cursor;

    highlightNode(prevIndex, '#FF5722');
    highlightNode(deleteIndex, '#f44336');

    setTimeout(() => {
        step++;
        document.getElementById('stepInfo').textContent = `æ­¥éª¤${step}: ä¿®æ”¹å‰é©±èŠ‚ç‚¹æ¸¸æ ‡ï¼Œè·³è¿‡è¦åˆ é™¤çš„èŠ‚ç‚¹`;

        // ä¿®æ”¹å‰é©±èŠ‚ç‚¹çš„æ¸¸æ ‡
        staticList[prevIndex].cursor = staticList[deleteIndex].cursor;
        drawStaticList();
        highlightNode(deleteIndex, '#f44336');

        setTimeout(() => {
            step++;
            document.getElementById('stepInfo').textContent = `æ­¥éª¤${step}: æ¸…ç©ºè¢«åˆ é™¤èŠ‚ç‚¹çš„æ•°æ®`;

            // æ¸…ç©ºèŠ‚ç‚¹æ•°æ®
            staticList[deleteIndex].data = null;
            staticList[deleteIndex].used = false;
            drawStaticList();
            highlightNode(deleteIndex, '#FFD700');

            setTimeout(() => {
                step++;
                document.getElementById('stepInfo').textContent = `æ­¥éª¤${step}: å°†åˆ é™¤çš„èŠ‚ç‚¹åŠ å…¥å¤‡ç”¨é“¾è¡¨`;

                // å°†èŠ‚ç‚¹åŠ å…¥å¤‡ç”¨é“¾è¡¨ï¼ˆç®€åŒ–å¤„ç†ï¼Œå®é™…åº”è¯¥åŠ åˆ°å¤‡ç”¨é“¾è¡¨å¤´éƒ¨ï¼‰
                staticList[deleteIndex].cursor = 0;
                drawStaticList();

                setTimeout(() => {
                    step++;
                    document.getElementById('stepInfo').textContent = `æ­¥éª¤${step}: åˆ é™¤å®Œæˆï¼ä½ç½® ${position} çš„å…ƒç´ å·²è¢«åˆ é™¤`;
                    animationInProgress = false;
                }, 1500);
            }, 1500);
        }, 1500);
    }, 1500);
}

// è·å–ç©ºé—²èŠ‚ç‚¹
function getFreeNode() {
    for (let i = 1; i < staticList.length; i++) {
        if (!staticList[i].used) {
            return i;
        }
    }
    return -1;
}

// è·å–é“¾è¡¨é•¿åº¦
function getListLength() {
    let length = 0;
    let current = staticList[0].cursor;
    while (current !== 0) {
        length++;
        current = staticList[current].cursor;
    }
    return length;
}

// é«˜äº®èŠ‚ç‚¹
function highlightNode(index, color) {
    const startX = 50;
    const cellWidth = 100;
    const cellHeight = 60;
    const spacing = 10;

    const x = startX + index * (cellWidth + spacing);
    const y = 50;

    ctx.strokeStyle = color;
    ctx.lineWidth = 4;
    ctx.strokeRect(x - 2, y - 2, cellWidth + 4, cellHeight + 4);
}

// ä»£ç æ ‡ç­¾é¡µåˆ‡æ¢
document.querySelectorAll('.tab-btn').forEach(btn => {
    btn.addEventListener('click', function() {
        // ç§»é™¤æ‰€æœ‰activeç±»
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.code-content').forEach(c => c.classList.remove('active'));

        // æ·»åŠ activeç±»åˆ°å½“å‰æ ‡ç­¾
        this.classList.add('active');
        const lang = this.getAttribute('data-lang');
        document.querySelector(`.code-content[data-lang="${lang}"]`).classList.add('active');
    });
});

// å¤åˆ¶ä»£ç åŠŸèƒ½
document.querySelectorAll('.copy-btn').forEach(btn => {
    btn.addEventListener('click', function() {
        const targetId = this.getAttribute('data-clipboard-target');
        const codeElement = document.getElementById(targetId);

        if (codeElement) {
            // åˆ›å»ºä¸´æ—¶æ–‡æœ¬åŒºåŸŸ
            const textarea = document.createElement('textarea');
            textarea.value = codeElement.textContent;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);

            // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæç¤º
            const originalText = this.textContent;
            this.textContent = 'âœ… å·²å¤åˆ¶';
            setTimeout(() => {
                this.textContent = originalText;
            }, 2000);
        }
    });
});

// ç­”æ¡ˆåˆ‡æ¢åŠŸèƒ½
function toggleAnswer(answerId) {
    const answerElement = document.getElementById(answerId);
    const button = answerElement.previousElementSibling;

    if (answerElement.classList.contains('show')) {
        answerElement.classList.remove('show');
        button.textContent = 'ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ';
    } else {
        answerElement.classList.add('show');
        button.textContent = 'éšè—ç­”æ¡ˆ';
    }
}
</script>

{% endblock %}