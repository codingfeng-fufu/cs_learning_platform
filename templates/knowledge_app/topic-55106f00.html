{% extends 'knowledge_app/base.html' %}

{% block title %}æ ˆâ€”â€”å¡ç‰¹å…°æ•° - è®¡ç®—æœºç§‘å­¦å­¦ä¹ å¹³å°{% endblock %}

{% block content %}
<!-- æ·»åŠ MathJaxæ”¯æŒ --><script></script><script>MathJax = { tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$', '$$'], ['\\[', '\\]']] } };</script><div class="page-container fade-in"><!-- é¢åŒ…å±‘å¯¼èˆª --><div class="breadcrumb"><a href="{% url 'knowledge_app:index' %}">é¦–é¡µ</a><span>></span><span>æ•°æ®ç»“æ„</span><span>></span><span>æ ˆâ€”â€”å¡ç‰¹å…°æ•°</span></div><!-- é¡µé¢å¤´éƒ¨ --><div class="page-header slide-in-left"><h1><span class="page-icon">ğŸ“Š</span>
            æ ˆâ€”â€”å¡ç‰¹å…°æ•°
        </h1><p>æ¢ç´¢æ ˆæ“ä½œåºåˆ—çš„æ•°å­¦å¥¥ç§˜ï¼Œç†è§£ç»„åˆæ•°å­¦åœ¨è®¡ç®—æœºç§‘å­¦ä¸­çš„ç¾å¦™åº”ç”¨</p></div><!-- ğŸ“‹ çŸ¥è¯†ç‚¹æ¦‚è¿° --><div class="content-card slide-in-right"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ“‹</span>
                çŸ¥è¯†ç‚¹æ¦‚è¿°
            </h2><div class="info-box info-box-info"><span class="info-icon">ğŸ¯</span><strong>æ ¸å¿ƒæ¦‚å¿µï¼š</strong>å¡ç‰¹å…°æ•°æè¿°äº†$n$ä¸ªå…ƒç´ è¿›æ ˆåèƒ½äº§ç”Ÿå¤šå°‘ç§ä¸åŒçš„å‡ºæ ˆåºåˆ—ï¼Œæ­ç¤ºäº†æ ˆæ“ä½œä¸ç»„åˆæ•°å­¦çš„æ·±å±‚è”ç³»ã€‚
            </div><div class="unified-grid unified-grid-2"><div class="grid-card"><span class="card-icon">ğŸ“š</span><h4 class="card-title">å…³é”®æœ¯è¯­</h4><ul style="text-align: left; margin: 10px 0;"><li><strong>å¡ç‰¹å…°æ•°ï¼š</strong>$C_n = \frac{1}{n+1}\binom{2n}{n}$</li><li><strong>å‡ºæ ˆåºåˆ—ï¼š</strong>å…ƒç´ ä»æ ˆä¸­å¼¹å‡ºçš„é¡ºåº</li><li><strong>åˆæ³•åºåˆ—ï¼š</strong>ç¬¦åˆæ ˆLIFOåŸåˆ™çš„å‡ºæ ˆåºåˆ—</li><li><strong>é€’æ¨å…¬å¼ï¼š</strong>$C_n = \sum_{i=0}^{n-1} C_i \cdot C_{n-1-i}$</li><li><strong>ç”Ÿæˆå‡½æ•°ï¼š</strong>ç”¨äºè®¡ç®—å¡ç‰¹å…°æ•°çš„æ•°å­¦å·¥å…·</li><li><strong>äºŒå‰æ ‘è®¡æ•°ï¼š</strong>$n$ä¸ªèŠ‚ç‚¹çš„äºŒå‰æ ‘å½¢æ€æ•°</li></ul></div><div class="grid-card"><span class="card-icon">ğŸ“Š</span><h4 class="card-title">å­¦ä¹ æŒ‡æ ‡</h4><div style="text-align: left;"><p><strong>éš¾åº¦ç­‰çº§ï¼š</strong><span style="color: #dc3545;">é«˜çº§</span></p><p><strong>å‰ç½®çŸ¥è¯†ï¼š</strong></p><ul style="margin: 5px 0;"><li>æ ˆçš„åŸºæœ¬æ“ä½œå’Œæ€§è´¨</li><li>ç»„åˆæ•°å­¦åŸºç¡€</li><li>é€’æ¨å…³ç³»å’ŒåŠ¨æ€è§„åˆ’</li><li>äºŒå‰æ ‘åŸºæœ¬æ¦‚å¿µ</li></ul></div></div></div><!-- å¡ç‰¹å…°æ•°åºåˆ—å±•ç¤º --><div style="margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 8px;"><h4 style="margin-bottom: 10px;">ğŸ“ˆ å¡ç‰¹å…°æ•°åºåˆ—ï¼ˆå‰10é¡¹ï¼‰</h4><div style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center;"><span style="background: #007bff; color: white; padding: 8px 12px; border-radius: 5px; font-weight: bold;">$C_0 = 1$</span><span style="background: #28a745; color: white; padding: 8px 12px; border-radius: 5px; font-weight: bold;">$C_1 = 1$</span><span style="background: #ffc107; color: #000; padding: 8px 12px; border-radius: 5px; font-weight: bold;">$C_2 = 2$</span><span style="background: #dc3545; color: white; padding: 8px 12px; border-radius: 5px; font-weight: bold;">$C_3 = 5$</span><span style="background: #6f42c1; color: white; padding: 8px 12px; border-radius: 5px; font-weight: bold;">$C_4 = 14$</span><span style="background: #fd7e14; color: white; padding: 8px 12px; border-radius: 5px; font-weight: bold;">$C_5 = 42$</span><span style="background: #20c997; color: white; padding: 8px 12px; border-radius: 5px; font-weight: bold;">$C_6 = 132$</span><span style="background: #6c757d; color: white; padding: 8px 12px; border-radius: 5px; font-weight: bold;">$C_7 = 429$</span><span style="background: #e83e8c; color: white; padding: 8px 12px; border-radius: 5px; font-weight: bold;">$C_8 = 1430$</span><span style="background: #17a2b8; color: white; padding: 8px 12px; border-radius: 5px; font-weight: bold;">$C_9 = 4862$</span></div></div></div></div><!-- ğŸ” æ¦‚å¿µè¯¦è§£ --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ”</span>
                æ¦‚å¿µè¯¦è§£
            </h2><div class="unified-grid unified-grid-2"><div class="info-box info-box-success"><span class="info-icon">ğŸ­</span><strong>æˆå‰§æ¼”å‡ºç±»æ¯”ï¼š</strong>æƒ³è±¡æ¼”å‘˜æŒ‰é¡ºåºè¿›å…¥åå°(å…¥æ ˆ)ï¼Œä½†å¯ä»¥ä»»æ„é¡ºåºä¸Šå°è¡¨æ¼”(å‡ºæ ˆ)ï¼Œå¡ç‰¹å…°æ•°å‘Šè¯‰æˆ‘ä»¬æœ‰å¤šå°‘ç§ä¸åŒçš„æ¼”å‡ºé¡ºåºã€‚
                </div><div class="info-box info-box-warning"><span class="info-icon">ğŸ§®</span><strong>æ•°å­¦ç¾å­¦ï¼š</strong>å¡ç‰¹å…°æ•°åœ¨è‡ªç„¶ç•Œä¸­é¢‘ç¹å‡ºç°ï¼Œä»æ¤ç‰©å¶åºåˆ°åˆ†å­ç»“æ„ï¼Œä½“ç°äº†æ•°å­¦çš„æ™®éæ€§å’Œç¾æ„Ÿã€‚
                </div></div><h3>ğŸ”¹ æ ¸å¿ƒå­æ¦‚å¿µåˆ†è§£</h3><div style="margin: 20px 0;"><h4>1ï¸âƒ£ æ ˆæ“ä½œåºåˆ—çš„çº¦æŸ</h4><p>å…ƒç´ å¿…é¡»æŒ‰é¡ºåºå…¥æ ˆ$(1,2,3\ldots)$ï¼Œä½†å¯ä»¥åœ¨ä»»æ„æ—¶åˆ»å‡ºæ ˆã€‚å…³é”®çº¦æŸï¼šåœ¨æŸä¸ªå…ƒç´ å‡ºæ ˆä¹‹å‰ï¼Œæ‰€æœ‰åœ¨å®ƒåé¢å…¥æ ˆçš„å…ƒç´ éƒ½å¿…é¡»å…ˆå‡ºæ ˆã€‚</p><h4>2ï¸âƒ£ åˆæ³•æ€§åˆ¤æ–­åŸç†</h4><p>ä¸€ä¸ªå‡ºæ ˆåºåˆ—åˆæ³•å½“ä¸”ä»…å½“ï¼šå¯¹äºåºåˆ—ä¸­ä»»æ„ä½ç½®$i$çš„å…ƒç´ $a$ï¼Œåœ¨å®ƒå³è¾¹ä¸”æ¯”$a$å°çš„å…ƒç´ æ•°é‡ä¸èƒ½è¶…è¿‡åœ¨å®ƒå·¦è¾¹ä¸”æ¯”$a$å¤§çš„å…ƒç´ æ•°é‡ã€‚</p><h4>3ï¸âƒ£ é€’æ¨å…³ç³»çš„æœ¬è´¨</h4><p>$$C_n = \sum_{i=0}^{n-1} C_i \cdot C_{n-1-i}$$</p><p>è¿™ä¸ªå…¬å¼åæ˜ äº†ï¼šç¬¬ä¸€ä¸ªå‡ºæ ˆçš„å…ƒç´ å¯ä»¥æ˜¯$1$åˆ°$n$ä¸­ä»»æ„ä¸€ä¸ªï¼Œå°†é—®é¢˜åˆ†è§£ä¸ºä¸¤ä¸ªå­é—®é¢˜ã€‚</p><h4>4ï¸âƒ£ å¤šé¢†åŸŸçš„ç»Ÿä¸€æ€§</h4><p>å¡ç‰¹å…°æ•°åœ¨äºŒå‰æ ‘è®¡æ•°ã€æ‹¬å·åŒ¹é…ã€è·¯å¾„é—®é¢˜ç­‰å¤šä¸ªé¢†åŸŸéƒ½æœ‰åº”ç”¨ï¼Œä½“ç°äº†æ•°å­¦ç»“æ„çš„æ·±å±‚ç»Ÿä¸€æ€§ã€‚</p></div><div class="info-box info-box-warning"><span class="info-icon">âš ï¸</span><strong>æ˜“é”™ç‚¹æé†’ï¼š</strong><ul style="text-align: left; margin: 10px 0;"><li>æ··æ·†"æ‰€æœ‰æ’åˆ—"å’Œ"åˆæ³•å‡ºæ ˆåºåˆ—"(å¦‚ï¼š$[2,1,3]$æ˜¯åˆæ³•çš„ï¼Œä½†$[3,1,2]$ä¸æ˜¯)</li><li>å¿½è§†é€’æ¨å…¬å¼ä¸­çš„è¾¹ç•Œæ¡ä»¶($C_0 = 1$æ˜¯å…³é”®)</li><li>è®¡ç®—æ—¶çš„æº¢å‡ºé—®é¢˜(å¡ç‰¹å…°æ•°å¢é•¿å¾ˆå¿«)</li><li>è¯¯è§£å¯¹åº”å…³ç³»($n$ä¸ªå…ƒç´ å¯¹åº”ç¬¬$n$ä¸ªå¡ç‰¹å…°æ•°ï¼Œä¸æ˜¯ç¬¬$n+1$ä¸ª)</li></ul></div></div></div><!-- ğŸ§® æ•°å­¦æ¨å¯¼ --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ§®</span>
                å¡ç‰¹å…°æ•°å…¬å¼æ¨å¯¼
            </h2><div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;"><h3>ğŸ“ æ–¹æ³•ä¸€ï¼šé€’æ¨å…³ç³»æ¨å¯¼</h3><div style="margin: 15px 0;"><h4><strong>æ­¥éª¤1ï¼šå»ºç«‹é€’æ¨å…³ç³»</strong></h4><p>è€ƒè™‘$n$ä¸ªå…ƒç´ çš„å‡ºæ ˆåºåˆ—ï¼Œç¬¬$k$ä¸ªå…ƒç´ $(k=1,2,\ldots,n)$æœ€åå‡ºæ ˆçš„æƒ…å†µæ•°ï¼š</p><p>$$C_n = \sum_{k=1}^{n} (\text{å‰}k-1\text{ä¸ªå…ƒç´ çš„æ–¹æ¡ˆæ•°}) \times (\text{å}n-k\text{ä¸ªå…ƒç´ çš„æ–¹æ¡ˆæ•°})$$</p><p>å³ï¼š$$C_n = \sum_{i=0}^{n-1} C_i \cdot C_{n-1-i}$$</p></div><div style="margin: 15px 0;"><h4><strong>æ­¥éª¤2ï¼šç”Ÿæˆå‡½æ•°æ–¹æ³•</strong></h4><p>è®¾ç”Ÿæˆå‡½æ•°$G(x) = \sum_{n=0}^{\infty} C_n x^n$ï¼Œç”±é€’æ¨å…³ç³»å¾—ï¼š</p><p>$$G(x) = 1 + x \cdot G(x)^2$$</p><p>è§£è¿™ä¸ªæ–¹ç¨‹ï¼š$$G(x) = \frac{1 \pm \sqrt{1-4x}}{2x}$$</p><p>é€‰æ‹©åˆé€‚çš„æ ¹ï¼š$$G(x) = \frac{1 - \sqrt{1-4x}}{2x}$$</p></div><div style="margin: 15px 0;"><h4><strong>æ­¥éª¤3ï¼šå±•å¼€æ±‚ç³»æ•°</strong></h4><p>åˆ©ç”¨å¹¿ä¹‰äºŒé¡¹å¼å®šç†ï¼š$$(1-4x)^{1/2} = \sum_{n=0}^{\infty} \binom{1/2}{n} (-4x)^n$$</p><p>å…¶ä¸­ï¼š$$\binom{1/2}{n} = \frac{(1/2)(1/2-1)\cdots(1/2-n+1)}{n!} = \frac{(-1)^{n-1}}{2^{2n-1}} \binom{2n-2}{n-1}$$</p><p>æœ€ç»ˆå¾—åˆ°ï¼š$$C_n = \frac{1}{n+1} \binom{2n}{n}$$</p></div></div><div style="background: #e8f4fd; padding: 20px; border-radius: 8px; margin: 20px 0;"><h3>ğŸ›¤ï¸ æ–¹æ³•äºŒï¼šè·¯å¾„è®¡æ•°æ¨å¯¼</h3><div style="margin: 15px 0;"><p><strong>é—®é¢˜è½¬åŒ–ï¼š</strong>ä»$(0,0)$åˆ°$(n,n)$çš„å•è°ƒæ ¼è·¯å¾„ï¼Œä¸”ä¸è¶Šè¿‡å¯¹è§’çº¿$y=x$</p><p><strong>æ€»è·¯å¾„æ•°ï¼š</strong>$\binom{2n}{n}$ï¼ˆ$2n$æ­¥ä¸­é€‰$n$æ­¥å‘å³ï¼‰</p><p><strong>è¶Šè¿‡å¯¹è§’çº¿çš„è·¯å¾„æ•°ï¼š</strong>ä½¿ç”¨<strong>åå°„åŸç†</strong></p><p>ä»»ä½•è¶Šè¿‡å¯¹è§’çº¿çš„è·¯å¾„ï¼Œç¬¬ä¸€æ¬¡æ¥è§¦$y=x+1$åï¼Œå°†å‰©ä½™éƒ¨åˆ†å…³äº$y=x+1$åå°„</p><p>è¿™æ ·çš„è·¯å¾„ä¸ä»$(0,0)$åˆ°$(n-1,n+1)$çš„è·¯å¾„ä¸€ä¸€å¯¹åº”</p><p><strong>è¶Šè¿‡è·¯å¾„æ•°ï¼š</strong>$\binom{2n}{n-1}$</p><p><strong>å¡ç‰¹å…°æ•°ï¼š</strong>$$C_n = \binom{2n}{n} - \binom{2n}{n-1} = \frac{1}{n+1}\binom{2n}{n}$$</p></div></div><div style="background: #fff3cd; padding: 20px; border-radius: 8px; margin: 20px 0;"><h3>ğŸŒ³ æ–¹æ³•ä¸‰ï¼šäºŒå‰æ ‘é€’å½’æ¨å¯¼</h3><div style="margin: 15px 0;"><p><strong>é—®é¢˜ï¼š</strong>$n$ä¸ªèŠ‚ç‚¹çš„ä¸åŒäºŒå‰æ ‘æ•°é‡</p><p><strong>é€’å½’æ€æƒ³ï¼š</strong>æ ¹èŠ‚ç‚¹åˆ†å‰²å·¦å³å­æ ‘</p><p>å¦‚æœå·¦å­æ ‘æœ‰$i$ä¸ªèŠ‚ç‚¹ï¼Œå³å­æ ‘æœ‰$n-1-i$ä¸ªèŠ‚ç‚¹ï¼š</p><p>$$C_n = \sum_{i=0}^{n-1} C_i \cdot C_{n-1-i}$$</p><p>è¿™ä¸æ ˆåºåˆ—çš„é€’æ¨å…³ç³»å®Œå…¨ä¸€è‡´ï¼Œè¯æ˜äº†ä¸åŒé—®é¢˜çš„ç»Ÿä¸€æ€§ï¼</p></div></div></div></div><!-- ğŸ“Š å¯è§†åŒ–å±•ç¤º --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ“Š</span>
                å¯è§†åŒ–å±•ç¤º
            </h2><div class="demo-container" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;"><h3>ğŸ¯ äº¤äº’å¼æ¼”ç¤ºï¼šå‡ºæ ˆåºåˆ—ç”Ÿæˆä¸å¡ç‰¹å…°æ•°è®¡ç®—</h3><!-- è¾“å…¥åŒºåŸŸ --><div style="margin-bottom: 20px;"><label for="nInput" style="display: block; margin-bottom: 8px; font-weight: bold;">è¾“å…¥å…ƒç´ ä¸ªæ•° $n$ (1-5)ï¼š</label><div style="display: flex; gap: 10px; align-items: center;"><input type="number" id="nInput" min="1" max="5" value="3"
                               style="width: 80px; padding: 10px; border: 2px solid #007bff; border-radius: 5px; font-size: 16px;"
                               onchange="updateCatalanDemo()"><button onclick="generateAllSequences()" style="background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
                            ç”Ÿæˆæ‰€æœ‰åºåˆ—
                        </button><button onclick="startSequenceDemo()" style="background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
                            æ¼”ç¤ºé€‰ä¸­åºåˆ—
                        </button></div><div style="margin-top: 8px; font-size: 14px; color: #6c757d;">
                        ğŸ’¡ å…ˆç”Ÿæˆæ‰€æœ‰åºåˆ—ï¼Œç„¶åç‚¹å‡»ä»»æ„åºåˆ—è¿›è¡Œè¯¦ç»†æ¼”ç¤º
                    </div></div><!-- åºåˆ—é€‰æ‹©å™¨ --><div id="sequenceSelector" style="margin-bottom: 20px; display: none;"><h4>ğŸ“‹ é€‰æ‹©è¦æ¼”ç¤ºçš„åºåˆ—ï¼š</h4><div id="sequenceButtons" style="display: flex; flex-wrap: wrap; gap: 8px; margin: 10px 0;"><!-- åŠ¨æ€ç”Ÿæˆåºåˆ—æŒ‰é’® --></div></div><!-- å½“å‰çŠ¶æ€æ˜¾ç¤º --><div style="display: flex; justify-content: space-between; margin-bottom: 20px;"><div style="flex: 1; margin-right: 10px;"><h4>æ ˆçŠ¶æ€</h4><div id="stackVisualization" style="height: 150px; background: white; border: 2px solid #28a745; border-radius: 5px; position: relative; overflow: hidden;"><div style="position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); color: #6c757d;">æ ˆåº•</div></div></div><div style="flex: 1; margin: 0 10px;"><h4>å…¥æ ˆåºåˆ—</h4><div id="inputSequence" style="height: 150px; background: white; border: 2px solid #007bff; border-radius: 5px; position: relative; display: flex; align-items: center; justify-content: center; flex-wrap: wrap; padding: 10px;"><div style="color: #6c757d;">ç­‰å¾…å…¥æ ˆ</div></div></div><div style="flex: 1; margin-left: 10px;"><h4>å‡ºæ ˆåºåˆ—</h4><div id="outputSequence" style="height: 150px; background: white; border: 2px solid #dc3545; border-radius: 5px; position: relative; display: flex; align-items: center; justify-content: center; flex-wrap: wrap; padding: 10px;"><div style="color: #6c757d;">å‡ºæ ˆç»“æœ</div></div></div></div><!-- å¡ç‰¹å…°æ•°è®¡ç®— --><div style="margin-bottom: 20px; padding: 15px; background: white; border-radius: 8px; border: 2px solid #ffc107;"><h4 style="margin-bottom: 10px;">ğŸ“Š å¡ç‰¹å…°æ•°è®¡ç®—</h4><div id="catalanCalculation" style="font-family: 'Times New Roman', serif; font-size: 16px;">
                        $C_3 = C_0 \times C_2 + C_1 \times C_1 + C_2 \times C_0 = 1 \times 2 + 1 \times 1 + 2 \times 1 = 5$
                    </div></div><!-- æ§åˆ¶æŒ‰é’® --><div style="text-align: center; margin-bottom: 20px;"><button id="stepBtn" onclick="nextDemoStep()" style="background: #007bff; color: white; border: none; padding: 12px 24px; border-radius: 5px; cursor: pointer; margin: 5px;" disabled>ä¸‹ä¸€æ­¥</button><button onclick="autoDemoPlay()" id="autoBtn" style="background: #ffc107; color: #000; border: none; padding: 12px 24px; border-radius: 5px; cursor: pointer; margin: 5px;" disabled>è‡ªåŠ¨æ¼”ç¤º</button><button onclick="resetCatalanDemo()" style="background: #6c757d; color: white; border: none; padding: 12px 24px; border-radius: 5px; cursor: pointer; margin: 5px;">é‡ç½®</button></div><!-- æ‰€æœ‰åºåˆ—å±•ç¤º --><div id="allSequencesDisplay" style="margin-top: 20px;"><h4>ğŸ­ æ‰€æœ‰å¯èƒ½çš„å‡ºæ ˆåºåˆ—</h4><div id="sequencesList" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; margin-top: 10px;"><!-- åŠ¨æ€ç”Ÿæˆåºåˆ— --></div></div><div id="demoStepInfo" style="margin-top: 15px; padding: 15px; background: #e3f2fd; border-radius: 5px; min-height: 60px;"><strong>å¼€å§‹æ¢ç´¢ï¼š</strong>è¾“å…¥å…ƒç´ ä¸ªæ•°ï¼Œè§‚å¯Ÿå¡ç‰¹å…°æ•°å¦‚ä½•æè¿°å‡ºæ ˆåºåˆ—çš„æ•°é‡
                </div></div><div class="unified-grid unified-grid-3"><div class="info-box info-box-info"><span class="info-icon">ğŸŒ²</span><strong>äºŒå‰æ ‘å¯¹åº”ï¼š</strong><ul style="text-align: left; font-size: 14px;"><li>$C_1 = 1$ ç§æ ‘å½¢</li><li>$C_2 = 2$ ç§æ ‘å½¢</li><li>$C_3 = 5$ ç§æ ‘å½¢</li><li>$C_4 = 14$ ç§æ ‘å½¢</li></ul></div><div class="info-box info-box-success"><span class="info-icon">ğŸ›¤ï¸</span><strong>è·¯å¾„è®¡æ•°ï¼š</strong><ul style="text-align: left; font-size: 14px;"><li>ç½‘æ ¼è·¯å¾„ä¸è¶Šè¿‡å¯¹è§’çº¿</li><li>å±±è„‰è·¯å¾„é—®é¢˜</li><li>Dyckè·¯å¾„è®¡æ•°</li><li>å•è°ƒè·¯å¾„è®¡æ•°</li></ul></div><div class="info-box info-box-warning"><span class="info-icon">ğŸ¯</span><strong>è®¡ç®—å…¬å¼ï¼š</strong><ul style="text-align: left; font-size: 14px;"><li>$C_n = \frac{1}{n+1}\binom{2n}{n}$</li><li>$C_n = \frac{(2n)!}{(n+1)!n!}$</li><li>é€’æ¨ï¼š$C_n = \sum C_i \times C_{n-1-i}$</li><li>ç”Ÿæˆå‡½æ•°è§£æ³•</li></ul></div></div></div></div><!-- ğŸŒŸ å®é™…åº”ç”¨ --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸŒŸ</span>
                å®é™…åº”ç”¨
            </h2><div class="unified-grid unified-grid-3"><div class="grid-card"><span class="card-icon">ğŸŒ³</span><h4 class="card-title">äºŒå‰æœç´¢æ ‘</h4><p class="card-description">$n$ä¸ªä¸åŒèŠ‚ç‚¹èƒ½æ„æˆå¤šå°‘ç§ä¸åŒå½¢æ€çš„äºŒå‰æœç´¢æ ‘ï¼Ÿç­”æ¡ˆå°±æ˜¯ç¬¬$n$ä¸ªå¡ç‰¹å…°æ•°ã€‚</p></div><div class="grid-card"><span class="card-icon">ğŸ”—</span><h4 class="card-title">ç¼–è¯‘å™¨è®¾è®¡</h4><p class="card-description">è¯­æ³•åˆ†æä¸­çš„æ‹¬å·åŒ¹é…ã€è¡¨è¾¾å¼è§£æã€è¯­æ³•æ ‘ç”Ÿæˆéƒ½æ¶‰åŠå¡ç‰¹å…°æ•°çš„è®¡ç®—ã€‚</p></div><div class="grid-card"><span class="card-icon">ğŸ²</span><h4 class="card-title">ç»„åˆä¼˜åŒ–</h4><p class="card-description">èƒŒåŒ…é—®é¢˜ã€åŠ¨æ€è§„åˆ’ã€å›¾è®ºç®—æ³•ä¸­ç»å¸¸éœ€è¦è®¡ç®—è·¯å¾„æ•°é‡ï¼Œå¡ç‰¹å…°æ•°æä¾›äº†é‡è¦çš„è®¡æ•°å·¥å…·ã€‚</p></div></div><h3>ğŸ’¡ å¤šè¯­è¨€ä»£ç å®ç°</h3><!-- ä»£ç æ ‡ç­¾é¡µ --><div style="margin: 20px 0;"><div class="code-tabs" style="display: flex; border-bottom: 2px solid #dee2e6;"><button class="tab-btn active" onclick="showCode('python')" data-lang="python">Python</button><button class="tab-btn" onclick="showCode('java')" data-lang="java">Java</button><button class="tab-btn" onclick="showCode('cpp')" data-lang="cpp">C++</button></div><!-- Pythonä»£ç  --><div id="python-code" class="code-block"><div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #2d3748; color: white;"><span>Python å®ç°</span><button onclick="copyCode('python')" style="background: #4a5568; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer;">
                            ğŸ“‹ å¤åˆ¶ä»£ç 
                        </button></div><pre id="python-pre" style="margin: 0; background: #f8f9fa; padding: 15px; overflow-x: auto;"><code>class CatalanNumbers:
    def __init__(self):
        self.memo = {}

    def catalan_recursive(self, n):
        """é€’å½’è®¡ç®—å¡ç‰¹å…°æ•°ï¼ˆå¸¦è®°å¿†åŒ–ï¼‰"""
        if n <= 1:
            return 1

        if n in self.memo:
            return self.memo[n]

        result = 0
        for i in range(n):
            result += self.catalan_recursive(i) * self.catalan_recursive(n - 1 - i)

        self.memo[n] = result
        return result

    def catalan_dp(self, n):
        """åŠ¨æ€è§„åˆ’è®¡ç®—å¡ç‰¹å…°æ•°"""
        if n <= 1:
            return 1

        dp = [0] * (n + 1)
        dp[0] = dp[1] = 1

        for i in range(2, n + 1):
            for j in range(i):
                dp[i] += dp[j] * dp[i - 1 - j]

        return dp[n]

    def catalan_formula(self, n):
        """ç›´æ¥å…¬å¼è®¡ç®—å¡ç‰¹å…°æ•°"""
        if n <= 1:
            return 1

        # C_n = (2n)! / ((n+1)! * n!)
        # ä¼˜åŒ–ï¼šC_n = C(2n, n) / (n + 1)
        def combination(n, k):
            if k > n - k:
                k = n - k
            result = 1
            for i in range(k):
                result = result * (n - i) // (i + 1)
            return result

        return combination(2 * n, n) // (n + 1)

    def generate_all_sequences(self, n):
        """ç”Ÿæˆæ‰€æœ‰åˆæ³•çš„å‡ºæ ˆåºåˆ—"""
        def backtrack(stack, remaining, output, all_sequences):
            # å¦‚æœæ²¡æœ‰å‰©ä½™å…ƒç´ ä¸”æ ˆä¸ºç©ºï¼Œæ‰¾åˆ°ä¸€ä¸ªå®Œæ•´åºåˆ—
            if not remaining and not stack:
                all_sequences.append(output[:])
                return

            # å°è¯•å…¥æ ˆæ“ä½œï¼ˆå¦‚æœè¿˜æœ‰å…ƒç´ å¯ä»¥å…¥æ ˆï¼‰
            if remaining:
                stack.append(remaining[0])
                backtrack(stack, remaining[1:], output, all_sequences)
                stack.pop()  # å›æº¯

            # å°è¯•å‡ºæ ˆæ“ä½œï¼ˆå¦‚æœæ ˆä¸ä¸ºç©ºï¼‰
            if stack:
                element = stack.pop()
                output.append(element)
                backtrack(stack, remaining, output, all_sequences)
                output.pop()  # å›æº¯
                stack.append(element)  # å›æº¯

        all_sequences = []
        backtrack([], list(range(1, n + 1)), [], all_sequences)
        return all_sequences

    def generate_sequence_steps(self, n, target_sequence):
        """ç”Ÿæˆç‰¹å®šåºåˆ—çš„è¯¦ç»†æ­¥éª¤"""
        steps = []
        stack = []
        remaining = list(range(1, n + 1))
        output = []
        target_index = 0

        steps.append({
            'stack': stack[:],
            'remaining': remaining[:],
            'output': output[:],
            'action': f'å¼€å§‹ç”Ÿæˆåºåˆ— {target_sequence}',
            'info': 'åˆå§‹çŠ¶æ€ï¼šæ‰€æœ‰å…ƒç´ åœ¨å…¥æ ˆåºåˆ—ä¸­'
        })

        while target_index < len(target_sequence):
            target = target_sequence[target_index]

            # å…¥æ ˆç›´åˆ°ç›®æ ‡å…ƒç´ 
            while remaining and remaining[0] <= target:
                element = remaining.pop(0)
                stack.append(element)
                steps.append({
                    'stack': stack[:],
                    'remaining': remaining[:],
                    'output': output[:],
                    'action': f'å…ƒç´  {element} å…¥æ ˆ',
                    'info': f'ä¸ºäº†è¾“å‡º {target}ï¼Œéœ€è¦å…ˆè®© {element} å…¥æ ˆ'
                })

            # å‡ºæ ˆç›®æ ‡å…ƒç´ 
            if stack and stack[-1] == target:
                stack.pop()
                output.append(target)
                steps.append({
                    'stack': stack[:],
                    'remaining': remaining[:],
                    'output': output[:],
                    'action': f'å…ƒç´  {target} å‡ºæ ˆ',
                    'info': f'æˆåŠŸè¾“å‡ºå…ƒç´  {target}'
                })
                target_index += 1
            else:
                break

        steps.append({
            'stack': [],
            'remaining': [],
            'output': output[:],
            'action': 'åºåˆ—ç”Ÿæˆå®Œæˆ',
            'info': f'æœ€ç»ˆåºåˆ—ï¼š{output}',
            'final': True
        })

        return steps

    def is_valid_sequence(self, sequence):
        """æ£€æŸ¥ç»™å®šåºåˆ—æ˜¯å¦ä¸ºåˆæ³•çš„å‡ºæ ˆåºåˆ—"""
        n = len(sequence)
        stack = []
        next_push = 1

        for num in sequence:
            # å°†éœ€è¦çš„å…ƒç´ æ¨å…¥æ ˆä¸­
            while next_push <= num:
                stack.append(next_push)
                next_push += 1

            # æ£€æŸ¥æ ˆé¡¶æ˜¯å¦æ˜¯å½“å‰éœ€è¦çš„å…ƒç´ 
            if not stack or stack[-1] != num:
                return False

            stack.pop()

        return True

# æµ‹è¯•å’Œæ¼”ç¤º
def demonstrate_catalan():
    calc = CatalanNumbers()

    print("å¡ç‰¹å…°æ•°åºåˆ—ï¼ˆå‰10é¡¹ï¼‰ï¼š")
    for i in range(10):
        catalan = calc.catalan_dp(i)
        print(f"C_{i} = {catalan}")

    print("\n3ä¸ªå…ƒç´ çš„æ‰€æœ‰å‡ºæ ˆåºåˆ—ï¼š")
    sequences = calc.generate_all_sequences(3)
    for i, seq in enumerate(sequences, 1):
        print(f"{i}: {seq}")

    print(f"\néªŒè¯ï¼šC_3 = {calc.catalan_dp(3)}, å®é™…åºåˆ—æ•° = {len(sequences)}")

    # éªŒè¯åºåˆ—åˆæ³•æ€§
    test_sequences = [[1, 2, 3], [1, 3, 2], [2, 1, 3], [2, 3, 1], [3, 2, 1], [3, 1, 2]]
    print("\nåºåˆ—åˆæ³•æ€§æ£€æŸ¥ï¼š")
    for seq in test_sequences:
        valid = calc.is_valid_sequence(seq)
        print(f"{seq}: {'åˆæ³•' if valid else 'éæ³•'}")

if __name__ == "__main__":
    demonstrate_catalan()
</code></pre></div><!-- Javaä»£ç  --><div id="java-code" class="code-block" style="display: none;"><div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #2d3748; color: white;"><span>Java å®ç°</span><button onclick="copyCode('java')" style="background: #4a5568; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer;">
                            ğŸ“‹ å¤åˆ¶ä»£ç 
                        </button></div><pre id="java-pre" style="margin: 0; background: #f8f9fa; padding: 15px; overflow-x: auto;"><code>import java.util.*;
import java.math.BigInteger;

public class CatalanNumbers {
    private Map&lt;Integer, Long&gt; memo = new HashMap&lt;&gt;();

    /**
     * é€’å½’è®¡ç®—å¡ç‰¹å…°æ•°ï¼ˆå¸¦è®°å¿†åŒ–ï¼‰
     */
    public long catalanRecursive(int n) {
        if (n &lt;= 1) return 1;

        if (memo.containsKey(n)) {
            return memo.get(n);
        }

        long result = 0;
        for (int i = 0; i &lt; n; i++) {
            result += catalanRecursive(i) * catalanRecursive(n - 1 - i);
        }

        memo.put(n, result);
        return result;
    }

    /**
     * åŠ¨æ€è§„åˆ’è®¡ç®—å¡ç‰¹å…°æ•°
     */
    public long catalanDP(int n) {
        if (n &lt;= 1) return 1;

        long[] dp = new long[n + 1];
        dp[0] = dp[1] = 1;

        for (int i = 2; i &lt;= n; i++) {
            for (int j = 0; j &lt; i; j++) {
                dp[i] += dp[j] * dp[i - 1 - j];
            }
        }

        return dp[n];
    }

    /**
     * ç›´æ¥å…¬å¼è®¡ç®—å¡ç‰¹å…°æ•°ï¼ˆå¤„ç†å¤§æ•°ï¼‰
     */
    public BigInteger catalanBigInteger(int n) {
        if (n &lt;= 1) return BigInteger.ONE;

        // C_n = (2n)! / ((n+1)! * n!) = C(2n, n) / (n + 1)
        BigInteger numerator = BigInteger.ONE;
        BigInteger denominator = BigInteger.ONE;

        for (int i = 0; i &lt; n; i++) {
            numerator = numerator.multiply(BigInteger.valueOf(2 * n - i));
            denominator = denominator.multiply(BigInteger.valueOf(i + 1));
        }

        return numerator.divide(denominator).divide(BigInteger.valueOf(n + 1));
    }

    /**
     * ç”Ÿæˆæ‰€æœ‰åˆæ³•çš„å‡ºæ ˆåºåˆ—
     */
    public List&lt;List&lt;Integer&gt;&gt; generateAllSequences(int n) {
        List&lt;List&lt;Integer&gt;&gt; result = new ArrayList&lt;&gt;();
        generateSequencesHelper(new Stack&lt;&gt;(), createList(1, n),
                               new ArrayList&lt;&gt;(), result);
        return result;
    }

    private void generateSequencesHelper(Stack&lt;Integer&gt; stack,
                                       List&lt;Integer&gt; remaining,
                                       List&lt;Integer&gt; output,
                                       List&lt;List&lt;Integer&gt;&gt; result) {
        // å¦‚æœæ²¡æœ‰å‰©ä½™å…ƒç´ ä¸”æ ˆä¸ºç©ºï¼Œæ‰¾åˆ°ä¸€ä¸ªå®Œæ•´åºåˆ—
        if (remaining.isEmpty() && stack.isEmpty()) {
            result.add(new ArrayList&lt;&gt;(output));
            return;
        }

        // å°è¯•å…¥æ ˆæ“ä½œ
        if (!remaining.isEmpty()) {
            int element = remaining.remove(0);
            stack.push(element);
            generateSequencesHelper(stack, remaining, output, result);
            stack.pop();
            remaining.add(0, element);  // å›æº¯
        }

        // å°è¯•å‡ºæ ˆæ“ä½œ
        if (!stack.isEmpty()) {
            int element = stack.pop();
            output.add(element);
            generateSequencesHelper(stack, remaining, output, result);
            output.remove(output.size() - 1);  // å›æº¯
            stack.push(element);  // å›æº¯
        }
    }

    /**
     * æ£€æŸ¥åºåˆ—æ˜¯å¦ä¸ºåˆæ³•çš„å‡ºæ ˆåºåˆ—
     */
    public boolean isValidSequence(List&lt;Integer&gt; sequence) {
        Stack&lt;Integer&gt; stack = new Stack&lt;&gt;();
        int nextPush = 1;

        for (int num : sequence) {
            // å°†éœ€è¦çš„å…ƒç´ æ¨å…¥æ ˆä¸­
            while (nextPush &lt;= num) {
                stack.push(nextPush++);
            }

            // æ£€æŸ¥æ ˆé¡¶æ˜¯å¦æ˜¯å½“å‰éœ€è¦çš„å…ƒç´ 
            if (stack.isEmpty() || stack.peek() != num) {
                return false;
            }

            stack.pop();
        }

        return true;
    }

    private List&lt;Integer&gt; createList(int start, int end) {
        List&lt;Integer&gt; list = new ArrayList&lt;&gt;();
        for (int i = start; i &lt;= end; i++) {
            list.add(i);
        }
        return list;
    }

    public static void main(String[] args) {
        CatalanNumbers calc = new CatalanNumbers();

        System.out.println("å¡ç‰¹å…°æ•°åºåˆ—ï¼ˆå‰10é¡¹ï¼‰ï¼š");
        for (int i = 0; i &lt; 10; i++) {
            long catalan = calc.catalanDP(i);
            System.out.printf("C_%d = %d%n", i, catalan);
        }

        System.out.println("\n3ä¸ªå…ƒç´ çš„æ‰€æœ‰å‡ºæ ˆåºåˆ—ï¼š");
        List&lt;List&lt;Integer&gt;&gt; sequences = calc.generateAllSequences(3);
        for (int i = 0; i &lt; sequences.size(); i++) {
            System.out.printf("%d: %s%n", i + 1, sequences.get(i));
        }

        System.out.printf("%néªŒè¯ï¼šC_3 = %d, å®é™…åºåˆ—æ•° = %d%n",
                         calc.catalanDP(3), sequences.size());

        // å¤§æ•°è®¡ç®—æ¼”ç¤º
        System.out.println("\nå¤§æ•°å¡ç‰¹å…°æ•°è®¡ç®—ï¼š");
        for (int i = 10; i &lt;= 20; i++) {
            BigInteger catalan = calc.catalanBigInteger(i);
            System.out.printf("C_%d = %s%n", i, catalan);
        }
    }
}
</code></pre></div><!-- C++ä»£ç  --><div id="cpp-code" class="code-block" style="display: none;"><div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #2d3748; color: white;"><span>C++ å®ç°</span><button onclick="copyCode('cpp')" style="background: #4a5568; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer;">
                            ğŸ“‹ å¤åˆ¶ä»£ç 
                        </button></div><pre id="cpp-pre" style="margin: 0; background: #f8f9fa; padding: 15px; overflow-x: auto;"><code>#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;stack&gt;
#include &lt;unordered_map&gt;
#include &lt;algorithm&gt;

using namespace std;

class CatalanNumbers {
private:
    unordered_map&lt;int, long long&gt; memo;

public:
    /**
     * é€’å½’è®¡ç®—å¡ç‰¹å…°æ•°ï¼ˆå¸¦è®°å¿†åŒ–ï¼‰
     */
    long long catalanRecursive(int n) {
        if (n &lt;= 1) return 1;

        if (memo.find(n) != memo.end()) {
            return memo[n];
        }

        long long result = 0;
        for (int i = 0; i &lt; n; i++) {
            result += catalanRecursive(i) * catalanRecursive(n - 1 - i);
        }

        memo[n] = result;
        return result;
    }

    /**
     * åŠ¨æ€è§„åˆ’è®¡ç®—å¡ç‰¹å…°æ•°
     */
    long long catalanDP(int n) {
        if (n &lt;= 1) return 1;

        vector&lt;long long&gt; dp(n + 1, 0);
        dp[0] = dp[1] = 1;

        for (int i = 2; i &lt;= n; i++) {
            for (int j = 0; j &lt; i; j++) {
                dp[i] += dp[j] * dp[i - 1 - j];
            }
        }

        return dp[n];
    }

    /**
     * ç›´æ¥å…¬å¼è®¡ç®—å¡ç‰¹å…°æ•°
     */
    long long catalanFormula(int n) {
        if (n &lt;= 1) return 1;

        // C_n = C(2n, n) / (n + 1)
        long long result = 1;

        // è®¡ç®— C(2n, n)
        for (int i = 0; i &lt; n; i++) {
            result = result * (2 * n - i) / (i + 1);
        }

        return result / (n + 1);
    }

    /**
     * ç”Ÿæˆæ‰€æœ‰åˆæ³•çš„å‡ºæ ˆåºåˆ—
     */
    vector&lt;vector&lt;int&gt;&gt; generateAllSequences(int n) {
        vector&lt;vector&lt;int&gt;&gt; result;
        stack&lt;int&gt; st;
        vector&lt;int&gt; remaining;
        vector&lt;int&gt; output;

        for (int i = 1; i &lt;= n; i++) {
            remaining.push_back(i);
        }

        generateHelper(st, remaining, output, result);
        return result;
    }

private:
    void generateHelper(stack&lt;int&gt; st, vector&lt;int&gt; remaining,
                       vector&lt;int&gt; output, vector&lt;vector&lt;int&gt;&gt;&amp; result) {
        // å¦‚æœæ²¡æœ‰å‰©ä½™å…ƒç´ ä¸”æ ˆä¸ºç©ºï¼Œæ‰¾åˆ°ä¸€ä¸ªå®Œæ•´åºåˆ—
        if (remaining.empty() && st.empty()) {
            result.push_back(output);
            return;
        }

        // å°è¯•å…¥æ ˆæ“ä½œ
        if (!remaining.empty()) {
            int element = remaining[0];
            remaining.erase(remaining.begin());
            st.push(element);
            generateHelper(st, remaining, output, result);
            st.pop();
            remaining.insert(remaining.begin(), element);  // å›æº¯
        }

        // å°è¯•å‡ºæ ˆæ“ä½œ
        if (!st.empty()) {
            int element = st.top();
            st.pop();
            output.push_back(element);
            generateHelper(st, remaining, output, result);
            output.pop_back();  // å›æº¯
            st.push(element);   // å›æº¯
        }
    }

public:
    /**
     * æ£€æŸ¥åºåˆ—æ˜¯å¦ä¸ºåˆæ³•çš„å‡ºæ ˆåºåˆ—
     */
    bool isValidSequence(const vector&lt;int&gt;&amp; sequence) {
        stack&lt;int&gt; st;
        int nextPush = 1;

        for (int num : sequence) {
            // å°†éœ€è¦çš„å…ƒç´ æ¨å…¥æ ˆä¸­
            while (nextPush &lt;= num) {
                st.push(nextPush++);
            }

            // æ£€æŸ¥æ ˆé¡¶æ˜¯å¦æ˜¯å½“å‰éœ€è¦çš„å…ƒç´ 
            if (st.empty() || st.top() != num) {
                return false;
            }

            st.pop();
        }

        return true;
    }

    /**
     * è®¡ç®—å¡ç‰¹å…°æ•°çš„å¤šç§åº”ç”¨
     */
    void demonstrateApplications(int n) {
        cout &lt;&lt; "=== å¡ç‰¹å…°æ•°çš„å¤šç§åº”ç”¨ (n=" &lt;&lt; n &lt;&lt; ") ===" &lt;&lt; endl;

        long long catalan = catalanDP(n);
        cout &lt;&lt; "ç¬¬" &lt;&lt; n &lt;&lt; "ä¸ªå¡ç‰¹å…°æ•°: " &lt;&lt; catalan &lt;&lt; endl;
        cout &lt;&lt; "åº”ç”¨åœºæ™¯:" &lt;&lt; endl;
        cout &lt;&lt; "- " &lt;&lt; n &lt;&lt; "ä¸ªå…ƒç´ çš„ä¸åŒå‡ºæ ˆåºåˆ—æ•°: " &lt;&lt; catalan &lt;&lt; endl;
        cout &lt;&lt; "- " &lt;&lt; n &lt;&lt; "ä¸ªèŠ‚ç‚¹çš„ä¸åŒäºŒå‰æ ‘æ•°: " &lt;&lt; catalan &lt;&lt; endl;
        cout &lt;&lt; "- " &lt;&lt; n &lt;&lt; "å¯¹æ‹¬å·çš„åŒ¹é…æ–¹å¼æ•°: " &lt;&lt; catalan &lt;&lt; endl;
        cout &lt;&lt; "- " &lt;&lt; n+2 &lt;&lt; "è¾¹å½¢çš„ä¸‰è§’å‰–åˆ†æ•°: " &lt;&lt; catalan &lt;&lt; endl;
    }
};

int main() {
    CatalanNumbers calc;

    cout &lt;&lt; "å¡ç‰¹å…°æ•°åºåˆ—ï¼ˆå‰10é¡¹ï¼‰ï¼š" &lt;&lt; endl;
    for (int i = 0; i &lt; 10; i++) {
        long long catalan = calc.catalanDP(i);
        cout &lt;&lt; "C_" &lt;&lt; i &lt;&lt; " = " &lt;&lt; catalan &lt;&lt; endl;
    }

    cout &lt;&lt; "\n3ä¸ªå…ƒç´ çš„æ‰€æœ‰å‡ºæ ˆåºåˆ—ï¼š" &lt;&lt; endl;
    auto sequences = calc.generateAllSequences(3);
    for (size_t i = 0; i &lt; sequences.size(); i++) {
        cout &lt;&lt; i + 1 &lt;&lt; ": [";
        for (size_t j = 0; j &lt; sequences[i].size(); j++) {
            cout &lt;&lt; sequences[i][j];
            if (j &lt; sequences[i].size() - 1) cout &lt;&lt; ", ";
        }
        cout &lt;&lt; "]" &lt;&lt; endl;
    }

    cout &lt;&lt; "\néªŒè¯ï¼šC_3 = " &lt;&lt; calc.catalanDP(3)
         &lt;&lt; ", å®é™…åºåˆ—æ•° = " &lt;&lt; sequences.size() &lt;&lt; endl;

    // åº”ç”¨æ¼”ç¤º
    cout &lt;&lt; endl;
    calc.demonstrateApplications(4);

    return 0;
}
</code></pre></div></div></div></div><!-- âœ… å­¦ä¹ æ£€éªŒ --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">âœ…</span>
                å­¦ä¹ æ£€éªŒ
            </h2><div class="unified-grid unified-grid-1" style="gap: 15px;"><!-- é¢˜ç›®1 --><div class="question-card" style="border: 1px solid #dee2e6; border-radius: 8px; overflow: hidden;"><div class="question-header" onclick="toggleAnswer('q1')" style="padding: 15px; background: #f8f9fa; cursor: pointer; display: flex; justify-content: space-between; align-items: center;"><span><strong>é¢˜ç›®1ï¼š</strong>ä¸ºä»€ä¹ˆåºåˆ—$[3,1,2]$ä¸æ˜¯åˆæ³•çš„å‡ºæ ˆåºåˆ—ï¼Ÿè¯·è¯¦ç»†è¯´æ˜ã€‚</span><span id="q1-icon">ğŸ”½</span></div><div id="q1-answer" class="answer-content" style="display: none; padding: 15px; background: #e8f4fd;"><p><strong>ç­”æ¡ˆï¼š</strong></p><p>åºåˆ—$[3,1,2]$è¿åäº†æ ˆçš„LIFO(åè¿›å…ˆå‡º)åŸåˆ™ï¼Œè®©æˆ‘ä»¬åˆ†æå…·ä½“è¿‡ç¨‹ï¼š</p><div style="text-align: left;"><p><strong>å°è¯•ç”Ÿæˆè¿‡ç¨‹ï¼š</strong></p><ol style="margin: 10px 0;"><li><strong>ç›®æ ‡ï¼š</strong>ç¬¬ä¸€ä¸ªå‡ºæ ˆçš„æ˜¯3ï¼Œæ‰€ä»¥å¿…é¡»å…ˆè®©1,2,3éƒ½å…¥æ ˆ</li><li><strong>çŠ¶æ€ï¼š</strong>æ ˆ$=[1,2,3]$ï¼Œç„¶å3å‡ºæ ˆ</li><li><strong>ç›®æ ‡ï¼š</strong>ä¸‹ä¸€ä¸ªå‡ºæ ˆçš„æ˜¯1ï¼Œä½†æ­¤æ—¶æ ˆé¡¶æ˜¯2</li><li><strong>é—®é¢˜ï¼š</strong>è¦è®©1å‡ºæ ˆï¼Œå¿…é¡»å…ˆè®©2å‡ºæ ˆï¼ˆè¿åäº†åºåˆ—è¦æ±‚ï¼‰</li></ol><p><strong>å…³é”®åŸç†ï¼š</strong></p><ul style="margin: 10px 0;"><li>å½“å…ƒç´ $a$å…ˆäºå…ƒç´ $b$å‡ºæ ˆæ—¶ï¼Œå¦‚æœ$a > b$ï¼Œè¯´æ˜$b$åœ¨$a$å…¥æ ˆå‰å°±å·²ç»åœ¨æ ˆä¸­</li><li>åœ¨$[3,1,2]$ä¸­ï¼Œ$3$å…ˆäº$1$å‡ºæ ˆï¼Œä¸”$3>1$ï¼Œè¿™æ˜¯å¯èƒ½çš„</li><li>ä½†$1$å…ˆäº$2$å‡ºæ ˆï¼Œä¸”$1<2$ï¼Œè¯´æ˜$2$åœ¨$1$å…¥æ ˆåæ‰å…¥æ ˆ</li><li>è¿™ä¸"$3$å…ˆå‡ºæ ˆéœ€è¦$1,2,3$éƒ½å…ˆå…¥æ ˆ"çŸ›ç›¾</li></ul><p><strong>ç®€å•åˆ¤æ–­æ³•ï¼š</strong>å¯¹äºä»»æ„å…ƒç´ $a$ï¼Œåœ¨å®ƒå³è¾¹ä¸”æ¯”$a$å°çš„å…ƒç´ ä¸ªæ•°ï¼Œä¸èƒ½è¶…è¿‡åœ¨å®ƒå·¦è¾¹ä¸”æ¯”$a$å¤§çš„å…ƒç´ ä¸ªæ•°ã€‚</p></div></div></div><!-- é¢˜ç›®2 --><div class="question-card" style="border: 1px solid #dee2e6; border-radius: 8px; overflow: hidden;"><div class="question-header" onclick="toggleAnswer('q2')" style="padding: 15px; background: #f8f9fa; cursor: pointer; display: flex; justify-content: space-between; align-items: center;"><span><strong>é¢˜ç›®2ï¼š</strong>ç”¨é€’æ¨å…¬å¼æ‰‹åŠ¨è®¡ç®—$C_4$ï¼Œå¹¶è§£é‡Šæ¯ä¸€æ­¥çš„ç»„åˆæ„ä¹‰ã€‚</span><span id="q2-icon">ğŸ”½</span></div><div id="q2-answer" class="answer-content" style="display: none; padding: 15px; background: #e8f4fd;"><p><strong>ç­”æ¡ˆï¼š$C_4 = 14$</strong></p><div style="text-align: left;"><p><strong>é€’æ¨å…¬å¼ï¼š</strong>$$C_n = \sum_{i=0}^{n-1} C_i \times C_{n-1-i}$$</p><p><strong>è¯¦ç»†è®¡ç®—ï¼š</strong></p><div style="background: #f8f9fa; padding: 10px; border-radius: 5px; margin: 10px 0;">
                                $$C_4 = C_0 \times C_3 + C_1 \times C_2 + C_2 \times C_1 + C_3 \times C_0$$
                                $$= 1 \times 5 + 1 \times 2 + 2 \times 1 + 5 \times 1$$
                                $$= 5 + 2 + 2 + 5 = 14$$
                            </div><p><strong>ç»„åˆæ„ä¹‰è§£é‡Šï¼š</strong></p><ul style="margin: 10px 0;"><li><strong>$C_0 \times C_3 = 1 \times 5$ï¼š</strong>ç¬¬1ä¸ªå…ƒç´ æœ€åå‡ºæ ˆï¼Œå‰©ä¸‹3ä¸ªå…ƒç´ çš„æ’åˆ—æ•°</li><li><strong>$C_1 \times C_2 = 1 \times 2$ï¼š</strong>ç¬¬2ä¸ªå…ƒç´ æœ€åå‡ºæ ˆï¼Œå·¦è¾¹1ä¸ªå…ƒç´ ï¼Œå³è¾¹2ä¸ªå…ƒç´ çš„æ’åˆ—æ•°</li><li><strong>$C_2 \times C_1 = 2 \times 1$ï¼š</strong>ç¬¬3ä¸ªå…ƒç´ æœ€åå‡ºæ ˆï¼Œå·¦è¾¹2ä¸ªå…ƒç´ ï¼Œå³è¾¹1ä¸ªå…ƒç´ çš„æ’åˆ—æ•°</li><li><strong>$C_3 \times C_0 = 5 \times 1$ï¼š</strong>ç¬¬4ä¸ªå…ƒç´ æœ€åå‡ºæ ˆï¼Œå·¦è¾¹3ä¸ªå…ƒç´ çš„æ’åˆ—æ•°</li></ul><p><strong>æœ¬è´¨ç†è§£ï¼š</strong>é€’æ¨å…¬å¼åæ˜ äº†"é€‰æ‹©å“ªä¸ªå…ƒç´ ä½œä¸ºæ ¹èŠ‚ç‚¹"çš„æ€æƒ³ï¼Œè¿™åœ¨äºŒå‰æ ‘è®¡æ•°ã€æ‹¬å·åŒ¹é…ç­‰é—®é¢˜ä¸­éƒ½æœ‰ç›¸åŒçš„ç»“æ„ã€‚</p></div></div></div><!-- é¢˜ç›®3 --><div class="question-card" style="border: 1px solid #dee2e6; border-radius: 8px; overflow: hidden;"><div class="question-header" onclick="toggleAnswer('q3')" style="padding: 15px; background: #f8f9fa; cursor: pointer; display: flex; justify-content: space-between; align-items: center;"><span><strong>é¢˜ç›®3ï¼š</strong>å¡ç‰¹å…°æ•°çš„å¢é•¿é€Ÿåº¦æœ‰å¤šå¿«ï¼Ÿåˆ†æå…¶æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´ä¼˜åŒ–ç­–ç•¥ã€‚</span><span id="q3-icon">ğŸ”½</span></div><div id="q3-answer" class="answer-content" style="display: none; padding: 15px; background: #e8f4fd;"><p><strong>ç­”æ¡ˆï¼š</strong></p><div style="text-align: left;"><p><strong>å¢é•¿é€Ÿåº¦åˆ†æï¼š</strong></p><ul style="margin: 10px 0;"><li><strong>æ¸è¿‘å…¬å¼ï¼š</strong>$C_n \approx \frac{4^n}{\sqrt{\pi} \cdot n^{3/2}}$</li><li><strong>å¢é•¿ç‡ï¼š</strong>çº¦æ¯å¢åŠ 1ï¼Œå¡ç‰¹å…°æ•°å¢é•¿4å€</li><li><strong>å®ä¾‹ï¼š</strong>$C_{10} = 16,796$, $C_{20} = 6,564,120,420$</li><li><strong>è¶…è¶Šé˜¶ä¹˜ï¼š</strong>å¢é•¿é€Ÿåº¦ä»‹äºæŒ‡æ•°å’Œé˜¶ä¹˜ä¹‹é—´</li></ul><p><strong>ç®—æ³•å¤æ‚åº¦åˆ†æï¼š</strong></p><table style="width: 100%; border-collapse: collapse; margin: 10px 0; font-size: 14px;"><tr style="background: #f8f9fa;"><th style="border: 1px solid #ddd; padding: 6px;">æ–¹æ³•</th><th style="border: 1px solid #ddd; padding: 6px;">æ—¶é—´å¤æ‚åº¦</th><th style="border: 1px solid #ddd; padding: 6px;">ç©ºé—´å¤æ‚åº¦</th><th style="border: 1px solid #ddd; padding: 6px;">ä¼˜ç¼ºç‚¹</th></tr><tr><td style="border: 1px solid #ddd; padding: 6px;">æœ´ç´ é€’å½’</td><td style="border: 1px solid #ddd; padding: 6px;">$O(4^n)$</td><td style="border: 1px solid #ddd; padding: 6px;">$O(n)$</td><td style="border: 1px solid #ddd; padding: 6px;">ç®€å•ä½†ææ…¢</td></tr><tr><td style="border: 1px solid #ddd; padding: 6px;">è®°å¿†åŒ–é€’å½’</td><td style="border: 1px solid #ddd; padding: 6px;">$O(n^2)$</td><td style="border: 1px solid #ddd; padding: 6px;">$O(n)$</td><td style="border: 1px solid #ddd; padding: 6px;">å¹³è¡¡æ—¶ç©ºæ•ˆç‡</td></tr><tr><td style="border: 1px solid #ddd; padding: 6px;">åŠ¨æ€è§„åˆ’</td><td style="border: 1px solid #ddd; padding: 6px;">$O(n^2)$</td><td style="border: 1px solid #ddd; padding: 6px;">$O(n)$</td><td style="border: 1px solid #ddd; padding: 6px;">æœ€å®ç”¨çš„æ–¹æ³•</td></tr><tr><td style="border: 1px solid #ddd; padding: 6px;">ç›´æ¥å…¬å¼</td><td style="border: 1px solid #ddd; padding: 6px;">$O(n)$</td><td style="border: 1px solid #ddd; padding: 6px;">$O(1)$</td><td style="border: 1px solid #ddd; padding: 6px;">æœ€å¿«ä½†æ˜“æº¢å‡º</td></tr></table><p><strong>ç©ºé—´ä¼˜åŒ–ç­–ç•¥ï¼š</strong></p><ul style="margin: 10px 0;"><li><strong>æ»šåŠ¨æ•°ç»„ï¼š</strong>DPæ—¶åªä¿å­˜å¿…è¦çš„å‰å‡ é¡¹</li><li><strong>å¤§æ•°å¤„ç†ï¼š</strong>ä½¿ç”¨BigIntegeré¿å…æº¢å‡º</li><li><strong>æµå¼è®¡ç®—ï¼š</strong>è¾¹è®¡ç®—è¾¹è¾“å‡ºï¼Œä¸å­˜å‚¨æ‰€æœ‰ç»“æœ</li><li><strong>è¿‘ä¼¼è®¡ç®—ï¼š</strong>å¯¹äºè¶…å¤§$n$ï¼Œä½¿ç”¨æ¸è¿‘å…¬å¼ä¼°ç®—</li></ul></div></div></div><!-- é¢˜ç›®4 --><div class="question-card" style="border: 1px solid #dee2e6; border-radius: 8px; overflow: hidden;"><div class="question-header" onclick="toggleAnswer('q4')" style="padding: 15px; background: #f8f9fa; cursor: pointer; display: flex; justify-content: space-between; align-items: center;"><span><strong>é¢˜ç›®4ï¼š</strong>é™¤äº†æ ˆåºåˆ—ï¼Œå¡ç‰¹å…°æ•°è¿˜åœ¨å“ªäº›è®¡ç®—æœºç§‘å­¦é—®é¢˜ä¸­å‡ºç°ï¼Ÿä¸¾ä¾‹è¯´æ˜ã€‚</span><span id="q4-icon">ğŸ”½</span></div><div id="q4-answer" class="answer-content" style="display: none; padding: 15px; background: #e8f4fd;"><p><strong>ç­”æ¡ˆï¼š</strong></p><div style="text-align: left;"><p><strong>ä¸»è¦åº”ç”¨é¢†åŸŸï¼š</strong></p><div style="margin: 15px 0;"><h5>ğŸŒ³ 1. äºŒå‰æœç´¢æ ‘è®¡æ•°</h5><ul style="margin: 5px 0;"><li><strong>é—®é¢˜ï¼š</strong>$n$ä¸ªä¸åŒæ•°å­—èƒ½æ„æˆå¤šå°‘ç§ä¸åŒçš„äºŒå‰æœç´¢æ ‘ï¼Ÿ</li><li><strong>ç­”æ¡ˆï¼š</strong>ç¬¬$n$ä¸ªå¡ç‰¹å…°æ•°</li><li><strong>åº”ç”¨ï¼š</strong>æ•°æ®åº“ç´¢å¼•è®¾è®¡ã€å¹³è¡¡æ ‘åˆ†æ</li></ul></div><div style="margin: 15px 0;"><h5>ğŸ“ 2. å‡¸å¤šè¾¹å½¢ä¸‰è§’å‰–åˆ†</h5><ul style="margin: 5px 0;"><li><strong>é—®é¢˜ï¼š</strong>$n+2$è¾¹çš„å‡¸å¤šè¾¹å½¢æœ‰å¤šå°‘ç§ä¸‰è§’å‰–åˆ†æ–¹æ³•ï¼Ÿ</li><li><strong>ç­”æ¡ˆï¼š</strong>ç¬¬$n$ä¸ªå¡ç‰¹å…°æ•°</li><li><strong>åº”ç”¨ï¼š</strong>è®¡ç®—å‡ ä½•ã€å›¾å½¢å­¦ç½‘æ ¼ç”Ÿæˆ</li></ul></div><div style="margin: 15px 0;"><h5>ğŸ›¤ï¸ 3. è·¯å¾„è®¡æ•°é—®é¢˜</h5><ul style="margin: 5px 0;"><li><strong>é—®é¢˜ï¼š</strong>ä»$(0,0)$åˆ°$(n,n)$ä¸”ä¸è¶Šè¿‡$y=x$ç›´çº¿çš„è·¯å¾„æ•°</li><li><strong>ç­”æ¡ˆï¼š</strong>ç¬¬$n$ä¸ªå¡ç‰¹å…°æ•°</li><li><strong>åº”ç”¨ï¼š</strong>éšæœºæ¸¸èµ°ã€è’™ç‰¹å¡æ´›æ¨¡æ‹Ÿ</li></ul></div><div style="margin: 15px 0;"><h5>ğŸ”— 4. ç¼–è¯‘å™¨ä¸è¯­æ³•åˆ†æ</h5><ul style="margin: 5px 0;"><li><strong>æ‹¬å·åºåˆ—ï¼š</strong>$n$å¯¹æ‹¬å·çš„åˆæ³•åŒ¹é…æ•°</li><li><strong>è¡¨è¾¾å¼è§£æï¼š</strong>è¿ç®—ç¬¦ä¼˜å…ˆçº§çš„å¤„ç†æ–¹æ¡ˆæ•°</li><li><strong>è¯­æ³•æ ‘ï¼š</strong>æŠ½è±¡è¯­æ³•æ ‘çš„ä¸åŒå½¢æ€æ•°</li></ul></div><div style="margin: 15px 0;"><h5>ğŸ¯ 5. ç®—æ³•è®¾è®¡ä¸åˆ†æ</h5><ul style="margin: 5px 0;"><li><strong>åˆ†æ²»ç®—æ³•ï¼š</strong>æœ€ä¼˜å­ç»“æ„çš„åˆ’åˆ†æ–¹æ¡ˆæ•°</li><li><strong>åŠ¨æ€è§„åˆ’ï¼š</strong>çŸ©é˜µé“¾ä¹˜æ³•çš„åŠ æ‹¬å·æ–¹æ¡ˆæ•°</li><li><strong>é€’å½’ç»“æ„ï¼š</strong>é€’å½’è°ƒç”¨æ ‘çš„å½¢æ€æ•°</li></ul></div><p><strong>ä¸ºä»€ä¹ˆå¡ç‰¹å…°æ•°å¦‚æ­¤æ™®éï¼Ÿ</strong></p><p>å› ä¸ºå®ƒæè¿°äº†ä¸€ç§åŸºæœ¬çš„é€’å½’ç»“æ„ï¼šå°†é—®é¢˜åˆ†è§£ä¸ºä¸¤ä¸ªå­é—®é¢˜çš„æ‰€æœ‰å¯èƒ½æ–¹å¼ã€‚è¿™ç§ç»“æ„åœ¨è®¡ç®—æœºç§‘å­¦ä¸­æ— å¤„ä¸åœ¨ï¼</p></div></div></div></div><div class="info-box info-box-info" style="margin-top: 20px;"><span class="info-icon">ğŸ“š</span><strong>è¿›é˜¶å­¦ä¹ è·¯å¾„ï¼š</strong>
                æŒæ¡å¡ç‰¹å…°æ•°åï¼Œå¯ä»¥å­¦ä¹ ï¼šç”Ÿæˆå‡½æ•°ç†è®ºã€ç»„åˆæ•°å­¦é«˜çº§ä¸»é¢˜ã€å›¾è®ºä¸­çš„è®¡æ•°é—®é¢˜ã€æ¦‚ç‡è®ºä¸­çš„éšæœºè¿‡ç¨‹ã€ä»£æ•°å‡ ä½•ä¸­çš„æ¨¡ç©ºé—´ç­‰æ›´æ·±å…¥çš„æ•°å­¦é¢†åŸŸã€‚
            </div></div></div><!-- å¯¼èˆªæŒ‰é’® --><div style="text-align: center; margin-top: 40px;"><a href="{% url 'knowledge_app:index' %}" class="unified-btn unified-btn-primary"><span>ğŸ </span>
            è¿”å›é¦–é¡µ
        </a><a href="{% url 'knowledge_app:cs_universe' %}" class="unified-btn unified-btn-secondary"><span>ğŸŒŒ</span>
            æ¢ç´¢CSå®‡å®™
        </a></div></div><style>.code-tabs {background:#f8f9fa}.tab-btn {background:#e9ecef;border:none;padding:12px 24px;cursor:pointer;border-bottom:3px solid transparent;transition:all 0.3s ease}.tab-btn.active {background:#fff;border-bottom-color:#007bff;color:#007bff;font-weight:bold}.tab-btn:hover {background:#fff}.code-block {border:1px solid #dee2e6;border-top:none}.question-card {transition:all 0.3s ease}.question-card:hover {box-shadow:0 2px 8px rgba(0,0,0,0.1)}.question-header {transition:background-color 0.3s ease}.question-header:hover {background:#e9ecef !important}.answer-content {animation:fadeIn 0.3s ease}@keyframes fadeIn {from {opacity:0}to {opacity:1}}.stack-element {animation:slideIn 0.3s ease}@keyframes slideIn {from {opacity:0;transform:translateX(-50%) translateY(20px)}to {opacity:1;transform:translateX(-50%) translateY(0)}}.sequence-item {background:linear-gradient(135deg, #007bff, #0056b3);color:white;padding:8px 12px;border-radius:6px;font-weight:bold;transition:all 0.3s ease;cursor:pointer}.sequence-item:hover {transform:scale(1.05);box-shadow:0 4px 8px rgba(0,123,255,0.3)}.sequence-button {background:linear-gradient(135deg, #28a745, #1e7e34);color:white;padding:8px 12px;border:none;border-radius:6px;font-weight:bold;cursor:pointer;transition:all 0.3s ease;margin:3px}.sequence-button:hover {transform:scale(1.05);box-shadow:0 4px 8px rgba(40,167,69,0.3)}.sequence-button.selected {background:linear-gradient(135deg, #dc3545, #c82333);box-shadow:0 4px 8px rgba(220,53,69,0.4)}</style><script>let currentDemoStep = 0; let currentN = 3; let allSequences = []; let demoSteps = []; let demoAutoInterval; let selectedSequence = null; class CatalanCalculator { constructor() { this.memo = new Map(); } catalan(n) { if (n <= 1) return 1; if (this.memo.has(n)) { return this.memo.get(n); } let result = 0; for (let i = 0; i < n; i++) { result += this.catalan(i) * this.catalan(n - 1 - i); } this.memo.set(n, result); return result; } generateAllSequences(n) { const sequences = []; this.backtrack([], Array.from({length: n}, (_, i) => i + 1), [], sequences); return sequences; } backtrack(stack, remaining, output, sequences) { if (remaining.length === 0 && stack.length === 0) { sequences.push([...output]); return; } if (remaining.length > 0) { const element = remaining.shift(); stack.push(element); this.backtrack(stack, remaining, output, sequences); stack.pop(); remaining.unshift(element); } if (stack.length > 0) { const element = stack.pop(); output.push(element); this.backtrack(stack, remaining, output, sequences); output.pop(); stack.push(element); } } generateSequenceSteps(n, targetSequence) { const steps = []; let stack = []; let remaining = Array.from({length: n}, (_, i) => i + 1); let output = []; let targetIndex = 0; steps.push({ step: 0, stack: [...stack], remaining: [...remaining], output: [...output], action: `å¼€å§‹ç”Ÿæˆåºåˆ— [${targetSequence.join(', ')}]`, info: 'åˆå§‹çŠ¶æ€ï¼šæ‰€æœ‰å…ƒç´ åœ¨å…¥æ ˆåºåˆ—ä¸­' }); while (targetIndex < targetSequence.length) { const target = targetSequence[targetIndex]; while (remaining.length > 0 && remaining[0] <= target) { const element = remaining.shift(); stack.push(element); steps.push({ step: steps.length, stack: [...stack], remaining: [...remaining], output: [...output], action: `å…ƒç´  ${element} å…¥æ ˆ`, info: `ä¸ºäº†è¾“å‡º ${target}ï¼Œéœ€è¦å…ˆè®© ${element} å…¥æ ˆ`, highlight: 'push' }); } if (stack.length > 0 && stack[stack.length - 1] === target) { stack.pop(); output.push(target); steps.push({ step: steps.length, stack: [...stack], remaining: [...remaining], output: [...output], action: `å…ƒç´  ${target} å‡ºæ ˆ`, info: `æˆåŠŸè¾“å‡ºå…ƒç´  ${target}`, highlight: 'pop' }); targetIndex++; } else { break; } } steps.push({ step: steps.length, stack: [], remaining: [], output: [...output], action: 'åºåˆ—ç”Ÿæˆå®Œæˆ', info: `æœ€ç»ˆåºåˆ—ï¼š[${output.join(', ')}]`, final: true }); return steps; } isValidSequence(sequence) { const stack = []; let nextPush = 1; for (const num of sequence) { while (nextPush <= num) { stack.push(nextPush++); } if (stack.length === 0 || stack[stack.length - 1] !== num) { return false; } stack.pop(); } return true; } getCatalanCalculationString(n) { if (n <= 1) return `$C_1 = 1$`; let parts = []; for (let i = 0; i < n; i++) { parts.push(`C_{${i}} \\times C_{${n-1-i}}`); } let calculation = `$C_{${n}} = ` + parts.join(' + ') + '$'; let valueParts = []; for (let i = 0; i < n; i++) { const leftCatalan = this.catalan(i); const rightCatalan = this.catalan(n - 1 - i); valueParts.push(`${leftCatalan} \\times ${rightCatalan}`); } calculation += ` = $` + valueParts.join(' + ') + '$'; let sum = 0; for (let i = 0; i < n; i++) { sum += this.catalan(i) * this.catalan(n - 1 - i); } const finalParts = []; for (let i = 0; i < n; i++) { const leftCatalan = this.catalan(i); const rightCatalan = this.catalan(n - 1 - i); finalParts.push((leftCatalan * rightCatalan).toString()); } calculation += ` = $` + finalParts.join(' + ') + ` = ${sum}$`; return calculation; } } const calculator = new CatalanCalculator(); function updateCatalanDemo() { const input = document.getElementById('nInput'); const n = parseInt(input.value); if (n < 1 || n > 5) { alert('è¯·è¾“å…¥1-5ä¹‹é—´çš„æ•°å­—ï¼'); input.value = currentN; return; } currentN = n; const calculation = calculator.getCatalanCalculationString(n); document.getElementById('catalanCalculation').innerHTML = calculation; if (window.MathJax) { MathJax.typesetPromise([document.getElementById('catalanCalculation')]).catch(function (err) { console.log(err.message); }); } resetCatalanDemo(); } function generateAllSequences() { allSequences = calculator.generateAllSequences(currentN); displayAllSequences(); showSequenceSelector(); document.getElementById('demoStepInfo').innerHTML = `<strong>ç”Ÿæˆå®Œæˆï¼š</strong>æ‰¾åˆ°äº† ${allSequences.length} ç§ä¸åŒçš„å‡ºæ ˆåºåˆ—ï¼Œæ­£å¥½ç­‰äºç¬¬${currentN}ä¸ªå¡ç‰¹å…°æ•° $C_{${currentN}} = ${calculator.catalan(currentN)}$`; if (window.MathJax) { MathJax.typesetPromise([document.getElementById('demoStepInfo')]).catch(function (err) { console.log(err.message); }); } } function displayAllSequences() { const container = document.getElementById('sequencesList'); container.innerHTML = ''; allSequences.forEach((sequence, index) => { const div = document.createElement('div'); div.className = 'sequence-item'; div.textContent = `${index + 1}: [${sequence.join(', ')}]`; div.onclick = () => selectSequence(sequence, index); container.appendChild(div); }); } function showSequenceSelector() { const selector = document.getElementById('sequenceSelector'); const buttonContainer = document.getElementById('sequenceButtons'); buttonContainer.innerHTML = ''; allSequences.forEach((sequence, index) => { const button = document.createElement('button'); button.className = 'sequence-button'; button.textContent = `[${sequence.join(', ')}]`; button.onclick = () => selectSequence(sequence, index); buttonContainer.appendChild(button); }); selector.style.display = 'block'; } function selectSequence(sequence, index) { selectedSequence = sequence; const buttons = document.querySelectorAll('.sequence-button'); buttons.forEach((btn, i) => { if (i === index) { btn.classList.add('selected'); } else { btn.classList.remove('selected'); } }); document.getElementById('demoStepInfo').innerHTML = `<strong>å·²é€‰æ‹©åºåˆ—ï¼š</strong>[${sequence.join(', ')}] - ç‚¹å‡»"æ¼”ç¤ºé€‰ä¸­åºåˆ—"æŸ¥çœ‹è¯¦ç»†ç”Ÿæˆè¿‡ç¨‹`; } function startSequenceDemo() { if (!selectedSequence) { alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªåºåˆ—è¿›è¡Œæ¼”ç¤ºï¼'); return; } demoSteps = calculator.generateSequenceSteps(currentN, selectedSequence); currentDemoStep = 0; updateDemoDisplay(); document.getElementById('stepBtn').disabled = false; document.getElementById('autoBtn').disabled = false; } function updateDemoDisplay() { if (demoSteps.length === 0) return; const step = demoSteps[currentDemoStep]; const stackDiv = document.getElementById('stackVisualization'); stackDiv.innerHTML = '<div style="position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); color: #6c757d;">æ ˆåº•</div>'; step.stack.forEach((element, index) => { const div = document.createElement('div'); div.className = 'stack-element'; div.style.cssText = ` position: absolute; bottom: ${30 + index * 30}px; left: 50%; transform: translateX(-50%); background: ${step.highlight === 'push' && index === step.stack.length - 1 ? '#ffc107' : '#28a745'}; color: ${step.highlight === 'push' && index === step.stack.length - 1 ? '#000' : 'white'}; padding: 6px 12px; border-radius: 5px; font-weight: bold; font-size: 16px; min-width: 30px; text-align: center; `; div.textContent = element; stackDiv.appendChild(div); }); const sequenceDiv = document.getElementById('inputSequence'); sequenceDiv.innerHTML = ''; if (step.remaining.length === 0) { sequenceDiv.innerHTML = '<div style="color: #6c757d;">åºåˆ—ä¸ºç©º</div>'; } else { step.remaining.forEach((element, index) => { const div = document.createElement('div'); div.style.cssText = ` background: #007bff; color: white; padding: 6px 12px; border-radius: 5px; margin: 2px; font-weight: bold; font-size: 14px; `; div.textContent = element; sequenceDiv.appendChild(div); }); } const outputDiv = document.getElementById('outputSequence'); outputDiv.innerHTML = ''; if (step.output.length === 0) { outputDiv.innerHTML = '<div style="color: #6c757d;">è¾“å‡ºåºåˆ—ä¸ºç©º</div>'; } else { step.output.forEach((element, index) => { const div = document.createElement('div'); div.style.cssText = ` background: ${step.highlight === 'pop' && index === step.output.length - 1 ? '#ffc107' : '#dc3545'}; color: ${step.highlight === 'pop' && index === step.output.length - 1 ? '#000' : 'white'}; padding: 6px 12px; border-radius: 5px; margin: 2px; font-weight: bold; font-size: 14px; `; div.textContent = element; outputDiv.appendChild(div); }); } document.getElementById('demoStepInfo').innerHTML = `<strong>ç¬¬${step.step}æ­¥ï¼š</strong>${step.action}<br><small>${step.info}</small>`; const stepBtn = document.getElementById('stepBtn'); if (currentDemoStep >= demoSteps.length - 1) { stepBtn.textContent = 'æ¼”ç¤ºå®Œæˆ'; stepBtn.disabled = true; } else { stepBtn.textContent = 'ä¸‹ä¸€æ­¥'; stepBtn.disabled = false; } } function nextDemoStep() { if (currentDemoStep < demoSteps.length - 1) { currentDemoStep++; updateDemoDisplay(); } } function autoDemoPlay() { const autoBtn = document.getElementById('autoBtn'); if (demoAutoInterval) { clearInterval(demoAutoInterval); demoAutoInterval = null; autoBtn.textContent = 'è‡ªåŠ¨æ¼”ç¤º'; return; } autoBtn.textContent = 'åœæ­¢è‡ªåŠ¨'; demoAutoInterval = setInterval(() => { if (currentDemoStep < demoSteps.length - 1) { nextDemoStep(); } else { clearInterval(demoAutoInterval); demoAutoInterval = null; autoBtn.textContent = 'è‡ªåŠ¨æ¼”ç¤º'; } }, 2000); } function resetCatalanDemo() { currentDemoStep = 0; demoSteps = []; allSequences = []; selectedSequence = null; if (demoAutoInterval) { clearInterval(demoAutoInterval); demoAutoInterval = null; document.getElementById('autoBtn').textContent = 'è‡ªåŠ¨æ¼”ç¤º'; } document.getElementById('stackVisualization').innerHTML = '<div style="position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); color: #6c757d;">æ ˆåº•</div>'; document.getElementById('inputSequence').innerHTML = '<div style="color: #6c757d;">ç­‰å¾…å…¥æ ˆ</div>'; document.getElementById('outputSequence').innerHTML = '<div style="color: #6c757d;">å‡ºæ ˆç»“æœ</div>'; document.getElementById('sequencesList').innerHTML = ''; document.getElementById('sequenceSelector').style.display = 'none'; document.getElementById('stepBtn').disabled = true; document.getElementById('autoBtn').disabled = true; document.getElementById('demoStepInfo').innerHTML = '<strong>å¼€å§‹æ¢ç´¢ï¼š</strong>è¾“å…¥å…ƒç´ ä¸ªæ•°ï¼Œè§‚å¯Ÿå¡ç‰¹å…°æ•°å¦‚ä½•æè¿°å‡ºæ ˆåºåˆ—çš„æ•°é‡'; } function showCode(language) { document.querySelectorAll('.code-block').forEach(block => { block.style.display = 'none'; }); document.querySelectorAll('.tab-btn').forEach(btn => { btn.classList.remove('active'); }); document.getElementById(language + '-code').style.display = 'block'; document.querySelector(`[data-lang="${language}"]`).classList.add('active'); } async function copyCode(language) { const codeElement = document.getElementById(language + '-pre'); const text = codeElement.textContent; try { await navigator.clipboard.writeText(text); const button = document.querySelector(`#${language}-code button`); const originalText = button.innerHTML; button.innerHTML = 'âœ… å·²å¤åˆ¶'; button.style.background = '#28a745'; setTimeout(() => { button.innerHTML = originalText; button.style.background = '#4a5568'; }, 2000); } catch (err) { alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©ä»£ç å¤åˆ¶'); } } function toggleAnswer(questionId) { const answer = document.getElementById(questionId + '-answer'); const icon = document.getElementById(questionId + '-icon'); if (answer.style.display === 'none') { answer.style.display = 'block'; icon.textContent = 'ğŸ”¼'; if (window.MathJax) { MathJax.typesetPromise([answer]).catch(function (err) { console.log(err.message); }); } } else { answer.style.display = 'none'; icon.textContent = 'ğŸ”½'; } } document.addEventListener('DOMContentLoaded', function() { updateCatalanDemo(); if (window.MathJax) { MathJax.typesetPromise([document.body]).catch(function (err) { console.log(err.message); }); } });</script>

{% endblock %}