{% extends 'knowledge_app/base.html' %}

{% block title %}äºŒå‰æ ‘å››åºéå† - è®¡ç®—æœºç§‘å­¦å­¦ä¹ å¹³å°{% endblock %}

{% block content %}
<div class="page-container fade-in"><!-- é¢åŒ…å±‘å¯¼èˆª --><div class="breadcrumb"><a href="{% url 'knowledge_app:index' %}">é¦–é¡µ</a><span>></span><span>æ•°æ®ç»“æ„</span><span>></span><span>äºŒå‰æ ‘å››åºéå†</span></div><!-- é¡µé¢å¤´éƒ¨ --><div class="page-header slide-in-left"><h1><span class="page-icon">ğŸŒ³</span>
            äºŒå‰æ ‘å››åºéå†
        </h1><p>æŒæ¡äºŒå‰æ ‘çš„å››ç§éå†æ–¹å¼ï¼šå‰åºã€ä¸­åºã€ååºã€å±‚æ¬¡éå†</p></div><!-- ğŸ“‹ çŸ¥è¯†ç‚¹æ¦‚è¿° --><div class="content-card slide-in-right"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ“‹</span>
                çŸ¥è¯†ç‚¹æ¦‚è¿°
            </h2><div class="overview-content"><div class="concept-intro"><h3>æ ¸å¿ƒæ¦‚å¿µ</h3><p>äºŒå‰æ ‘éå†å°±åƒæŒ‰ä¸åŒè·¯çº¿æ¸¸è§ˆä¸€åº§åŸå¸‚ï¼Œæ¯æ¡è·¯çº¿éƒ½èƒ½è®¿é—®æ‰€æœ‰æ™¯ç‚¹ï¼Œä½†é¡ºåºä¸åŒã€‚å››åºéå†æä¾›äº†å››ç§ä¸åŒçš„"æ¸¸è§ˆè·¯çº¿"æ¥è®¿é—®æ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ã€‚</p></div><div class="unified-grid unified-grid-2"><div class="info-box info-box-info"><span class="info-icon">ğŸ“š</span><div><strong>å­¦ä¹ éš¾åº¦ï¼š</strong>å…¥é—¨
                            <br><strong>å‰ç½®çŸ¥è¯†ï¼š</strong>äºŒå‰æ ‘åŸºæœ¬æ¦‚å¿µã€é€’å½’æ€æƒ³
                        </div></div><div class="info-box info-box-success"><span class="info-icon">â±ï¸</span><div><strong>å­¦ä¹ æ—¶é—´ï¼š</strong>30-45åˆ†é’Ÿ
                            <br><strong>é‡è¦ç¨‹åº¦ï¼š</strong>â­â­â­â­â­
                        </div></div></div><div class="terms-list"><h4>ğŸ”‘ å…³é”®æœ¯è¯­</h4><div class="unified-grid unified-grid-2"><div class="term-item"><strong>å‰åºéå†ï¼š</strong>æ ¹â†’å·¦â†’å³çš„è®¿é—®é¡ºåº
                        </div><div class="term-item"><strong>ä¸­åºéå†ï¼š</strong>å·¦â†’æ ¹â†’å³çš„è®¿é—®é¡ºåº
                        </div><div class="term-item"><strong>ååºéå†ï¼š</strong>å·¦â†’å³â†’æ ¹çš„è®¿é—®é¡ºåº
                        </div><div class="term-item"><strong>å±‚æ¬¡éå†ï¼š</strong>æŒ‰æ ‘çš„å±‚çº§ä»ä¸Šåˆ°ä¸‹ã€ä»å·¦åˆ°å³è®¿é—®
                        </div></div></div></div></div></div><!-- ğŸ“– æ¦‚å¿µè¯¦è§£ --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ“–</span>
                æ¦‚å¿µè¯¦è§£
            </h2><div class="concept-details"><div class="concept-item"><h3>ğŸ¯ å‰åºéå† (Pre-order)</h3><p><strong>å£è¯€ï¼šæ ¹å·¦å³</strong></p><p>å°±åƒè€å¸ˆç‚¹åä¸€æ ·ï¼Œå…ˆå«ç­é•¿ï¼ˆæ ¹èŠ‚ç‚¹ï¼‰ï¼Œå†å«å·¦è¾¹çš„åŒå­¦ï¼Œæœ€åå«å³è¾¹çš„åŒå­¦ã€‚è¿™ç§æ–¹å¼å¸¸ç”¨äºå¤åˆ¶æ ‘ç»“æ„ã€‚</p><div class="example-box"><strong>ç”Ÿæ´»ä¾‹å­ï¼š</strong>æ‰“æ‰«æˆ¿é—´æ—¶ï¼Œå…ˆæ•´ç†æ¡Œé¢ï¼ˆæ ¹ï¼‰ï¼Œå†æ•´ç†å·¦æŠ½å±‰ï¼ˆå·¦å­æ ‘ï¼‰ï¼Œæœ€åæ•´ç†å³æŠ½å±‰ï¼ˆå³å­æ ‘ï¼‰ã€‚
                    </div></div><div class="concept-item"><h3>ğŸ¯ ä¸­åºéå† (In-order)</h3><p><strong>å£è¯€ï¼šå·¦æ ¹å³</strong></p><p>å¯¹äºäºŒå‰æœç´¢æ ‘ï¼Œä¸­åºéå†èƒ½å¾—åˆ°å‡åºæ’åˆ—çš„ç»“æœï¼å°±åƒä»å°åˆ°å¤§æ•°æ•°ä¸€æ ·è‡ªç„¶ã€‚</p><div class="example-box"><strong>ç”Ÿæ´»ä¾‹å­ï¼š</strong>é˜…è¯»ä¹¦ç±æ—¶ï¼Œå…ˆçœ‹å·¦é¡µï¼ˆå·¦å­æ ‘ï¼‰ï¼Œå†çœ‹ä¹¦è„Šé¡µç ï¼ˆæ ¹ï¼‰ï¼Œæœ€åçœ‹å³é¡µï¼ˆå³å­æ ‘ï¼‰ã€‚
                    </div></div><div class="concept-item"><h3>ğŸ¯ ååºéå† (Post-order)</h3><p><strong>å£è¯€ï¼šå·¦å³æ ¹</strong></p><p>å°±åƒæ‹†æˆ¿å­ä¸€æ ·ï¼Œè¦å…ˆæ‹†é™¤å·¦è¾¹å’Œå³è¾¹çš„é™„å±å»ºç­‘ï¼Œæœ€åæ‰èƒ½æ‹†ä¸»ä½“å»ºç­‘ã€‚å¸¸ç”¨äºé‡Šæ”¾å†…å­˜ã€‚</p><div class="example-box"><strong>ç”Ÿæ´»ä¾‹å­ï¼š</strong>è®¡ç®—æ–‡ä»¶å¤¹å¤§å°æ—¶ï¼Œå…ˆè®¡ç®—å­æ–‡ä»¶å¤¹ï¼ˆå·¦å³å­æ ‘ï¼‰ï¼Œæœ€ååŠ ä¸Šå½“å‰æ–‡ä»¶å¤¹ï¼ˆæ ¹ï¼‰çš„å¤§å°ã€‚
                    </div></div><div class="concept-item"><h3>ğŸ¯ å±‚æ¬¡éå† (Level-order)</h3><p><strong>ç‰¹ç‚¹ï¼šå¹¿åº¦ä¼˜å…ˆ</strong></p><p>åƒæ°´æ³¢çº¹æ‰©æ•£ä¸€æ ·ï¼Œä¸€å±‚ä¸€å±‚åœ°è®¿é—®èŠ‚ç‚¹ã€‚éœ€è¦å€ŸåŠ©é˜Ÿåˆ—æ•°æ®ç»“æ„å®ç°ã€‚</p><div class="example-box"><strong>ç”Ÿæ´»ä¾‹å­ï¼š</strong>å…¬å¸æ±‡æŠ¥å·¥ä½œï¼ŒCEOå…ˆæ±‡æŠ¥ï¼Œç„¶åå„éƒ¨é—¨ç»ç†æ±‡æŠ¥ï¼Œæœ€åæ™®é€šå‘˜å·¥æ±‡æŠ¥ã€‚
                    </div></div><div class="info-box info-box-warning"><span class="info-icon">âš ï¸</span><strong>åˆå­¦è€…æ˜“æ··æ·†ç‚¹ï¼š</strong><ul><li>å‰ã€ä¸­ã€ååºçš„"åº"æŒ‡çš„æ˜¯æ ¹èŠ‚ç‚¹çš„è®¿é—®æ—¶æœºï¼Œä¸æ˜¯æ•´ä½“é¡ºåº</li><li>å±‚æ¬¡éå†ä½¿ç”¨é˜Ÿåˆ—ï¼Œå…¶ä»–ä¸‰ç§ä½¿ç”¨é€’å½’ï¼ˆæœ¬è´¨æ˜¯æ ˆï¼‰</li><li>ä¸­åºéå†å¯¹äºŒå‰æœç´¢æ ‘æœ‰ç‰¹æ®Šæ„ä¹‰ï¼ˆå‡åºè¾“å‡ºï¼‰</li></ul></div></div></div></div><!-- ğŸ“Š å¯è§†åŒ–å±•ç¤º --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ“Š</span>
                äº¤äº’å¼å¯è§†åŒ–æ¼”ç¤º
            </h2><div class="visualization-container"><div class="demo-description"><p>ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ï¼Œè§‚çœ‹ä¸åŒéå†æ–¹å¼çš„åŠ¨ç”»æ¼”ç¤ºã€‚æ³¨æ„è§‚å¯ŸèŠ‚ç‚¹çš„è®¿é—®é¡ºåºå’Œè·¯å¾„ï¼</p></div><!-- é›†æˆåŸæœ‰çš„canvasåŠ¨ç”» --><div class="canvas-demo"><div class="controls"><button class="preorder" onclick="startTraversal('preorder')">ğŸ”´ å‰åºéå†</button><button class="inorder" onclick="startTraversal('inorder')">ğŸŸ¢ ä¸­åºéå†</button><button class="postorder" onclick="startTraversal('postorder')">ğŸ”µ ååºéå†</button><button class="levelorder" onclick="startTraversal('levelorder')">ğŸŸ£ å±‚æ¬¡éå†</button><button class="reset" onclick="resetAnimation()">ğŸ”„ é‡ç½®</button></div><div class="canvas-container"><canvas id="treeCanvas" width="800" height="400"></canvas></div><div class="info"><div class="info-box"><h4>éå†åºåˆ—</h4><div class="sequence" id="sequence"></div><div class="status" id="status">é€‰æ‹©ä¸€ç§éå†æ–¹å¼å¼€å§‹æ¼”ç¤º</div></div><div class="info-box"><h4>å½“å‰æ“ä½œ</h4><div class="sequence" id="currentAction">ç­‰å¾…å¼€å§‹...</div><div class="status" id="stepInfo">ç‚¹å‡»æŒ‰é’®å¼€å§‹éå†åŠ¨ç”»</div></div></div></div></div></div></div><!-- ğŸ’» ä»£ç å®ç° --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ’»</span>
                ä»£ç å®ç°
            </h2><div class="code-implementation"><div class="code-tabs"><button class="tab-btn active" onclick="showCode('cpp')">C++</button><button class="tab-btn" onclick="showCode('java')">Java</button><button class="tab-btn" onclick="showCode('python')">Python</button></div><div id="cpp-code" class="code-content active"><div class="code-header"><span>C++ å®ç°</span><button onclick="copyCode('cpp', this)" class="copy-btn">ğŸ“‹ å¤åˆ¶ä»£ç </button></div><pre><code id="cpp-source">#include &lt;iostream&gt;
#include &lt;queue&gt;
using namespace std;

struct TreeNode {
    int val;
    TreeNode* left;
    TreeNode* right;
    TreeNode(int x) : val(x), left(nullptr), right(nullptr) {}
};

class TreeTraversal {
public:
    // å‰åºéå†ï¼šæ ¹ -> å·¦ -> å³
    void preorder(TreeNode* root) {
        if (!root) return;
        cout << root->val << " ";  // å…ˆè®¿é—®æ ¹
        preorder(root->left);      // å†è®¿é—®å·¦å­æ ‘
        preorder(root->right);     // æœ€åè®¿é—®å³å­æ ‘
    }

    // ä¸­åºéå†ï¼šå·¦ -> æ ¹ -> å³
    void inorder(TreeNode* root) {
        if (!root) return;
        inorder(root->left);       // å…ˆè®¿é—®å·¦å­æ ‘
        cout << root->val << " ";  // å†è®¿é—®æ ¹
        inorder(root->right);      // æœ€åè®¿é—®å³å­æ ‘
    }

    // ååºéå†ï¼šå·¦ -> å³ -> æ ¹
    void postorder(TreeNode* root) {
        if (!root) return;
        postorder(root->left);     // å…ˆè®¿é—®å·¦å­æ ‘
        postorder(root->right);    // å†è®¿é—®å³å­æ ‘
        cout << root->val << " ";  // æœ€åè®¿é—®æ ¹
    }

    // å±‚æ¬¡éå†ï¼šä½¿ç”¨é˜Ÿåˆ—å®ç°
    void levelorder(TreeNode* root) {
        if (!root) return;
        queue&lt;TreeNode*&gt; q;
        q.push(root);

        while (!q.empty()) {
            TreeNode* node = q.front();
            q.pop();
            cout << node->val << " ";

            if (node->left) q.push(node->left);
            if (node->right) q.push(node->right);
        }
    }
};</code></pre></div><div id="java-code" class="code-content"><div class="code-header"><span>Java å®ç°</span><button onclick="copyCode('java', this)" class="copy-btn">ğŸ“‹ å¤åˆ¶ä»£ç </button></div><pre><code id="java-source">import java.util.*;

class TreeNode {
    int val;
    TreeNode left;
    TreeNode right;
    TreeNode(int x) { val = x; }
}

public class TreeTraversal {
    // å‰åºéå†ï¼šæ ¹ -> å·¦ -> å³
    public void preorder(TreeNode root) {
        if (root == null) return;
        System.out.print(root.val + " ");  // å…ˆè®¿é—®æ ¹
        preorder(root.left);               // å†è®¿é—®å·¦å­æ ‘
        preorder(root.right);              // æœ€åè®¿é—®å³å­æ ‘
    }

    // ä¸­åºéå†ï¼šå·¦ -> æ ¹ -> å³
    public void inorder(TreeNode root) {
        if (root == null) return;
        inorder(root.left);                // å…ˆè®¿é—®å·¦å­æ ‘
        System.out.print(root.val + " ");  // å†è®¿é—®æ ¹
        inorder(root.right);               // æœ€åè®¿é—®å³å­æ ‘
    }

    // ååºéå†ï¼šå·¦ -> å³ -> æ ¹
    public void postorder(TreeNode root) {
        if (root == null) return;
        postorder(root.left);              // å…ˆè®¿é—®å·¦å­æ ‘
        postorder(root.right);             // å†è®¿é—®å³å­æ ‘
        System.out.print(root.val + " ");  // æœ€åè®¿é—®æ ¹
    }

    // å±‚æ¬¡éå†ï¼šä½¿ç”¨é˜Ÿåˆ—å®ç°
    public void levelorder(TreeNode root) {
        if (root == null) return;
        Queue&lt;TreeNode&gt; queue = new LinkedList&lt;&gt;();
        queue.offer(root);

        while (!queue.isEmpty()) {
            TreeNode node = queue.poll();
            System.out.print(node.val + " ");

            if (node.left != null) queue.offer(node.left);
            if (node.right != null) queue.offer(node.right);
        }
    }
}</code></pre></div><div id="python-code" class="code-content"><div class="code-header"><span>Python å®ç°</span><button onclick="copyCode('python', this)" class="copy-btn">ğŸ“‹ å¤åˆ¶ä»£ç </button></div><pre><code id="python-source">from collections import deque

class TreeNode:
    def __init__(self, val=0, left=None, right=None):
        self.val = val
        self.left = left
        self.right = right

class TreeTraversal:
    # å‰åºéå†ï¼šæ ¹ -> å·¦ -> å³
    def preorder(self, root):
        if not root:
            return
        print(root.val, end=" ")  # å…ˆè®¿é—®æ ¹
        self.preorder(root.left)  # å†è®¿é—®å·¦å­æ ‘
        self.preorder(root.right) # æœ€åè®¿é—®å³å­æ ‘

    # ä¸­åºéå†ï¼šå·¦ -> æ ¹ -> å³
    def inorder(self, root):
        if not root:
            return
        self.inorder(root.left)   # å…ˆè®¿é—®å·¦å­æ ‘
        print(root.val, end=" ")  # å†è®¿é—®æ ¹
        self.inorder(root.right)  # æœ€åè®¿é—®å³å­æ ‘

    # ååºéå†ï¼šå·¦ -> å³ -> æ ¹
    def postorder(self, root):
        if not root:
            return
        self.postorder(root.left)  # å…ˆè®¿é—®å·¦å­æ ‘
        self.postorder(root.right) # å†è®¿é—®å³å­æ ‘
        print(root.val, end=" ")   # æœ€åè®¿é—®æ ¹

    # å±‚æ¬¡éå†ï¼šä½¿ç”¨é˜Ÿåˆ—å®ç°
    def levelorder(self, root):
        if not root:
            return
        queue = deque([root])

        while queue:
            node = queue.popleft()
            print(node.val, end=" ")

            if node.left:
                queue.append(node.left)
            if node.right:
                queue.append(node.right)</code></pre></div></div></div></div><!-- ğŸŒŸ å®é™…åº”ç”¨ --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸŒŸ</span>
                å®é™…åº”ç”¨
            </h2><div class="applications"><div class="unified-grid unified-grid-2"><div class="app-item"><h4>ğŸ—‚ï¸ æ–‡ä»¶ç³»ç»Ÿéå†</h4><p><strong>å‰åºéå†ï¼š</strong>å¤åˆ¶æ•´ä¸ªæ–‡ä»¶å¤¹ç»“æ„</p><p><strong>ååºéå†ï¼š</strong>è®¡ç®—æ–‡ä»¶å¤¹å¤§å°ã€åˆ é™¤æ–‡ä»¶å¤¹</p><p><strong>å±‚æ¬¡éå†ï¼š</strong>æŒ‰ç›®å½•å±‚çº§æ˜¾ç¤ºæ–‡ä»¶</p></div><div class="app-item"><h4>ğŸ” æœç´¢å¼•æ“</h4><p><strong>å‰åºéå†ï¼š</strong>ç´¢å¼•ç½‘ç«™ç»“æ„</p><p><strong>ä¸­åºéå†ï¼š</strong>è·å–æ’åºç»“æœ</p><p><strong>å±‚æ¬¡éå†ï¼š</strong>å¹¿åº¦ä¼˜å…ˆæœç´¢ç›¸å…³å†…å®¹</p></div><div class="app-item"><h4>ğŸ§® è¡¨è¾¾å¼æ±‚å€¼</h4><p><strong>å‰åºï¼š</strong>å‰ç¼€è¡¨è¾¾å¼ï¼ˆ+ 1 2ï¼‰</p><p><strong>ä¸­åºï¼š</strong>ä¸­ç¼€è¡¨è¾¾å¼ï¼ˆ1 + 2ï¼‰</p><p><strong>ååºï¼š</strong>åç¼€è¡¨è¾¾å¼ï¼ˆ1 2 +ï¼‰</p></div><div class="app-item"><h4>ğŸ® æ¸¸æˆå¼€å‘</h4><p><strong>å±‚æ¬¡éå†ï¼š</strong>AIå¯»è·¯ç®—æ³•</p><p><strong>å‰åºéå†ï¼š</strong>åœºæ™¯å¯¹è±¡æ¸²æŸ“</p><p><strong>ååºéå†ï¼š</strong>èµ„æºé‡Šæ”¾ç®¡ç†</p></div></div></div></div></div><!-- âœ… å­¦ä¹ æ£€éªŒ --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">âœ…</span>
                å­¦ä¹ æ£€éªŒ
            </h2><div class="quiz-section"><div class="quiz-item"><h4>ğŸ¤” é—®é¢˜1ï¼šéå†ç»“æœåˆ¤æ–­</h4><p>ç»™å®šäºŒå‰æ ‘ç»“æ„å¦‚ä¸‹ï¼ˆæ ¹èŠ‚ç‚¹ä¸ºAï¼‰ï¼Œè¯·å†™å‡ºå››ç§éå†çš„ç»“æœï¼š</p><pre class="tree-structure">
        A
       / \
      B   C
     / \   \
    D   E   F
                    </pre><button class="quiz-btn" onclick="toggleAnswer(1)">ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</button><div id="answer1" class="quiz-answer"><strong>ç­”æ¡ˆï¼š</strong><br>
                        â€¢ å‰åºéå†ï¼šA â†’ B â†’ D â†’ E â†’ C â†’ F<br>
                        â€¢ ä¸­åºéå†ï¼šD â†’ B â†’ E â†’ A â†’ C â†’ F<br>
                        â€¢ ååºéå†ï¼šD â†’ E â†’ B â†’ F â†’ C â†’ A<br>
                        â€¢ å±‚æ¬¡éå†ï¼šA â†’ B â†’ C â†’ D â†’ E â†’ F
                    </div></div><div class="quiz-item"><h4>ğŸ¤” é—®é¢˜2ï¼šåº”ç”¨åœºæ™¯é€‰æ‹©</h4><p>å¦‚æœä½ è¦å®ç°ä¸€ä¸ªåŠŸèƒ½æ¥åˆ é™¤æ•´æ£µäºŒå‰æ ‘å¹¶é‡Šæ”¾å†…å­˜ï¼Œåº”è¯¥é€‰æ‹©å“ªç§éå†æ–¹å¼ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</p><button class="quiz-btn" onclick="toggleAnswer(2)">ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</button><div id="answer2" class="quiz-answer"><strong>ç­”æ¡ˆï¼š</strong>ååºéå†<br><strong>åŸå› ï¼š</strong>ååºéå†å…ˆè®¿é—®å­èŠ‚ç‚¹ï¼Œåè®¿é—®çˆ¶èŠ‚ç‚¹ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿åœ¨åˆ é™¤çˆ¶èŠ‚ç‚¹ä¹‹å‰ï¼Œæ‰€æœ‰å­èŠ‚ç‚¹éƒ½å·²ç»è¢«åˆ é™¤ï¼Œé¿å…äº†æ‚¬ç©ºæŒ‡é’ˆçš„é—®é¢˜ã€‚å°±åƒæ‹†æˆ¿å­è¦å…ˆæ‹†é™„å±å»ºç­‘ï¼Œæœ€åæ‹†ä¸»ä½“å»ºç­‘ä¸€æ ·ã€‚
                    </div></div><div class="quiz-item"><h4>ğŸ¤” é—®é¢˜3ï¼šç®—æ³•å¤æ‚åº¦</h4><p>æ‰€æœ‰å››ç§éå†ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦åˆ†åˆ«æ˜¯å¤šå°‘ï¼Ÿ</p><button class="quiz-btn" onclick="toggleAnswer(3)">ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</button><div id="answer3" class="quiz-answer"><strong>ç­”æ¡ˆï¼š</strong><br><strong>æ—¶é—´å¤æ‚åº¦ï¼š</strong>éƒ½æ˜¯ O(n)ï¼Œå…¶ä¸­næ˜¯èŠ‚ç‚¹æ•°é‡ï¼Œå› ä¸ºæ¯ä¸ªèŠ‚ç‚¹éƒ½è¦è®¿é—®ä¸€æ¬¡<br><strong>ç©ºé—´å¤æ‚åº¦ï¼š</strong><br>
                        â€¢ å‰åºã€ä¸­åºã€ååºï¼šO(h)ï¼Œå…¶ä¸­hæ˜¯æ ‘çš„é«˜åº¦ï¼ˆé€’å½’æ ˆçš„æ·±åº¦ï¼‰<br>
                        â€¢ å±‚æ¬¡éå†ï¼šO(w)ï¼Œå…¶ä¸­wæ˜¯æ ‘çš„æœ€å¤§å®½åº¦ï¼ˆé˜Ÿåˆ—çš„æœ€å¤§é•¿åº¦ï¼‰
                    </div></div><div class="quiz-item"><h4>ğŸ¤” é—®é¢˜4ï¼šç‰¹æ®Šæ€§è´¨</h4><p>ä¸ºä»€ä¹ˆè¯´ä¸­åºéå†å¯¹äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰æœ‰ç‰¹æ®Šæ„ä¹‰ï¼Ÿ</p><button class="quiz-btn" onclick="toggleAnswer(4)">ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ</button><div id="answer4" class="quiz-answer"><strong>ç­”æ¡ˆï¼š</strong>å› ä¸ºäºŒå‰æœç´¢æ ‘çš„ç‰¹æ€§æ˜¯å·¦å­æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½å°äºæ ¹èŠ‚ç‚¹ï¼Œå³å­æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½å¤§äºæ ¹èŠ‚ç‚¹ã€‚ä¸­åºéå†çš„é¡ºåºæ˜¯"å·¦â†’æ ¹â†’å³"ï¼Œæ‰€ä»¥å¯¹BSTè¿›è¡Œä¸­åºéå†ä¼šå¾—åˆ°ä¸€ä¸ªä¸¥æ ¼é€’å¢çš„æ•°å­—åºåˆ—ã€‚è¿™ä¸ªç‰¹æ€§å¯ä»¥ç”¨æ¥ï¼š<br>
                        â€¢ éªŒè¯ä¸€æ£µæ ‘æ˜¯å¦ä¸ºBST<br>
                        â€¢ è·å–BSTä¸­çš„æœ‰åºæ•°æ®<br>
                        â€¢ æ‰¾åˆ°BSTä¸­çš„ç¬¬kå°å…ƒç´ 
                    </div></div></div><div class="next-steps"><h4>ğŸš€ ä¸‹ä¸€æ­¥å­¦ä¹ å»ºè®®</h4><div class="unified-grid unified-grid-2"><div class="info-box info-box-info"><span class="info-icon">ğŸ“–</span><strong>ç»§ç»­å­¦ä¹ ï¼š</strong>äºŒå‰æœç´¢æ ‘ã€AVLæ ‘ã€çº¢é»‘æ ‘
                    </div><div class="info-box info-box-success"><span class="info-icon">ğŸ’ª</span><strong>ç»ƒä¹ å»ºè®®ï¼š</strong>LeetCodeç›¸å…³é¢˜ç›®ï¼Œæ‰‹ç”»éå†è¿‡ç¨‹
                    </div></div></div></div></div><!-- å¯¼èˆªæŒ‰é’® --><div style="text-align: center; margin-top: 40px;"><a href="{% url 'knowledge_app:index' %}" class="unified-btn unified-btn-primary"><span>ğŸ </span>
            è¿”å›é¦–é¡µ
        </a><a href="{% url 'knowledge_app:cs_universe' %}" class="unified-btn unified-btn-secondary"><span>ğŸŒŒ</span>
            æ¢ç´¢CSå®‡å®™
        </a></div></div><style>.page-container {max-width:1200px;margin:0 auto;padding:20px;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif}.breadcrumb {margin-bottom:20px;font-size:14px;color:#666}.page-header {text-align:center;margin-bottom:30px}.page-header h1 {font-size:2.5rem;color:#333;margin-bottom:10px}.page-icon {font-size:3rem;margin-right:15px}.content-card {background:white;border-radius:12px;padding:30px;margin-bottom:20px;box-shadow:0 2px 12px rgba(0,0,0,0.1)}.section-title {font-size:1.5rem;color:#333;margin-bottom:20px;display:flex;align-items:center;gap:10px}.section-icon {font-size:1.8rem}.unified-grid {display:grid;gap:20px}.unified-grid-2 {grid-template-columns:repeat(auto-fit, minmax(300px, 1fr))}.unified-grid-3 {grid-template-columns:repeat(auto-fit, minmax(250px, 1fr))}.info-box {padding:20px;border-radius:8px;border-left:4px solid #4299e1}.info-box-info {background:#ebf8ff;border-left-color:#4299e1}.info-box-success {background:#f0fff4;border-left-color:#48bb78}.info-box-warning {background:#fffaf0;border-left-color:#ed8936}.info-icon {margin-right:8px}.concept-item {margin-bottom:25px;padding:20px;background:#f8f9fa;border-radius:8px}.concept-item h3 {color:#2d3748;margin-bottom:10px}.example-box {margin-top:15px;padding:15px;background:#e6fffa;border-left:4px solid #38b2ac;border-radius:4px}.terms-list .unified-grid-2 {margin-top:15px}.term-item {padding:12px;background:white;border-radius:6px;border-left:3px solid #4299e1}.canvas-demo {background:white;border-radius:15px;padding:25px;box-shadow:0 4px 20px rgba(0,0,0,0.1)}.controls {display:flex;justify-content:center;gap:15px;margin-bottom:25px;flex-wrap:wrap}.controls button {padding:12px 20px;border:none;border-radius:25px;cursor:pointer;font-size:16px;font-weight:bold;transition:all 0.3s ease;color:white}.preorder {background:linear-gradient(45deg, #ff6b6b, #ee5a52)}.inorder {background:linear-gradient(45deg, #4ecdc4, #44a08d)}.postorder {background:linear-gradient(45deg, #45b7d1, #96c93d)}.levelorder {background:linear-gradient(45deg, #f093fb, #f5576c)}.reset {background:linear-gradient(45deg, #4a5568, #2d3748)}.controls button:hover {transform:translateY(-2px);box-shadow:0 6px 20px rgba(0,0,0,0.15)}.canvas-container {display:flex;justify-content:center;margin-bottom:20px}#treeCanvas {border:2px solid #e2e8f0;border-radius:10px;background:white}.info {display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-top:20px}.info .info-box {background:#f7fafc;border:1px solid #e2e8f0}.info h4 {margin-top:0;color:#2d3748}.sequence {font-size:16px;font-weight:bold;color:#4299e1;min-height:20px}.status {font-size:14px;color:#718096;margin-top:8px}.code-tabs {display:flex;border-bottom:1px solid #e2e8f0;margin-bottom:20px}.tab-btn {padding:12px 24px;border:none;background:none;cursor:pointer;font-size:16px;border-bottom:2px solid transparent;transition:all 0.3s ease}.tab-btn.active {color:#4299e1;border-bottom-color:#4299e1}.code-content {display:none}.code-content.active {display:block}.code-header {display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.copy-btn {background:#4299e1;color:white;border:none;padding:8px 16px;border-radius:6px;cursor:pointer;font-size:14px}.copy-btn:hover {background:#3182ce}pre {background:#2d3748;color:#e2e8f0;padding:20px;border-radius:8px;overflow-x:auto;line-height:1.6;font-size:14px}.app-item {padding:20px;background:#f8f9fa;border-radius:8px;border-left:4px solid #4299e1}.app-item h4 {color:#2d3748;margin-bottom:15px}.quiz-item {margin-bottom:25px;padding:20px;border:1px solid #e2e8f0;border-radius:8px}.quiz-btn {background:#4299e1;color:white;border:none;padding:10px 20px;border-radius:6px;cursor:pointer;margin-top:15px;transition:background 0.3s ease}.quiz-btn:hover {background:#3182ce}.quiz-answer {display:none;margin-top:15px;padding:15px;background:#f0fff4;border-left:4px solid #48bb78;border-radius:4px}.quiz-answer.show {display:block}.tree-structure {background:#f7fafc;color:#2d3748;font-family:'Courier New', monospace;text-align:center;margin:15px 0}.unified-btn {display:inline-block;padding:12px 24px;border-radius:8px;text-decoration:none;font-weight:500;margin:0 10px;transition:all 0.3s ease}.unified-btn-primary {background:#4299e1;color:white}.unified-btn-secondary {background:#718096;color:white}.unified-btn:hover {transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.15)}.legend {background:#f8f9fa;border-radius:8px;padding:15px;margin:20px 0;border:1px solid #e2e8f0}.legend h4 {margin:0 0 15px 0;color:#2d3748;font-size:16px}.legend-items {display:flex;flex-wrap:wrap;gap:15px;justify-content:center;margin-bottom:20px}.legend-item {display:flex;align-items:center;gap:8px;padding:5px 10px;background:white;border-radius:6px;box-shadow:0 2px 4px rgba(0,0,0,0.1)}.legend-color {width:20px;height:20px;border-radius:50%;flex-shrink:0}.legend-color.pulsing {animation:pulse 1s infinite}.arrow-example {width:30px;height:20px;position:relative;flex-shrink:0}.down-arrow::after {content:'';position:absolute;left:50%;top:2px;transform:translateX(-50%);width:0;height:0;border-left:8px solid transparent;border-right:8px solid transparent;border-top:12px solid #22c55e}.down-arrow::before {content:'é€’';position:absolute;left:50%;bottom:0;transform:translateX(-50%);font-size:10px;color:#16a34a;font-weight:bold}.up-arrow::after {content:'';position:absolute;left:50%;bottom:2px;transform:translateX(-50%);width:0;height:0;border-left:8px solid transparent;border-right:8px solid transparent;border-bottom:12px solid #3b82f6}.up-arrow::before {content:'å½’';position:absolute;left:50%;top:0;transform:translateX(-50%);font-size:10px;color:#1d4ed8;font-weight:bold}.number-example {width:20px;height:20px;border-radius:50%;background:#2d3748;color:white;display:flex;align-items:center;justify-content:center;font-size:10px;font-weight:bold;flex-shrink:0}@keyframes pulse {0% {transform:scale(1)}50% {transform:scale(1.1)}100% {transform:scale(1)}}.legend-item span {font-size:14px;color:#4a5568;font-weight:500}@media (max-width:768px) {.info {grid-template-columns:1fr}.controls {flex-direction:column;align-items:center}.controls button {width:200px}.unified-grid-2, .unified-grid-3 {grid-template-columns:1fr}.legend-items {justify-content:flex-start}}</style><script>const canvas = document.getElementById('treeCanvas'); const ctx = canvas.getContext('2d'); class TreeNode { constructor(val, x, y) { this.val = val; this.x = x; this.y = y; this.left = null; this.right = null; this.visited = false; this.current = false; this.completed = false; this.processing = false; this.inPath = false; this.visitOrder = 0; this.arrows = []; } } function createSampleTree() { const root = new TreeNode('A', 400, 80); root.left = new TreeNode('B', 250, 140); root.right = new TreeNode('C', 550, 140); root.left.left = new TreeNode('D', 150, 200); root.left.right = new TreeNode('E', 350, 200); root.right.left = new TreeNode('F', 450, 200); root.right.right = new TreeNode('G', 650, 200); function initArrows(node) { if (node) { node.arrows = []; initArrows(node.left); initArrows(node.right); } } initArrows(root); return root; } let tree = createSampleTree(); let animationState = { isAnimating: false, currentTraversal: '', sequence: [], step: 0, visitCounter: 0 }; function drawNode(node) { if (node.visitOrder && node.visitOrder > 0) { ctx.beginPath(); ctx.arc(node.x - 35, node.y - 25, 12, 0, 2 * Math.PI); ctx.fillStyle = '#2d3748'; ctx.fill(); ctx.fillStyle = 'white'; ctx.font = 'bold 10px Arial'; ctx.textAlign = 'center'; ctx.textBaseline = 'middle'; ctx.fillText(node.visitOrder.toString(), node.x - 35, node.y - 25); } ctx.beginPath(); ctx.arc(node.x, node.y, 25, 0, 2 * Math.PI); if (node.current) { const pulseSize = 25 + Math.sin(Date.now() * 0.008) * 3; ctx.beginPath(); ctx.arc(node.x, node.y, pulseSize, 0, 2 * Math.PI); ctx.fillStyle = '#ff4444'; ctx.strokeStyle = '#cc0000'; ctx.lineWidth = 4; ctx.beginPath(); ctx.arc(node.x, node.y, pulseSize + 8, 0, 2 * Math.PI); ctx.strokeStyle = 'rgba(255, 68, 68, 0.3)'; ctx.lineWidth = 6; ctx.stroke(); ctx.beginPath(); ctx.arc(node.x, node.y, pulseSize, 0, 2 * Math.PI); ctx.fillStyle = '#ff4444'; ctx.strokeStyle = '#cc0000'; ctx.lineWidth = 4; } else if (node.processing) { ctx.fillStyle = '#ffd700'; ctx.strokeStyle = '#ffb000'; ctx.lineWidth = 3; } else if (node.completed) { ctx.fillStyle = '#22c55e'; ctx.strokeStyle = '#16a34a'; ctx.lineWidth = 3; } else if (node.visited) { ctx.fillStyle = '#f97316'; ctx.strokeStyle = '#ea580c'; ctx.lineWidth = 3; } else if (node.inPath) { ctx.fillStyle = '#a855f7'; ctx.strokeStyle = '#9333ea'; ctx.lineWidth = 2; } else { ctx.fillStyle = '#64b5f6'; ctx.strokeStyle = '#42a5f5'; ctx.lineWidth = 2; } ctx.fill(); ctx.stroke(); ctx.fillStyle = node.current ? 'white' : (node.completed || node.visited || node.processing) ? 'white' : '#1a1a1a'; ctx.font = 'bold 18px Arial'; ctx.textAlign = 'center'; ctx.textBaseline = 'middle'; ctx.fillText(node.val, node.x, node.y); } function drawArrow(fromX, fromY, toX, toY, type) { const headLength = 15; const headAngle = Math.PI / 6; const angle = Math.atan2(toY - fromY, toX - fromX); const nodeRadius = 25; const startX = fromX + Math.cos(angle) * nodeRadius; const startY = fromY + Math.sin(angle) * nodeRadius; const endX = toX - Math.cos(angle) * nodeRadius; const endY = toY - Math.sin(angle) * nodeRadius; ctx.strokeStyle = type === 'down' ? '#22c55e' : '#3b82f6'; ctx.fillStyle = type === 'down' ? '#22c55e' : '#3b82f6'; ctx.lineWidth = 3; ctx.beginPath(); ctx.moveTo(startX, startY); ctx.lineTo(endX, endY); ctx.stroke(); ctx.beginPath(); ctx.moveTo(endX, endY); ctx.lineTo( endX - headLength * Math.cos(angle - headAngle), endY - headLength * Math.sin(angle - headAngle) ); ctx.lineTo( endX - headLength * Math.cos(angle + headAngle), endY - headLength * Math.sin(angle + headAngle) ); ctx.closePath(); ctx.fill(); const midX = (startX + endX) / 2; const midY = (startY + endY) / 2; const labelOffset = 20; ctx.font = 'bold 12px Arial'; ctx.textAlign = 'center'; ctx.textBaseline = 'middle'; if (type === 'down') { ctx.fillStyle = '#16a34a'; ctx.fillText('é€’', midX + labelOffset * Math.sin(angle), midY - labelOffset * Math.cos(angle)); } else { ctx.fillStyle = '#1d4ed8'; ctx.fillText('å½’', midX + labelOffset * Math.sin(angle), midY - labelOffset * Math.cos(angle)); } } function drawConnection(parent, child) { ctx.beginPath(); ctx.moveTo(parent.x, parent.y + 25); ctx.lineTo(child.x, child.y - 25); ctx.strokeStyle = '#a0aec0'; ctx.lineWidth = 2; ctx.stroke(); } function drawArrows(root) { if (!root) return; root.arrows.forEach(arrow => { if (arrow.active) { drawArrow(root.x, root.y, arrow.to.x, arrow.to.y, arrow.type); } }); drawArrows(root.left); drawArrows(root.right); } function drawTree(root) { ctx.clearRect(0, 0, canvas.width, canvas.height); function drawConnections(node) { if (node.left) { drawConnection(node, node.left); drawConnections(node.left); } if (node.right) { drawConnection(node, node.right); drawConnections(node.right); } } drawConnections(root); drawArrows(root); function drawNodes(node) { if (node) { drawNode(node); drawNodes(node.left); drawNodes(node.right); } } drawNodes(root); } function addArrow(from, to, type) { from.arrows.push({ to: to, type: type, active: true }); } function removeArrow(from, to) { from.arrows = from.arrows.filter(arrow => arrow.to !== to); } function clearAllArrows(root) { if (!root) return; root.arrows = []; clearAllArrows(root.left); clearAllArrows(root.right); } function resetNodeStates(root) { if (root) { root.visited = false; root.current = false; root.completed = false; root.processing = false; root.inPath = false; root.visitOrder = 0; root.arrows = []; resetNodeStates(root.left); resetNodeStates(root.right); } } function sleep(ms) { return new Promise(resolve => setTimeout(resolve, ms)); } function updateDisplay(action, info) { document.getElementById('currentAction').textContent = action; document.getElementById('stepInfo').textContent = info; } function updateSequence() { document.getElementById('sequence').textContent = animationState.sequence.join(' â†’ '); } async function preorderTraversal(root, sequence) { if (!root || !animationState.isAnimating) return; root.processing = true; updateDisplay(`åˆ°è¾¾èŠ‚ç‚¹: ${root.val}`, `å‰åºéå†: æ ¹ â†’ å·¦ â†’ å³`); drawTree(tree); await sleep(600); root.processing = false; root.current = true; animationState.visitCounter++; root.visitOrder = animationState.visitCounter; updateDisplay(`è®¿é—®èŠ‚ç‚¹: ${root.val} (ç¬¬${root.visitOrder}ä¸ª)`, `å‰åºéå†: æ ¹ â†’ å·¦ â†’ å³`); drawTree(tree); await sleep(800); root.visited = true; root.current = false; sequence.push(root.val); updateSequence(); drawTree(tree); await sleep(400); if (root.left && animationState.isAnimating) { updateDisplay(`å‡†å¤‡è®¿é—® ${root.val} çš„å·¦å­æ ‘`, `å‰åºéå†: æ ¹ â†’ å·¦ â†’ å³ (å‘ä¸‹é€’)`); addArrow(root, root.left, 'down'); root.left.inPath = true; drawTree(tree); await sleep(500); await preorderTraversal(root.left, sequence); if (animationState.isAnimating) { removeArrow(root, root.left); addArrow(root.left, root, 'up'); updateDisplay(`ä» ${root.left.val} è¿”å›åˆ° ${root.val}`, `å‰åºéå†: å·¦å­æ ‘å®Œæˆï¼Œå‘ä¸Šå½’`); drawTree(tree); await sleep(400); removeArrow(root.left, root); } root.left.inPath = false; } if (root.right && animationState.isAnimating) { updateDisplay(`å‡†å¤‡è®¿é—® ${root.val} çš„å³å­æ ‘`, `å‰åºéå†: æ ¹ â†’ å·¦ â†’ å³ (å‘ä¸‹é€’)`); addArrow(root, root.right, 'down'); root.right.inPath = true; drawTree(tree); await sleep(500); await preorderTraversal(root.right, sequence); if (animationState.isAnimating) { removeArrow(root, root.right); addArrow(root.right, root, 'up'); updateDisplay(`ä» ${root.right.val} è¿”å›åˆ° ${root.val}`, `å‰åºéå†: å³å­æ ‘å®Œæˆï¼Œå‘ä¸Šå½’`); drawTree(tree); await sleep(400); removeArrow(root.right, root); } root.right.inPath = false; } if (animationState.isAnimating) { root.completed = true; updateDisplay(`å®ŒæˆèŠ‚ç‚¹: ${root.val}`, `å‰åºéå†: æ ¹ â†’ å·¦ â†’ å³`); drawTree(tree); await sleep(300); } } async function inorderTraversal(root, sequence) { if (!root || !animationState.isAnimating) return; root.processing = true; updateDisplay(`åˆ°è¾¾èŠ‚ç‚¹: ${root.val}`, `ä¸­åºéå†: å·¦ â†’ æ ¹ â†’ å³`); drawTree(tree); await sleep(600); if (root.left && animationState.isAnimating) { updateDisplay(`å‡†å¤‡è®¿é—® ${root.val} çš„å·¦å­æ ‘`, `ä¸­åºéå†: å·¦ â†’ æ ¹ â†’ å³ (å‘ä¸‹é€’)`); addArrow(root, root.left, 'down'); root.left.inPath = true; drawTree(tree); await sleep(500); await inorderTraversal(root.left, sequence); if (animationState.isAnimating) { removeArrow(root, root.left); addArrow(root.left, root, 'up'); updateDisplay(`ä» ${root.left.val} è¿”å›åˆ° ${root.val}`, `ä¸­åºéå†: å·¦å­æ ‘å®Œæˆï¼Œå‘ä¸Šå½’`); drawTree(tree); await sleep(400); removeArrow(root.left, root); } root.left.inPath = false; } if (!animationState.isAnimating) return; root.processing = false; root.current = true; animationState.visitCounter++; root.visitOrder = animationState.visitCounter; updateDisplay(`è®¿é—®èŠ‚ç‚¹: ${root.val} (ç¬¬${root.visitOrder}ä¸ª)`, `ä¸­åºéå†: å·¦ â†’ æ ¹ â†’ å³`); drawTree(tree); await sleep(800); root.visited = true; root.current = false; sequence.push(root.val); updateSequence(); drawTree(tree); await sleep(400); if (root.right && animationState.isAnimating) { updateDisplay(`å‡†å¤‡è®¿é—® ${root.val} çš„å³å­æ ‘`, `ä¸­åºéå†: å·¦ â†’ æ ¹ â†’ å³ (å‘ä¸‹é€’)`); addArrow(root, root.right, 'down'); root.right.inPath = true; drawTree(tree); await sleep(500); await inorderTraversal(root.right, sequence); if (animationState.isAnimating) { removeArrow(root, root.right); addArrow(root.right, root, 'up'); updateDisplay(`ä» ${root.right.val} è¿”å›åˆ° ${root.val}`, `ä¸­åºéå†: å³å­æ ‘å®Œæˆï¼Œå‘ä¸Šå½’`); drawTree(tree); await sleep(400); removeArrow(root.right, root); } root.right.inPath = false; } if (animationState.isAnimating) { root.completed = true; updateDisplay(`å®ŒæˆèŠ‚ç‚¹: ${root.val}`, `ä¸­åºéå†: å·¦ â†’ æ ¹ â†’ å³`); drawTree(tree); await sleep(300); } } async function postorderTraversal(root, sequence) { if (!root || !animationState.isAnimating) return; root.processing = true; updateDisplay(`åˆ°è¾¾èŠ‚ç‚¹: ${root.val}`, `ååºéå†: å·¦ â†’ å³ â†’ æ ¹`); drawTree(tree); await sleep(600); if (root.left && animationState.isAnimating) { updateDisplay(`å‡†å¤‡è®¿é—® ${root.val} çš„å·¦å­æ ‘`, `ååºéå†: å·¦ â†’ å³ â†’ æ ¹ (å‘ä¸‹é€’)`); addArrow(root, root.left, 'down'); root.left.inPath = true; drawTree(tree); await sleep(500); await postorderTraversal(root.left, sequence); if (animationState.isAnimating) { removeArrow(root, root.left); addArrow(root.left, root, 'up'); updateDisplay(`ä» ${root.left.val} è¿”å›åˆ° ${root.val}`, `ååºéå†: å·¦å­æ ‘å®Œæˆï¼Œå‘ä¸Šå½’`); drawTree(tree); await sleep(400); removeArrow(root.left, root); } root.left.inPath = false; } if (!animationState.isAnimating) return; if (root.right && animationState.isAnimating) { updateDisplay(`å‡†å¤‡è®¿é—® ${root.val} çš„å³å­æ ‘`, `ååºéå†: å·¦ â†’ å³ â†’ æ ¹ (å‘ä¸‹é€’)`); addArrow(root, root.right, 'down'); root.right.inPath = true; drawTree(tree); await sleep(500); await postorderTraversal(root.right, sequence); if (animationState.isAnimating) { removeArrow(root, root.right); addArrow(root.right, root, 'up'); updateDisplay(`ä» ${root.right.val} è¿”å›åˆ° ${root.val}`, `ååºéå†: å³å­æ ‘å®Œæˆï¼Œå‘ä¸Šå½’`); drawTree(tree); await sleep(400); removeArrow(root.right, root); } root.right.inPath = false; } if (!animationState.isAnimating) return; root.processing = false; root.current = true; animationState.visitCounter++; root.visitOrder = animationState.visitCounter; updateDisplay(`è®¿é—®èŠ‚ç‚¹: ${root.val} (ç¬¬${root.visitOrder}ä¸ª)`, `ååºéå†: å·¦ â†’ å³ â†’ æ ¹`); drawTree(tree); await sleep(800); root.visited = true; root.current = false; sequence.push(root.val); updateSequence(); drawTree(tree); await sleep(400); root.completed = true; updateDisplay(`å®ŒæˆèŠ‚ç‚¹: ${root.val}`, `ååºéå†: å·¦ â†’ å³ â†’ æ ¹`); drawTree(tree); await sleep(300); } async function levelorderTraversal(root, sequence) { if (!root || !animationState.isAnimating) return; const queue = [root]; root.inPath = true; while (queue.length > 0 && animationState.isAnimating) { const node = queue.shift(); node.inPath = false; node.processing = true; updateDisplay(`ä»é˜Ÿåˆ—å–å‡ºèŠ‚ç‚¹: ${node.val}`, `å±‚æ¬¡éå†: æŒ‰å±‚ä»å·¦åˆ°å³è®¿é—®`); drawTree(tree); await sleep(600); node.processing = false; node.current = true; animationState.visitCounter++; node.visitOrder = animationState.visitCounter; updateDisplay(`è®¿é—®èŠ‚ç‚¹: ${node.val} (ç¬¬${node.visitOrder}ä¸ª)`, `å±‚æ¬¡éå†: æŒ‰å±‚ä»å·¦åˆ°å³è®¿é—®`); drawTree(tree); await sleep(800); node.visited = true; node.current = false; sequence.push(node.val); updateSequence(); drawTree(tree); await sleep(400); if (node.left) { queue.push(node.left); node.left.inPath = true; updateDisplay(`å°† ${node.left.val} åŠ å…¥é˜Ÿåˆ—`, `å±‚æ¬¡éå†: æŒ‰å±‚ä»å·¦åˆ°å³è®¿é—®`); drawTree(tree); await sleep(300); } if (node.right) { queue.push(node.right); node.right.inPath = true; updateDisplay(`å°† ${node.right.val} åŠ å…¥é˜Ÿåˆ—`, `å±‚æ¬¡éå†: æŒ‰å±‚ä»å·¦åˆ°å³è®¿é—®`); drawTree(tree); await sleep(300); } node.completed = true; drawTree(tree); await sleep(200); } } async function startTraversal(type) { if (animationState.isAnimating) return; resetAnimation(); animationState.isAnimating = true; animationState.currentTraversal = type; animationState.sequence = []; animationState.visitCounter = 0; const traversalNames = { 'preorder': 'å‰åºéå†', 'inorder': 'ä¸­åºéå†', 'postorder': 'ååºéå†', 'levelorder': 'å±‚æ¬¡éå†' }; document.getElementById('status').textContent = `æ­£åœ¨æ‰§è¡Œ${traversalNames[type]}...`; try { switch(type) { case 'preorder': await preorderTraversal(tree, animationState.sequence); break; case 'inorder': await inorderTraversal(tree, animationState.sequence); break; case 'postorder': await postorderTraversal(tree, animationState.sequence); break; case 'levelorder': await levelorderTraversal(tree, animationState.sequence); break; } if (animationState.isAnimating) { document.getElementById('status').textContent = `${traversalNames[type]}å®Œæˆï¼`; updateDisplay(`${traversalNames[type]}å®Œæˆ`, `æœ€ç»ˆåºåˆ—: ${animationState.sequence.join(' â†’ ')}`); } } catch (error) { console.error('éå†è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯:', error); } animationState.isAnimating = false; } function resetAnimation() { animationState.isAnimating = false; animationState.sequence = []; animationState.visitCounter = 0; resetNodeStates(tree); drawTree(tree); document.getElementById('sequence').textContent = ''; document.getElementById('status').textContent = 'é€‰æ‹©ä¸€ç§éå†æ–¹å¼å¼€å§‹æ¼”ç¤º'; updateDisplay('ç­‰å¾…å¼€å§‹...', 'ç‚¹å‡»æŒ‰é’®å¼€å§‹éå†åŠ¨ç”»'); } function showCode(language) { const codeContents = document.querySelectorAll('.code-content'); codeContents.forEach(content => content.classList.remove('active')); const tabs = document.querySelectorAll('.tab-btn'); tabs.forEach(tab => tab.classList.remove('active')); document.getElementById(`${language}-code`).classList.add('active'); event.target.classList.add('active'); } function copyCode(language, buttonElement) { let button = buttonElement; if (!button) { button = event ? event.target : null; } if (!button) { console.error('æ— æ³•è·å–æŒ‰é’®å…ƒç´ '); return; } const codeElement = document.getElementById(`${language}-source`); if (!codeElement) { console.error(`æ‰¾ä¸åˆ°ä»£ç å…ƒç´ : ${language}-source`); showCopyError(button); return; } const text = codeElement.textContent || codeElement.innerText; const cleanText = text.trim(); if (!cleanText) { console.error('ä»£ç å†…å®¹ä¸ºç©º'); showCopyError(button); return; } if (navigator.clipboard && navigator.clipboard.writeText) { navigator.clipboard.writeText(cleanText).then(() => { showCopySuccess(button); }).catch(err => { console.error('ç°ä»£APIå¤åˆ¶å¤±è´¥:', err); fallbackCopyTextToClipboard(cleanText, button); }); } else { fallbackCopyTextToClipboard(cleanText, button); } } function fallbackCopyTextToClipboard(text, button) { const textArea = document.createElement("textarea"); textArea.value = text; textArea.style.position = "fixed"; textArea.style.top = "-1000px"; textArea.style.left = "-1000px"; textArea.style.width = "1px"; textArea.style.height = "1px"; textArea.style.padding = "0"; textArea.style.border = "none"; textArea.style.outline = "none"; textArea.style.boxShadow = "none"; textArea.style.background = "transparent"; document.body.appendChild(textArea); try { textArea.focus(); textArea.select(); textArea.setSelectionRange(0, text.length); const successful = document.execCommand('copy'); if (successful) { showCopySuccess(button); } else { console.error('execCommandå¤åˆ¶å¤±è´¥'); showCopyError(button); } } catch (err) { console.error('é™çº§å¤åˆ¶æ–¹æ³•å‡ºé”™:', err); showCopyError(button); } finally { document.body.removeChild(textArea); } } function showCopySuccess(button) { if (!button) return; const originalText = button.innerHTML; const originalClass = button.className; button.innerHTML = 'âœ… å·²å¤åˆ¶'; button.className = originalClass + ' copy-success'; button.disabled = true; const originalStyle = button.style.cssText; button.style.cssText = originalStyle + '; background: #22c55e !important; color: white !important;'; setTimeout(() => { button.innerHTML = originalText; button.className = originalClass; button.disabled = false; button.style.cssText = originalStyle; }, 2000); } function showCopyError(button) { if (!button) return; const originalText = button.innerHTML; const originalClass = button.className; button.innerHTML = 'âŒ å¤åˆ¶å¤±è´¥'; button.className = originalClass + ' copy-error'; button.disabled = true; const originalStyle = button.style.cssText; button.style.cssText = originalStyle + '; background: #ef4444 !important; color: white !important;'; setTimeout(() => { button.innerHTML = originalText; button.className = originalClass; button.disabled = false; button.style.cssText = originalStyle; }, 2000); } function toggleAnswer(questionNumber) { const answer = document.getElementById(`answer${questionNumber}`); const button = event.target; if (answer.classList.contains('show')) { answer.classList.remove('show'); button.textContent = 'ç‚¹å‡»æŸ¥çœ‹ç­”æ¡ˆ'; } else { answer.classList.add('show'); button.textContent = 'éšè—ç­”æ¡ˆ'; } } let animationFrame; function startAnimation() { function animate() { drawTree(tree); animationFrame = requestAnimationFrame(animate); } animate(); } function stopAnimation() { if (animationFrame) { cancelAnimationFrame(animationFrame); } } drawTree(tree); startAnimation();</script>

{% endblock %}