{% extends 'knowledge_app/base.html' %}

{% block title %}äºŒå‰æ ‘â€”â€”é¡ºåºå­˜å‚¨ - è®¡ç®—æœºç§‘å­¦å­¦ä¹ å¹³å°{% endblock %}

{% block content %}
<div class="page-container fade-in"><!-- é¢åŒ…å±‘å¯¼èˆª --><div class="breadcrumb"><a href="{% url 'knowledge_app:index' %}">é¦–é¡µ</a><span>></span><span>æ•°æ®ç»“æ„</span><span>></span><span>äºŒå‰æ ‘â€”â€”é¡ºåºå­˜å‚¨</span></div><!-- é¡µé¢å¤´éƒ¨ --><div class="page-header slide-in-left"><h1><span class="page-icon">ğŸ—ƒï¸</span>
            äºŒå‰æ ‘â€”â€”é¡ºåºå­˜å‚¨
        </h1><p>æŒæ¡äºŒå‰æ ‘çš„æ•°ç»„è¡¨ç¤ºæ–¹æ³•ï¼Œç†è§£ç´¢å¼•æ˜ å°„å…³ç³»å’Œå­˜å‚¨ä¼˜åŒ–ç­–ç•¥</p></div><!-- çŸ¥è¯†ç‚¹æ¦‚è¿° --><div class="content-card slide-in-right"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ“‹</span>
                çŸ¥è¯†ç‚¹æ¦‚è¿°
            </h2><div class="concept-overview"><div class="core-concept"><h3>ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ</h3><p>é¡ºåºå­˜å‚¨æ˜¯ä½¿ç”¨æ•°ç»„æ¥è¡¨ç¤ºäºŒå‰æ ‘çš„æ–¹æ³•ã€‚é€šè¿‡å·§å¦™çš„ç´¢å¼•æ˜ å°„å…³ç³»ï¼Œå¯ä»¥åœ¨æ•°ç»„ä¸­å®Œç¾æ¨¡æ‹Ÿæ ‘çš„å±‚æ¬¡ç»“æ„ï¼Œæ— éœ€é¢å¤–çš„æŒ‡é’ˆå¼€é”€ã€‚</p></div><div class="unified-grid unified-grid-2"><div class="info-box info-box-info"><span class="info-icon">ğŸ“š</span><strong>å­¦ä¹ éš¾åº¦ï¼š</strong>å…¥é—¨åˆ°è¿›é˜¶
                    </div><div class="info-box info-box-warning"><span class="info-icon">âš¡</span><strong>å‰ç½®çŸ¥è¯†ï¼š</strong>æ•°ç»„æ¦‚å¿µã€äºŒå‰æ ‘åŸºç¡€ã€å®Œå…¨äºŒå‰æ ‘æ€§è´¨
                    </div></div><div class="key-terms"><h4>ğŸ”‘ å…³é”®æœ¯è¯­</h4><div class="terms-grid"><div class="term-item"><strong>é¡ºåºå­˜å‚¨ï¼š</strong>ä½¿ç”¨è¿ç»­çš„å†…å­˜ç©ºé—´ï¼ˆæ•°ç»„ï¼‰å­˜å‚¨æ•°æ®
                        </div><div class="term-item"><strong>ç´¢å¼•æ˜ å°„ï¼š</strong>é€šè¿‡æ•°å­¦å…¬å¼ç¡®å®šçˆ¶å­èŠ‚ç‚¹çš„æ•°ç»„ä¸‹æ ‡å…³ç³»
                        </div><div class="term-item"><strong>ç©ºé—´åˆ©ç”¨ç‡ï¼š</strong>å®é™…å­˜å‚¨çš„èŠ‚ç‚¹æ•°ä¸åˆ†é…ç©ºé—´çš„æ¯”ç‡
                        </div><div class="term-item"><strong>å±‚åºéå†ï¼š</strong>æŒ‰å±‚æ¬¡ä»ä¸Šåˆ°ä¸‹ã€ä»å·¦åˆ°å³çš„éå†é¡ºåº
                        </div><div class="term-item"><strong>å †ç»“æ„ï¼š</strong>å®Œå…¨äºŒå‰æ ‘çš„å…¸å‹åº”ç”¨åœºæ™¯
                        </div></div></div></div></div></div><!-- é¡ºåºå­˜å‚¨åŸç† --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ”</span>
                é¡ºåºå­˜å‚¨åŸç†
            </h2><div class="storage-principles"><div class="principle-category"><h3>ğŸ“Š åŸºæœ¬æ˜ å°„å…³ç³»</h3><div class="mapping-rules"><div class="rule-item fundamental"><div class="rule-header"><span class="rule-number">è§„åˆ™1</span><h4>æ ¹èŠ‚ç‚¹ä½ç½®</h4></div><div class="rule-content"><div class="formula"><strong>æ ¹èŠ‚ç‚¹å­˜å‚¨åœ¨æ•°ç»„ä¸‹æ ‡ 1 çš„ä½ç½®</strong></div><p><strong>è¯´æ˜ï¼š</strong>ä¸‹æ ‡0é€šå¸¸ç©ºç½®ä¸ç”¨ï¼Œè¿™æ ·å¯ä»¥ç®€åŒ–çˆ¶å­å…³ç³»çš„è®¡ç®—å…¬å¼ã€‚</p><div class="example"><strong>ä¾‹å­ï¼š</strong>arr[1] = æ ¹èŠ‚ç‚¹çš„å€¼
                                </div></div></div><div class="rule-item critical"><div class="rule-header"><span class="rule-number">è§„åˆ™2</span><h4>çˆ¶å­å…³ç³»æ˜ å°„</h4></div><div class="rule-content"><div class="formula"><strong>å¯¹äºèŠ‚ç‚¹iï¼š</strong><br>
                                    â€¢ çˆ¶èŠ‚ç‚¹ï¼šâŒŠi/2âŒ‹<br>
                                    â€¢ å·¦å­©å­ï¼š2Ã—i<br>
                                    â€¢ å³å­©å­ï¼š2Ã—i+1
                                </div><div class="mapping-demo"><div>èŠ‚ç‚¹1: çˆ¶-æ— , å·¦-2, å³-3</div><div>èŠ‚ç‚¹2: çˆ¶-1, å·¦-4, å³-5</div><div>èŠ‚ç‚¹3: çˆ¶-1, å·¦-6, å³-7</div><div>èŠ‚ç‚¹4: çˆ¶-2, å·¦-8, å³-9</div></div></div></div><div class="rule-item"><div class="rule-header"><span class="rule-number">è§„åˆ™3</span><h4>å±‚åºå­˜å‚¨é¡ºåº</h4></div><div class="rule-content"><div class="formula"><strong>æŒ‰å±‚åºéå†çš„é¡ºåºä¾æ¬¡å­˜å‚¨èŠ‚ç‚¹</strong></div><p><strong>é¡ºåºï¼š</strong>ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œé€å±‚ä»å·¦åˆ°å³å¡«å……æ•°ç»„</p><div class="layer-order"><div>ç¬¬1å±‚: arr[1]</div><div>ç¬¬2å±‚: arr[2], arr[3]</div><div>ç¬¬3å±‚: arr[4], arr[5], arr[6], arr[7]</div><div>ç¬¬4å±‚: arr[8], arr[9], arr[10], arr[11], arr[12], arr[13], arr[14], arr[15]</div></div></div></div></div></div><div class="principle-category"><h3>ğŸ¯ é€‚ç”¨åœºæ™¯åˆ†æ</h3><div class="scenario-analysis"><div class="scenario-item optimal"><h4>ğŸŸ¢ æœ€é€‚åˆï¼šå®Œå…¨äºŒå‰æ ‘</h4><div class="scenario-content"><p><strong>ä¼˜åŠ¿ï¼š</strong></p><ul><li>ç©ºé—´åˆ©ç”¨ç‡æ¥è¿‘100%</li><li>æ— éœ€å­˜å‚¨æŒ‡é’ˆï¼ŒèŠ‚çœå†…å­˜</li><li>çˆ¶å­å…³ç³»é€šè¿‡è®¡ç®—è·å¾—ï¼Œé€Ÿåº¦å¿«</li><li>ç¼“å­˜å‹å¥½ï¼Œè¿ç»­å†…å­˜è®¿é—®</li></ul><div class="space-efficiency"><strong>ç©ºé—´æ•ˆç‡ï¼š</strong>nä¸ªèŠ‚ç‚¹åªéœ€è¦n+1ä¸ªæ•°ç»„ç©ºé—´
                                </div></div></div><div class="scenario-item good"><h4>ğŸŸ¡ è¾ƒé€‚åˆï¼šè¿‘ä¼¼å®Œå…¨äºŒå‰æ ‘</h4><div class="scenario-content"><p><strong>ç‰¹ç‚¹ï¼š</strong></p><ul><li>ç©ºé—´åˆ©ç”¨ç‡è¾ƒé«˜ï¼ˆ70-90%ï¼‰</li><li>ä»ç„¶ä¿æŒè¾ƒå¥½çš„æ€§èƒ½</li><li>é€‚åˆåŠ¨æ€è°ƒæ•´çš„å †ç»“æ„</li></ul></div></div><div class="scenario-item poor"><h4>ğŸ”´ ä¸é€‚åˆï¼šä¸¥é‡ä¸å¹³è¡¡çš„æ ‘</h4><div class="scenario-content"><p><strong>é—®é¢˜ï¼š</strong></p><ul><li>å¤§é‡ç©ºé—´æµªè´¹</li><li>å¯èƒ½å¯¼è‡´æ•°ç»„è¶Šç•Œ</li><li>å†…å­˜ä½¿ç”¨æ•ˆç‡æä½</li></ul><div class="waste-example"><strong>æç«¯æƒ…å†µï¼š</strong>é“¾çŠ¶æ ‘çš„é«˜åº¦ä¸ºn-1ï¼Œéœ€è¦2^nç©ºé—´å­˜å‚¨nä¸ªèŠ‚ç‚¹
                                </div></div></div></div></div></div></div></div><!-- å¯è§†åŒ–å±•ç¤º --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ“Š</span>
                é¡ºåºå­˜å‚¨å¯è§†åŒ–
            </h2><div class="visualization-container"><div class="viz-controls"><button id="showComplete" class="unified-btn unified-btn-primary">å®Œå…¨äºŒå‰æ ‘ç¤ºä¾‹</button><button id="showPartial" class="unified-btn unified-btn-secondary">éƒ¨åˆ†å¡«å……ç¤ºä¾‹</button><button id="showMapping" class="unified-btn unified-btn-success">æ˜ å°„å…³ç³»æ¼”ç¤º</button><button id="showTraversal" class="unified-btn unified-btn-warning">éå†è¿‡ç¨‹</button><button id="resetViz" class="unified-btn unified-btn-outline">é‡ç½®</button></div><div class="viz-display"><div class="tree-display"><h4>ğŸŒ³ æ ‘å½¢ç»“æ„</h4><canvas id="treeCanvas" width="400" height="300"></canvas></div><div class="array-display"><h4>ğŸ—ƒï¸ æ•°ç»„å­˜å‚¨</h4><div id="arrayVisualization" class="array-viz"><div class="array-indices"><div class="index-cell">ç´¢å¼•</div><div class="index-cell">0</div><div class="index-cell">1</div><div class="index-cell">2</div><div class="index-cell">3</div><div class="index-cell">4</div><div class="index-cell">5</div><div class="index-cell">6</div><div class="index-cell">7</div><div class="index-cell">8</div><div class="index-cell">9</div><div class="index-cell">10</div><div class="index-cell">11</div></div><div class="array-values"><div class="value-cell header">æ•°å€¼</div><div class="value-cell unused">Ã—</div><div class="value-cell" id="cell-1">-</div><div class="value-cell" id="cell-2">-</div><div class="value-cell" id="cell-3">-</div><div class="value-cell" id="cell-4">-</div><div class="value-cell" id="cell-5">-</div><div class="value-cell" id="cell-6">-</div><div class="value-cell" id="cell-7">-</div><div class="value-cell" id="cell-8">-</div><div class="value-cell" id="cell-9">-</div><div class="value-cell" id="cell-10">-</div><div class="value-cell" id="cell-11">-</div></div></div></div></div><div class="viz-info"><div id="vizDescription" class="viz-description">
                        ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹é¡ºåºå­˜å‚¨æ¼”ç¤º
                    </div><div id="storageStats" class="storage-stats"><div class="stat-item"><span class="stat-label">ä½¿ç”¨ç©ºé—´:</span><span class="stat-value" id="usedSpace">0</span></div><div class="stat-item"><span class="stat-label">æ€»åˆ†é…ç©ºé—´:</span><span class="stat-value" id="totalSpace">11</span></div><div class="stat-item"><span class="stat-label">ç©ºé—´åˆ©ç”¨ç‡:</span><span class="stat-value" id="efficiency">0%</span></div><div class="stat-item"><span class="stat-label">æœ€å¤§æ·±åº¦:</span><span class="stat-value" id="maxDepth">0</span></div></div></div></div><!-- äº¤äº’å¼æ„å»ºå™¨ --><div class="tree-builder"><h3>ğŸ› ï¸ äº¤äº’å¼æ ‘æ„å»ºå™¨</h3><div class="builder-controls"><div class="input-section"><label>åœ¨ä½ç½®æ·»åŠ èŠ‚ç‚¹:</label><input type="number" id="positionInput" min="1" max="15" placeholder="ä½ç½®(1-15)"><input type="text" id="valueInput" placeholder="èŠ‚ç‚¹å€¼" maxlength="3"><button id="addNodeBtn" class="unified-btn unified-btn-primary">æ·»åŠ èŠ‚ç‚¹</button></div><div class="input-section"><label>åˆ é™¤ä½ç½®çš„èŠ‚ç‚¹:</label><input type="number" id="removePositionInput" min="1" max="15" placeholder="ä½ç½®(1-15)"><button id="removeNodeBtn" class="unified-btn unified-btn-danger">åˆ é™¤èŠ‚ç‚¹</button></div><div class="input-section"><button id="clearAllBtn" class="unified-btn unified-btn-outline">æ¸…ç©ºæ‰€æœ‰</button><button id="fillCompleteBtn" class="unified-btn unified-btn-success">å¡«å……å®Œå…¨äºŒå‰æ ‘</button></div></div><div class="builder-tips"><h4>ğŸ’¡ æ„å»ºæç¤º</h4><ul><li>èŠ‚ç‚¹ç¼–å·ä»1å¼€å§‹ï¼Œç¬¦åˆæ ‡å‡†çš„é¡ºåºå­˜å‚¨è§„åˆ™</li><li>çˆ¶èŠ‚ç‚¹å¿…é¡»å­˜åœ¨æ‰èƒ½æ·»åŠ å­èŠ‚ç‚¹</li><li>åˆ é™¤èŠ‚ç‚¹æ—¶ä¼šè‡ªåŠ¨åˆ é™¤å…¶æ‰€æœ‰å­æ ‘</li><li>è§‚å¯Ÿæ•°ç»„åˆ©ç”¨ç‡çš„å˜åŒ–</li></ul></div></div></div></div><!-- å®é™…åº”ç”¨ --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸŒŸ</span>
                é¡ºåºå­˜å‚¨çš„å®é™…åº”ç”¨
            </h2><div class="applications"><div class="app-item"><h3>ğŸ”¥ å †æ•°æ®ç»“æ„</h3><p>äºŒå‰å †æ˜¯é¡ºåºå­˜å‚¨çš„æœ€å…¸å‹åº”ç”¨ã€‚ä¼˜å…ˆé˜Ÿåˆ—ã€å †æ’åºç­‰ç®—æ³•éƒ½åŸºäºæ­¤å®ç°ï¼Œåˆ©ç”¨æ•°ç»„çš„è¿ç»­æ€§è·å¾—ä¼˜ç§€çš„ç¼“å­˜æ€§èƒ½ã€‚</p><div class="app-details"><strong>åº”ç”¨åœºæ™¯ï¼š</strong>ä»»åŠ¡è°ƒåº¦ã€äº‹ä»¶é©±åŠ¨ã€æœ€å€¼æŸ¥æ‰¾
                    </div></div><div class="app-item"><h3>ğŸŒ³ å®Œå…¨äºŒå‰æ ‘å­˜å‚¨</h3><p>æ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•ç´¢å¼•ã€æ•°æ®åº“çš„B+æ ‘å¶å­å±‚ç­‰ï¼Œéƒ½å¯ä»¥ç”¨é¡ºåºå­˜å‚¨æé«˜è®¿é—®æ•ˆç‡å’Œå‡å°‘æŒ‡é’ˆå¼€é”€ã€‚</p><div class="app-details"><strong>ä¼˜åŠ¿ï¼š</strong>æ— æŒ‡é’ˆå¼€é”€ã€ç¼“å­˜å‹å¥½ã€è®¡ç®—ç®€å•
                    </div></div><div class="app-item"><h3>ğŸ¯ çº¿æ®µæ ‘å’Œæ ‘çŠ¶æ•°ç»„</h3><p>åœ¨ç®—æ³•ç«èµ›å’Œé«˜æ•ˆæŸ¥è¯¢åœºæ™¯ä¸­ï¼Œé¡ºåºå­˜å‚¨çš„äºŒå‰æ ‘æä¾›äº†æä½³çš„æ€§èƒ½è¡¨ç°ï¼Œæ”¯æŒå¿«é€Ÿçš„åŒºé—´æ“ä½œã€‚</p><div class="app-details"><strong>ç‰¹ç‚¹ï¼š</strong>O(log n)æŸ¥è¯¢æ›´æ–°ã€å†…å­˜è¿ç»­ã€å®ç°ç®€æ´
                    </div></div></div><!-- ä»£ç ç¤ºä¾‹ --><div class="code-examples"><h3>ğŸ’» é¡ºåºå­˜å‚¨å®ç°</h3><div class="code-tabs"><button class="tab-btn active" data-lang="cpp">C++</button><button class="tab-btn" data-lang="java">Java</button><button class="tab-btn" data-lang="python">Python</button></div><div class="code-container"><div class="code-header"><span class="code-title">äºŒå‰æ ‘é¡ºåºå­˜å‚¨å®ç°</span><button class="copy-btn" data-lang="cpp">ğŸ“‹ å¤åˆ¶</button></div><pre id="code-cpp" class="code-block active"><code>// C++ äºŒå‰æ ‘é¡ºåºå­˜å‚¨å®ç°
#include <vector>
#include <iostream>
using namespace std;

class SequentialBinaryTree {
private:
    vector<int> tree;
    int capacity;

public:
    SequentialBinaryTree(int cap) : capacity(cap) {
        tree.resize(cap + 1, -1); // ä¸‹æ ‡0ä¸ä½¿ç”¨
    }

    // æ’å…¥èŠ‚ç‚¹
    bool insert(int index, int value) {
        if (index < 1 || index > capacity) return false;

        // æ£€æŸ¥çˆ¶èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨ï¼ˆé™¤äº†æ ¹èŠ‚ç‚¹ï¼‰
        if (index > 1 && tree[index / 2] == -1) {
            cout << "çˆ¶èŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œæ— æ³•æ’å…¥ï¼" << endl;
            return false;
        }

        tree[index] = value;
        return true;
    }

    // åˆ é™¤èŠ‚ç‚¹åŠå…¶å­æ ‘
    void remove(int index) {
        if (index < 1 || index > capacity) return;

        // é€’å½’åˆ é™¤å­æ ‘
        if (2 * index <= capacity) remove(2 * index);     // å·¦å­æ ‘
        if (2 * index + 1 <= capacity) remove(2 * index + 1); // å³å­æ ‘

        tree[index] = -1;
    }

    // è·å–çˆ¶èŠ‚ç‚¹ç´¢å¼•
    int getParent(int index) {
        if (index <= 1) return -1;
        return index / 2;
    }

    // è·å–å·¦å­©å­ç´¢å¼•
    int getLeftChild(int index) {
        int left = 2 * index;
        return (left <= capacity) ? left : -1;
    }

    // è·å–å³å­©å­ç´¢å¼•
    int getRightChild(int index) {
        int right = 2 * index + 1;
        return (right <= capacity) ? right : -1;
    }

    // å±‚åºéå†
    void levelOrder() {
        cout << "å±‚åºéå†: ";
        for (int i = 1; i <= capacity; i++) {
            if (tree[i] != -1) {
                cout << tree[i] << " ";
            }
        }
        cout << endl;
    }

    // å‰åºéå†
    void preOrder(int index) {
        if (index > capacity || tree[index] == -1) return;

        cout << tree[index] << " ";
        preOrder(2 * index);       // å·¦å­æ ‘
        preOrder(2 * index + 1);   // å³å­æ ‘
    }

    // æ˜¾ç¤ºæ•°ç»„çŠ¶æ€
    void display() {
        cout << "æ•°ç»„å­˜å‚¨çŠ¶æ€:" << endl;
        cout << "ç´¢å¼•: ";
        for (int i = 0; i <= capacity; i++) {
            cout << i << "\t";
        }
        cout << endl << "æ•°å€¼: ";
        for (int i = 0; i <= capacity; i++) {
            if (i == 0 || tree[i] == -1) {
                cout << "Ã—\t";
            } else {
                cout << tree[i] << "\t";
            }
        }
        cout << endl;
    }
};</code></pre><pre id="code-java" class="code-block"><code>// Java äºŒå‰æ ‘é¡ºåºå­˜å‚¨å®ç°
import java.util.*;

public class SequentialBinaryTree {
    private int[] tree;
    private int capacity;

    public SequentialBinaryTree(int cap) {
        this.capacity = cap;
        this.tree = new int[cap + 1];
        Arrays.fill(tree, -1); // -1è¡¨ç¤ºç©ºèŠ‚ç‚¹
    }

    // æ’å…¥èŠ‚ç‚¹
    public boolean insert(int index, int value) {
        if (index < 1 || index > capacity) return false;

        // æ£€æŸ¥çˆ¶èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨ï¼ˆé™¤äº†æ ¹èŠ‚ç‚¹ï¼‰
        if (index > 1 && tree[index / 2] == -1) {
            System.out.println("çˆ¶èŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œæ— æ³•æ’å…¥ï¼");
            return false;
        }

        tree[index] = value;
        return true;
    }

    // åˆ é™¤èŠ‚ç‚¹åŠå…¶å­æ ‘
    public void remove(int index) {
        if (index < 1 || index > capacity) return;

        // é€’å½’åˆ é™¤å­æ ‘
        if (2 * index <= capacity) remove(2 * index);
        if (2 * index + 1 <= capacity) remove(2 * index + 1);

        tree[index] = -1;
    }

    // è·å–çˆ¶èŠ‚ç‚¹ç´¢å¼•
    public int getParent(int index) {
        return (index <= 1) ? -1 : index / 2;
    }

    // è·å–å·¦å­©å­ç´¢å¼•
    public int getLeftChild(int index) {
        int left = 2 * index;
        return (left <= capacity) ? left : -1;
    }

    // è·å–å³å­©å­ç´¢å¼•
    public int getRightChild(int index) {
        int right = 2 * index + 1;
        return (right <= capacity) ? right : -1;
    }

    // å±‚åºéå†
    public void levelOrder() {
        System.out.print("å±‚åºéå†: ");
        for (int i = 1; i <= capacity; i++) {
            if (tree[i] != -1) {
                System.out.print(tree[i] + " ");
            }
        }
        System.out.println();
    }

    // å‰åºéå†
    public void preOrder(int index) {
        if (index > capacity || tree[index] == -1) return;

        System.out.print(tree[index] + " ");
        preOrder(2 * index);       // å·¦å­æ ‘
        preOrder(2 * index + 1);   // å³å­æ ‘
    }

    // æ˜¾ç¤ºæ•°ç»„çŠ¶æ€
    public void display() {
        System.out.println("æ•°ç»„å­˜å‚¨çŠ¶æ€:");
        System.out.print("ç´¢å¼•: ");
        for (int i = 0; i <= capacity; i++) {
            System.out.print(i + "\t");
        }
        System.out.print("\næ•°å€¼: ");
        for (int i = 0; i <= capacity; i++) {
            if (i == 0 || tree[i] == -1) {
                System.out.print("Ã—\t");
            } else {
                System.out.print(tree[i] + "\t");
            }
        }
        System.out.println();
    }
}</code></pre><pre id="code-python" class="code-block"><code># Python äºŒå‰æ ‘é¡ºåºå­˜å‚¨å®ç°
class SequentialBinaryTree:
    def __init__(self, capacity):
        self.capacity = capacity
        self.tree = [-1] * (capacity + 1)  # ä¸‹æ ‡0ä¸ä½¿ç”¨ï¼Œ-1è¡¨ç¤ºç©ºèŠ‚ç‚¹

    def insert(self, index, value):
        """æ’å…¥èŠ‚ç‚¹"""
        if index < 1 or index > self.capacity:
            return False

        # æ£€æŸ¥çˆ¶èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨ï¼ˆé™¤äº†æ ¹èŠ‚ç‚¹ï¼‰
        if index > 1 and self.tree[index // 2] == -1:
            print("çˆ¶èŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œæ— æ³•æ’å…¥ï¼")
            return False

        self.tree[index] = value
        return True

    def remove(self, index):
        """åˆ é™¤èŠ‚ç‚¹åŠå…¶å­æ ‘"""
        if index < 1 or index > self.capacity:
            return

        # é€’å½’åˆ é™¤å­æ ‘
        if 2 * index <= self.capacity:
            self.remove(2 * index)      # å·¦å­æ ‘
        if 2 * index + 1 <= self.capacity:
            self.remove(2 * index + 1)  # å³å­æ ‘

        self.tree[index] = -1

    def get_parent(self, index):
        """è·å–çˆ¶èŠ‚ç‚¹ç´¢å¼•"""
        return -1 if index <= 1 else index // 2

    def get_left_child(self, index):
        """è·å–å·¦å­©å­ç´¢å¼•"""
        left = 2 * index
        return left if left <= self.capacity else -1

    def get_right_child(self, index):
        """è·å–å³å­©å­ç´¢å¼•"""
        right = 2 * index + 1
        return right if right <= self.capacity else -1

    def level_order(self):
        """å±‚åºéå†"""
        result = []
        for i in range(1, self.capacity + 1):
            if self.tree[i] != -1:
                result.append(self.tree[i])
        print("å±‚åºéå†:", " ".join(map(str, result)))

    def pre_order(self, index=1):
        """å‰åºéå†"""
        if index > self.capacity or self.tree[index] == -1:
            return

        print(self.tree[index], end=" ")
        self.pre_order(2 * index)       # å·¦å­æ ‘
        self.pre_order(2 * index + 1)   # å³å­æ ‘

    def display(self):
        """æ˜¾ç¤ºæ•°ç»„çŠ¶æ€"""
        print("æ•°ç»„å­˜å‚¨çŠ¶æ€:")
        print("ç´¢å¼•:", end=" ")
        for i in range(self.capacity + 1):
            print(f"{i}\t", end="")
        print("\næ•°å€¼:", end=" ")
        for i in range(self.capacity + 1):
            if i == 0 or self.tree[i] == -1:
                print("Ã—\t", end="")
            else:
                print(f"{self.tree[i]}\t", end="")
        print()

    def get_space_efficiency(self):
        """è®¡ç®—ç©ºé—´åˆ©ç”¨ç‡"""
        used = sum(1 for i in range(1, self.capacity + 1) if self.tree[i] != -1)
        return (used / self.capacity) * 100 if self.capacity > 0 else 0</code></pre></div></div></div></div><!-- å­¦ä¹ æ£€éªŒ --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">âœ…</span>
                æŒæ¡ç¨‹åº¦æ£€éªŒ
            </h2><div class="quiz-container"><div class="quiz-item"><div class="question"><h4>ğŸ¤” é—®é¢˜1ï¼šåœ¨é¡ºåºå­˜å‚¨çš„äºŒå‰æ ‘ä¸­ï¼Œå¦‚æœèŠ‚ç‚¹15çš„å€¼ä¸º'M'ï¼Œé‚£ä¹ˆå®ƒçš„çˆ¶èŠ‚ç‚¹ã€å·¦å­©å­ã€å³å­©å­åˆ†åˆ«åœ¨æ•°ç»„çš„å“ªä¸ªä½ç½®ï¼Ÿ</h4><button class="show-answer-btn" data-answer="1">æ˜¾ç¤ºç­”æ¡ˆ</button></div><div class="answer" id="answer-1" style="display: none;"><div class="answer-content"><strong>ç­”æ¡ˆï¼š</strong>çˆ¶èŠ‚ç‚¹åœ¨ä½ç½®7ï¼Œå·¦å­©å­åœ¨ä½ç½®30ï¼Œå³å­©å­åœ¨ä½ç½®31<br><strong>è®¡ç®—è¿‡ç¨‹ï¼š</strong><br>
                            â€¢ çˆ¶èŠ‚ç‚¹ï¼šâŒŠ15/2âŒ‹ = âŒŠ7.5âŒ‹ = 7<br>
                            â€¢ å·¦å­©å­ï¼š2Ã—15 = 30<br>
                            â€¢ å³å­©å­ï¼š2Ã—15+1 = 31<br><strong>æ³¨æ„ï¼š</strong>å­èŠ‚ç‚¹æ˜¯å¦çœŸå®å­˜åœ¨éœ€è¦æ£€æŸ¥æ•°ç»„å®¹é‡
                        </div></div></div><div class="quiz-item"><div class="question"><h4>ğŸ¤” é—®é¢˜2ï¼šä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘æœ‰10ä¸ªèŠ‚ç‚¹ï¼Œç”¨é¡ºåºå­˜å‚¨éœ€è¦å¤šå¤§çš„æ•°ç»„ï¼Ÿå¦‚æœæ˜¯ä¸€ä¸ªåªæœ‰å³å­æ ‘çš„åæ–œæ ‘ï¼ˆ10ä¸ªèŠ‚ç‚¹ï¼‰ï¼Œåˆéœ€è¦å¤šå¤§æ•°ç»„ï¼Ÿ</h4><button class="show-answer-btn" data-answer="2">æ˜¾ç¤ºç­”æ¡ˆ</button></div><div class="answer" id="answer-2" style="display: none;"><div class="answer-content"><strong>ç­”æ¡ˆï¼š</strong><br><strong>å®Œå…¨äºŒå‰æ ‘ï¼š</strong>éœ€è¦é•¿åº¦ä¸º11çš„æ•°ç»„ï¼ˆä¸‹æ ‡0-10ï¼Œå…¶ä¸­0ä¸ç”¨ï¼‰<br><strong>å³åæ–œæ ‘ï¼š</strong>éœ€è¦é•¿åº¦ä¸º1024çš„æ•°ç»„<br><strong>è§£é‡Šï¼š</strong><br>
                            â€¢ å®Œå…¨äºŒå‰æ ‘ï¼šèŠ‚ç‚¹è¿ç»­å­˜å‚¨åœ¨ä¸‹æ ‡1-10<br>
                            â€¢ å³åæ–œæ ‘ï¼šæœ€æ·±èŠ‚ç‚¹åœ¨ç¬¬10å±‚ï¼Œä½ç½®ä¸º2^9=512ï¼Œå®é™…éœ€è¦2^10=1024ç©ºé—´<br>
                            â€¢ ç©ºé—´åˆ©ç”¨ç‡ï¼šå®Œå…¨äºŒå‰æ ‘â‰ˆ91%ï¼Œåæ–œæ ‘â‰ˆ1%
                        </div></div></div><div class="quiz-item"><div class="question"><h4>ğŸ¤” é—®é¢˜3ï¼šåœ¨é¡ºåºå­˜å‚¨ä¸­ï¼Œå¦‚ä½•åˆ¤æ–­æŸä¸ªä½ç½®iæ˜¯å¦ä¸ºå¶å­èŠ‚ç‚¹ï¼Ÿå¦‚ä½•æ‰¾åˆ°æŸä¸ªèŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹ï¼Ÿ</h4><button class="show-answer-btn" data-answer="3">æ˜¾ç¤ºç­”æ¡ˆ</button></div><div class="answer" id="answer-3" style="display: none;"><div class="answer-content"><strong>å¶å­èŠ‚ç‚¹åˆ¤æ–­ï¼š</strong><br>
                            ä½ç½®iæ˜¯å¶å­èŠ‚ç‚¹å½“ä¸”ä»…å½“ï¼š<br>
                            â€¢ å·¦å­©å­ä½ç½®2Ã—iè¶…å‡ºæ•°ç»„èŒƒå›´ æˆ– arr[2Ã—i]ä¸ºç©º<br>
                            â€¢ å³å­©å­ä½ç½®2Ã—i+1è¶…å‡ºæ•°ç»„èŒƒå›´ æˆ– arr[2Ã—i+1]ä¸ºç©º<br><br><strong>å…„å¼ŸèŠ‚ç‚¹æŸ¥æ‰¾ï¼š</strong><br>
                            â€¢ å¦‚æœiæ˜¯å¶æ•°ï¼ˆå·¦å­©å­ï¼‰ï¼Œå…„å¼ŸèŠ‚ç‚¹åœ¨i+1<br>
                            â€¢ å¦‚æœiæ˜¯å¥‡æ•°ï¼ˆå³å­©å­ï¼‰ï¼Œå…„å¼ŸèŠ‚ç‚¹åœ¨i-1<br>
                            â€¢ æ ¹èŠ‚ç‚¹ï¼ˆi=1ï¼‰æ²¡æœ‰å…„å¼ŸèŠ‚ç‚¹
                        </div></div></div><div class="quiz-item"><div class="question"><h4>ğŸ¤” é—®é¢˜4ï¼šæ¯”è¾ƒé¡ºåºå­˜å‚¨å’Œé“¾å¼å­˜å‚¨çš„ä¼˜ç¼ºç‚¹ï¼Œä»€ä¹ˆæƒ…å†µä¸‹åº”è¯¥é€‰æ‹©é¡ºåºå­˜å‚¨ï¼Ÿ</h4><button class="show-answer-btn" data-answer="4">æ˜¾ç¤ºç­”æ¡ˆ</button></div><div class="answer" id="answer-4" style="display: none;"><div class="answer-content"><strong>é¡ºåºå­˜å‚¨ä¼˜ç‚¹ï¼š</strong><br>
                            â€¢ èŠ‚çœæŒ‡é’ˆç©ºé—´ï¼ˆæ¯èŠ‚ç‚¹çœ8-16å­—èŠ‚ï¼‰<br>
                            â€¢ ç¼“å­˜å‹å¥½ï¼Œè¿ç»­å†…å­˜è®¿é—®<br>
                            â€¢ çˆ¶å­å…³ç³»è®¡ç®—ç®€å•ï¼ŒO(1)æ—¶é—´<br>
                            â€¢ å®ç°ç®€å•ï¼Œæ— å†…å­˜ç¢ç‰‡<br><br><strong>é¡ºåºå­˜å‚¨ç¼ºç‚¹ï¼š</strong><br>
                            â€¢ ä¸å¹³è¡¡æ ‘ç©ºé—´æµªè´¹ä¸¥é‡<br>
                            â€¢ æ’å…¥åˆ é™¤éœ€è¦å¤§é‡ç§»åŠ¨<br>
                            â€¢ æ•°ç»„å¤§å°å›ºå®šï¼Œæ‰©å®¹å›°éš¾<br><br><strong>é€‰æ‹©é¡ºåºå­˜å‚¨çš„æƒ…å†µï¼š</strong><br>
                            â€¢ å®Œå…¨äºŒå‰æ ‘æˆ–è¿‘ä¼¼å®Œå…¨äºŒå‰æ ‘<br>
                            â€¢ ä¸»è¦è¿›è¡ŒæŸ¥æ‰¾æ“ä½œï¼Œå¾ˆå°‘æ’å…¥åˆ é™¤<br>
                            â€¢ å†…å­˜å—é™ï¼Œéœ€è¦é«˜æ•ˆåˆ©ç”¨ç©ºé—´<br>
                            â€¢ éœ€è¦é«˜æ€§èƒ½çš„å †æ“ä½œ
                        </div></div></div><div class="quiz-item"><div class="question"><h4>ğŸ¤” é—®é¢˜5ï¼šå¦‚ä½•åœ¨é¡ºåºå­˜å‚¨çš„äºŒå‰æ ‘ä¸­å®ç°æ’å…¥å’Œåˆ é™¤æ“ä½œï¼Ÿéœ€è¦æ³¨æ„ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h4><button class="show-answer-btn" data-answer="5">æ˜¾ç¤ºç­”æ¡ˆ</button></div><div class="answer" id="answer-5" style="display: none;"><div class="answer-content"><strong>æ’å…¥æ“ä½œï¼š</strong><br>
                            1. æ£€æŸ¥æ’å…¥ä½ç½®æ˜¯å¦æœ‰æ•ˆï¼ˆ1â‰¤iâ‰¤capacityï¼‰<br>
                            2. æ£€æŸ¥çˆ¶èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨ï¼ˆi>1æ—¶éœ€è¦arr[i/2]â‰ ç©ºï¼‰<br>
                            3. ç›´æ¥åœ¨æŒ‡å®šä½ç½®èµ‹å€¼<br><br><strong>åˆ é™¤æ“ä½œï¼š</strong><br>
                            1. åˆ é™¤æŒ‡å®šèŠ‚ç‚¹<br>
                            2. é€’å½’åˆ é™¤æ‰€æœ‰å­èŠ‚ç‚¹ï¼ˆå·¦å­æ ‘å’Œå³å­æ ‘ï¼‰<br>
                            3. æ›´æ–°ç›¸å…³ç»Ÿè®¡ä¿¡æ¯<br><br><strong>æ³¨æ„äº‹é¡¹ï¼š</strong><br>
                            â€¢ ä¿æŒæ ‘çš„ç»“æ„å®Œæ•´æ€§<br>
                            â€¢ é¿å…äº§ç”Ÿ"å­¤å„¿"èŠ‚ç‚¹<br>
                            â€¢ è€ƒè™‘æ•°ç»„è¶Šç•Œé—®é¢˜<br>
                            â€¢ åˆç†å¤„ç†ç©ºèŠ‚ç‚¹æ ‡è®°<br>
                            â€¢ å¯¹äºå †ç­‰ç‰¹æ®Šç»“æ„ï¼Œéœ€è¦ç»´æŠ¤ç‰¹å®šæ€§è´¨
                        </div></div></div></div><div class="learning-path"><h3>ğŸ¯ è¿›é˜¶å­¦ä¹ å»ºè®®</h3><div class="unified-grid unified-grid-2"><div class="path-item"><h4>ğŸ“š æŒæ¡åç»§ç»­å­¦ä¹ </h4><ul><li>å †çš„å®ç°å’Œåº”ç”¨ï¼ˆæœ€å¤§å †ã€æœ€å°å †ï¼‰</li><li>ä¼˜å…ˆé˜Ÿåˆ—çš„è®¾è®¡ä¸ä¼˜åŒ–</li><li>çº¿æ®µæ ‘å’Œæ ‘çŠ¶æ•°ç»„</li><li>å®Œå…¨äºŒå‰æ ‘çš„é«˜çº§åº”ç”¨</li><li>å†…å­˜æ± å’Œç¼“å­˜ä¼˜åŒ–æŠ€æœ¯</li></ul></div><div class="path-item"><h4>ğŸ› ï¸ æ¨èç»ƒä¹ </h4><ul><li>å®ç°ä¸€ä¸ªå®Œæ•´çš„å †æ•°æ®ç»“æ„</li><li>ç¼–å†™å †æ’åºç®—æ³•</li><li>è®¾è®¡æ”¯æŒåŠ¨æ€æ‰©å®¹çš„é¡ºåºå­˜å‚¨</li><li>æ¯”è¾ƒä¸åŒå­˜å‚¨æ–¹å¼çš„æ€§èƒ½</li><li>è§£å†³TopKé—®é¢˜å’Œä¼˜å…ˆé˜Ÿåˆ—åº”ç”¨</li></ul></div></div></div></div></div><!-- å¯¼èˆªæŒ‰é’® --><div style="text-align: center; margin-top: 40px;"><a href="{% url 'knowledge_app:index' %}" class="unified-btn unified-btn-primary"><span>ğŸ </span>
            è¿”å›é¦–é¡µ
        </a><a href="{% url 'knowledge_app:cs_universe' %}" class="unified-btn unified-btn-secondary"><span>ğŸŒŒ</span>
            æ¢ç´¢CSå®‡å®™
        </a></div></div><style>.concept-overview {background:linear-gradient(135deg, #f8f9ff 0%, #e8f4f8 100%);padding:25px;border-radius:12px;margin-bottom:20px}.core-concept {background:white;padding:20px;border-radius:8px;margin-bottom:20px;border-left:4px solid #007bff}.key-terms {background:white;padding:20px;border-radius:8px}.terms-grid {display:grid;grid-template-columns:repeat(auto-fit, minmax(280px, 1fr));gap:15px;margin-top:15px}.term-item {background:#f8f9fa;padding:12px;border-radius:6px;border-left:3px solid #28a745}.storage-principles {margin-bottom:20px}.principle-category {background:#f8f9ff;padding:25px;border-radius:12px;margin-bottom:25px}.principle-category h3 {color:#495057;margin-bottom:20px;font-size:1.3em;font-weight:bold}.mapping-rules {margin-bottom:20px}.rule-item {background:white;border-radius:10px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,0.1);border:1px solid #e9ecef;margin-bottom:20px}.rule-item.fundamental {border-left:5px solid #dc3545}.rule-item.critical {border-left:5px solid #007bff}.rule-header {background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);color:white;padding:15px 20px;display:flex;align-items:center;gap:15px}.rule-number {background:rgba(255,255,255,0.2);padding:5px 12px;border-radius:20px;font-weight:bold;font-size:0.9em}.rule-header h4 {margin:0;font-size:1.1em}.rule-content {padding:20px}.formula {background:#e8f5e8;padding:15px;border-radius:8px;border-left:4px solid #28a745;margin-bottom:15px;text-align:center;font-size:1.1em}.example {background:#fff3cd;padding:12px;border-radius:6px;border-left:3px solid #ffc107;margin-top:10px}.mapping-demo, .layer-order {background:#f8f9fa;padding:15px;border-radius:6px;margin-top:10px}.mapping-demo div, .layer-order div {margin:5px 0;font-family:'Courier New', monospace}.scenario-analysis {display:grid;grid-template-columns:repeat(auto-fit, minmax(350px, 1fr));gap:20px}.scenario-item {background:white;padding:20px;border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,0.1)}.scenario-item.optimal {border-left:5px solid #28a745}.scenario-item.good {border-left:5px solid #ffc107}.scenario-item.poor {border-left:5px solid #dc3545}.scenario-content ul {margin:10px 0 0 20px}.space-efficiency, .waste-example {background:#f8f9fa;padding:10px;border-radius:6px;margin-top:10px;font-family:'Courier New', monospace}.visualization-container {background:#f8f9fa;padding:20px;border-radius:12px;text-align:center}.viz-controls {margin-bottom:20px;display:flex;justify-content:center;gap:10px;flex-wrap:wrap}.viz-display {display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:20px}.tree-display, .array-display {background:white;padding:15px;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,0.1)}#treeCanvas {border:1px solid #dee2e6;border-radius:4px;background:white}.array-viz {margin-top:10px}.array-indices, .array-values {display:flex;gap:2px;margin-bottom:5px}.index-cell, .value-cell {width:40px;height:30px;display:flex;align-items:center;justify-content:center;font-size:12px;border:1px solid #dee2e6;background:white}.index-cell {background:#e9ecef;font-weight:bold}.value-cell.header {background:#6c757d;color:white;font-weight:bold}.value-cell.unused {background:#f8d7da;color:#721c24}.value-cell.filled {background:#d4edda;color:#155724;font-weight:bold}.value-cell.highlighted {background:#fff3cd;border-color:#ffc107;animation:pulse 1s ease-in-out}@keyframes pulse {0% {transform:scale(1)}50% {transform:scale(1.1)}100% {transform:scale(1)}}.viz-description {background:white;padding:15px;border-radius:8px;margin-bottom:15px;border-left:4px solid #007bff}.storage-stats {display:grid;grid-template-columns:repeat(auto-fit, minmax(120px, 1fr));gap:10px}.stat-item {background:white;padding:10px;border-radius:6px;text-align:center;box-shadow:0 1px 3px rgba(0,0,0,0.1)}.stat-label {display:block;font-size:0.9em;color:#6c757d;margin-bottom:5px}.stat-value {display:block;font-size:1.2em;font-weight:bold;color:#007bff}.tree-builder {background:linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);padding:20px;border-radius:12px;margin-top:20px}.builder-controls {background:white;padding:20px;border-radius:8px;margin-bottom:15px}.input-section {display:flex;align-items:center;gap:10px;margin-bottom:15px;flex-wrap:wrap}.input-section label {font-weight:bold;white-space:nowrap;min-width:120px}.input-section input {padding:8px 12px;border:1px solid #ced4da;border-radius:4px;width:120px}.builder-tips {background:white;padding:15px;border-radius:8px}.builder-tips h4 {margin-bottom:10px;color:#495057}.builder-tips ul {margin:0 0 0 20px}.builder-tips li {margin-bottom:5px}.applications {display:grid;grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));gap:20px}.app-item {background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);color:white;padding:20px;border-radius:10px}.app-details {background:rgba(255,255,255,0.1);padding:10px;border-radius:6px;margin-top:10px}.code-examples {margin-top:30px}.code-tabs {display:flex;gap:5px;margin-bottom:0}.tab-btn {background:#6c757d;color:white;border:none;padding:10px 20px;border-radius:8px 8px 0 0;cursor:pointer;transition:background-color 0.3s}.tab-btn.active {background:#007bff}.tab-btn:hover {background:#5a6268}.tab-btn.active:hover {background:#0056b3}.code-container {background:#2d3748;border-radius:0 8px 8px 8px;overflow:hidden}.code-header {background:#1a202c;padding:10px 15px;display:flex;justify-content:space-between;align-items:center;color:#e2e8f0}.copy-btn {background:#4299e1;color:white;border:none;padding:5px 10px;border-radius:4px;cursor:pointer;font-size:12px}.copy-btn:hover {background:#3182ce}.code-block {display:none;margin:0;padding:20px;background:#2d3748;color:#e2e8f0;font-family:'Courier New', monospace;line-height:1.5;overflow-x:auto}.code-block.active {display:block}.quiz-container {margin-bottom:20px}.quiz-item {background:#f8f9fa;border-radius:10px;overflow:hidden;margin-bottom:20px}.question {background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);color:white;padding:20px;display:flex;justify-content:space-between;align-items:center}.show-answer-btn {background:rgba(255,255,255,0.2);color:white;border:1px solid rgba(255,255,255,0.3);padding:8px 16px;border-radius:6px;cursor:pointer;transition:all 0.3s;white-space:nowrap}.show-answer-btn:hover {background:rgba(255,255,255,0.3)}.answer {background:white;padding:20px;border-top:1px solid #e9ecef}.answer-content {background:#e8f5e8;padding:15px;border-radius:6px;border-left:4px solid #28a745;line-height:1.6}.learning-path {background:linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);padding:25px;border-radius:12px;margin-top:30px}.path-item {background:white;padding:20px;border-radius:8px}@media (max-width:768px) {.viz-controls {flex-direction:column;align-items:center}.viz-display {grid-template-columns:1fr}.question {flex-direction:column;gap:15px;text-align:center}.terms-grid {grid-template-columns:1fr}.scenario-analysis {grid-template-columns:1fr}.input-section {flex-direction:column;align-items:stretch}.input-section input {width:100%}.array-indices, .array-values {flex-wrap:wrap}.index-cell, .value-cell {width:35px;height:25px;font-size:10px}}</style><script>let canvas, ctx; let arrayData = new Array(12).fill(null); let currentDemo = ''; let animationId; class TreeNode { constructor(x, y, value, index) { this.x = x; this.y = y; this.value = value; this.index = index; this.radius = 20; this.color = '#007bff'; this.highlight = false; } draw() { if (!ctx) return; ctx.fillStyle = this.highlight ? '#ffc107' : this.color; ctx.strokeStyle = '#343a40'; ctx.lineWidth = 2; ctx.beginPath(); ctx.arc(this.x, this.y, this.radius, 0, 2 * Math.PI); ctx.fill(); ctx.stroke(); ctx.fillStyle = 'white'; ctx.font = 'bold 12px Arial'; ctx.textAlign = 'center'; ctx.textBaseline = 'middle'; ctx.fillText(this.value, this.x, this.y); ctx.fillStyle = '#666'; ctx.font = '10px Arial'; ctx.fillText(`[${this.index}]`, this.x, this.y + 30); } } function initCanvas() { canvas = document.getElementById('treeCanvas'); if (!canvas) return; ctx = canvas.getContext('2d'); canvas.width = 400; canvas.height = 300; } function clearAll() { if (ctx) { ctx.clearRect(0, 0, canvas.width, canvas.height); } arrayData = new Array(12).fill(null); updateArrayDisplay(); updateStats(); if (animationId) { cancelAnimationFrame(animationId); } } function updateArrayDisplay() { for (let i = 1; i <= 11; i++) { const cell = document.getElementById(`cell-${i}`); if (!cell) continue; cell.className = 'value-cell'; if (arrayData[i] !== null) { cell.textContent = arrayData[i]; cell.classList.add('filled'); } else { cell.textContent = '-'; } } } function updateStats() { const usedCount = arrayData.slice(1).filter(x => x !== null).length; const efficiency = ((usedCount / 11) * 100).toFixed(1); const maxDepth = getMaxDepth(); const elements = { usedSpace: document.getElementById('usedSpace'), efficiency: document.getElementById('efficiency'), maxDepth: document.getElementById('maxDepth') }; if (elements.usedSpace) elements.usedSpace.textContent = usedCount; if (elements.efficiency) elements.efficiency.textContent = efficiency + '%'; if (elements.maxDepth) elements.maxDepth.textContent = maxDepth; } function getMaxDepth() { let maxDepth = 0; for (let i = 1; i <= 11; i++) { if (arrayData[i] !== null) { const depth = Math.floor(Math.log2(i)); maxDepth = Math.max(maxDepth, depth); } } return maxDepth; } function drawTree() { if (!ctx) return; ctx.clearRect(0, 0, canvas.width, canvas.height); const nodes = []; const positions = { 1: {x: 200, y: 40}, 2: {x: 120, y: 90}, 3: {x: 280, y: 90}, 4: {x: 80, y: 140}, 5: {x: 160, y: 140}, 6: {x: 240, y: 140}, 7: {x: 320, y: 140}, 8: {x: 60, y: 190}, 9: {x: 100, y: 190}, 10: {x: 140, y: 190}, 11: {x: 180, y: 190} }; for (let i = 1; i <= 11; i++) { if (arrayData[i] !== null && positions[i]) { const node = new TreeNode(positions[i].x, positions[i].y, arrayData[i], i); nodes.push(node); } } ctx.strokeStyle = '#6c757d'; ctx.lineWidth = 1; for (let i = 1; i <= 11; i++) { if (arrayData[i] !== null) { const leftChild = 2 * i; if (leftChild <= 11 && arrayData[leftChild] !== null && positions[i] && positions[leftChild]) { ctx.beginPath(); ctx.moveTo(positions[i].x, positions[i].y); ctx.lineTo(positions[leftChild].x, positions[leftChild].y); ctx.stroke(); } const rightChild = 2 * i + 1; if (rightChild <= 11 && arrayData[rightChild] !== null && positions[i] && positions[rightChild]) { ctx.beginPath(); ctx.moveTo(positions[i].x, positions[i].y); ctx.lineTo(positions[rightChild].x, positions[rightChild].y); ctx.stroke(); } } } nodes.forEach(node => node.draw()); } function highlightCell(index, duration = 1000) { const cell = document.getElementById(`cell-${index}`); if (!cell) return; cell.classList.add('highlighted'); setTimeout(() => { cell.classList.remove('highlighted'); }, duration); } function showComplete() { clearAll(); currentDemo = 'complete'; const descEl = document.getElementById('vizDescription'); if (descEl) { descEl.innerHTML = 'å®Œå…¨äºŒå‰æ ‘æ¼”ç¤ºï¼šæŒ‰å±‚åºé¡ºåºå¡«å……ï¼Œç©ºé—´åˆ©ç”¨ç‡æœ€é«˜'; } const values = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K']; let index = 1; function addNext() { if (index <= 11) { arrayData[index] = values[index - 1]; updateArrayDisplay(); highlightCell(index); drawTree(); updateStats(); index++; setTimeout(addNext, 500); } else { if (descEl) { descEl.innerHTML += '<br>âœ… å®Œå…¨äºŒå‰æ ‘æ„å»ºå®Œæˆï¼ç©ºé—´åˆ©ç”¨ç‡100%'; } } } addNext(); } function showPartial() { clearAll(); currentDemo = 'partial'; const descEl = document.getElementById('vizDescription'); if (descEl) { descEl.innerHTML = 'éƒ¨åˆ†å¡«å……æ¼”ç¤ºï¼šè§‚å¯Ÿä¸å®Œæ•´æ ‘çš„ç©ºé—´åˆ©ç”¨æƒ…å†µ'; } const positions = [1, 2, 4, 5, 8, 9]; const values = ['A', 'B', 'D', 'E', 'H', 'I']; let index = 0; function addNext() { if (index < positions.length) { const pos = positions[index]; arrayData[pos] = values[index]; updateArrayDisplay(); highlightCell(pos); drawTree(); updateStats(); index++; setTimeout(addNext, 600); } else { if (descEl) { const efficiency = ((6 / 11) * 100).toFixed(1); descEl.innerHTML += `<br>âœ… éƒ¨åˆ†å¡«å……å®Œæˆï¼ç©ºé—´åˆ©ç”¨ç‡${efficiency}%ï¼Œå­˜åœ¨ç©ºæ´`; } } } addNext(); } function showMapping() { clearAll(); currentDemo = 'mapping'; const descEl = document.getElementById('vizDescription'); if (descEl) { descEl.innerHTML = 'æ˜ å°„å…³ç³»æ¼”ç¤ºï¼šçˆ¶å­èŠ‚ç‚¹çš„ç´¢å¼•è®¡ç®—è§„å¾‹'; } arrayData[1] = 'A'; arrayData[2] = 'B'; arrayData[3] = 'C'; arrayData[4] = 'D'; arrayData[5] = 'E'; arrayData[6] = 'F'; arrayData[7] = 'G'; updateArrayDisplay(); drawTree(); updateStats(); const demonstrations = [ {index: 1, desc: 'èŠ‚ç‚¹1(A): æ ¹èŠ‚ç‚¹ï¼Œæ— çˆ¶èŠ‚ç‚¹ï¼Œå·¦å­©å­=2ï¼Œå³å­©å­=3'}, {index: 2, desc: 'èŠ‚ç‚¹2(B): çˆ¶èŠ‚ç‚¹=âŒŠ2/2âŒ‹=1ï¼Œå·¦å­©å­=2Ã—2=4ï¼Œå³å­©å­=2Ã—2+1=5'}, {index: 3, desc: 'èŠ‚ç‚¹3(C): çˆ¶èŠ‚ç‚¹=âŒŠ3/2âŒ‹=1ï¼Œå·¦å­©å­=2Ã—3=6ï¼Œå³å­©å­=2Ã—3+1=7'}, {index: 4, desc: 'èŠ‚ç‚¹4(D): çˆ¶èŠ‚ç‚¹=âŒŠ4/2âŒ‹=2ï¼Œå·¦å­©å­=2Ã—4=8ï¼Œå³å­©å­=2Ã—4+1=9'}, {index: 5, desc: 'èŠ‚ç‚¹5(E): çˆ¶èŠ‚ç‚¹=âŒŠ5/2âŒ‹=2ï¼Œå·¦å­©å­=2Ã—5=10ï¼Œå³å­©å­=2Ã—5+1=11'} ]; let demoIndex = 0; function showNextMapping() { if (demoIndex < demonstrations.length) { const demo = demonstrations[demoIndex]; highlightCell(demo.index, 2000); if (descEl) { descEl.innerHTML = `æ˜ å°„å…³ç³»æ¼”ç¤ºï¼š${demo.desc}`; } demoIndex++; setTimeout(showNextMapping, 2500); } else { if (descEl) { descEl.innerHTML = 'æ˜ å°„å…³ç³»æ¼”ç¤ºå®Œæˆï¼æŒæ¡äº†çˆ¶å­èŠ‚ç‚¹çš„è®¡ç®—å…¬å¼'; } } } setTimeout(showNextMapping, 1000); } function showTraversal() { clearAll(); currentDemo = 'traversal'; const descEl = document.getElementById('vizDescription'); if (descEl) { descEl.innerHTML = 'éå†æ¼”ç¤ºï¼šå±‚åºéå†å°±æ˜¯æŒ‰æ•°ç»„ç´¢å¼•é¡ºåºè®¿é—®'; } const values = ['A', 'B', 'C', 'D', 'E', 'F', 'G']; for (let i = 1; i <= 7; i++) { arrayData[i] = values[i - 1]; } updateArrayDisplay(); drawTree(); updateStats(); let index = 1; function highlightNext() { if (index <= 7) { highlightCell(index, 1000); if (descEl) { descEl.innerHTML = `å±‚åºéå†ï¼šè®¿é—®èŠ‚ç‚¹${arrayData[index]}ï¼ˆä½ç½®${index}ï¼‰`; } index++; setTimeout(highlightNext, 1200); } else { if (descEl) { descEl.innerHTML = 'éå†å®Œæˆï¼å±‚åºéå† = æ•°ç»„é¡ºåºè®¿é—®ï¼šA B C D E F G'; } } } setTimeout(highlightNext, 1000); } function addNode() { const posInput = document.getElementById('positionInput'); const valInput = document.getElementById('valueInput'); if (!posInput || !valInput) return; const position = parseInt(posInput.value); const value = valInput.value.trim(); if (!position || position < 1 || position > 11) { alert('è¯·è¾“å…¥1-11ä¹‹é—´çš„æœ‰æ•ˆä½ç½®'); return; } if (!value) { alert('è¯·è¾“å…¥èŠ‚ç‚¹å€¼'); return; } if (position > 1) { const parentPos = Math.floor(position / 2); if (arrayData[parentPos] === null) { alert(`æ— æ³•æ·»åŠ èŠ‚ç‚¹ï¼šçˆ¶èŠ‚ç‚¹ï¼ˆä½ç½®${parentPos}ï¼‰ä¸å­˜åœ¨`); return; } } arrayData[position] = value; updateArrayDisplay(); highlightCell(position); drawTree(); updateStats(); posInput.value = ''; valInput.value = ''; const descEl = document.getElementById('vizDescription'); if (descEl) { descEl.innerHTML = `æˆåŠŸæ·»åŠ èŠ‚ç‚¹"${value}"åˆ°ä½ç½®${position}`; } } function removeNode() { const removeInput = document.getElementById('removePositionInput'); if (!removeInput) return; const position = parseInt(removeInput.value); if (!position || position < 1 || position > 11) { alert('è¯·è¾“å…¥1-11ä¹‹é—´çš„æœ‰æ•ˆä½ç½®'); return; } if (arrayData[position] === null) { alert('è¯¥ä½ç½®æ²¡æœ‰èŠ‚ç‚¹'); return; } function removeSubtree(pos) { if (pos > 11) return; arrayData[pos] = null; const leftChild = 2 * pos; if (leftChild <= 11) removeSubtree(leftChild); const rightChild = 2 * pos + 1; if (rightChild <= 11) removeSubtree(rightChild); } removeSubtree(position); updateArrayDisplay(); drawTree(); updateStats(); removeInput.value = ''; const descEl = document.getElementById('vizDescription'); if (descEl) { descEl.innerHTML = `åˆ é™¤ä½ç½®${position}çš„èŠ‚ç‚¹åŠå…¶å­æ ‘`; } } function fillCompleteTree() { clearAll(); const values = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K']; for (let i = 1; i <= 11; i++) { arrayData[i] = values[i - 1]; } updateArrayDisplay(); drawTree(); updateStats(); const descEl = document.getElementById('vizDescription'); if (descEl) { descEl.innerHTML = 'å·²å¡«å……å®Œå…¨äºŒå‰æ ‘ï¼Œç©ºé—´åˆ©ç”¨ç‡100%'; } } function initCodeTabs() { const tabBtns = document.querySelectorAll('.tab-btn'); const codeBlocks = document.querySelectorAll('.code-block'); const copyBtns = document.querySelectorAll('.copy-btn'); tabBtns.forEach(btn => { btn.addEventListener('click', () => { const lang = btn.dataset.lang; tabBtns.forEach(tab => tab.classList.remove('active')); btn.classList.add('active'); codeBlocks.forEach(block => { block.classList.remove('active'); if (block.id === `code-${lang}`) { block.classList.add('active'); } }); copyBtns.forEach(copyBtn => { copyBtn.dataset.lang = lang; }); }); }); copyBtns.forEach(btn => { btn.addEventListener('click', () => { const lang = btn.dataset.lang; const codeBlock = document.getElementById(`code-${lang}`); if (!codeBlock) return; const code = codeBlock.textContent; if (navigator.clipboard) { navigator.clipboard.writeText(code).then(() => { btn.textContent = 'âœ… å·²å¤åˆ¶'; setTimeout(() => { btn.textContent = 'ğŸ“‹ å¤åˆ¶'; }, 2000); }).catch(() => { fallbackCopyTextToClipboard(code, btn); }); } else { fallbackCopyTextToClipboard(code, btn); } }); }); } function fallbackCopyTextToClipboard(text, btn) { const textArea = document.createElement("textarea"); textArea.value = text; textArea.style.top = "0"; textArea.style.left = "0"; textArea.style.position = "fixed"; document.body.appendChild(textArea); textArea.focus(); textArea.select(); try { const successful = document.execCommand('copy'); if (successful) { btn.textContent = 'âœ… å·²å¤åˆ¶'; setTimeout(() => { btn.textContent = 'ğŸ“‹ å¤åˆ¶'; }, 2000); } } catch (err) { console.error('å¤åˆ¶å¤±è´¥', err); } document.body.removeChild(textArea); } function initQuizAnswers() { const answerBtns = document.querySelectorAll('.show-answer-btn'); answerBtns.forEach(btn => { btn.addEventListener('click', () => { const answerId = btn.dataset.answer; const answerDiv = document.getElementById(`answer-${answerId}`); if (!answerDiv) return; if (answerDiv.style.display === 'none') { answerDiv.style.display = 'block'; btn.textContent = 'éšè—ç­”æ¡ˆ'; } else { answerDiv.style.display = 'none'; btn.textContent = 'æ˜¾ç¤ºç­”æ¡ˆ'; } }); }); } document.addEventListener('DOMContentLoaded', () => { initCanvas(); initCodeTabs(); initQuizAnswers(); updateArrayDisplay(); updateStats(); const vizButtons = { showComplete: document.getElementById('showComplete'), showPartial: document.getElementById('showPartial'), showMapping: document.getElementById('showMapping'), showTraversal: document.getElementById('showTraversal'), resetViz: document.getElementById('resetViz') }; if (vizButtons.showComplete) { vizButtons.showComplete.addEventListener('click', showComplete); } if (vizButtons.showPartial) { vizButtons.showPartial.addEventListener('click', showPartial); } if (vizButtons.showMapping) { vizButtons.showMapping.addEventListener('click', showMapping); } if (vizButtons.showTraversal) { vizButtons.showTraversal.addEventListener('click', showTraversal); } if (vizButtons.resetViz) { vizButtons.resetViz.addEventListener('click', () => { clearAll(); const descEl = document.getElementById('vizDescription'); if (descEl) { descEl.innerHTML = 'ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹é¡ºåºå­˜å‚¨æ¼”ç¤º'; } }); } const builderButtons = { addNodeBtn: document.getElementById('addNodeBtn'), removeNodeBtn: document.getElementById('removeNodeBtn'), clearAllBtn: document.getElementById('clearAllBtn'), fillCompleteBtn: document.getElementById('fillCompleteBtn') }; if (builderButtons.addNodeBtn) { builderButtons.addNodeBtn.addEventListener('click', addNode); } if (builderButtons.removeNodeBtn) { builderButtons.removeNodeBtn.addEventListener('click', removeNode); } if (builderButtons.clearAllBtn) { builderButtons.clearAllBtn.addEventListener('click', clearAll); } if (builderButtons.fillCompleteBtn) { builderButtons.fillCompleteBtn.addEventListener('click', fillCompleteTree); } const inputs = { positionInput: document.getElementById('positionInput'), valueInput: document.getElementById('valueInput'), removePositionInput: document.getElementById('removePositionInput') }; if (inputs.positionInput) { inputs.positionInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') addNode(); }); } if (inputs.valueInput) { inputs.valueInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') addNode(); }); } if (inputs.removePositionInput) { inputs.removePositionInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') removeNode(); }); } }); window.addEventListener('resize', () => { if (canvas) { canvas.width = 400; canvas.height = 300; if (arrayData.some(x => x !== null)) { drawTree(); } } }); window.addEventListener('error', (e) => { console.error('é¡µé¢é”™è¯¯:', e.error); });</script>

{% endblock %}