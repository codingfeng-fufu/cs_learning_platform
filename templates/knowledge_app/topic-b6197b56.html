{% extends 'knowledge_app/base.html' %}

{% block title %}æ ˆâ€”â€”é€’å½’ - è®¡ç®—æœºç§‘å­¦å­¦ä¹ å¹³å°{% endblock %}

{% block content %}
<style>.content-card {margin-bottom:30px;padding:30px;background:white;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.1)}.section-title {color:#2c3e50;font-size:1.8rem;margin-bottom:20px;display:flex;align-items:center;gap:12px}.section-icon {font-size:1.6rem}.difficulty-badge {padding:6px 12px;border-radius:20px;font-size:0.9rem;font-weight:bold;margin-left:15px}.difficulty-beginner {background:#e8f5e8;color:#2e7d32}.key-terms {display:grid;grid-template-columns:repeat(auto-fit, minmax(280px, 1fr));gap:15px;margin:20px 0}.term-card {background:#f8f9fa;padding:15px;border-radius:8px;border-left:4px solid #3498db}.term-title {font-weight:bold;color:#2c3e50;margin-bottom:5px}.concept-box {background:#fff3cd;border:1px solid #ffeaa7;border-radius:8px;padding:20px;margin:15px 0}.analogy-box {background:#e8f4fd;border:1px solid #74b9ff;border-radius:8px;padding:20px;margin:15px 0}.analogy-title {font-weight:bold;color:#0984e3;margin-bottom:10px}.danger-box {background:#ffeaea;border:1px solid #ff7675;border-radius:8px;padding:20px;margin:15px 0}.danger-title {font-weight:bold;color:#d63031;margin-bottom:10px}.visualization-container {background:#f8f9fa;border-radius:12px;padding:30px;margin:20px 0;text-align:center}.canvas-container {position:relative;background:white;border:2px solid #ddd;border-radius:8px;margin:20px auto;display:inline-block}.control-panel {margin:20px 0;display:flex;justify-content:center;gap:15px;flex-wrap:wrap}.control-btn {padding:10px 20px;border:none;border-radius:6px;cursor:pointer;font-weight:bold;transition:all 0.3s}.btn-primary {background:#3498db;color:white}.btn-success {background:#27ae60;color:white}.btn-warning {background:#f39c12;color:white}.btn-info {background:#17a2b8;color:white}.control-btn:hover {transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,0.2)}.memory-info {position:absolute;right:10px;top:10px;background:rgba(231, 76, 60, 0.9);color:white;padding:5px 10px;border-radius:4px;font-size:12px;font-weight:bold}.animation-legend {display:flex;justify-content:center;gap:20px;margin:15px 0;flex-wrap:wrap}.legend-item {display:flex;align-items:center;gap:8px;font-size:0.9rem}.legend-color {width:20px;height:15px;border-radius:3px;display:inline-block}.recursion-tree {position:absolute;right:20px;top:60px;width:200px;height:300px;background:rgba(255,255,255,0.95);border-radius:8px;padding:10px}.calculation-panel {position:absolute;left:20px;bottom:60px;width:280px;background:rgba(255,255,255,0.95);border-radius:8px;padding:15px;border:2px solid #3498db}.formula-display {font-family:'Courier New', monospace;font-size:14px;color:#2c3e50;margin:5px 0}.current-formula {background:#e8f6f3;padding:8px;border-radius:4px;border-left:4px solid #27ae60}.depth-chart {position:absolute;right:20px;bottom:20px;width:150px;height:100px}.tooltip {position:absolute;background:rgba(0,0,0,0.8);color:white;padding:8px 12px;border-radius:4px;font-size:12px;pointer-events:none;opacity:0;transition:opacity 0.3s;z-index:1000}.code-container {margin:20px 0}.code-tabs {display:flex;background:#f1f2f6;border-radius:8px 8px 0 0;overflow:hidden}.code-tab {padding:12px 24px;cursor:pointer;border:none;background:transparent;font-weight:bold;transition:all 0.3s}.code-tab.active {background:#2c3e50;color:white}.code-tab:hover:not(.active) {background:#ddd}.code-content {background:#2c3e50;color:#ecf0f1;padding:20px;border-radius:0 0 8px 8px;position:relative;overflow-x:auto}.copy-btn {position:absolute;top:10px;right:10px;background:#3498db;color:white;border:none;padding:6px 12px;border-radius:4px;cursor:pointer;font-size:0.8rem}.copy-btn:hover {background:#2980b9}.quiz-container {margin:20px 0}.quiz-item {background:#f8f9fa;border-radius:8px;padding:20px;margin:15px 0;border-left:4px solid #3498db}.quiz-question {font-weight:bold;color:#2c3e50;margin-bottom:15px}.answer-btn {background:#e74c3c;color:white;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;margin-bottom:10px}.answer-btn:hover {background:#c0392b}.quiz-answer {display:none;background:#d5f4e6;border:1px solid #27ae60;border-radius:4px;padding:15px;margin-top:10px}.quiz-answer.show {display:block}.step-indicator {margin:15px 0;font-weight:bold;color:#2c3e50;background:rgba(255,255,255,0.9);padding:10px;border-radius:5px;border-left:4px solid #3498db}.recursion-formula {background:#f8f9fa;border:2px solid #3498db;border-radius:8px;padding:15px;margin:15px 0;text-align:center;font-family:'Courier New', monospace;font-size:1.1rem}pre {font-family:'Courier New', monospace;white-space:pre-wrap;margin:0}.fade-in {animation:fadeIn 0.8s ease-out}.slide-in-left {animation:slideInLeft 0.6s ease-out}.slide-in-right {animation:slideInRight 0.6s ease-out}@keyframes fadeIn {from {opacity:0}to {opacity:1}}@keyframes slideInLeft {from {transform:translateX(-50px);opacity:0}to {transform:translateX(0);opacity:1}}@keyframes slideInRight {from {transform:translateX(50px);opacity:0}to {transform:translateX(0);opacity:1}}.highlight {background:#fff3cd;padding:2px 4px;border-radius:3px}.recursion-depth {position:absolute;left:10px;top:10px;background:rgba(52, 152, 219, 0.9);color:white;padding:5px 10px;border-radius:4px;font-size:12px;font-weight:bold}</style><div class="page-container fade-in"><!-- é¢åŒ…å±‘å¯¼èˆª --><div class="breadcrumb"><a href="{% url 'knowledge_app:index' %}">é¦–é¡µ</a><span>></span><span>æ•°æ®ç»“æ„</span><span>></span><span>æ ˆâ€”â€”é€’å½’</span></div><!-- é¡µé¢å¤´éƒ¨ --><div class="page-header slide-in-left"><h1><span class="page-icon">ğŸ”„</span>
            æ ˆâ€”â€”é€’å½’
            <span class="difficulty-badge difficulty-beginner">å…¥é—¨çº§</span></h1><p>æ·±å…¥ç†è§£é€’å½’å‡½æ•°çš„æ‰§è¡Œæœºåˆ¶ï¼ŒæŒæ¡é€’å½’è°ƒç”¨æ ˆçš„å˜åŒ–è¿‡ç¨‹</p></div><!-- ğŸ“‹ çŸ¥è¯†ç‚¹æ¦‚è¿° --><div class="content-card slide-in-right"><h2 class="section-title"><span class="section-icon">ğŸ“‹</span>
            çŸ¥è¯†ç‚¹æ¦‚è¿°
        </h2><div class="concept-box"><h3>æ ¸å¿ƒæ¦‚å¿µ</h3><p><strong>é€’å½’</strong>æ˜¯ä¸€ç§ç¼–ç¨‹æŠ€æœ¯ï¼Œå‡½æ•°ç›´æ¥æˆ–é—´æ¥åœ°è°ƒç”¨è‡ªèº«æ¥è§£å†³é—®é¢˜ã€‚é€’å½’å‡½æ•°é€šè¿‡å°†å¤æ‚é—®é¢˜åˆ†è§£ä¸ºç›¸åŒç±»å‹çš„æ›´å°å­é—®é¢˜ï¼Œæœ€ç»ˆè¾¾åˆ°åŸºæœ¬æƒ…å†µï¼ˆç»ˆæ­¢æ¡ä»¶ï¼‰ï¼Œç„¶åé€å±‚è¿”å›ç»“æœã€‚</p></div><div class="recursion-formula">
            é€’å½’ = åŸºæœ¬æƒ…å†µï¼ˆBase Caseï¼‰+ é€’å½’æƒ…å†µï¼ˆRecursive Caseï¼‰
        </div><div class="key-terms"><div class="term-card"><div class="term-title">åŸºæœ¬æƒ…å†µ (Base Case)</div><div>é€’å½’çš„ç»ˆæ­¢æ¡ä»¶ï¼Œä¸å†è¿›è¡Œé€’å½’è°ƒç”¨ï¼Œç›´æ¥è¿”å›ç»“æœ</div></div><div class="term-card"><div class="term-title">é€’å½’æƒ…å†µ (Recursive Case)</div><div>å‡½æ•°è°ƒç”¨è‡ªèº«å¤„ç†è§„æ¨¡æ›´å°çš„åŒç±»é—®é¢˜</div></div><div class="term-card"><div class="term-title">é€’å½’æ·±åº¦ (Recursion Depth)</div><div>é€’å½’è°ƒç”¨çš„å±‚æ•°ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½ä¼šåœ¨æ ˆä¸­åˆ›å»ºæ–°çš„æ ˆå¸§</div></div><div class="term-card"><div class="term-title">æ ˆæº¢å‡º (Stack Overflow)</div><div>é€’å½’æ·±åº¦è¿‡å¤§æˆ–ç¼ºå°‘ç»ˆæ­¢æ¡ä»¶æ—¶ï¼Œæ ˆç©ºé—´è€—å°½å¯¼è‡´çš„é”™è¯¯</div></div></div><div style="margin-top: 20px;"><strong>å‰ç½®çŸ¥è¯†ï¼š</strong>å‡½æ•°æ¦‚å¿µã€å‡½æ•°è°ƒç”¨æ ˆã€æ¡ä»¶è¯­å¥ã€æ•°å­¦å½’çº³æ³•æ€ç»´
        </div></div><!-- ğŸ” æ¦‚å¿µè¯¦è§£ --><div class="content-card"><h2 class="section-title"><span class="section-icon">ğŸ”</span>
            æ¦‚å¿µè¯¦è§£
        </h2><div class="analogy-box"><div class="analogy-title">ç”Ÿæ´»ç±»æ¯”ï¼šä¿„ç½—æ–¯å¥—å¨ƒ</div><p>é€’å½’å°±åƒæ‰“å¼€ä¿„ç½—æ–¯å¥—å¨ƒçš„è¿‡ç¨‹ï¼š</p><ul><li><strong>å¥—å¨ƒ = é€’å½’å‡½æ•°</strong>ï¼šæ¯ä¸ªå¥—å¨ƒé‡Œé¢è¿˜æœ‰æ›´å°çš„å¥—å¨ƒ</li><li><strong>æ‰“å¼€å¥—å¨ƒ = é€’å½’è°ƒç”¨</strong>ï¼šä¸æ–­æ‰“å¼€ç›´åˆ°æ‰¾åˆ°æœ€å°çš„å¥—å¨ƒ</li><li><strong>æœ€å°å¥—å¨ƒ = åŸºæœ¬æƒ…å†µ</strong>ï¼šä¸èƒ½å†æ‰“å¼€çš„å¥—å¨ƒï¼Œé€’å½’ç»ˆæ­¢</li><li><strong>é‡æ–°ç»„è£… = è¿”å›è¿‡ç¨‹</strong>ï¼šæŒ‰ç…§ç›¸åçš„é¡ºåºé‡æ–°ç»„è£…å¥—å¨ƒ</li></ul></div><h3>1. é€’å½’çš„ç»„æˆè¦ç´ </h3><p>æ¯ä¸ªé€’å½’å‡½æ•°å¿…é¡»åŒ…å«ä¸¤ä¸ªå…³é”®éƒ¨åˆ†ï¼š</p><ul><li><strong>åŸºæœ¬æƒ…å†µï¼ˆç»ˆæ­¢æ¡ä»¶ï¼‰</strong>ï¼šé˜²æ­¢æ— é™é€’å½’ï¼Œæ˜¯é€’å½’çš„"å‡ºå£"</li><li><strong>é€’å½’æƒ…å†µ</strong>ï¼šå‡½æ•°è°ƒç”¨è‡ªèº«ï¼Œä½†å‚æ•°å¿…é¡»å‘åŸºæœ¬æƒ…å†µé è¿‘</li></ul><h3>2. é€’å½’çš„æ‰§è¡Œè¿‡ç¨‹</h3><p>é€’å½’æ‰§è¡Œåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š</p><ol><li><strong>é€’å½’é˜¶æ®µï¼ˆWindingï¼‰</strong>ï¼šä¸æ–­è°ƒç”¨è‡ªèº«ï¼Œæ ˆå¸§é€å±‚å¢åŠ </li><li><strong>å›æº¯é˜¶æ®µï¼ˆUnwindingï¼‰</strong>ï¼šè¾¾åˆ°åŸºæœ¬æƒ…å†µåï¼Œé€å±‚è¿”å›ï¼Œæ ˆå¸§é€å±‚å‡å°‘</li></ol><h3>3. é€’å½’ä¸æ ˆçš„å…³ç³»</h3><p>é€’å½’è°ƒç”¨æ—¶ï¼š</p><ul><li>æ¯æ¬¡é€’å½’è°ƒç”¨éƒ½ä¼šåˆ›å»ºæ–°çš„æ ˆå¸§</li><li>æ ˆå¸§åŒ…å«å½“å‰è°ƒç”¨çš„å‚æ•°ã€å±€éƒ¨å˜é‡ã€è¿”å›åœ°å€</li><li>æ‰€æœ‰é€’å½’è°ƒç”¨çš„æ ˆå¸§ä¼šå †å åœ¨è°ƒç”¨æ ˆä¸­</li><li>è¾¾åˆ°åŸºæœ¬æƒ…å†µåï¼Œæ ˆå¸§æŒ‰LIFOé¡ºåºé€ä¸ªå¼¹å‡º</li></ul><div class="danger-box"><div class="danger-title">âš ï¸ å¸¸è§é”™è¯¯ä¸é£é™©</div><ul><li><strong>ç¼ºå°‘åŸºæœ¬æƒ…å†µ</strong>ï¼šå¯¼è‡´æ— é™é€’å½’ï¼Œæœ€ç»ˆæ ˆæº¢å‡º</li><li><strong>åŸºæœ¬æƒ…å†µæ°¸è¿œä¸ä¼šè¾¾åˆ°</strong>ï¼šå‚æ•°æ²¡æœ‰å‘ç»ˆæ­¢æ¡ä»¶æ”¶æ•›</li><li><strong>é€’å½’æ·±åº¦è¿‡å¤§</strong>ï¼šå³ä½¿æœ‰ç»ˆæ­¢æ¡ä»¶ï¼Œæ·±åº¦å¤ªå¤§ä¹Ÿå¯èƒ½æ ˆæº¢å‡º</li><li><strong>æ•ˆç‡é—®é¢˜</strong>ï¼šé‡å¤è®¡ç®—å¯¼è‡´æ—¶é—´å¤æ‚åº¦æŒ‡æ•°å¢é•¿</li></ul></div></div><!-- ğŸ“Š å¯è§†åŒ–å±•ç¤º --><div class="content-card"><h2 class="section-title"><span class="section-icon">ğŸ“Š</span>
            å¯è§†åŒ–å±•ç¤º
        </h2><div class="visualization-container"><h3>é˜¶ä¹˜å‡½æ•°é€’å½’è°ƒç”¨æ ˆæ¼”ç¤º</h3><p>è§‚å¯Ÿ factorial(4) çš„å®Œæ•´é€’å½’è¿‡ç¨‹ï¼š4! = 4 Ã— 3 Ã— 2 Ã— 1 = 24</p><div class="canvas-container"><canvas id="recursionCanvas" width="1000" height="600"></canvas><div class="recursion-depth" id="depthIndicator">é€’å½’æ·±åº¦: 0</div><div class="memory-info" id="memoryInfo">å†…å­˜ä½¿ç”¨: 0 KB</div></div><div class="control-panel"><button class="control-btn btn-primary" onclick="resetAnimation()">ğŸ”„ é‡ç½®</button><button class="control-btn btn-success" onclick="stepForward()">â–¶ï¸ ä¸‹ä¸€æ­¥</button><button class="control-btn btn-warning" onclick="stepBackward()">â—€ï¸ ä¸Šä¸€æ­¥</button><button class="control-btn btn-info" onclick="autoPlay()">ğŸ¬ è‡ªåŠ¨æ’­æ”¾</button></div><div class="step-indicator" id="stepIndicator">
                ç¬¬ 1 æ­¥ï¼šå¼€å§‹è°ƒç”¨ factorial(4)
            </div><div class="animation-legend"><div class="legend-item"><span class="legend-color" style="background: #3498db;"></span><span>è°ƒç”¨ä¸­</span></div><div class="legend-item"><span class="legend-color" style="background: #f39c12;"></span><span>ç­‰å¾…ä¸­</span></div><div class="legend-item"><span class="legend-color" style="background: #27ae60;"></span><span>è¿”å›ä¸­</span></div><div class="legend-item"><span class="legend-color" style="background: #e74c3c;"></span><span>åŸºæœ¬æƒ…å†µ</span></div></div></div><div class="code-container"><h3>é˜¶ä¹˜å‡½æ•°å®ç°</h3><div class="code-tabs"><button class="code-tab active" onclick="showCode('cpp')">C++</button><button class="code-tab" onclick="showCode('java')">Java</button><button class="code-tab" onclick="showCode('python')">Python</button></div><div id="cppCode" class="code-content"><button class="copy-btn" onclick="copyCode('cpp')">å¤åˆ¶ä»£ç </button><pre>#include &lt;iostream&gt;
using namespace std;

int factorial(int n) {
    // åŸºæœ¬æƒ…å†µï¼šé˜¶ä¹˜çš„ç»ˆæ­¢æ¡ä»¶
    if (n == 0 || n == 1) {
        cout &lt;&lt; "åŸºæœ¬æƒ…å†µ: factorial(" &lt;&lt; n &lt;&lt; ") = 1" &lt;&lt; endl;
        return 1;
    }

    // é€’å½’æƒ…å†µï¼šn! = n Ã— (n-1)!
    cout &lt;&lt; "é€’å½’è°ƒç”¨: factorial(" &lt;&lt; n &lt;&lt; ") = " &lt;&lt; n
         &lt;&lt; " Ã— factorial(" &lt;&lt; (n-1) &lt;&lt; ")" &lt;&lt; endl;

    int result = n * factorial(n - 1);  // é€’å½’è°ƒç”¨

    cout &lt;&lt; "è¿”å›ç»“æœ: factorial(" &lt;&lt; n &lt;&lt; ") = " &lt;&lt; result &lt;&lt; endl;
    return result;
}

int main() {
    int num = 4;
    cout &lt;&lt; "è®¡ç®— " &lt;&lt; num &lt;&lt; "! çš„è¿‡ç¨‹ï¼š" &lt;&lt; endl;
    int result = factorial(num);
    cout &lt;&lt; "æœ€ç»ˆç»“æœï¼š" &lt;&lt; num &lt;&lt; "! = " &lt;&lt; result &lt;&lt; endl;
    return 0;
}</pre></div><div id="javaCode" class="code-content" style="display: none;"><button class="copy-btn" onclick="copyCode('java')">å¤åˆ¶ä»£ç </button><pre>public class FactorialDemo {
    public static int factorial(int n) {
        // åŸºæœ¬æƒ…å†µï¼šé˜¶ä¹˜çš„ç»ˆæ­¢æ¡ä»¶
        if (n == 0 || n == 1) {
            System.out.println("åŸºæœ¬æƒ…å†µ: factorial(" + n + ") = 1");
            return 1;
        }

        // é€’å½’æƒ…å†µï¼šn! = n Ã— (n-1)!
        System.out.println("é€’å½’è°ƒç”¨: factorial(" + n + ") = " + n
                         + " Ã— factorial(" + (n-1) + ")");

        int result = n * factorial(n - 1);  // é€’å½’è°ƒç”¨

        System.out.println("è¿”å›ç»“æœ: factorial(" + n + ") = " + result);
        return result;
    }

    public static void main(String[] args) {
        int num = 4;
        System.out.println("è®¡ç®— " + num + "! çš„è¿‡ç¨‹ï¼š");
        int result = factorial(num);
        System.out.println("æœ€ç»ˆç»“æœï¼š" + num + "! = " + result);
    }
}</pre></div><div id="pythonCode" class="code-content" style="display: none;"><button class="copy-btn" onclick="copyCode('python')">å¤åˆ¶ä»£ç </button><pre>def factorial(n):
    # åŸºæœ¬æƒ…å†µï¼šé˜¶ä¹˜çš„ç»ˆæ­¢æ¡ä»¶
    if n == 0 or n == 1:
        print(f"åŸºæœ¬æƒ…å†µ: factorial({n}) = 1")
        return 1

    # é€’å½’æƒ…å†µï¼šn! = n Ã— (n-1)!
    print(f"é€’å½’è°ƒç”¨: factorial({n}) = {n} Ã— factorial({n-1})")

    result = n * factorial(n - 1)  # é€’å½’è°ƒç”¨

    print(f"è¿”å›ç»“æœ: factorial({n}) = {result}")
    return result

def main():
    num = 4
    print(f"è®¡ç®— {num}! çš„è¿‡ç¨‹ï¼š")
    result = factorial(num)
    print(f"æœ€ç»ˆç»“æœï¼š{num}! = {result}")

if __name__ == "__main__":
    main()</pre></div></div><div class="concept-box"><h3>é€’å½’è°ƒç”¨è¿‡ç¨‹åˆ†æ</h3><p><strong>é€’å½’é˜¶æ®µï¼ˆå‘ä¸‹è°ƒç”¨ï¼‰ï¼š</strong></p><ul><li>factorial(4) â†’ factorial(3) â†’ factorial(2) â†’ factorial(1)</li><li>æ¯æ¬¡è°ƒç”¨éƒ½åœ¨æ ˆä¸­åˆ›å»ºæ–°çš„æ ˆå¸§</li><li>å‚æ•°é€æ¸å‡å°ï¼Œå‘åŸºæœ¬æƒ…å†µé è¿‘</li></ul><p><strong>å›æº¯é˜¶æ®µï¼ˆå‘ä¸Šè¿”å›ï¼‰ï¼š</strong></p><ul><li>factorial(1) è¿”å› 1</li><li>factorial(2) è¿”å› 2 Ã— 1 = 2</li><li>factorial(3) è¿”å› 3 Ã— 2 = 6</li><li>factorial(4) è¿”å› 4 Ã— 6 = 24</li></ul></div></div><!-- ğŸŒŸ å®é™…åº”ç”¨ --><div class="content-card"><h2 class="section-title"><span class="section-icon">ğŸŒŸ</span>
            å®é™…åº”ç”¨
        </h2><h3>1. æ•°å­¦è®¡ç®—</h3><div class="analogy-box"><strong>å…¸å‹åº”ç”¨ï¼š</strong><ul><li><strong>é˜¶ä¹˜è®¡ç®—</strong>ï¼šn! = n Ã— (n-1)!</li><li><strong>æ–æ³¢é‚£å¥‘æ•°åˆ—</strong>ï¼šF(n) = F(n-1) + F(n-2)</li><li><strong>å¹‚è¿ç®—</strong>ï¼ša^n = a Ã— a^(n-1)</li><li><strong>æœ€å¤§å…¬çº¦æ•°</strong>ï¼šGCD(a,b) = GCD(b, a%b)</li></ul></div><h3>2. æ•°æ®ç»“æ„éå†</h3><p>é€’å½’æ˜¯å¤„ç†æ ‘å½¢å’Œå›¾å½¢æ•°æ®ç»“æ„çš„è‡ªç„¶æ–¹å¼ï¼š</p><ul><li><strong>äºŒå‰æ ‘éå†</strong>ï¼šå‰åºã€ä¸­åºã€ååºéå†</li><li><strong>æ–‡ä»¶ç³»ç»Ÿéå†</strong>ï¼šé€’å½’è®¿é—®ç›®å½•å’Œå­ç›®å½•</li><li><strong>å›¾çš„æ·±åº¦ä¼˜å…ˆæœç´¢</strong>ï¼šé€’å½’æ¢ç´¢å›¾çš„è·¯å¾„</li></ul><h3>3. åˆ†æ²»ç®—æ³•</h3><p>è®¸å¤šé«˜æ•ˆç®—æ³•éƒ½åŸºäºé€’å½’çš„åˆ†æ²»æ€æƒ³ï¼š</p><ul><li><strong>å¿«é€Ÿæ’åº</strong>ï¼šå°†æ•°ç»„åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œåˆ†åˆ«é€’å½’æ’åº</li><li><strong>å½’å¹¶æ’åº</strong>ï¼šå°†æ•°ç»„åˆ†åŠï¼Œé€’å½’æ’åºååˆå¹¶</li><li><strong>äºŒåˆ†æŸ¥æ‰¾</strong>ï¼šé€’å½’åœ¨ä¸€åŠåŒºé—´ä¸­æŸ¥æ‰¾ç›®æ ‡</li><li><strong>æ±‰è¯ºå¡”é—®é¢˜</strong>ï¼šé€’å½’ç§»åŠ¨ç›˜å­çš„ç»å…¸ä¾‹å­</li></ul><div class="concept-box"><h3>é€’å½’çš„ä¼˜ç¼ºç‚¹</h3><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ul><li>ä»£ç ç®€æ´ä¼˜é›…ï¼Œæ˜“äºç†è§£</li><li>è‡ªç„¶åœ°è¡¨è¾¾åˆ†æ²»æ€æƒ³</li><li>é€‚åˆå¤„ç†é€’å½’å®šä¹‰çš„æ•°æ®ç»“æ„</li></ul><p><strong>ç¼ºç‚¹ï¼š</strong></p><ul><li>å¯èƒ½å­˜åœ¨é‡å¤è®¡ç®—ï¼Œæ•ˆç‡è¾ƒä½</li><li>å ç”¨è¾ƒå¤šæ ˆç©ºé—´</li><li>é€’å½’æ·±åº¦å—é™ï¼Œå¯èƒ½æ ˆæº¢å‡º</li></ul></div><div class="concept-box"><h3>æ¨èå­¦ä¹ å·¥å…·</h3><ul><li><strong>å¯è§†åŒ–å·¥å…·</strong>ï¼šPython Tutorã€VisuAlgoé€’å½’ä¸“é¢˜</li><li><strong>è°ƒè¯•å·¥å…·</strong>ï¼šIDEæ–­ç‚¹è°ƒè¯•è§‚å¯Ÿé€’å½’è¿‡ç¨‹</li><li><strong>ç»ƒä¹ å¹³å°</strong>ï¼šLeetCodeé€’å½’ä¸“é¢˜ã€ç‰›å®¢ç½‘</li></ul></div></div><!-- âœ… å­¦ä¹ æ£€éªŒ --><div class="content-card"><h2 class="section-title"><span class="section-icon">âœ…</span>
            å­¦ä¹ æ£€éªŒ
        </h2><div class="quiz-container"><div class="quiz-item"><div class="quiz-question">
                    1. é€’å½’å‡½æ•°å¿…é¡»åŒ…å«å“ªä¸¤ä¸ªå…³é”®è¦ç´ ï¼Ÿç¼ºå°‘å…¶ä¸­ä»»ä½•ä¸€ä¸ªä¼šå¯¼è‡´ä»€ä¹ˆé—®é¢˜ï¼Ÿ
                </div><button class="answer-btn" onclick="toggleAnswer('answer1')">æŸ¥çœ‹ç­”æ¡ˆ</button><div id="answer1" class="quiz-answer"><strong>ç­”æ¡ˆï¼š</strong>é€’å½’å‡½æ•°å¿…é¡»åŒ…å«ï¼š(1)<span class="highlight">åŸºæœ¬æƒ…å†µ(Base Case)</span>ï¼šé€’å½’çš„ç»ˆæ­¢æ¡ä»¶ï¼›(2)<span class="highlight">é€’å½’æƒ…å†µ(Recursive Case)</span>ï¼šå‡½æ•°è°ƒç”¨è‡ªèº«ã€‚ç¼ºå°‘åŸºæœ¬æƒ…å†µä¼šå¯¼è‡´æ— é™é€’å½’ï¼Œæœ€ç»ˆæ ˆæº¢å‡ºï¼›ç¼ºå°‘é€’å½’æƒ…å†µåˆ™ä¸æ˜¯é€’å½’å‡½æ•°ï¼Œæ— æ³•è§£å†³å¤æ‚é—®é¢˜ã€‚
                </div></div><div class="quiz-item"><div class="quiz-question">
                    2. è®¡ç®—factorial(3)æ—¶ï¼Œè°ƒç”¨æ ˆçš„å˜åŒ–è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿè¯·åˆ—å‡ºæ¯ä¸€æ­¥ã€‚
                </div><button class="answer-btn" onclick="toggleAnswer('answer2')">æŸ¥çœ‹ç­”æ¡ˆ</button><div id="answer2" class="quiz-answer"><strong>ç­”æ¡ˆï¼š</strong>æ ˆå˜åŒ–è¿‡ç¨‹ï¼š<br><strong>é€’å½’é˜¶æ®µï¼š</strong><br>
                    1. [factorial(3)] - è°ƒç”¨factorial(3)<br>
                    2. [factorial(3), factorial(2)] - è°ƒç”¨factorial(2)<br>
                    3. [factorial(3), factorial(2), factorial(1)] - è°ƒç”¨factorial(1)<br><strong>å›æº¯é˜¶æ®µï¼š</strong><br>
                    4. [factorial(3), factorial(2)] - factorial(1)è¿”å›1<br>
                    5. [factorial(3)] - factorial(2)è¿”å›2Ã—1=2<br>
                    6. [] - factorial(3)è¿”å›3Ã—2=6
                </div></div><div class="quiz-item"><div class="quiz-question">
                    3. ä¸‹é¢çš„é€’å½’å‡½æ•°æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿå¦‚ä½•ä¿®å¤ï¼Ÿ<br><code>int fibonacci(int n) { return fibonacci(n-1) + fibonacci(n-2); }</code></div><button class="answer-btn" onclick="toggleAnswer('answer3')">æŸ¥çœ‹ç­”æ¡ˆ</button><div id="answer3" class="quiz-answer"><strong>ç­”æ¡ˆï¼š</strong>é—®é¢˜ï¼šç¼ºå°‘åŸºæœ¬æƒ…å†µï¼Œä¼šå¯¼è‡´æ— é™é€’å½’ã€‚<br><strong>ä¿®å¤æ–¹æ³•ï¼š</strong>æ·»åŠ ç»ˆæ­¢æ¡ä»¶ï¼š<br><code>
                    int fibonacci(int n) {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;if (n == 0) return 0;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;if (n == 1) return 1;<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;return fibonacci(n-1) + fibonacci(n-2);<br>
                    }
                    </code></div></div><div class="quiz-item"><div class="quiz-question">
                    4. ä¸ºä»€ä¹ˆé€’å½’å¯èƒ½æ¯”å¾ªç¯æ•ˆç‡ä½ï¼Ÿåœ¨ä»€ä¹ˆæƒ…å†µä¸‹åº”è¯¥é¿å…ä½¿ç”¨é€’å½’ï¼Ÿ
                </div><button class="answer-btn" onclick="toggleAnswer('answer4')">æŸ¥çœ‹ç­”æ¡ˆ</button><div id="answer4" class="quiz-answer"><strong>ç­”æ¡ˆï¼š</strong>é€’å½’æ•ˆç‡ä½çš„åŸå› ï¼š(1)<span class="highlight">å‡½æ•°è°ƒç”¨å¼€é”€</span>ï¼šæ¯æ¬¡è°ƒç”¨éƒ½è¦åˆ›å»ºæ ˆå¸§ï¼›(2)<span class="highlight">é‡å¤è®¡ç®—</span>ï¼šå¦‚æ–æ³¢é‚£å¥‘æ•°åˆ—ä¸­çš„é‡å¤å­é—®é¢˜ï¼›(3)<span class="highlight">æ ˆç©ºé—´å ç”¨</span>ï¼šæ·±åº¦é€’å½’å ç”¨å¤§é‡å†…å­˜ã€‚<br><strong>åº”é¿å…é€’å½’çš„æƒ…å†µï¼š</strong>é€’å½’æ·±åº¦å¾ˆå¤§ã€å­˜åœ¨å¤§é‡é‡å¤è®¡ç®—ã€å¯¹æ€§èƒ½è¦æ±‚æé«˜çš„åœºæ™¯ã€‚å¯ä»¥è€ƒè™‘ä½¿ç”¨å¾ªç¯ã€åŠ¨æ€è§„åˆ’æˆ–è®°å¿†åŒ–æŠ€æœ¯ã€‚
                </div></div><div class="quiz-item"><div class="quiz-question">
                    5. è§‚å¯Ÿé€’å½’è°ƒç”¨è¿‡ç¨‹ï¼Œä¸ºä»€ä¹ˆè¯´é€’å½’ä½“ç°äº†"åˆ†æ²»"çš„æ€æƒ³ï¼Ÿ
                </div><button class="answer-btn" onclick="toggleAnswer('answer5')">æŸ¥çœ‹ç­”æ¡ˆ</button><div id="answer5" class="quiz-answer"><strong>ç­”æ¡ˆï¼š</strong>é€’å½’ä½“ç°åˆ†æ²»æ€æƒ³çš„åŸå› ï¼š<br>
                    (1)<span class="highlight">åˆ†è§£é—®é¢˜</span>ï¼šå°†å¤æ‚é—®é¢˜åˆ†è§£ä¸ºåŒç±»å‹çš„æ›´å°å­é—®é¢˜<br>
                    (2)<span class="highlight">è§£å†³å­é—®é¢˜</span>ï¼šé€’å½’è§£å†³æ¯ä¸ªå­é—®é¢˜ï¼Œç›´åˆ°åŸºæœ¬æƒ…å†µ<br>
                    (3)<span class="highlight">åˆå¹¶ç»“æœ</span>ï¼šå°†å­é—®é¢˜çš„è§£åˆå¹¶å¾—åˆ°åŸé—®é¢˜çš„è§£<br>
                    ä¾‹å¦‚factorial(4) = 4 Ã— factorial(3)ï¼Œå°†æ±‚4!çš„é—®é¢˜åˆ†è§£ä¸ºæ±‚3!çš„å­é—®é¢˜ï¼Œæœ€ç»ˆç»„åˆå¾—åˆ°ç»“æœã€‚
                </div></div></div></div><!-- å¯¼èˆªæŒ‰é’® --><div style="text-align: center; margin-top: 40px;"><a href="{% url 'knowledge_app:index' %}" class="unified-btn unified-btn-primary"><span>ğŸ </span>
            è¿”å›é¦–é¡µ
        </a><a href="{% url 'knowledge_app:cs_universe' %}" class="unified-btn unified-btn-secondary"><span>ğŸŒŒ</span>
            æ¢ç´¢CSå®‡å®™
        </a></div></div><script>let currentStep = 0; let canvas, ctx; let animationId = null; let isAutoPlaying = false; const recursionSteps = [ { step: 1, description: "å¼€å§‹è°ƒç”¨ factorial(4)", stack: [ { name: "factorial(4)", vars: ["n=4"], depth: 1, phase: "calling" } ], calculation: "è®¡ç®— 4!", depth: 1 }, { step: 2, description: "factorial(4) è°ƒç”¨ factorial(3)", stack: [ { name: "factorial(4)", vars: ["n=4"], depth: 1, phase: "waiting" }, { name: "factorial(3)", vars: ["n=3"], depth: 2, phase: "calling" } ], calculation: "4! = 4 Ã— 3!", depth: 2 }, { step: 3, description: "factorial(3) è°ƒç”¨ factorial(2)", stack: [ { name: "factorial(4)", vars: ["n=4"], depth: 1, phase: "waiting" }, { name: "factorial(3)", vars: ["n=3"], depth: 2, phase: "waiting" }, { name: "factorial(2)", vars: ["n=2"], depth: 3, phase: "calling" } ], calculation: "3! = 3 Ã— 2!", depth: 3 }, { step: 4, description: "factorial(2) è°ƒç”¨ factorial(1)", stack: [ { name: "factorial(4)", vars: ["n=4"], depth: 1, phase: "waiting" }, { name: "factorial(3)", vars: ["n=3"], depth: 2, phase: "waiting" }, { name: "factorial(2)", vars: ["n=2"], depth: 3, phase: "waiting" }, { name: "factorial(1)", vars: ["n=1"], depth: 4, phase: "calling" } ], calculation: "2! = 2 Ã— 1!", depth: 4 }, { step: 5, description: "åˆ°è¾¾åŸºæœ¬æƒ…å†µï¼Œfactorial(1) è¿”å› 1", stack: [ { name: "factorial(4)", vars: ["n=4"], depth: 1, phase: "waiting" }, { name: "factorial(3)", vars: ["n=3"], depth: 2, phase: "waiting" }, { name: "factorial(2)", vars: ["n=2"], depth: 3, phase: "waiting" }, { name: "factorial(1)", vars: ["n=1", "return 1"], depth: 4, phase: "base" } ], calculation: "1! = 1 (åŸºæœ¬æƒ…å†µ)", depth: 4 }, { step: 6, description: "factorial(2) è®¡ç®—å¹¶è¿”å› 2", stack: [ { name: "factorial(4)", vars: ["n=4"], depth: 1, phase: "waiting" }, { name: "factorial(3)", vars: ["n=3"], depth: 2, phase: "waiting" }, { name: "factorial(2)", vars: ["n=2", "return 2"], depth: 3, phase: "returning" } ], calculation: "2! = 2 Ã— 1 = 2", depth: 3 }, { step: 7, description: "factorial(3) è®¡ç®—å¹¶è¿”å› 6", stack: [ { name: "factorial(4)", vars: ["n=4"], depth: 1, phase: "waiting" }, { name: "factorial(3)", vars: ["n=3", "return 6"], depth: 2, phase: "returning" } ], calculation: "3! = 3 Ã— 2 = 6", depth: 2 }, { step: 8, description: "factorial(4) è®¡ç®—å¹¶è¿”å› 24", stack: [ { name: "factorial(4)", vars: ["n=4", "return 24"], depth: 1, phase: "returning" } ], calculation: "4! = 4 Ã— 6 = 24", depth: 1 }, { step: 9, description: "é€’å½’å®Œæˆï¼Œå¾—åˆ°æœ€ç»ˆç»“æœ", stack: [], calculation: "æœ€ç»ˆç»“æœï¼š4! = 24", depth: 0 } ]; document.addEventListener('DOMContentLoaded', function() { canvas = document.getElementById('recursionCanvas'); ctx = canvas.getContext('2d'); drawRecursionStack(); }); function drawRecursionStack() { ctx.clearRect(0, 0, canvas.width, canvas.height); const bgGradient = ctx.createLinearGradient(0, 0, 0, canvas.height); bgGradient.addColorStop(0, '#f8f9fa'); bgGradient.addColorStop(1, '#e9ecef'); ctx.fillStyle = bgGradient; ctx.fillRect(0, 0, canvas.width, canvas.height); drawStackArea(); drawCalculationPanel(); drawRecursionTree(); drawDepthChart(); drawMemoryUsage(); } function drawStackArea() { const stackX = 80; const stackY = 80; const stackWidth = 320; const stackHeight = 450; ctx.fillStyle = '#ffffff'; ctx.fillRect(stackX, stackY, stackWidth, stackHeight); ctx.strokeStyle = '#2c3e50'; ctx.lineWidth = 3; ctx.strokeRect(stackX, stackY, stackWidth, stackHeight); ctx.fillStyle = '#2c3e50'; ctx.font = 'bold 18px Arial'; ctx.fillText('å‡½æ•°è°ƒç”¨æ ˆ', stackX, stackY - 10); drawDepthRuler(stackX, stackY, stackHeight); const currentStack = recursionSteps[currentStep].stack; drawStackFrames(currentStack, stackX, stackY, stackWidth, stackHeight); if (currentStack.length > 0) { drawStackPointer(currentStack, stackX, stackWidth); } } function drawDepthRuler(stackX, stackY, stackHeight) { ctx.font = 'bold 14px Arial'; ctx.fillStyle = '#2c3e50'; for (let i = 0; i <= 4; i++) { const y = stackY + stackHeight - (i * 90) - 45; ctx.strokeStyle = '#bdc3c7'; ctx.lineWidth = 2; ctx.setLineDash([5, 5]); ctx.beginPath(); ctx.moveTo(stackX + 10, y); ctx.lineTo(stackX + 30, y); ctx.stroke(); ctx.setLineDash([]); if (i > 0) { ctx.fillText(`${i}`, stackX - 30, y + 5); } } } function drawStackFrames(currentStack, stackX, stackY, stackWidth, stackHeight) { const frameHeight = 80; const frameMargin = 10; currentStack.forEach((frame, index) => { const frameY = stackY + stackHeight - (frame.depth * 90) - frameHeight + 10; const frameX = stackX + frameMargin; const frameW = stackWidth - 2 * frameMargin; drawSingleFrame(frame, frameX, frameY, frameW, frameHeight, index); }); } function drawSingleFrame(frame, x, y, width, height, index) { let bgColor, borderColor; if (frame.phase === "calling") { bgColor = '#3498db'; borderColor = '#2980b9'; } else if (frame.phase === "returning") { bgColor = '#27ae60'; borderColor = '#229954'; } else if (frame.phase === "base") { bgColor = '#e74c3c'; borderColor = '#c0392b'; } else { bgColor = '#f39c12'; borderColor = '#e67e22'; } ctx.fillStyle = bgColor; ctx.fillRect(x, y, width, height); ctx.strokeStyle = borderColor; ctx.lineWidth = 3; ctx.strokeRect(x, y, width, height); drawFrameContent(frame, x, y, width, height); drawStatusIndicator(frame, x, y, width); } function drawFrameContent(frame, x, y, width, height) { ctx.fillStyle = '#ffffff'; ctx.font = 'bold 16px Arial'; ctx.fillText(frame.name, x + 15, y + 25); ctx.font = 'bold 14px Arial'; ctx.fillStyle = '#ffffff'; const vars = frame.vars.join(', '); ctx.fillText(`å‚æ•°/å˜é‡: ${vars}`, x + 15, y + 45); ctx.font = 'bold 12px Arial'; ctx.fillStyle = '#ffffff'; const returnAddr = `0x${(1000 + frame.depth * 100).toString(16).toUpperCase()}`; ctx.fillText(`è¿”å›åœ°å€: ${returnAddr}`, x + 15, y + 65); } function drawStatusIndicator(frame, x, y, width) { const indicatorX = x + width - 30; const indicatorY = y + 20; ctx.fillStyle = '#ffffff'; ctx.beginPath(); ctx.arc(indicatorX, indicatorY, 15, 0, 2 * Math.PI); ctx.fill(); ctx.strokeStyle = '#2c3e50'; ctx.lineWidth = 2; ctx.stroke(); ctx.fillStyle = '#2c3e50'; ctx.font = 'bold 12px Arial'; ctx.textAlign = 'center'; if (frame.phase === "calling") { ctx.fillText('â†“', indicatorX, indicatorY + 4); } else if (frame.phase === "returning") { ctx.fillText('â†‘', indicatorX, indicatorY + 4); } else if (frame.phase === "base") { ctx.fillText('â—', indicatorX, indicatorY + 4); } else { ctx.fillText('â³', indicatorX, indicatorY + 4); } ctx.textAlign = 'left'; } function drawStackPointer(currentStack, stackX, stackWidth) { if (currentStack.length === 0) return; const topFrame = currentStack[currentStack.length - 1]; const pointerY = 80 + 450 - (topFrame.depth * 90) - 40; const pointerX = stackX + stackWidth + 20; ctx.fillStyle = '#e74c3c'; ctx.beginPath(); ctx.moveTo(pointerX, pointerY); ctx.lineTo(pointerX + 20, pointerY - 10); ctx.lineTo(pointerX + 20, pointerY + 10); ctx.fill(); ctx.fillStyle = '#ffffff'; ctx.fillRect(pointerX + 25, pointerY - 12, 50, 24); ctx.strokeStyle = '#e74c3c'; ctx.lineWidth = 2; ctx.strokeRect(pointerX + 25, pointerY - 12, 50, 24); ctx.fillStyle = '#e74c3c'; ctx.font = 'bold 14px Arial'; ctx.fillText('æ ˆé¡¶', pointerX + 30, pointerY + 5); } function drawCalculationPanel() { const panelX = 450; const panelY = 80; const panelWidth = 300; const panelHeight = 200; ctx.fillStyle = '#ffffff'; ctx.fillRect(panelX, panelY, panelWidth, panelHeight); ctx.strokeStyle = '#3498db'; ctx.lineWidth = 3; ctx.strokeRect(panelX, panelY, panelWidth, panelHeight); ctx.fillStyle = '#2c3e50'; ctx.font = 'bold 18px Arial'; ctx.fillText('è®¡ç®—è¿‡ç¨‹', panelX + 15, panelY + 30); ctx.font = 'bold 16px monospace'; ctx.fillStyle = '#0984e3'; const calculation = recursionSteps[currentStep].calculation; ctx.fillText(calculation, panelX + 15, panelY + 65); drawFormulaHistory(panelX, panelY, panelWidth); drawCurrentState(panelX, panelY, panelWidth, panelHeight); } function drawFormulaHistory(panelX, panelY, panelWidth) { ctx.font = 'bold 14px monospace'; const step = currentStep; const completedCalculations = [ "4! = 4 Ã— 3!", "3! = 3 Ã— 2!", "2! = 2 Ã— 1!", "1! = 1 (åŸºæœ¬æƒ…å†µ)", "2! = 2 Ã— 1 = 2", "3! = 3 Ã— 2 = 6", "4! = 4 Ã— 6 = 24" ]; for (let i = 0; i < Math.min(step, completedCalculations.length); i++) { const y = panelY + 95 + i * 20; if (i < 4) { ctx.fillStyle = '#7f8c8d'; } else { ctx.fillStyle = '#27ae60'; } ctx.fillText(completedCalculations[i], panelX + 15, y); } } function drawCurrentState(panelX, panelY, panelWidth, panelHeight) { const stateY = panelY + panelHeight - 30; ctx.fillStyle = '#e74c3c'; ctx.font = 'bold 14px Arial'; const currentStack = recursionSteps[currentStep].stack; if (currentStack.length > 0) { const phase = currentStack[currentStack.length - 1].phase; let stateText = ''; if (phase === 'calling') { stateText = 'ğŸ”„ æ­£åœ¨è°ƒç”¨å‡½æ•°'; } else if (phase === 'returning') { stateText = 'âœ… æ­£åœ¨è¿”å›ç»“æœ'; } else if (phase === 'base') { stateText = 'ğŸ”´ åŸºæœ¬æƒ…å†µ'; } else { stateText = 'â³ ç­‰å¾…å­å‡½æ•°è¿”å›'; } ctx.fillText(stateText, panelX + 15, stateY); } else { ctx.fillText('ğŸ‰ é€’å½’å®Œæˆï¼', panelX + 15, stateY); } } function drawRecursionTree() { const treeX = 800; const treeY = 80; const treeWidth = 180; const treeHeight = 200; ctx.fillStyle = '#ffffff'; ctx.fillRect(treeX, treeY, treeWidth, treeHeight); ctx.strokeStyle = '#3498db'; ctx.lineWidth = 2; ctx.strokeRect(treeX, treeY, treeWidth, treeHeight); ctx.fillStyle = '#2c3e50'; ctx.font = 'bold 16px Arial'; ctx.fillText('é€’å½’è°ƒç”¨æ ‘', treeX + 10, treeY + 25); const nodeRadius = 20; const startX = treeX + treeWidth / 2; const startY = treeY + 55; const levelHeight = 35; const maxStep = Math.min(currentStep + 1, 5); for (let i = 0; i < maxStep; i++) { const x = startX - (i * 15) + (i * 5); const y = startY + i * levelHeight; if (i > 0) { ctx.strokeStyle = '#74b9ff'; ctx.lineWidth = 3; ctx.beginPath(); const prevX = startX - ((i-1) * 15) + ((i-1) * 5); const prevY = startY + (i-1) * levelHeight; ctx.moveTo(prevX, prevY + nodeRadius); ctx.lineTo(x, y - nodeRadius); ctx.stroke(); } const isActive = i === maxStep - 1; if (isActive) { ctx.fillStyle = '#e74c3c'; } else { ctx.fillStyle = '#3498db'; } ctx.beginPath(); ctx.arc(x, y, nodeRadius, 0, 2 * Math.PI); ctx.fill(); ctx.strokeStyle = '#2c3e50'; ctx.lineWidth = 2; ctx.stroke(); ctx.fillStyle = '#ffffff'; ctx.font = 'bold 14px Arial'; ctx.textAlign = 'center'; ctx.fillText(`${4-i}`, x, y + 5); } ctx.textAlign = 'left'; } function drawDepthChart() { const chartX = 800; const chartY = 320; const chartWidth = 180; const chartHeight = 120; ctx.fillStyle = '#ffffff'; ctx.fillRect(chartX, chartY, chartWidth, chartHeight); ctx.strokeStyle = '#3498db'; ctx.lineWidth = 2; ctx.strokeRect(chartX, chartY, chartWidth, chartHeight); ctx.fillStyle = '#2c3e50'; ctx.font = 'bold 16px Arial'; ctx.fillText('é€’å½’æ·±åº¦', chartX + 10, chartY + 25); const currentDepth = recursionSteps[currentStep].depth; const maxDepth = 4; const barWidth = 30; const barMaxHeight = 70; for (let i = 1; i <= maxDepth; i++) { const barX = chartX + 20 + (i - 1) * 35; const barHeight = (i <= currentDepth) ? (i / maxDepth) * barMaxHeight : 0; const barY = chartY + chartHeight - 30 - barHeight; if (i <= currentDepth) { ctx.fillStyle = '#3498db'; } else { ctx.fillStyle = '#ecf0f1'; } ctx.fillRect(barX, barY, barWidth, barHeight); ctx.strokeStyle = '#2c3e50'; ctx.lineWidth = 1; ctx.strokeRect(barX, barY, barWidth, barHeight); ctx.fillStyle = '#2c3e50'; ctx.font = 'bold 14px Arial'; ctx.textAlign = 'center'; ctx.fillText(i.toString(), barX + barWidth/2, chartY + chartHeight - 10); } ctx.textAlign = 'left'; } function drawMemoryUsage() { const currentStack = recursionSteps[currentStep].stack; const memoryUsed = currentStack.length * 1.2; document.getElementById('memoryInfo').textContent = `å†…å­˜ä½¿ç”¨: ${memoryUsed.toFixed(1)} KB`; } function resetAnimation() { currentStep = 0; isAutoPlaying = false; updateStepIndicator(); updateDepthIndicator(); drawRecursionStack(); } function stepForward() { if (currentStep < recursionSteps.length - 1) { currentStep++; updateStepIndicator(); updateDepthIndicator(); drawRecursionStack(); } } function stepBackward() { if (currentStep > 0) { currentStep--; updateStepIndicator(); updateDepthIndicator(); drawRecursionStack(); } } function autoPlay() { if (isAutoPlaying) { isAutoPlaying = false; event.target.textContent = 'ğŸ¬ è‡ªåŠ¨æ’­æ”¾'; return; } isAutoPlaying = true; event.target.textContent = 'â¸ï¸ æš‚åœ'; function playStep() { if (isAutoPlaying && currentStep < recursionSteps.length - 1) { stepForward(); setTimeout(playStep, 1500); } else { isAutoPlaying = false; event.target.textContent = 'ğŸ¬ è‡ªåŠ¨æ’­æ”¾'; } } playStep(); } function updateStepIndicator() { const indicator = document.getElementById('stepIndicator'); indicator.textContent = `ç¬¬ ${recursionSteps[currentStep].step} æ­¥ï¼š${recursionSteps[currentStep].description}`; } function updateDepthIndicator() { const depthIndicator = document.getElementById('depthIndicator'); depthIndicator.textContent = `é€’å½’æ·±åº¦: ${recursionSteps[currentStep].depth}`; } function showCode(language) { const codes = ['cpp', 'java', 'python']; codes.forEach(code => { document.getElementById(code + 'Code').style.display = 'none'; }); document.getElementById(language + 'Code').style.display = 'block'; document.querySelectorAll('.code-tab').forEach(tab => { tab.classList.remove('active'); }); event.target.classList.add('active'); } function copyCode(language) { const codeElement = document.querySelector(`#${language}Code pre`); const text = codeElement.textContent; navigator.clipboard.writeText(text).then(() => { const btn = event.target; const originalText = btn.textContent; btn.textContent = 'å·²å¤åˆ¶!'; btn.style.background = '#27ae60'; setTimeout(() => { btn.textContent = originalText; btn.style.background = '#3498db'; }, 2000); }); } function toggleAnswer(answerId) { const answer = document.getElementById(answerId); answer.classList.toggle('show'); } document.addEventListener('keydown', function(event) { switch(event.key) { case 'ArrowRight': stepForward(); break; case 'ArrowLeft': stepBackward(); break; case 'r': case 'R': resetAnimation(); break; case ' ': event.preventDefault(); autoPlay(); break; } });</script>

{% endblock %}