{% extends 'knowledge_app/base.html' %}

{% block title %}æ ‘ä¸äºŒå‰æ ‘çš„æ€§è´¨ - è®¡ç®—æœºç§‘å­¦å­¦ä¹ å¹³å°{% endblock %}

{% block content %}
<div class="page-container fade-in"><!-- é¢åŒ…å±‘å¯¼èˆª --><div class="breadcrumb"><a href="{% url 'knowledge_app:index' %}">é¦–é¡µ</a><span>></span><span>æ•°æ®ç»“æ„</span><span>></span><span>æ ‘ä¸äºŒå‰æ ‘çš„æ€§è´¨</span></div><!-- é¡µé¢å¤´éƒ¨ --><div class="page-header slide-in-left"><h1><span class="page-icon">ğŸŒ³</span>
            æ ‘ä¸äºŒå‰æ ‘çš„æ€§è´¨
        </h1><p>æŒæ¡æ ‘å½¢æ•°æ®ç»“æ„çš„æ ¸å¿ƒæ€§è´¨ï¼Œç†è§£èŠ‚ç‚¹å…³ç³»çš„æ•°å­¦è§„å¾‹</p></div><!-- çŸ¥è¯†ç‚¹æ¦‚è¿° --><div class="content-card slide-in-right"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ“‹</span>
                çŸ¥è¯†ç‚¹æ¦‚è¿°
            </h2><div class="concept-overview"><div class="core-concept"><h3>ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ</h3><p>æ ‘çš„æ€§è´¨æ˜¯æè¿°æ ‘å½¢ç»“æ„ä¸­èŠ‚ç‚¹æ•°é‡ã€å±‚çº§å…³ç³»ã€åº¦æ•°ç­‰æ–¹é¢çš„æ•°å­¦è§„å¾‹ã€‚è¿™äº›æ€§è´¨å¸®åŠ©æˆ‘ä»¬ç†è§£æ ‘çš„ç»“æ„ç‰¹å¾ï¼Œè®¡ç®—ç©ºé—´å¤æ‚åº¦ï¼Œåˆ†æç®—æ³•æ•ˆç‡ã€‚</p></div><div class="unified-grid unified-grid-2"><div class="info-box info-box-info"><span class="info-icon">ğŸ“š</span><strong>å­¦ä¹ éš¾åº¦ï¼š</strong>å…¥é—¨åˆ°è¿›é˜¶
                    </div><div class="info-box info-box-warning"><span class="info-icon">âš¡</span><strong>å‰ç½®çŸ¥è¯†ï¼š</strong>åŸºæœ¬æ•°å­¦è¿ç®—ã€å¯¹æ•°æ¦‚å¿µã€é€’å½’æ€æƒ³
                    </div></div><div class="key-terms"><h4>ğŸ”‘ å…³é”®æœ¯è¯­</h4><div class="terms-grid"><div class="term-item"><strong>åº¦(Degree)ï¼š</strong>èŠ‚ç‚¹æ‹¥æœ‰çš„å­èŠ‚ç‚¹ä¸ªæ•°
                        </div><div class="term-item"><strong>æ·±åº¦(Depth)ï¼š</strong>ä»æ ¹èŠ‚ç‚¹åˆ°è¯¥èŠ‚ç‚¹çš„è·¯å¾„é•¿åº¦
                        </div><div class="term-item"><strong>é«˜åº¦(Height)ï¼š</strong>ä»è¯¥èŠ‚ç‚¹åˆ°æœ€æ·±å¶å­èŠ‚ç‚¹çš„è·¯å¾„é•¿åº¦
                        </div><div class="term-item"><strong>å±‚æ•°(Level)ï¼š</strong>èŠ‚ç‚¹æ‰€åœ¨çš„å±‚çº§ï¼ˆæ ¹èŠ‚ç‚¹ä¸ºç¬¬0å±‚æˆ–ç¬¬1å±‚ï¼‰
                        </div><div class="term-item"><strong>è·¯å¾„é•¿åº¦ï¼š</strong>è·¯å¾„ä¸Šè¾¹çš„æ•°é‡
                        </div></div></div></div></div></div><!-- æ ‘çš„åŸºæœ¬æ€§è´¨ --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸŒ³</span>
                æ ‘çš„åŸºæœ¬æ€§è´¨
            </h2><div class="properties-container"><div class="property-category"><h3>ğŸ“Š èŠ‚ç‚¹ä¸è¾¹çš„å…³ç³»</h3><div class="property-list"><div class="property-item fundamental"><div class="property-header"><span class="property-number">æ€§è´¨1</span><h4>èŠ‚ç‚¹æ•°ä¸è¾¹æ•°å…³ç³»</h4></div><div class="property-content"><div class="formula"><strong>è¾¹æ•° = èŠ‚ç‚¹æ•° - 1</strong></div><p><strong>è¯æ˜ï¼š</strong>é™¤æ ¹èŠ‚ç‚¹å¤–ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸”ä»…æœ‰ä¸€æ¡è¾¹è¿æ¥åˆ°å…¶çˆ¶èŠ‚ç‚¹ã€‚nä¸ªèŠ‚ç‚¹çš„æ ‘æœ‰(n-1)æ¡è¾¹ã€‚</p><div class="example"><strong>ä¾‹å­ï¼š</strong>7ä¸ªèŠ‚ç‚¹çš„æ ‘ä¸€å®šæœ‰6æ¡è¾¹
                                </div></div></div><div class="property-item"><div class="property-header"><span class="property-number">æ€§è´¨2</span><h4>åº¦æ•°å…³ç³»</h4></div><div class="property-content"><div class="formula"><strong>âˆ‘(å„èŠ‚ç‚¹çš„åº¦) = 2 Ã— (èŠ‚ç‚¹æ•° - 1)</strong></div><p><strong>è§£é‡Šï¼š</strong>æ¯æ¡è¾¹éƒ½è¢«è®¡ç®—ä¸¤æ¬¡ï¼ˆè¿æ¥çš„ä¸¤ä¸ªèŠ‚ç‚¹å„è®¡ç®—ä¸€æ¬¡ï¼‰ï¼Œæ‰€ä»¥åº¦æ•°æ€»å’Œæ˜¯è¾¹æ•°çš„2å€ã€‚</p></div></div><div class="property-item"><div class="property-header"><span class="property-number">æ€§è´¨3</span><h4>å¶å­èŠ‚ç‚¹ä¸åº¦æ•°å…³ç³»</h4></div><div class="property-content"><div class="formula"><strong>å¶å­èŠ‚ç‚¹æ•° = 1 + âˆ‘(åº¦â‰¥2çš„èŠ‚ç‚¹æ•° Ã— (åº¦-2))</strong></div><p><strong>ç‰¹ä¾‹ï¼š</strong>å¯¹äºåº¦ä¸è¶…è¿‡mçš„æ ‘ï¼Œå¦‚æœæœ‰nâ‚ä¸ªåº¦ä¸º1çš„èŠ‚ç‚¹ï¼Œnâ‚‚ä¸ªåº¦ä¸º2çš„èŠ‚ç‚¹...ï¼Œåˆ™å¶å­èŠ‚ç‚¹æ•°nâ‚€ = 1 + nâ‚‚ + 2nâ‚ƒ + ... + (m-1)nâ‚˜</p></div></div></div></div><div class="property-category"><h3>ğŸ“ é«˜åº¦ä¸æ·±åº¦æ€§è´¨</h3><div class="property-list"><div class="property-item"><div class="property-header"><span class="property-number">æ€§è´¨4</span><h4>æœ€å°é«˜åº¦</h4></div><div class="property-content"><div class="formula"><strong>h_min = âŒŠlogâ‚‚nâŒ‹</strong></div><p><strong>æ¡ä»¶ï¼š</strong>nä¸ªèŠ‚ç‚¹çš„äºŒå‰æ ‘çš„æœ€å°é«˜åº¦ï¼ˆæœ€å¹³è¡¡æ—¶ï¼‰</p></div></div><div class="property-item"><div class="property-header"><span class="property-number">æ€§è´¨5</span><h4>æœ€å¤§é«˜åº¦</h4></div><div class="property-content"><div class="formula"><strong>h_max = n - 1</strong></div><p><strong>æ¡ä»¶ï¼š</strong>å½“æ ‘é€€åŒ–ä¸ºé“¾çŠ¶ç»“æ„æ—¶è¾¾åˆ°æœ€å¤§é«˜åº¦</p></div></div></div></div></div></div></div><!-- äºŒå‰æ ‘çš„ä¸“é—¨æ€§è´¨ --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ”„</span>
                äºŒå‰æ ‘çš„ä¸“é—¨æ€§è´¨
            </h2><div class="binary-properties"><div class="property-category"><h3>ğŸ¯ æ ¸å¿ƒæ€§è´¨</h3><div class="property-list"><div class="property-item critical"><div class="property-header"><span class="property-number">æ€§è´¨6</span><h4>å±‚çº§èŠ‚ç‚¹æ•°</h4></div><div class="property-content"><div class="formula"><strong>ç¬¬iå±‚æœ€å¤šæœ‰ 2^i ä¸ªèŠ‚ç‚¹</strong></div><p><strong>è¯´æ˜ï¼š</strong>æ ¹èŠ‚ç‚¹ä¸ºç¬¬0å±‚æ—¶ã€‚è‹¥æ ¹èŠ‚ç‚¹ä¸ºç¬¬1å±‚ï¼Œåˆ™ç¬¬iå±‚æœ€å¤šæœ‰2^(i-1)ä¸ªèŠ‚ç‚¹ã€‚</p><div class="layer-demo"><div>ç¬¬0å±‚ï¼š2â° = 1ä¸ªèŠ‚ç‚¹</div><div>ç¬¬1å±‚ï¼š2Â¹ = 2ä¸ªèŠ‚ç‚¹</div><div>ç¬¬2å±‚ï¼š2Â² = 4ä¸ªèŠ‚ç‚¹</div><div>ç¬¬3å±‚ï¼š2Â³ = 8ä¸ªèŠ‚ç‚¹</div></div></div></div><div class="property-item critical"><div class="property-header"><span class="property-number">æ€§è´¨7</span><h4>é«˜åº¦ä¸èŠ‚ç‚¹æ€»æ•°å…³ç³»</h4></div><div class="property-content"><div class="formula"><strong>é«˜åº¦ä¸ºhçš„äºŒå‰æ ‘æœ€å¤šæœ‰ 2^(h+1) - 1 ä¸ªèŠ‚ç‚¹</strong></div><p><strong>æ¨å¯¼ï¼š</strong>1 + 2 + 4 + ... + 2^h = 2^(h+1) - 1</p><div class="example"><strong>ä¾‹å­ï¼š</strong>é«˜åº¦ä¸º3çš„äºŒå‰æ ‘æœ€å¤šæœ‰2â´-1=15ä¸ªèŠ‚ç‚¹
                                </div></div></div><div class="property-item critical"><div class="property-header"><span class="property-number">æ€§è´¨8</span><h4>å¶å­èŠ‚ç‚¹ä¸åº¦ä¸º2çš„èŠ‚ç‚¹å…³ç³»</h4></div><div class="property-content"><div class="formula"><strong>nâ‚€ = nâ‚‚ + 1</strong></div><p><strong>è¯æ˜ï¼š</strong>è®¾nâ‚€ã€nâ‚ã€nâ‚‚åˆ†åˆ«ä¸ºåº¦ä¸º0ã€1ã€2çš„èŠ‚ç‚¹æ•°</p><div class="proof"><div>æ€»èŠ‚ç‚¹æ•°ï¼šn = nâ‚€ + nâ‚ + nâ‚‚</div><div>æ€»è¾¹æ•°ï¼šn-1 = 0Ã—nâ‚€ + 1Ã—nâ‚ + 2Ã—nâ‚‚ = nâ‚ + 2nâ‚‚</div><div>æ‰€ä»¥ï¼šnâ‚€ + nâ‚ + nâ‚‚ - 1 = nâ‚ + 2nâ‚‚</div><div>å¾—åˆ°ï¼šnâ‚€ = nâ‚‚ + 1</div></div></div></div></div></div><div class="property-category"><h3>ğŸ—ï¸ ç‰¹æ®ŠäºŒå‰æ ‘æ€§è´¨</h3><div class="special-trees"><div class="tree-type"><h4>ğŸ”µ å®Œå…¨äºŒå‰æ ‘</h4><div class="tree-properties"><div class="property-detail"><strong>å®šä¹‰ï¼š</strong>é™¤æœ€åä¸€å±‚å¤–ï¼Œæ¯ä¸€å±‚éƒ½å®Œå…¨å¡«æ»¡ï¼Œæœ€åä¸€å±‚ä»å·¦åˆ°å³è¿ç»­å¡«å……
                                </div><div class="property-detail"><strong>æ€§è´¨9ï¼š</strong>æœ‰nä¸ªèŠ‚ç‚¹çš„å®Œå…¨äºŒå‰æ ‘é«˜åº¦ä¸º âŒŠlogâ‚‚nâŒ‹
                                </div><div class="property-detail"><strong>æ€§è´¨10ï¼š</strong>èŠ‚ç‚¹ç¼–å·è§„å¾‹ï¼ˆä»1å¼€å§‹ï¼‰ï¼š
                                    <ul><li>èŠ‚ç‚¹içš„çˆ¶èŠ‚ç‚¹ç¼–å·ï¼šâŒŠi/2âŒ‹</li><li>èŠ‚ç‚¹içš„å·¦å­©å­ç¼–å·ï¼š2i</li><li>èŠ‚ç‚¹içš„å³å­©å­ç¼–å·ï¼š2i+1</li></ul></div></div></div><div class="tree-type"><h4>ğŸ”´ æ»¡äºŒå‰æ ‘</h4><div class="tree-properties"><div class="property-detail"><strong>å®šä¹‰ï¼š</strong>æ¯ä¸ªèŠ‚ç‚¹è¦ä¹ˆæ˜¯å¶å­èŠ‚ç‚¹ï¼Œè¦ä¹ˆæ°å¥½æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹
                                </div><div class="property-detail"><strong>æ€§è´¨11ï¼š</strong>æœ‰nä¸ªèŠ‚ç‚¹çš„æ»¡äºŒå‰æ ‘ï¼Œå¶å­èŠ‚ç‚¹æ•°ä¸º (n+1)/2
                                </div><div class="property-detail"><strong>æ€§è´¨12ï¼š</strong>é«˜åº¦ä¸ºhçš„æ»¡äºŒå‰æ ‘èŠ‚ç‚¹æ•°ä¸ºå¥‡æ•°ï¼š2^(h+1) - 1
                                </div></div></div><div class="tree-type"><h4>ğŸŸ¢ å¹³è¡¡äºŒå‰æ ‘</h4><div class="tree-properties"><div class="property-detail"><strong>å®šä¹‰ï¼š</strong>ä»»æ„èŠ‚ç‚¹çš„å·¦å³å­æ ‘é«˜åº¦å·®ä¸è¶…è¿‡1
                                </div><div class="property-detail"><strong>æ€§è´¨13ï¼š</strong>nä¸ªèŠ‚ç‚¹çš„å¹³è¡¡äºŒå‰æ ‘é«˜åº¦ä¸º O(log n)
                                </div><div class="property-detail"><strong>æ€§è´¨14ï¼š</strong>é«˜åº¦ä¸ºhçš„å¹³è¡¡äºŒå‰æ ‘æœ€å°‘èŠ‚ç‚¹æ•°ï¼šF(h+2) - 1ï¼ˆæ–æ³¢é‚£å¥‘æ•°åˆ—ï¼‰
                                </div></div></div></div></div></div></div></div><!-- å¯è§†åŒ–å±•ç¤º --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸ“Š</span>
                æ€§è´¨å¯è§†åŒ–éªŒè¯
            </h2><div class="visualization-container"><div class="viz-controls"><button id="showProperty6" class="unified-btn unified-btn-primary">æ€§è´¨6: å±‚çº§èŠ‚ç‚¹æ•°</button><button id="showProperty8" class="unified-btn unified-btn-secondary">æ€§è´¨8: nâ‚€=nâ‚‚+1</button><button id="showCompleteTree" class="unified-btn unified-btn-success">å®Œå…¨äºŒå‰æ ‘æ€§è´¨</button><button id="showFullTree" class="unified-btn unified-btn-warning">æ»¡äºŒå‰æ ‘æ€§è´¨</button><button id="resetViz" class="unified-btn unified-btn-outline">é‡ç½®</button></div><canvas id="treeCanvas" width="800" height="500"></canvas><div class="viz-info"><div id="vizDescription" class="viz-description">
                        ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®éªŒè¯å„ç§æ ‘çš„æ€§è´¨
                    </div><div id="propertyStats" class="property-stats"><div class="stat-item"><span class="stat-label">èŠ‚ç‚¹æ€»æ•°:</span><span class="stat-value" id="totalNodes">0</span></div><div class="stat-item"><span class="stat-label">è¾¹æ•°:</span><span class="stat-value" id="totalEdges">0</span></div><div class="stat-item"><span class="stat-label">å¶å­èŠ‚ç‚¹:</span><span class="stat-value" id="leafNodes">0</span></div><div class="stat-item"><span class="stat-label">åº¦ä¸º2çš„èŠ‚ç‚¹:</span><span class="stat-value" id="degree2Nodes">0</span></div><div class="stat-item"><span class="stat-label">æ ‘é«˜åº¦:</span><span class="stat-value" id="treeHeight">0</span></div></div></div></div><!-- æ€§è´¨éªŒè¯è®¡ç®—å™¨ --><div class="property-calculator"><h3>ğŸ§® æ€§è´¨è®¡ç®—å™¨</h3><div class="calculator-section"><div class="calc-input"><label>è¾“å…¥èŠ‚ç‚¹æ•° n:</label><input type="number" id="nodeInput" value="7" min="1" max="31"><button id="calculateBtn" class="unified-btn unified-btn-primary">è®¡ç®—æ€§è´¨</button></div><div class="calc-results" id="calcResults"><div class="result-item"><strong>è¾¹æ•°:</strong><span id="calcEdges">6</span></div><div class="result-item"><strong>æœ€å°é«˜åº¦:</strong><span id="calcMinHeight">2</span></div><div class="result-item"><strong>æœ€å¤§é«˜åº¦:</strong><span id="calcMaxHeight">6</span></div><div class="result-item"><strong>å®Œå…¨äºŒå‰æ ‘é«˜åº¦:</strong><span id="calcCompleteHeight">2</span></div></div></div></div></div></div><!-- å®é™…åº”ç”¨ --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">ğŸŒŸ</span>
                æ€§è´¨çš„å®é™…åº”ç”¨
            </h2><div class="applications"><div class="app-item"><h3>ğŸ’¾ å­˜å‚¨ç©ºé—´è®¡ç®—</h3><p>æ ¹æ®èŠ‚ç‚¹æ•°é‡è®¡ç®—æŒ‡é’ˆå­˜å‚¨ç©ºé—´ï¼šnä¸ªèŠ‚ç‚¹çš„äºŒå‰æ ‘éœ€è¦2nä¸ªæŒ‡é’ˆï¼ˆæ¯ä¸ªèŠ‚ç‚¹2ä¸ªå­æŒ‡é’ˆï¼‰ï¼Œå…¶ä¸­æœ‰æ•ˆæŒ‡é’ˆ(n-1)ä¸ªï¼Œç©ºæŒ‡é’ˆ(n+1)ä¸ªã€‚</p></div><div class="app-item"><h3>âš¡ ç®—æ³•å¤æ‚åº¦åˆ†æ</h3><p>åˆ©ç”¨é«˜åº¦æ€§è´¨åˆ†ææ—¶é—´å¤æ‚åº¦ï¼šå¹³è¡¡äºŒå‰æ ‘çš„æŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤æ“ä½œéƒ½æ˜¯O(log n)ï¼Œè€Œé“¾çŠ¶é€€åŒ–æ ‘åˆ™æ˜¯O(n)ã€‚</p></div><div class="app-item"><h3>ğŸ—ï¸ æ•°æ®ç»“æ„è®¾è®¡</h3><p>å®Œå…¨äºŒå‰æ ‘çš„ç¼–å·æ€§è´¨ä½¿å¾—å¯ä»¥ç”¨æ•°ç»„å®ç°ï¼Œçˆ¶å­å…³ç³»é€šè¿‡æ•°ç»„ä¸‹æ ‡è®¡ç®—ï¼Œæ— éœ€é¢å¤–æŒ‡é’ˆã€‚</p></div></div><!-- ä»£ç ç¤ºä¾‹ --><div class="code-examples"><h3>ğŸ’» æ€§è´¨éªŒè¯ä»£ç </h3><div class="code-tabs"><button class="tab-btn active" data-lang="cpp">C++</button><button class="tab-btn" data-lang="java">Java</button><button class="tab-btn" data-lang="python">Python</button></div><div class="code-container"><div class="code-header"><span class="code-title">éªŒè¯äºŒå‰æ ‘æ€§è´¨ nâ‚€ = nâ‚‚ + 1</span><button class="copy-btn" data-lang="cpp">ğŸ“‹ å¤åˆ¶</button></div><pre id="code-cpp" class="code-block active"><code>// C++ éªŒè¯äºŒå‰æ ‘æ€§è´¨
struct TreeNode {
    int val;
    TreeNode* left;
    TreeNode* right;
    TreeNode(int x) : val(x), left(nullptr), right(nullptr) {}
};

// ç»Ÿè®¡å„ç§åº¦çš„èŠ‚ç‚¹æ•°
void countNodes(TreeNode* root, int& n0, int& n1, int& n2) {
    if (!root) return;

    int degree = 0;
    if (root->left) degree++;
    if (root->right) degree++;

    if (degree == 0) n0++;
    else if (degree == 1) n1++;
    else n2++;

    countNodes(root->left, n0, n1, n2);
    countNodes(root->right, n0, n1, n2);
}

// éªŒè¯æ€§è´¨
bool verifyProperty8(TreeNode* root) {
    int n0 = 0, n1 = 0, n2 = 0;
    countNodes(root, n0, n1, n2);

    cout << "å¶å­èŠ‚ç‚¹æ•° n0: " << n0 << endl;
    cout << "åº¦ä¸º2çš„èŠ‚ç‚¹æ•° n2: " << n2 << endl;
    cout << "æ€§è´¨éªŒè¯: n0 = n2 + 1 => " << n0 << " = " << n2 + 1 << endl;

    return n0 == n2 + 1;
}</code></pre><pre id="code-java" class="code-block"><code>// Java éªŒè¯äºŒå‰æ ‘æ€§è´¨
class TreeNode {
    int val;
    TreeNode left, right;
    TreeNode(int val) { this.val = val; }
}

class TreeProperties {
    private int n0 = 0, n1 = 0, n2 = 0;

    // ç»Ÿè®¡å„ç§åº¦çš„èŠ‚ç‚¹æ•°
    private void countNodes(TreeNode root) {
        if (root == null) return;

        int degree = 0;
        if (root.left != null) degree++;
        if (root.right != null) degree++;

        if (degree == 0) n0++;
        else if (degree == 1) n1++;
        else n2++;

        countNodes(root.left);
        countNodes(root.right);
    }

    // éªŒè¯æ€§è´¨
    public boolean verifyProperty8(TreeNode root) {
        n0 = n1 = n2 = 0;
        countNodes(root);

        System.out.println("å¶å­èŠ‚ç‚¹æ•° n0: " + n0);
        System.out.println("åº¦ä¸º2çš„èŠ‚ç‚¹æ•° n2: " + n2);
        System.out.println("æ€§è´¨éªŒè¯: n0 = n2 + 1 => " + n0 + " = " + (n2 + 1));

        return n0 == n2 + 1;
    }
}</code></pre><pre id="code-python" class="code-block"><code># Python éªŒè¯äºŒå‰æ ‘æ€§è´¨
class TreeNode:
    def __init__(self, val=0, left=None, right=None):
        self.val = val
        self.left = left
        self.right = right

def count_nodes(root):
    """ç»Ÿè®¡å„ç§åº¦çš„èŠ‚ç‚¹æ•°"""
    if not root:
        return 0, 0, 0

    # è®¡ç®—å½“å‰èŠ‚ç‚¹çš„åº¦
    degree = 0
    if root.left:
        degree += 1
    if root.right:
        degree += 1

    # é€’å½’ç»Ÿè®¡å­æ ‘
    left_n0, left_n1, left_n2 = count_nodes(root.left)
    right_n0, right_n1, right_n2 = count_nodes(root.right)

    # ç´¯åŠ ç»“æœ
    if degree == 0:
        return left_n0 + right_n0 + 1, left_n1 + right_n1, left_n2 + right_n2
    elif degree == 1:
        return left_n0 + right_n0, left_n1 + right_n1 + 1, left_n2 + right_n2
    else:
        return left_n0 + right_n0, left_n1 + right_n1, left_n2 + right_n2 + 1

def verify_property8(root):
    """éªŒè¯æ€§è´¨: n0 = n2 + 1"""
    n0, n1, n2 = count_nodes(root)

    print(f"å¶å­èŠ‚ç‚¹æ•° n0: {n0}")
    print(f"åº¦ä¸º2çš„èŠ‚ç‚¹æ•° n2: {n2}")
    print(f"æ€§è´¨éªŒè¯: n0 = n2 + 1 => {n0} = {n2 + 1}")

    return n0 == n2 + 1</code></pre></div></div></div></div><!-- å­¦ä¹ æ£€éªŒ --><div class="content-card"><div class="content-section"><h2 class="section-title"><span class="section-icon">âœ…</span>
                æ€§è´¨æŒæ¡æ£€éªŒ
            </h2><div class="quiz-container"><div class="quiz-item"><div class="question"><h4>ğŸ¤” é—®é¢˜1ï¼šä¸€æ£µæœ‰13ä¸ªèŠ‚ç‚¹çš„å®Œå…¨äºŒå‰æ ‘ï¼Œå…¶é«˜åº¦æ˜¯å¤šå°‘ï¼Ÿå¶å­èŠ‚ç‚¹æœ‰å‡ ä¸ªï¼Ÿ</h4><button class="show-answer-btn" data-answer="1">æ˜¾ç¤ºç­”æ¡ˆ</button></div><div class="answer" id="answer-1" style="display: none;"><div class="answer-content"><strong>ç­”æ¡ˆï¼š</strong>é«˜åº¦ä¸º3ï¼Œå¶å­èŠ‚ç‚¹7ä¸ª<br><strong>è§£é‡Šï¼š</strong><br>
                            â€¢ é«˜åº¦ = âŒŠlogâ‚‚13âŒ‹ = âŒŠ3.7âŒ‹ = 3<br>
                            â€¢ å‰3å±‚(0,1,2å±‚)å…±æœ‰èŠ‚ç‚¹ï¼š1+2+4=7ä¸ª<br>
                            â€¢ ç¬¬3å±‚æœ‰èŠ‚ç‚¹ï¼š13-7=6ä¸ª<br>
                            â€¢ ç¬¬2å±‚å’Œç¬¬3å±‚çš„å¶å­èŠ‚ç‚¹æ€»å…±ï¼š4+6=10ä¸ªï¼Œä½†è¦å‡å»ç¬¬2å±‚æœ‰å­èŠ‚ç‚¹çš„3ä¸ªï¼Œæ‰€ä»¥æ˜¯7ä¸ªå¶å­èŠ‚ç‚¹
                        </div></div></div><div class="quiz-item"><div class="question"><h4>ğŸ¤” é—®é¢˜2ï¼šæŸäºŒå‰æ ‘æœ‰5ä¸ªåº¦ä¸º2çš„èŠ‚ç‚¹ï¼Œ3ä¸ªåº¦ä¸º1çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå®ƒæœ‰å¤šå°‘ä¸ªå¶å­èŠ‚ç‚¹ï¼Ÿæ€»å…±å¤šå°‘ä¸ªèŠ‚ç‚¹ï¼Ÿ</h4><button class="show-answer-btn" data-answer="2">æ˜¾ç¤ºç­”æ¡ˆ</button></div><div class="answer" id="answer-2" style="display: none;"><div class="answer-content"><strong>ç­”æ¡ˆï¼š</strong>6ä¸ªå¶å­èŠ‚ç‚¹ï¼Œæ€»å…±14ä¸ªèŠ‚ç‚¹<br><strong>è§£é‡Šï¼š</strong><br>
                            â€¢ ç”±æ€§è´¨8ï¼šnâ‚€ = nâ‚‚ + 1 = 5 + 1 = 6ä¸ªå¶å­èŠ‚ç‚¹<br>
                            â€¢ æ€»èŠ‚ç‚¹æ•°ï¼šnâ‚€ + nâ‚ + nâ‚‚ = 6 + 3 + 5 = 14ä¸ªèŠ‚ç‚¹<br>
                            â€¢ éªŒè¯ï¼šè¾¹æ•° = 14 - 1 = 13ï¼Œåº¦æ•°æ€»å’Œ = 0Ã—6 + 1Ã—3 + 2Ã—5 = 13 âœ“
                        </div></div></div><div class="quiz-item"><div class="question"><h4>ğŸ¤” é—®é¢˜3ï¼šé«˜åº¦ä¸º4çš„æ»¡äºŒå‰æ ‘å’Œå®Œå…¨äºŒå‰æ ‘åˆ†åˆ«æœ‰å¤šå°‘ä¸ªèŠ‚ç‚¹ï¼Ÿå®ƒä»¬çš„å¶å­èŠ‚ç‚¹å„æœ‰å¤šå°‘ä¸ªï¼Ÿ</h4><button class="show-answer-btn" data-answer="3">æ˜¾ç¤ºç­”æ¡ˆ</button></div><div class="answer" id="answer-3" style="display: none;"><div class="answer-content"><strong>ç­”æ¡ˆï¼š</strong><br><strong>æ»¡äºŒå‰æ ‘ï¼š</strong>31ä¸ªèŠ‚ç‚¹ï¼Œ16ä¸ªå¶å­èŠ‚ç‚¹<br><strong>å®Œå…¨äºŒå‰æ ‘ï¼š</strong>16-31ä¸ªèŠ‚ç‚¹ï¼Œå¶å­èŠ‚ç‚¹æ•°ä¸å®š<br><strong>è§£é‡Šï¼š</strong><br>
                            â€¢ æ»¡äºŒå‰æ ‘èŠ‚ç‚¹æ•°ï¼š2âµ-1=31ï¼Œå¶å­èŠ‚ç‚¹ï¼š2â´=16<br>
                            â€¢ å®Œå…¨äºŒå‰æ ‘ï¼šå‰4å±‚è£…æ»¡æ˜¯2â´-1=15ä¸ªï¼Œç¬¬5å±‚å¯ä»¥æœ‰1-16ä¸ªèŠ‚ç‚¹<br>
                            â€¢ å®Œå…¨äºŒå‰æ ‘æœ€å°‘16ä¸ªèŠ‚ç‚¹ï¼ˆåªæœ‰æ ¹èŠ‚ç‚¹åœ¨ç¬¬5å±‚ï¼‰ï¼Œæœ€å¤š31ä¸ªèŠ‚ç‚¹ï¼ˆç¬¬5å±‚æ»¡ï¼‰
                        </div></div></div><div class="quiz-item"><div class="question"><h4>ğŸ¤” é—®é¢˜4ï¼šå¯¹äºæœ‰1000ä¸ªèŠ‚ç‚¹çš„å®Œå…¨äºŒå‰æ ‘ï¼Œå¦‚æœç”¨æ•°ç»„å­˜å‚¨ï¼ˆä¸‹æ ‡ä»1å¼€å§‹ï¼‰ï¼ŒèŠ‚ç‚¹900çš„çˆ¶èŠ‚ç‚¹ä¸‹æ ‡æ˜¯å¤šå°‘ï¼Ÿå·¦å³å­©å­ä¸‹æ ‡æ˜¯å¤šå°‘ï¼Ÿ</h4><button class="show-answer-btn" data-answer="4">æ˜¾ç¤ºç­”æ¡ˆ</button></div><div class="answer" id="answer-4" style="display: none;"><div class="answer-content"><strong>ç­”æ¡ˆï¼š</strong>çˆ¶èŠ‚ç‚¹ä¸‹æ ‡450ï¼Œå·¦å­©å­1800ï¼Œå³å­©å­1801<br><strong>è§£é‡Šï¼š</strong><br>
                            â€¢ çˆ¶èŠ‚ç‚¹ï¼šâŒŠ900/2âŒ‹ = 450<br>
                            â€¢ å·¦å­©å­ï¼š2Ã—900 = 1800<br>
                            â€¢ å³å­©å­ï¼š2Ã—900+1 = 1801<br><strong>æ³¨æ„ï¼š</strong>ç”±äºåªæœ‰1000ä¸ªèŠ‚ç‚¹ï¼Œå®é™…ä¸Š900å·èŠ‚ç‚¹çš„å­©å­ä¸å­˜åœ¨ï¼ˆè¶…å‡ºèŒƒå›´ï¼‰
                        </div></div></div><div class="quiz-item"><div class="question"><h4>ğŸ¤” é—®é¢˜5ï¼šè¯æ˜ä¸ºä»€ä¹ˆäºŒå‰æ ‘ä¸­åº¦ä¸º0çš„èŠ‚ç‚¹æ•°ç­‰äºåº¦ä¸º2çš„èŠ‚ç‚¹æ•°åŠ 1ï¼Ÿ</h4><button class="show-answer-btn" data-answer="5">æ˜¾ç¤ºç­”æ¡ˆ</button></div><div class="answer" id="answer-5" style="display: none;"><div class="answer-content"><strong>è¯æ˜ï¼š</strong><br>
                            è®¾nâ‚€ã€nâ‚ã€nâ‚‚åˆ†åˆ«ä¸ºåº¦ä¸º0ã€1ã€2çš„èŠ‚ç‚¹æ•°<br><strong>æ­¥éª¤1ï¼š</strong>æ€»èŠ‚ç‚¹æ•° n = nâ‚€ + nâ‚ + nâ‚‚<br><strong>æ­¥éª¤2ï¼š</strong>æ€»è¾¹æ•° = n - 1ï¼ˆæ ‘çš„æ€§è´¨1ï¼‰<br><strong>æ­¥éª¤3ï¼š</strong>ä»åº¦æ•°è§’åº¦ï¼Œæ€»è¾¹æ•° = (0Ã—nâ‚€ + 1Ã—nâ‚ + 2Ã—nâ‚‚) = nâ‚ + 2nâ‚‚<br><strong>æ­¥éª¤4ï¼š</strong>å› æ­¤ n - 1 = nâ‚ + 2nâ‚‚<br><strong>æ­¥éª¤5ï¼š</strong>å³ nâ‚€ + nâ‚ + nâ‚‚ - 1 = nâ‚ + 2nâ‚‚<br><strong>æ­¥éª¤6ï¼š</strong>åŒ–ç®€å¾— nâ‚€ = nâ‚‚ + 1 âœ“
                        </div></div></div></div><div class="learning-path"><h3>ğŸ¯ è¿›é˜¶å­¦ä¹ å»ºè®®</h3><div class="unified-grid unified-grid-2"><div class="path-item"><h4>ğŸ“š æŒæ¡åç»§ç»­å­¦ä¹ </h4><ul><li>äºŒå‰æœç´¢æ ‘çš„æ€§è´¨ï¼ˆä¸­åºéå†æœ‰åºæ€§ï¼‰</li><li>AVLæ ‘çš„å¹³è¡¡æ€§è´¨</li><li>çº¢é»‘æ ‘çš„é¢œè‰²æ€§è´¨</li><li>å †çš„æ€§è´¨ï¼ˆçˆ¶å­èŠ‚ç‚¹å¤§å°å…³ç³»ï¼‰</li><li>Bæ ‘çš„åº¦æ•°å’Œé«˜åº¦æ€§è´¨</li></ul></div><div class="path-item"><h4>ğŸ› ï¸ æ¨èç»ƒä¹ </h4><ul><li>ç¼–ç¨‹éªŒè¯å„ç§æ ‘çš„æ€§è´¨</li><li>è®¡ç®—ä¸åŒç±»å‹æ ‘çš„æ—¶é—´å¤æ‚åº¦</li><li>è®¾è®¡åŸºäºæ€§è´¨çš„ç®—æ³•ä¼˜åŒ–</li><li>åˆ†æå®é™…æ•°æ®ç»“æ„çš„ç©ºé—´æ•ˆç‡</li><li>å®ç°å®Œå…¨äºŒå‰æ ‘çš„æ•°ç»„è¡¨ç¤º</li></ul></div></div></div></div></div><!-- å¯¼èˆªæŒ‰é’® --><div style="text-align: center; margin-top: 40px;"><a href="{% url 'knowledge_app:index' %}" class="unified-btn unified-btn-primary"><span>ğŸ </span>
            è¿”å›é¦–é¡µ
        </a><a href="{% url 'knowledge_app:cs_universe' %}" class="unified-btn unified-btn-secondary"><span>ğŸŒŒ</span>
            æ¢ç´¢CSå®‡å®™
        </a></div></div><style>.concept-overview {background:linear-gradient(135deg, #f8f9ff 0%, #e8f4f8 100%);padding:25px;border-radius:12px;margin-bottom:20px}.core-concept {background:white;padding:20px;border-radius:8px;margin-bottom:20px;border-left:4px solid #007bff}.key-terms {background:white;padding:20px;border-radius:8px}.terms-grid {display:grid;grid-template-columns:repeat(auto-fit, minmax(280px, 1fr));gap:15px;margin-top:15px}.term-item {background:#f8f9fa;padding:12px;border-radius:6px;border-left:3px solid #28a745}.properties-container {margin-bottom:20px}.property-category {background:#f8f9ff;padding:25px;border-radius:12px;margin-bottom:25px}.property-category h3 {color:#495057;margin-bottom:20px;font-size:1.3em;font-weight:bold}.property-list {margin-bottom:20px}.property-item {background:white;border-radius:10px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,0.1);border:1px solid #e9ecef;margin-bottom:20px}.property-item.fundamental {border-left:5px solid #dc3545}.property-item.critical {border-left:5px solid #007bff}.property-header {background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);color:white;padding:15px 20px;display:flex;align-items:center;gap:15px}.property-number {background:rgba(255,255,255,0.2);padding:5px 12px;border-radius:20px;font-weight:bold;font-size:0.9em}.property-header h4 {margin:0;font-size:1.1em}.property-content {padding:20px}.formula {background:#e8f5e8;padding:15px;border-radius:8px;border-left:4px solid #28a745;margin-bottom:15px;text-align:center;font-size:1.1em}.example {background:#fff3cd;padding:12px;border-radius:6px;border-left:3px solid #ffc107;margin-top:10px}.proof {background:#f8f9fa;padding:15px;border-radius:6px;margin-top:10px}.proof div {margin:5px 0;font-family:'Courier New', monospace}.layer-demo {background:#f8f9fa;padding:12px;border-radius:6px;margin-top:10px}.layer-demo div {margin:3px 0;font-family:'Courier New', monospace}.binary-properties {margin-bottom:20px}.special-trees {display:grid;grid-template-columns:repeat(auto-fit, minmax(350px, 1fr));gap:20px;margin-top:20px}.tree-type {background:white;padding:20px;border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,0.1)}.tree-type h4 {margin-bottom:15px;padding-bottom:10px;border-bottom:2px solid #e9ecef}.tree-properties {margin-bottom:10px}.property-detail {background:#f8f9fa;padding:12px;border-radius:6px;margin-bottom:10px}.property-detail ul {margin:8px 0 0 20px}.visualization-container {background:#f8f9fa;padding:20px;border-radius:12px;text-align:center}.viz-controls {margin-bottom:20px;display:flex;justify-content:center;gap:10px;flex-wrap:wrap}#treeCanvas {border:2px solid #dee2e6;border-radius:8px;background:white;box-shadow:0 4px 6px rgba(0,0,0,0.1);max-width:100%}.viz-description {background:white;padding:15px;border-radius:8px;margin-top:15px;border-left:4px solid #007bff}.property-stats {display:grid;grid-template-columns:repeat(auto-fit, minmax(120px, 1fr));gap:10px;margin-top:15px}.stat-item {background:white;padding:10px;border-radius:6px;text-align:center;box-shadow:0 1px 3px rgba(0,0,0,0.1)}.stat-label {display:block;font-size:0.9em;color:#6c757d;margin-bottom:5px}.stat-value {display:block;font-size:1.2em;font-weight:bold;color:#007bff}.property-calculator {background:linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);padding:20px;border-radius:12px;margin-top:20px}.calculator-section {background:white;padding:20px;border-radius:8px}.calc-input {display:flex;align-items:center;gap:15px;margin-bottom:20px;flex-wrap:wrap}.calc-input label {font-weight:bold;white-space:nowrap}.calc-input input {padding:8px 12px;border:1px solid #ced4da;border-radius:4px;width:100px}.calc-results {display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:15px}.result-item {background:#f8f9fa;padding:12px;border-radius:6px;border-left:3px solid #007bff}.result-item span {color:#007bff;font-weight:bold}.applications {display:grid;grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));gap:20px}.app-item {background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);color:white;padding:20px;border-radius:10px}.code-examples {margin-top:30px}.code-tabs {display:flex;gap:5px;margin-bottom:0}.tab-btn {background:#6c757d;color:white;border:none;padding:10px 20px;border-radius:8px 8px 0 0;cursor:pointer;transition:background-color 0.3s}.tab-btn.active {background:#007bff}.tab-btn:hover {background:#5a6268}.tab-btn.active:hover {background:#0056b3}.code-container {background:#2d3748;border-radius:0 8px 8px 8px;overflow:hidden}.code-header {background:#1a202c;padding:10px 15px;display:flex;justify-content:space-between;align-items:center;color:#e2e8f0}.copy-btn {background:#4299e1;color:white;border:none;padding:5px 10px;border-radius:4px;cursor:pointer;font-size:12px}.copy-btn:hover {background:#3182ce}.code-block {display:none;margin:0;padding:20px;background:#2d3748;color:#e2e8f0;font-family:'Courier New', monospace;line-height:1.5;overflow-x:auto}.code-block.active {display:block}.quiz-container {margin-bottom:20px}.quiz-item {background:#f8f9fa;border-radius:10px;overflow:hidden;margin-bottom:20px}.question {background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);color:white;padding:20px;display:flex;justify-content:space-between;align-items:center}.show-answer-btn {background:rgba(255,255,255,0.2);color:white;border:1px solid rgba(255,255,255,0.3);padding:8px 16px;border-radius:6px;cursor:pointer;transition:all 0.3s;white-space:nowrap}.show-answer-btn:hover {background:rgba(255,255,255,0.3)}.answer {background:white;padding:20px;border-top:1px solid #e9ecef}.answer-content {background:#e8f5e8;padding:15px;border-radius:6px;border-left:4px solid #28a745;line-height:1.6}.learning-path {background:linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);padding:25px;border-radius:12px;margin-top:30px}.path-item {background:white;padding:20px;border-radius:8px}@media (max-width:768px) {.viz-controls {flex-direction:column;align-items:center}#treeCanvas {width:100%;height:auto}.question {flex-direction:column;gap:15px;text-align:center}.terms-grid {grid-template-columns:1fr}.special-trees {grid-template-columns:1fr}.calc-input {flex-direction:column;align-items:stretch}.calc-input input {width:100%}.property-stats {grid-template-columns:repeat(2, 1fr)}}</style><script>let canvas, ctx; let animationId; let nodes = []; let currentDemo = ''; let stats = { totalNodes: 0, totalEdges: 0, leafNodes: 0, degree2Nodes: 0, treeHeight: 0 }; function initCanvas() { canvas = document.getElementById('treeCanvas'); if (!canvas) return; ctx = canvas.getContext('2d'); const rect = canvas.getBoundingClientRect(); canvas.width = Math.min(800, rect.width); canvas.height = 500; } class TreeNode { constructor(x, y, value, color = '#007bff') { this.x = x; this.y = y; this.value = value; this.color = color; this.radius = 25; this.left = null; this.right = null; this.parent = null; this.highlight = false; this.degree = 0; this.level = 0; } draw() { if (!ctx) return; if (this.parent) { ctx.strokeStyle = '#6c757d'; ctx.lineWidth = 2; ctx.beginPath(); ctx.moveTo(this.parent.x, this.parent.y); ctx.lineTo(this.x, this.y); ctx.stroke(); } ctx.fillStyle = this.highlight ? '#ffc107' : this.color; ctx.strokeStyle = '#343a40'; ctx.lineWidth = 2; ctx.beginPath(); ctx.arc(this.x, this.y, this.radius, 0, 2 * Math.PI); ctx.fill(); ctx.stroke(); ctx.fillStyle = 'white'; ctx.font = 'bold 14px Arial'; ctx.textAlign = 'center'; ctx.textBaseline = 'middle'; ctx.fillText(this.value, this.x, this.y); if (currentDemo === 'property6') { ctx.fillStyle = '#666'; ctx.font = '10px Arial'; ctx.fillText(`L${this.level}`, this.x, this.y + 35); } if (currentDemo === 'property8') { ctx.fillStyle = '#666'; ctx.font = '10px Arial'; ctx.fillText(`åº¦${this.degree}`, this.x, this.y + 35); } } } function clearCanvas() { if (!ctx) return; ctx.clearRect(0, 0, canvas.width, canvas.height); nodes = []; currentDemo = ''; updateStats(); if (animationId) { cancelAnimationFrame(animationId); } } function updateStats() { const elements = { totalNodes: document.getElementById('totalNodes'), totalEdges: document.getElementById('totalEdges'), leafNodes: document.getElementById('leafNodes'), degree2Nodes: document.getElementById('degree2Nodes'), treeHeight: document.getElementById('treeHeight') }; if (elements.totalNodes) elements.totalNodes.textContent = stats.totalNodes; if (elements.totalEdges) elements.totalEdges.textContent = stats.totalEdges; if (elements.leafNodes) elements.leafNodes.textContent = stats.leafNodes; if (elements.degree2Nodes) elements.degree2Nodes.textContent = stats.degree2Nodes; if (elements.treeHeight) elements.treeHeight.textContent = stats.treeHeight; } function calculateStats() { stats.totalNodes = nodes.length; stats.totalEdges = nodes.length > 0 ? nodes.length - 1 : 0; stats.leafNodes = 0; stats.degree2Nodes = 0; stats.treeHeight = 0; nodes.forEach(node => { let degree = 0; if (node.left) degree++; if (node.right) degree++; node.degree = degree; if (degree === 0) stats.leafNodes++; if (degree === 2) stats.degree2Nodes++; if (node.level > stats.treeHeight) { stats.treeHeight = node.level; } }); updateStats(); } function showProperty6() { if (!canvas) return; clearCanvas(); currentDemo = 'property6'; const descEl = document.getElementById('vizDescription'); if (descEl) { descEl.innerHTML = 'æ€§è´¨6æ¼”ç¤ºï¼šç¬¬iå±‚æœ€å¤šæœ‰2^iä¸ªèŠ‚ç‚¹ï¼ˆæ ¹èŠ‚ç‚¹ä¸ºç¬¬0å±‚ï¼‰'; } const nodePositions = [ [{x: 400, y: 80}], [{x: 300, y: 150}, {x: 500, y: 150}], [{x: 250, y: 220}, {x: 350, y: 220}, {x: 450, y: 220}, {x: 550, y: 220}], [{x: 225, y: 290}, {x: 275, y: 290}, {x: 325, y: 290}, {x: 375, y: 290}, {x: 425, y: 290}, {x: 475, y: 290}, {x: 525, y: 290}, {x: 575, y: 290}] ]; let nodeIndex = 1; nodePositions.forEach((level, levelIndex) => { level.forEach(pos => { if (pos.x <= canvas.width - 50) { const node = new TreeNode(pos.x, pos.y, nodeIndex++, '#007bff'); node.level = levelIndex; nodes.push(node); } }); }); for (let i = 0; i < nodes.length; i++) { const leftChildIndex = 2 * i + 1; const rightChildIndex = 2 * i + 2; if (leftChildIndex < nodes.length) { nodes[i].left = nodes[leftChildIndex]; nodes[leftChildIndex].parent = nodes[i]; } if (rightChildIndex < nodes.length) { nodes[i].right = nodes[rightChildIndex]; nodes[rightChildIndex].parent = nodes[i]; } } let levelIndex = 0; function drawLevel() { if (levelIndex < nodePositions.length) { const levelNodes = nodePositions[levelIndex]; const startIndex = Math.pow(2, levelIndex) - 1; for (let i = 0; i < levelNodes.length && startIndex + i < nodes.length; i++) { if (nodes[startIndex + i]) { nodes[startIndex + i].draw(); } } ctx.fillStyle = '#dc3545'; ctx.font = 'bold 16px Arial'; ctx.textAlign = 'left'; ctx.fillText(`ç¬¬${levelIndex}å±‚: ${levelNodes.length}ä¸ªèŠ‚ç‚¹ (2^${levelIndex} = ${Math.pow(2, levelIndex)})`, 20, 30 + levelIndex * 25); levelIndex++; setTimeout(drawLevel, 1000); } else { calculateStats(); if (descEl) { descEl.innerHTML += '<br>âœ… éªŒè¯å®Œæˆï¼æ¯å±‚èŠ‚ç‚¹æ•°ç¬¦åˆ2^iè§„å¾‹'; } } } drawLevel(); } function showProperty8() { if (!canvas) return; clearCanvas(); currentDemo = 'property8'; const descEl = document.getElementById('vizDescription'); if (descEl) { descEl.innerHTML = 'æ€§è´¨8æ¼”ç¤ºï¼šå¶å­èŠ‚ç‚¹æ•° = åº¦ä¸º2çš„èŠ‚ç‚¹æ•° + 1'; } const positions = [ {x: 400, y: 80, val: 'A'}, {x: 300, y: 150, val: 'B'}, {x: 500, y: 150, val: 'C'}, {x: 250, y: 220, val: 'D'}, {x: 350, y: 220, val: 'E'}, {x: 550, y: 220, val: 'F'}, {x: 200, y: 290, val: 'G'}, {x: 300, y: 290, val: 'H'}, {x: 580, y: 290, val: 'I'} ]; positions.forEach(pos => { if (pos.x <= canvas.width - 50) { const node = new TreeNode(pos.x, pos.y, pos.val, '#007bff'); nodes.push(node); } }); const connections = [ [0, 1], [0, 2], [1, 3], [1, 4], [2, 5], [3, 6], [3, 7], [5, 8] ]; connections.forEach(([parentIdx, childIdx]) => { if (nodes[childIdx] && nodes[parentIdx]) { nodes[childIdx].parent = nodes[parentIdx]; if (!nodes[parentIdx].left) { nodes[parentIdx].left = nodes[childIdx]; } else { nodes[parentIdx].right = nodes[childIdx]; } } }); let i = 0; function drawNext() { if (i < nodes.length) { nodes[i].draw(); i++; setTimeout(drawNext, 300); } else { calculateStats(); setTimeout(() => { nodes.forEach(node => { if (node.degree === 0) node.color = '#28a745'; else if (node.degree === 2) node.color = '#dc3545'; else node.color = '#ffc107'; }); ctx.clearRect(0, 0, canvas.width, canvas.height); nodes.forEach(node => node.draw()); if (descEl) { descEl.innerHTML = `æ€§è´¨éªŒè¯ï¼šå¶å­èŠ‚ç‚¹(ç»¿è‰²) = ${stats.leafNodes}ï¼Œåº¦ä¸º2çš„èŠ‚ç‚¹(çº¢è‰²) = ${stats.degree2Nodes}<br>` + `âœ… éªŒè¯ç»“æœï¼š${stats.leafNodes} = ${stats.degree2Nodes} + 1`; } }, 1000); } } drawNext(); } function showCompleteTree() { if (!canvas) return; clearCanvas(); currentDemo = 'complete'; const descEl = document.getElementById('vizDescription'); if (descEl) { descEl.innerHTML = 'å®Œå…¨äºŒå‰æ ‘æ¼”ç¤ºï¼šèŠ‚ç‚¹ç¼–å·è§„å¾‹ï¼ˆçˆ¶èŠ‚ç‚¹âŒŠi/2âŒ‹ï¼Œå·¦å­©å­2iï¼Œå³å­©å­2i+1ï¼‰'; } const positions = [ {x: 400, y: 80}, {x: 300, y: 150}, {x: 500, y: 150}, {x: 250, y: 220}, {x: 350, y: 220}, {x: 450, y: 220}, {x: 550, y: 220} ]; positions.forEach((pos, index) => { if (pos.x <= canvas.width - 50) { const node = new TreeNode(pos.x, pos.y, index + 1, '#007bff'); nodes.push(node); } }); for (let i = 0; i < nodes.length; i++) { const leftChildIndex = 2 * (i + 1) - 1; const rightChildIndex = 2 * (i + 1); if (leftChildIndex < nodes.length) { nodes[i].left = nodes[leftChildIndex]; nodes[leftChildIndex].parent = nodes[i]; } if (rightChildIndex < nodes.length) { nodes[i].right = nodes[rightChildIndex]; nodes[rightChildIndex].parent = nodes[i]; } } let i = 0; function drawNext() { if (i < nodes.length) { nodes[i].draw(); const nodeNum = i + 1; const parentNum = Math.floor(nodeNum / 2); const leftChild = 2 * nodeNum; const rightChild = 2 * nodeNum + 1; ctx.fillStyle = '#666'; ctx.font = '12px Arial'; ctx.textAlign = 'left'; const info = `èŠ‚ç‚¹${nodeNum}: çˆ¶${parentNum > 0 ? parentNum : 'æ— '}, å·¦${leftChild <= 7 ? leftChild : 'æ— '}, å³${rightChild <= 7 ? rightChild : 'æ— '}`; ctx.fillText(info, 20, 30 + i * 20); i++; setTimeout(drawNext, 500); } else { calculateStats(); if (descEl) { descEl.innerHTML += '<br>âœ… å®Œå…¨äºŒå‰æ ‘ç¼–å·è§„å¾‹éªŒè¯å®Œæˆï¼'; } } } drawNext(); } function showFullTree() { if (!canvas) return; clearCanvas(); currentDemo = 'full'; const descEl = document.getElementById('vizDescription'); if (descEl) { descEl.innerHTML = 'æ»¡äºŒå‰æ ‘æ¼”ç¤ºï¼šæ¯ä¸ªèŠ‚ç‚¹è¦ä¹ˆæ˜¯å¶å­èŠ‚ç‚¹ï¼Œè¦ä¹ˆæ°å¥½æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹'; } const positions = [ {x: 400, y: 80}, {x: 300, y: 150}, {x: 500, y: 150}, {x: 250, y: 220}, {x: 350, y: 220}, {x: 450, y: 220}, {x: 550, y: 220} ]; positions.forEach((pos, index) => { if (pos.x <= canvas.width - 50) { const node = new TreeNode(pos.x, pos.y, String.fromCharCode(65 + index), '#007bff'); nodes.push(node); } }); const connections = [ [0, 1], [0, 2], [1, 3], [1, 4], [2, 5], [2, 6] ]; connections.forEach(([parentIdx, childIdx]) => { if (nodes[childIdx] && nodes[parentIdx]) { nodes[childIdx].parent = nodes[parentIdx]; if (!nodes[parentIdx].left) { nodes[parentIdx].left = nodes[childIdx]; } else { nodes[parentIdx].right = nodes[childIdx]; } } }); let i = 0; function drawNext() { if (i < nodes.length) { nodes[i].draw(); i++; setTimeout(drawNext, 400); } else { calculateStats(); nodes.forEach(node => { if (node.degree === 0) node.color = '#28a745'; else if (node.degree === 2) node.color = '#dc3545'; }); ctx.clearRect(0, 0, canvas.width, canvas.height); nodes.forEach(node => node.draw()); if (descEl) { descEl.innerHTML = `æ»¡äºŒå‰æ ‘æ€§è´¨éªŒè¯ï¼š<br>` + `â€¢ å†…éƒ¨èŠ‚ç‚¹(çº¢è‰²ï¼Œåº¦ä¸º2): ${stats.degree2Nodes}ä¸ª<br>` + `â€¢ å¶å­èŠ‚ç‚¹(ç»¿è‰²ï¼Œåº¦ä¸º0): ${stats.leafNodes}ä¸ª<br>` + `â€¢ æ€»èŠ‚ç‚¹æ•°: ${stats.totalNodes}ä¸ªï¼ˆå¥‡æ•°ï¼‰<br>` + `âœ… æ»¡è¶³æ»¡äºŒå‰æ ‘æ€§è´¨ï¼šæ¯ä¸ªèŠ‚ç‚¹åº¦ä¸º0æˆ–2`; } } } drawNext(); } function calculateProperties() { const nodeInput = document.getElementById('nodeInput'); if (!nodeInput) return; const n = parseInt(nodeInput.value); if (n < 1 || n > 1000) { alert('è¯·è¾“å…¥1-1000ä¹‹é—´çš„èŠ‚ç‚¹æ•°'); return; } const edges = n - 1; const minHeight = Math.floor(Math.log2(n)); const maxHeight = n - 1; const completeHeight = Math.floor(Math.log2(n)); const elements = { calcEdges: document.getElementById('calcEdges'), calcMinHeight: document.getElementById('calcMinHeight'), calcMaxHeight: document.getElementById('calcMaxHeight'), calcCompleteHeight: document.getElementById('calcCompleteHeight') }; if (elements.calcEdges) elements.calcEdges.textContent = edges; if (elements.calcMinHeight) elements.calcMinHeight.textContent = minHeight; if (elements.calcMaxHeight) elements.calcMaxHeight.textContent = maxHeight; if (elements.calcCompleteHeight) elements.calcCompleteHeight.textContent = completeHeight; } function initCodeTabs() { const tabBtns = document.querySelectorAll('.tab-btn'); const codeBlocks = document.querySelectorAll('.code-block'); const copyBtns = document.querySelectorAll('.copy-btn'); tabBtns.forEach(btn => { btn.addEventListener('click', () => { const lang = btn.dataset.lang; tabBtns.forEach(tab => tab.classList.remove('active')); btn.classList.add('active'); codeBlocks.forEach(block => { block.classList.remove('active'); if (block.id === `code-${lang}`) { block.classList.add('active'); } }); copyBtns.forEach(copyBtn => { copyBtn.dataset.lang = lang; }); }); }); copyBtns.forEach(btn => { btn.addEventListener('click', () => { const lang = btn.dataset.lang; const codeBlock = document.getElementById(`code-${lang}`); if (!codeBlock) return; const code = codeBlock.textContent; if (navigator.clipboard) { navigator.clipboard.writeText(code).then(() => { btn.textContent = 'âœ… å·²å¤åˆ¶'; setTimeout(() => { btn.textContent = 'ğŸ“‹ å¤åˆ¶'; }, 2000); }).catch(() => { fallbackCopyTextToClipboard(code, btn); }); } else { fallbackCopyTextToClipboard(code, btn); } }); }); } function fallbackCopyTextToClipboard(text, btn) { const textArea = document.createElement("textarea"); textArea.value = text; textArea.style.top = "0"; textArea.style.left = "0"; textArea.style.position = "fixed"; document.body.appendChild(textArea); textArea.focus(); textArea.select(); try { const successful = document.execCommand('copy'); if (successful) { btn.textContent = 'âœ… å·²å¤åˆ¶'; setTimeout(() => { btn.textContent = 'ğŸ“‹ å¤åˆ¶'; }, 2000); } } catch (err) { console.error('å¤åˆ¶å¤±è´¥', err); } document.body.removeChild(textArea); } function initQuizAnswers() { const answerBtns = document.querySelectorAll('.show-answer-btn'); answerBtns.forEach(btn => { btn.addEventListener('click', () => { const answerId = btn.dataset.answer; const answerDiv = document.getElementById(`answer-${answerId}`); if (!answerDiv) return; if (answerDiv.style.display === 'none') { answerDiv.style.display = 'block'; btn.textContent = 'éšè—ç­”æ¡ˆ'; } else { answerDiv.style.display = 'none'; btn.textContent = 'æ˜¾ç¤ºç­”æ¡ˆ'; } }); }); } document.addEventListener('DOMContentLoaded', () => { initCanvas(); initCodeTabs(); initQuizAnswers(); const vizButtons = { showProperty6: document.getElementById('showProperty6'), showProperty8: document.getElementById('showProperty8'), showCompleteTree: document.getElementById('showCompleteTree'), showFullTree: document.getElementById('showFullTree'), resetViz: document.getElementById('resetViz') }; if (vizButtons.showProperty6) { vizButtons.showProperty6.addEventListener('click', showProperty6); } if (vizButtons.showProperty8) { vizButtons.showProperty8.addEventListener('click', showProperty8); } if (vizButtons.showCompleteTree) { vizButtons.showCompleteTree.addEventListener('click', showCompleteTree); } if (vizButtons.showFullTree) { vizButtons.showFullTree.addEventListener('click', showFullTree); } if (vizButtons.resetViz) { vizButtons.resetViz.addEventListener('click', () => { clearCanvas(); const descEl = document.getElementById('vizDescription'); if (descEl) { descEl.innerHTML = 'ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®éªŒè¯å„ç§æ ‘çš„æ€§è´¨'; } }); } const calculateBtn = document.getElementById('calculateBtn'); const nodeInput = document.getElementById('nodeInput'); if (calculateBtn) { calculateBtn.addEventListener('click', calculateProperties); } if (nodeInput) { nodeInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') { calculateProperties(); } }); calculateProperties(); } }); window.addEventListener('resize', () => { if (canvas) { const rect = canvas.getBoundingClientRect(); canvas.width = Math.min(800, rect.width); canvas.height = 500; if (nodes.length > 0) { ctx.clearRect(0, 0, canvas.width, canvas.height); nodes.forEach(node => { if (node.x > canvas.width - 50) { node.x = canvas.width - 50; } node.draw(); }); } } }); window.addEventListener('error', (e) => { console.error('é¡µé¢é”™è¯¯:', e.error); });</script>

{% endblock %}