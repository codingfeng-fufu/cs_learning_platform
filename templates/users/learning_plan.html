{% extends 'knowledge_app/base.html' %}

{% block title %}å­¦ä¹ è®¡åˆ’ - è®¡ç®—æœºç§‘å­¦å­¦ä¹ å¹³å°{% endblock %}

{% block extra_css %}
<style>:root {--primary-color:#667eea;--secondary-color:#764ba2;--accent-color:#4ecdc4;--success-color:#10b981;--warning-color:#f59e0b;--danger-color:#ef4444;--text-primary:#1a202c;--text-secondary:#4a5568;--text-muted:#718096;--bg-primary:#ffffff;--bg-secondary:#f7fafc;--bg-card:rgba(255, 255, 255, 0.9);--border-color:#e2e8f0;--shadow-sm:0 1px 2px 0 rgba(0, 0, 0, 0.05);--shadow-md:0 4px 6px -1px rgba(0, 0, 0, 0.1);--shadow-lg:0 10px 15px -3px rgba(0, 0, 0, 0.1);--border-radius:8px;--border-radius-lg:12px;--border-radius-xl:16px}body {background:linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);min-height:100vh;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif}.plan-container {max-width:1200px;margin:0 auto;padding:2rem}.page-header {background:var(--bg-card);backdrop-filter:blur(20px);border-radius:var(--border-radius-xl);padding:2rem;margin-bottom:2rem;box-shadow:var(--shadow-lg);border:1px solid rgba(255, 255, 255, 0.2);text-align:center}.page-title {font-size:2.5rem;font-weight:800;background:linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:1rem}.page-subtitle {color:var(--text-secondary);font-size:1.1rem;margin-bottom:2rem}.progress-overview {display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:1rem;margin-bottom:2rem}.progress-card {background:var(--bg-card);border-radius:var(--border-radius-lg);padding:1.5rem;text-align:center;box-shadow:var(--shadow-md);border:1px solid rgba(255, 255, 255, 0.2);transition:all 0.3s ease}.progress-card:hover {transform:translateY(-2px);box-shadow:var(--shadow-lg)}.progress-number {font-size:2rem;font-weight:800;background:linear-gradient(135deg, var(--accent-color) 0%, var(--success-color) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:0.5rem}.progress-label {color:var(--text-secondary);font-size:0.9rem;font-weight:600}.learning-paths {margin-bottom:3rem}.section-title {font-size:1.8rem;font-weight:700;color:var(--text-primary);margin-bottom:1.5rem;display:flex;align-items:center;gap:0.5rem}.paths-grid {display:grid;grid-template-columns:repeat(auto-fit, minmax(350px, 1fr));gap:2rem}.path-card {background:var(--bg-card);border-radius:var(--border-radius-xl);padding:2rem;box-shadow:var(--shadow-lg);border:1px solid rgba(255, 255, 255, 0.2);transition:all 0.3s ease;position:relative;overflow:hidden}.path-card::before {content:'';position:absolute;top:0;left:0;right:0;height:4px;background:var(--path-color, var(--primary-color));border-radius:var(--border-radius-xl) var(--border-radius-xl) 0 0}.path-card:hover {transform:translateY(-4px);box-shadow:0 20px 40px rgba(0, 0, 0, 0.15)}.path-header {display:flex;align-items:center;gap:1rem;margin-bottom:1rem}.path-icon {font-size:2.5rem;filter:drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1))}.path-info h3 {font-size:1.3rem;font-weight:700;color:var(--text-primary);margin:0 0 0.5rem 0}.path-meta {display:flex;gap:1rem;font-size:0.8rem;color:var(--text-muted)}.path-description {color:var(--text-secondary);line-height:1.6;margin-bottom:1.5rem}.path-progress {margin-bottom:1.5rem}.progress-bar {width:100%;height:8px;background:#e2e8f0;border-radius:4px;overflow:hidden;margin-bottom:0.5rem}.progress-fill {height:100%;background:linear-gradient(90deg, var(--path-color, var(--primary-color)), rgba(var(--path-color-rgb, 102, 126, 234), 0.7));border-radius:4px;transition:width 0.3s ease}.progress-text {font-size:0.9rem;color:var(--text-secondary);display:flex;justify-content:space-between}.path-topics {margin-bottom:1.5rem}.topics-list {display:flex;flex-wrap:wrap;gap:0.5rem}.topic-tag {background:rgba(var(--path-color-rgb, 102, 126, 234), 0.1);color:var(--path-color, var(--primary-color));padding:0.3rem 0.8rem;border-radius:20px;font-size:0.8rem;font-weight:500;border:1px solid rgba(var(--path-color-rgb, 102, 126, 234), 0.2)}.path-actions {display:flex;gap:1rem}.path-btn {flex:1;padding:0.8rem 1.5rem;border-radius:var(--border-radius-lg);font-weight:600;text-decoration:none;text-align:center;transition:all 0.3s ease;border:none;cursor:pointer}.path-btn.primary {background:linear-gradient(135deg, var(--path-color, var(--primary-color)), rgba(var(--path-color-rgb, 102, 126, 234), 0.8));color:white}.path-btn.primary:hover {transform:translateY(-2px);box-shadow:0 4px 12px rgba(var(--path-color-rgb, 102, 126, 234), 0.4)}.path-btn.secondary {background:rgba(var(--path-color-rgb, 102, 126, 234), 0.1);color:var(--path-color, var(--primary-color));border:1px solid rgba(var(--path-color-rgb, 102, 126, 234), 0.2)}.path-btn.secondary:hover {background:rgba(var(--path-color-rgb, 102, 126, 234), 0.2)}.difficulty-badge {padding:0.2rem 0.6rem;border-radius:12px;font-size:0.7rem;font-weight:600;text-transform:uppercase;letter-spacing:0.5px}.difficulty-beginner {background:rgba(16, 185, 129, 0.1);color:var(--success-color);border:1px solid rgba(16, 185, 129, 0.2)}.difficulty-intermediate {background:rgba(245, 158, 11, 0.1);color:var(--warning-color);border:1px solid rgba(245, 158, 11, 0.2)}.difficulty-advanced {background:rgba(239, 68, 68, 0.1);color:var(--danger-color);border:1px solid rgba(239, 68, 68, 0.2)}.categories-overview {background:var(--bg-card);border-radius:var(--border-radius-xl);padding:2rem;box-shadow:var(--shadow-lg);border:1px solid rgba(255, 255, 255, 0.2)}.categories-grid {display:grid;grid-template-columns:repeat(auto-fit, minmax(250px, 1fr));gap:1.5rem;margin-top:1.5rem}.category-card {background:var(--bg-secondary);border-radius:var(--border-radius-lg);padding:1.5rem;border:1px solid var(--border-color);transition:all 0.3s ease}.category-card:hover {transform:translateY(-2px);box-shadow:var(--shadow-md)}.category-header {display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.category-name {font-weight:600;color:var(--text-primary)}.category-count {background:var(--primary-color);color:white;padding:0.2rem 0.6rem;border-radius:12px;font-size:0.8rem;font-weight:600}.category-progress {font-size:0.9rem;color:var(--text-secondary)}@media (max-width:768px) {.plan-container {padding:1rem}.page-header {padding:1.5rem}.page-title {font-size:2rem}.paths-grid {grid-template-columns:1fr}.path-card {padding:1.5rem}.path-actions {flex-direction:column}}</style>
{% endblock %}

{% block content %}
<div class="plan-container"><!-- é¡µé¢å¤´éƒ¨ --><div class="page-header"><h1 class="page-title">ğŸ“‹ æˆ‘çš„å­¦ä¹ è®¡åˆ’</h1><p class="page-subtitle">åˆ¶å®šä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„ï¼Œç³»ç»ŸæŒæ¡è®¡ç®—æœºç§‘å­¦çŸ¥è¯†</p><!-- è¿›åº¦æ¦‚è§ˆ --><div class="progress-overview"><div class="progress-card"><div class="progress-number">{{ progress_summary.completed_points }}</div><div class="progress-label">å·²å®ŒæˆçŸ¥è¯†ç‚¹</div></div><div class="progress-card"><div class="progress-number">{{ progress_summary.current_streak }}</div><div class="progress-label">è¿ç»­å­¦ä¹ å¤©æ•°</div></div><div class="progress-card"><div class="progress-number">{{ progress_summary.total_study_time_hours }}</div><div class="progress-label">ç´¯è®¡å­¦ä¹ å°æ—¶</div></div><div class="progress-card"><div class="progress-number">{{ progress_summary.user_level }}</div><div class="progress-label">å½“å‰ç­‰çº§</div></div></div></div><!-- å­¦ä¹ è·¯å¾„æ¨è --><div class="learning-paths"><h2 class="section-title">ğŸš€ æ¨èå­¦ä¹ è·¯å¾„</h2><div class="paths-grid">
            {% for path in learning_paths %}
            <div class="path-card" style="--path-color: {{ path.color }}; --path-color-rgb: {% if path.color == '#667eea' %}102, 126, 234{% elif path.color == '#4ecdc4' %}78, 205, 196{% elif path.color == '#45b7d1' %}69, 183, 209{% else %}150, 206, 180{% endif %};"><div class="path-header"><div class="path-icon">{{ path.icon }}</div><div class="path-info"><h3>{{ path.title }}</h3><div class="path-meta"><span class="difficulty-badge difficulty-{{ path.difficulty }}">{{ path.difficulty }}</span><span>â±ï¸ {{ path.estimated_time }}</span></div></div></div><p class="path-description">{{ path.description }}</p><div class="path-progress"><div class="progress-bar"><div class="progress-fill" style="width: {{ path.completion_rate }}%"></div></div><div class="progress-text"><span>è¿›åº¦: {{ path.completed_topics }}/{{ path.total_topics }}</span><span>{{ path.completion_rate|floatformat:0 }}%</span></div></div><div class="path-topics"><div class="topics-list">
                        {% for topic in path.topics %}
                        <span class="topic-tag">{{ topic }}</span>
                        {% endfor %}
                    </div></div><div class="path-actions"><a href="{% url 'knowledge_app:index' %}" class="path-btn primary">å¼€å§‹å­¦ä¹ </a><a href="{% url 'knowledge_app:cs_universe' %}" class="path-btn secondary">æŸ¥çœ‹è¯¦æƒ…</a></div></div>
            {% endfor %}
        </div></div><!-- çŸ¥è¯†ç‚¹åˆ†ç±»æ¦‚è§ˆ --><div class="categories-overview"><h2 class="section-title">ğŸ“š çŸ¥è¯†ç‚¹åˆ†ç±»æ¦‚è§ˆ</h2><div class="categories-grid">
            {% for category_name, points in categories.items %}
            <div class="category-card"><div class="category-header"><span class="category-name">{{ category_name }}</span><span class="category-count">{{ points.count }}</span></div><div class="category-progress">
                    {% with completed=points|length %}
                    å·²å®Œæˆ {{ completed }} ä¸ªçŸ¥è¯†ç‚¹
                    {% endwith %}
                </div></div>
            {% endfor %}
        </div></div></div>
{% endblock %}

{% block extra_js %}
<script>document.addEventListener('DOMContentLoaded', function() { const progressBars = document.querySelectorAll('.progress-fill'); progressBars.forEach(bar => { const width = bar.style.width; bar.style.width = '0%'; setTimeout(() => { bar.style.width = width; }, 500); }); const numbers = document.querySelectorAll('.progress-number'); numbers.forEach(number => { const target = parseInt(number.textContent); let current = 0; const increment = target / 50; const timer = setInterval(() => { current += increment; if (current >= target) { current = target; clearInterval(timer); } number.textContent = Math.floor(current); }, 30); }); });</script>
{% endblock %}
