{% extends 'knowledge_app/base.html' %}

{% block title %}用户注册 - 计算机科学学习平台{% endblock %}

{% block extra_css %}
<style>.auth-container {min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}.auth-card {background:var(--bg-card);backdrop-filter:blur(10px);border-radius:var(--border-radius-lg);padding:40px;box-shadow:var(--shadow-md);width:100%;max-width:450px;border:1px solid rgba(255, 255, 255, 0.2)}.auth-header {text-align:center;margin-bottom:30px}.auth-header h1 {color:var(--text-primary);font-size:2rem;margin-bottom:10px;font-weight:700}.auth-header p {color:#666;font-size:1rem;margin:0}.form-group {margin-bottom:20px}.form-label {display:block;margin-bottom:8px;color:var(--text-primary);font-weight:600;font-size:0.9rem}.form-control {width:100%;padding:12px 16px;border:2px solid #e1e5e9;border-radius:var(--border-radius);font-size:1rem;transition:all 0.3s ease;background:var(--bg-card)}.form-control:focus {outline:none;border-color:var(--accent-color);box-shadow:0 0 0 3px rgba(78, 205, 196, 0.1)}.form-control.is-invalid {border-color:#dc3545}.invalid-feedback {display:block;color:#dc3545;font-size:0.875rem;margin-top:5px}.btn-primary {width:100%;padding:14px;background:linear-gradient(135deg, var(--accent-color) 0%, #44a08d 100%);border:none;border-radius:var(--border-radius);color:var(--text-inverse);font-size:1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;margin-top:10px}.btn-primary:hover {transform:translateY(-2px);box-shadow:0 8px 25px rgba(78, 205, 196, 0.3)}.auth-links {text-align:center;margin-top:25px;padding-top:20px;border-top:1px solid #eee}.auth-links a {color:var(--accent-color);text-decoration:none;font-weight:500}.auth-links a:hover {text-decoration:underline}.password-requirements {background:#f8f9fa;border-radius:var(--border-radius-sm);padding:15px;margin-top:10px;font-size:0.875rem;color:#666}.password-requirements ul {margin:0;padding-left:20px}.password-requirements li {margin-bottom:5px}@media (max-width:768px) {.auth-card {padding:30px 20px;margin:10px}.auth-header h1 {font-size:1.75rem}}</style>
{% endblock %}

{% block content %}
<div class="auth-container"><div class="auth-card"><div class="auth-header"><h1>🚀 加入我们</h1><p>开始您的计算机科学学习之旅</p></div><form method="post" novalidate>
            {% csrf_token %}
            
            <div class="form-group"><label for="{{ form.email.id_for_label }}" class="form-label">邮箱地址</label>
                {{ form.email }}
                {% if form.email.errors %}
                    {% for error in form.email.errors %}
                        <div class="invalid-feedback">{{ error }}</div>
                    {% endfor %}
                {% endif %}
            </div><div class="form-group"><label for="{{ form.username.id_for_label }}" class="form-label">用户名</label>
                {{ form.username }}
                {% if form.username.errors %}
                    {% for error in form.username.errors %}
                        <div class="invalid-feedback">{{ error }}</div>
                    {% endfor %}
                {% endif %}
            </div><div class="form-group"><label for="{{ form.first_name.id_for_label }}" class="form-label">姓名（可选）</label>
                {{ form.first_name }}
                {% if form.first_name.errors %}
                    {% for error in form.first_name.errors %}
                        <div class="invalid-feedback">{{ error }}</div>
                    {% endfor %}
                {% endif %}
            </div><div class="form-group"><label for="{{ form.password1.id_for_label }}" class="form-label">密码</label>
                {{ form.password1 }}
                {% if form.password1.errors %}
                    {% for error in form.password1.errors %}
                        <div class="invalid-feedback">{{ error }}</div>
                    {% endfor %}
                {% endif %}
            </div><div class="form-group"><label for="{{ form.password2.id_for_label }}" class="form-label">确认密码</label>
                {{ form.password2 }}
                {% if form.password2.errors %}
                    {% for error in form.password2.errors %}
                        <div class="invalid-feedback">{{ error }}</div>
                    {% endfor %}
                {% endif %}
            </div><div class="password-requirements"><strong>密码要求：</strong><ul><li>至少8个字符</li><li>不能与个人信息过于相似</li><li>不能是常见密码</li><li>不能全部为数字</li></ul></div><button type="submit" class="btn-primary">
                创建账户
            </button></form><div class="auth-links"><p>已有账户？ <a href="{% url 'users:login' %}">立即登录</a></p></div></div></div>
{% endblock %}

{% block extra_js %}
<script>document.addEventListener('DOMContentLoaded', function() { const form = document.querySelector('form'); const inputs = form.querySelectorAll('.form-control'); inputs.forEach(input => { input.addEventListener('blur', function() { if (this.value.trim() === '' && this.hasAttribute('required')) { this.classList.add('is-invalid'); } else { this.classList.remove('is-invalid'); } }); input.addEventListener('input', function() { this.classList.remove('is-invalid'); }); }); const password1 = document.getElementById('{{ form.password1.id_for_label }}'); const password2 = document.getElementById('{{ form.password2.id_for_label }}'); if (password2) { password2.addEventListener('input', function() { if (password1.value && this.value && password1.value !== this.value) { this.classList.add('is-invalid'); } else { this.classList.remove('is-invalid'); } }); } });</script>
{% endblock %}
